(function(a,e){function f(){if(!m.isReady){try{S.documentElement.doScroll("left")}catch(b){setTimeout(f,1);return}m.ready()}}function h(b,l){l.src?m.ajax({url:l.src,async:false,dataType:"script"}):m.globalEval(l.text||l.textContent||l.innerHTML||"");l.parentNode&&l.parentNode.removeChild(l)}function r(b,l,s,z,y,E){var G=b.length;if(typeof l==="object"){for(var P in l)r(b,P,l[P],z,y,s);return b}if(s!==e){z=!E&&z&&m.isFunction(s);for(P=0;P<G;P++)y(b[P],l,z?s.call(b[P],P,y(b[P],l)):s,E);return b}return G?
y(b[0],l):e}function p(){return(new Date).getTime()}function u(){return false}function B(){return true}function D(b,l,s){s[0].type=b;return m.event.handle.apply(l,s)}function F(b){var l,s=[],z=[],y=arguments,E,G,P,O,Q,aa;G=m.data(this,"events");if(!(b.liveFired===this||!G||!G.live||b.button&&b.type==="click")){b.liveFired=this;var ma=G.live.slice(0);for(O=0;O<ma.length;O++){G=ma[O];G.origType.replace($a,"")===b.type?z.push(G.selector):ma.splice(O--,1)}E=m(b.target).closest(z,b.currentTarget);Q=0;
for(aa=E.length;Q<aa;Q++)for(O=0;O<ma.length;O++){G=ma[O];if(E[Q].selector===G.selector){P=E[Q].elem;z=null;if(G.preType==="mouseenter"||G.preType==="mouseleave")z=m(b.relatedTarget).closest(G.selector)[0];if(!z||z!==P)s.push({elem:P,handleObj:G})}}Q=0;for(aa=s.length;Q<aa;Q++){E=s[Q];b.currentTarget=E.elem;b.data=E.handleObj.data;b.handleObj=E.handleObj;if(E.handleObj.origHandler.apply(E.elem,y)===false){l=false;break}}return l}}function H(b,l){return"live."+(b&&b!=="*"?b+".":"")+l.replace(/\./g,
"`").replace(/ /g,"&")}function J(b,l){var s=0;l.each(function(){if(this.nodeName===(b[s]&&b[s].nodeName)){var z=m.data(b[s++]),y=m.data(this,z);if(z=z&&z.events){delete y.handle;y.events={};for(var E in z)for(var G in z[E])m.event.add(this,E,z[E][G],z[E][G].data)}}})}function N(b,l,s){var z,y,E;l=l&&l[0]?l[0].ownerDocument||l[0]:S;if(b.length===1&&typeof b[0]==="string"&&b[0].length<512&&l===S&&!cb.test(b[0])&&(m.support.checkClone||!fb.test(b[0]))){y=true;if(E=m.fragments[b[0]])if(E!==1)z=E}if(!z){z=
l.createDocumentFragment();m.clean(b,l,z,s)}if(y)m.fragments[b[0]]=E?z:1;return{fragment:z,cacheable:y}}function M(b,l){var s={};m.each(zb.concat.apply([],zb.slice(0,l)),function(){s[this]=b});return s}function T(b){return"scrollTo"in b&&b.document?b:b.nodeType===9?b.defaultView||b.parentWindow:false}var m=function(b,l){return new m.fn.init(b,l)},Z=a.jQuery,ca=a.$,S=a.document,oa,Ba=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Qa=/^.[^:#\[\.,]*$/,Ga=/\S/,Ma=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,ua=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,
pa=navigator.userAgent,Ca=false,ta=[],va,qa=Object.prototype.toString,Za=Object.prototype.hasOwnProperty,X=Array.prototype.push,la=Array.prototype.slice,xa=Array.prototype.indexOf;m.fn=m.prototype={init:function(b,l){var s,z;if(!b)return this;if(b.nodeType){this.context=this[0]=b;this.length=1;return this}if(b==="body"&&!l){this.context=S;this[0]=S.body;this.selector="body";this.length=1;return this}if(typeof b==="string")if((s=Ba.exec(b))&&(s[1]||!l))if(s[1]){z=l?l.ownerDocument||l:S;if(b=ua.exec(b))if(m.isPlainObject(l)){b=
[S.createElement(b[1])];m.fn.attr.call(b,l,true)}else b=[z.createElement(b[1])];else{b=N([s[1]],[z]);b=(b.cacheable?b.fragment.cloneNode(true):b.fragment).childNodes}return m.merge(this,b)}else{if(l=S.getElementById(s[2])){if(l.id!==s[2])return oa.find(b);this.length=1;this[0]=l}this.context=S;this.selector=b;return this}else if(!l&&/^\w+$/.test(b)){this.selector=b;this.context=S;b=S.getElementsByTagName(b);return m.merge(this,b)}else return!l||l.jquery?(l||oa).find(b):m(l).find(b);else if(m.isFunction(b))return oa.ready(b);
if(b.selector!==e){this.selector=b.selector;this.context=b.context}return m.makeArray(b,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return la.call(this,0)},get:function(b){return b==null?this.toArray():b<0?this.slice(b)[0]:this[b]},pushStack:function(b,l,s){var z=m();m.isArray(b)?X.apply(z,b):m.merge(z,b);z.prevObject=this;z.context=this.context;if(l==="find")z.selector=this.selector+(this.selector?" ":"")+s;else if(l)z.selector=this.selector+
"."+l+"("+s+")";return z},each:function(b,l){return m.each(this,b,l)},ready:function(b){m.bindReady();if(m.isReady)b.call(S,m);else ta&&ta.push(b);return this},eq:function(b){return b===-1?this.slice(b):this.slice(b,+b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(la.apply(this,arguments),"slice",la.call(arguments).join(","))},map:function(b){return this.pushStack(m.map(this,function(l,s){return b.call(l,s,l)}))},end:function(){return this.prevObject||
m(null)},push:X,sort:[].sort,splice:[].splice};m.fn.init.prototype=m.fn;m.extend=m.fn.extend=function(){var b=arguments[0]||{},l=1,s=arguments.length,z=false,y,E,G,P;if(typeof b==="boolean"){z=b;b=arguments[1]||{};l=2}if(typeof b!=="object"&&!m.isFunction(b))b={};if(s===l){b=this;--l}for(;l<s;l++)if((y=arguments[l])!=null)for(E in y){G=b[E];P=y[E];if(b!==P)if(z&&P&&(m.isPlainObject(P)||m.isArray(P))){G=G&&(m.isPlainObject(G)||m.isArray(G))?G:m.isArray(P)?[]:{};b[E]=m.extend(z,G,P)}else if(P!==e)b[E]=
P}return b};m.extend({noConflict:function(b){a.$=ca;if(b)a.jQuery=Z;return m},isReady:false,ready:function(){if(!m.isReady){if(!S.body)return setTimeout(m.ready,13);m.isReady=true;if(ta){for(var b,l=0;b=ta[l++];)b.call(S,m);ta=null}m.fn.triggerHandler&&m(S).triggerHandler("ready")}},bindReady:function(){if(!Ca){Ca=true;if(S.readyState==="complete")return m.ready();if(S.addEventListener){S.addEventListener("DOMContentLoaded",va,false);a.addEventListener("load",m.ready,false)}else if(S.attachEvent){S.attachEvent("onreadystatechange",
va);a.attachEvent("onload",m.ready);var b=false;try{b=a.frameElement==null}catch(l){}S.documentElement.doScroll&&b&&f()}}},isFunction:function(b){return qa.call(b)==="[object Function]"},isArray:function(b){return qa.call(b)==="[object Array]"},isPlainObject:function(b){if(!b||qa.call(b)!=="[object Object]"||b.nodeType||b.setInterval)return false;if(b.constructor&&!Za.call(b,"constructor")&&!Za.call(b.constructor.prototype,"isPrototypeOf"))return false;var l;for(l in b);return l===e||Za.call(b,l)},
isEmptyObject:function(b){for(var l in b)return false;return true},error:function(b){throw b;},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=m.trim(b);if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();else m.error("Invalid JSON: "+b)},noop:function(){},globalEval:function(b){if(b&&
Ga.test(b)){var l=S.getElementsByTagName("head")[0]||S.documentElement,s=S.createElement("script");s.type="text/javascript";if(m.support.scriptEval)s.appendChild(S.createTextNode(b));else s.text=b;l.insertBefore(s,l.firstChild);l.removeChild(s)}},nodeName:function(b,l){return b.nodeName&&b.nodeName.toUpperCase()===l.toUpperCase()},each:function(b,l,s){var z,y=0,E=b.length,G=E===e||m.isFunction(b);if(s)if(G)for(z in b){if(l.apply(b[z],s)===false)break}else for(;y<E;){if(l.apply(b[y++],s)===false)break}else if(G)for(z in b){if(l.call(b[z],
z,b[z])===false)break}else for(s=b[0];y<E&&l.call(s,y,s)!==false;s=b[++y]);return b},trim:function(b){return(b||"").replace(Ma,"")},makeArray:function(b,l){l=l||[];if(b!=null)b.length==null||typeof b==="string"||m.isFunction(b)||typeof b!=="function"&&b.setInterval?X.call(l,b):m.merge(l,b);return l},inArray:function(b,l){if(l.indexOf)return l.indexOf(b);for(var s=0,z=l.length;s<z;s++)if(l[s]===b)return s;return-1},merge:function(b,l){var s=b.length,z=0;if(typeof l.length==="number")for(var y=l.length;z<
y;z++)b[s++]=l[z];else for(;l[z]!==e;)b[s++]=l[z++];b.length=s;return b},grep:function(b,l,s){for(var z=[],y=0,E=b.length;y<E;y++)!s!==!l(b[y],y)&&z.push(b[y]);return z},map:function(b,l,s){for(var z=[],y,E=0,G=b.length;E<G;E++){y=l(b[E],E,s);if(y!=null)z[z.length]=y}return z.concat.apply([],z)},guid:1,proxy:function(b,l,s){if(arguments.length===2)if(typeof l==="string"){s=b;b=s[l];l=e}else if(l&&!m.isFunction(l)){s=l;l=e}if(!l&&b)l=function(){return b.apply(s||this,arguments)};if(b)l.guid=b.guid=
b.guid||l.guid||m.guid++;return l},uaMatch:function(b){b=b.toLowerCase();b=/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||!/compatible/.test(b)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(b)||[];return{browser:b[1]||"",version:b[2]||"0"}},browser:{}});pa=m.uaMatch(pa);if(pa.browser){m.browser[pa.browser]=true;m.browser.version=pa.version}if(m.browser.webkit)m.browser.safari=true;if(xa)m.inArray=function(b,l){return xa.call(l,b)};oa=m(S);if(S.addEventListener)va=
function(){S.removeEventListener("DOMContentLoaded",va,false);m.ready()};else if(S.attachEvent)va=function(){if(S.readyState==="complete"){S.detachEvent("onreadystatechange",va);m.ready()}};(function(){m.support={};var b=S.documentElement,l=S.createElement("script"),s=S.createElement("div"),z="script"+p();s.style.display="none";s.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var y=s.getElementsByTagName("*"),E=s.getElementsByTagName("a")[0];
if(!(!y||!y.length||!E)){m.support={leadingWhitespace:s.firstChild.nodeType===3,tbody:!s.getElementsByTagName("tbody").length,htmlSerialize:!!s.getElementsByTagName("link").length,style:/red/.test(E.getAttribute("style")),hrefNormalized:E.getAttribute("href")==="/a",opacity:/^0.55$/.test(E.style.opacity),cssFloat:!!E.style.cssFloat,checkOn:s.getElementsByTagName("input")[0].value==="on",optSelected:S.createElement("select").appendChild(S.createElement("option")).selected,parentNode:s.removeChild(s.appendChild(S.createElement("div"))).parentNode===
null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};l.type="text/javascript";try{l.appendChild(S.createTextNode("window."+z+"=1;"))}catch(G){}b.insertBefore(l,b.firstChild);if(a[z]){m.support.scriptEval=true;delete a[z]}try{delete l.test}catch(P){m.support.deleteExpando=false}b.removeChild(l);if(s.attachEvent&&s.fireEvent){s.attachEvent("onclick",function O(){m.support.noCloneEvent=false;s.detachEvent("onclick",O)});s.cloneNode(true).fireEvent("onclick")}s=S.createElement("div");
s.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";b=S.createDocumentFragment();b.appendChild(s.firstChild);m.support.checkClone=b.cloneNode(true).cloneNode(true).lastChild.checked;m(function(){var O=S.createElement("div");O.style.width=O.style.paddingLeft="1px";S.body.appendChild(O);m.boxModel=m.support.boxModel=O.offsetWidth===2;S.body.removeChild(O).style.display="none"});b=function(O){var Q=S.createElement("div");O="on"+O;var aa=O in Q;if(!aa){Q.setAttribute(O,"return;");aa=
typeof Q[O]==="function"}return aa};m.support.submitBubbles=b("submit");m.support.changeBubbles=b("change");b=l=s=y=E=null}})();m.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var sa="jQuery"+p(),Wa=0,ha={};m.extend({cache:{},expando:sa,noData:{embed:true,object:true,applet:true},data:function(b,l,s){if(!(b.nodeName&&m.noData[b.nodeName.toLowerCase()])){b=
b==a?ha:b;var z=b[sa],y=m.cache;if(!z&&typeof l==="string"&&s===e)return null;z||(z=++Wa);if(typeof l==="object"){b[sa]=z;y[z]=m.extend(true,{},l)}else if(!y[z]){b[sa]=z;y[z]={}}b=y[z];if(s!==e)b[l]=s;return typeof l==="string"?b[l]:b}},removeData:function(b,l){if(!(b.nodeName&&m.noData[b.nodeName.toLowerCase()])){b=b==a?ha:b;var s=b[sa],z=m.cache,y=z[s];if(l){if(y){delete y[l];m.isEmptyObject(y)&&m.removeData(b)}}else{if(m.support.deleteExpando)delete b[m.expando];else b.removeAttribute&&b.removeAttribute(m.expando);
delete z[s]}}}});m.fn.extend({data:function(b,l){if(typeof b==="undefined"&&this.length)return m.data(this[0]);else if(typeof b==="object")return this.each(function(){m.data(this,b)});var s=b.split(".");s[1]=s[1]?"."+s[1]:"";if(l===e){var z=this.triggerHandler("getData"+s[1]+"!",[s[0]]);if(z===e&&this.length)z=m.data(this[0],b);return z===e&&s[1]?this.data(s[0]):z}else return this.trigger("setData"+s[1]+"!",[s[0],l]).each(function(){m.data(this,b,l)})},removeData:function(b){return this.each(function(){m.removeData(this,
b)})}});m.extend({queue:function(b,l,s){if(b){l=(l||"fx")+"queue";var z=m.data(b,l);if(!s)return z||[];if(!z||m.isArray(s))z=m.data(b,l,m.makeArray(s));else z.push(s);return z}},dequeue:function(b,l){l=l||"fx";var s=m.queue(b,l),z=s.shift();if(z==="inprogress")z=s.shift();if(z){l==="fx"&&s.unshift("inprogress");z.call(b,function(){m.dequeue(b,l)})}}});m.fn.extend({queue:function(b,l){if(typeof b!=="string"){l=b;b="fx"}if(l===e)return m.queue(this[0],b);return this.each(function(){var s=m.queue(this,
b,l);b==="fx"&&s[0]!=="inprogress"&&m.dequeue(this,b)})},dequeue:function(b){return this.each(function(){m.dequeue(this,b)})},delay:function(b,l){b=m.fx?m.fx.speeds[b]||b:b;l=l||"fx";return this.queue(l,function(){var s=this;setTimeout(function(){m.dequeue(s,l)},b)})},clearQueue:function(b){return this.queue(b||"fx",[])}});var Ia=/[\n\t]/g,Na=/\s+/,hb=/\r/g,ra=/href|src|style/,Ja=/(button|input)/i,ya=/(button|input|object|select|textarea)/i,Ha=/^(a|area)$/i,ib=/radio|checkbox/;m.fn.extend({attr:function(b,
l){return r(this,b,l,true,m.attr)},removeAttr:function(b){return this.each(function(){m.attr(this,b,"");this.nodeType===1&&this.removeAttribute(b)})},addClass:function(b){if(m.isFunction(b))return this.each(function(Q){var aa=m(this);aa.addClass(b.call(this,Q,aa.attr("class")))});if(b&&typeof b==="string")for(var l=(b||"").split(Na),s=0,z=this.length;s<z;s++){var y=this[s];if(y.nodeType===1)if(y.className){for(var E=" "+y.className+" ",G=y.className,P=0,O=l.length;P<O;P++)if(E.indexOf(" "+l[P]+" ")<
0)G+=" "+l[P];y.className=m.trim(G)}else y.className=b}return this},removeClass:function(b){if(m.isFunction(b))return this.each(function(O){var Q=m(this);Q.removeClass(b.call(this,O,Q.attr("class")))});if(b&&typeof b==="string"||b===e)for(var l=(b||"").split(Na),s=0,z=this.length;s<z;s++){var y=this[s];if(y.nodeType===1&&y.className)if(b){for(var E=(" "+y.className+" ").replace(Ia," "),G=0,P=l.length;G<P;G++)E=E.replace(" "+l[G]+" "," ");y.className=m.trim(E)}else y.className=""}return this},toggleClass:function(b,
l){var s=typeof b,z=typeof l==="boolean";if(m.isFunction(b))return this.each(function(y){var E=m(this);E.toggleClass(b.call(this,y,E.attr("class"),l),l)});return this.each(function(){if(s==="string")for(var y,E=0,G=m(this),P=l,O=b.split(Na);y=O[E++];){P=z?P:!G.hasClass(y);G[P?"addClass":"removeClass"](y)}else if(s==="undefined"||s==="boolean"){this.className&&m.data(this,"__className__",this.className);this.className=this.className||b===false?"":m.data(this,"__className__")||""}})},hasClass:function(b){b=
" "+b+" ";for(var l=0,s=this.length;l<s;l++)if((" "+this[l].className+" ").replace(Ia," ").indexOf(b)>-1)return true;return false},val:function(b){if(b===e){var l=this[0];if(l){if(m.nodeName(l,"option"))return(l.attributes.value||{}).specified?l.value:l.text;if(m.nodeName(l,"select")){var s=l.selectedIndex,z=[],y=l.options;l=l.type==="select-one";if(s<0)return null;var E=l?s:0;for(s=l?s+1:y.length;E<s;E++){var G=y[E];if(G.selected){b=m(G).val();if(l)return b;z.push(b)}}return z}if(ib.test(l.type)&&
!m.support.checkOn)return l.getAttribute("value")===null?"on":l.value;return(l.value||"").replace(hb,"")}return e}var P=m.isFunction(b);return this.each(function(O){var Q=m(this),aa=b;if(this.nodeType===1){if(P)aa=b.call(this,O,Q.val());if(typeof aa==="number")aa+="";if(m.isArray(aa)&&ib.test(this.type))this.checked=m.inArray(Q.val(),aa)>=0;else if(m.nodeName(this,"select")){var ma=m.makeArray(aa);m("option",this).each(function(){this.selected=m.inArray(m(this).val(),ma)>=0});if(!ma.length)this.selectedIndex=
-1}else this.value=aa}})}});m.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(b,l,s,z){if(!b||b.nodeType===3||b.nodeType===8)return e;if(z&&l in m.attrFn)return m(b)[l](s);z=b.nodeType!==1||!m.isXMLDoc(b);var y=s!==e;l=z&&m.props[l]||l;if(b.nodeType===1){var E=ra.test(l);if(l in b&&z&&!E){if(y){l==="type"&&Ja.test(b.nodeName)&&b.parentNode&&m.error("type property can't be changed");b[l]=s}if(m.nodeName(b,"form")&&b.getAttributeNode(l))return b.getAttributeNode(l).nodeValue;
if(l==="tabIndex")return(l=b.getAttributeNode("tabIndex"))&&l.specified?l.value:ya.test(b.nodeName)||Ha.test(b.nodeName)&&b.href?0:e;return b[l]}if(!m.support.style&&z&&l==="style"){if(y)b.style.cssText=""+s;return b.style.cssText}y&&b.setAttribute(l,""+s);b=!m.support.hrefNormalized&&z&&E?b.getAttribute(l,2):b.getAttribute(l);return b===null?e:b}return m.style(b,l,s)}});var $a=/\.(.*)$/,Oa=function(b){return b.replace(/[^\w\s\.\|`]/g,function(l){return"\\"+l})};m.event={add:function(b,l,s,z){if(!(b.nodeType===
3||b.nodeType===8)){if(b.setInterval&&b!==a&&!b.frameElement)b=a;var y,E;if(s.handler){y=s;s=y.handler}if(!s.guid)s.guid=m.guid++;if(E=m.data(b)){var G=E.events=E.events||{},P=E.handle;if(!P)E.handle=P=function(){return typeof m!=="undefined"&&!m.event.triggered?m.event.handle.apply(P.elem,arguments):e};P.elem=b;l=l.split(" ");for(var O,Q=0,aa;O=l[Q++];){E=y?m.extend({},y):{handler:s,data:z};if(O.indexOf(".")>-1){aa=O.split(".");O=aa.shift();E.namespace=aa.slice(0).sort().join(".")}else{aa=[];E.namespace=
""}E.type=O;E.guid=s.guid;var ma=G[O],Da=m.event.special[O]||{};if(!ma){ma=G[O]=[];if(!Da.setup||Da.setup.call(b,z,aa,P)===false)if(b.addEventListener)b.addEventListener(O,P,false);else b.attachEvent&&b.attachEvent("on"+O,P)}if(Da.add){Da.add.call(b,E);if(!E.handler.guid)E.handler.guid=s.guid}ma.push(E);m.event.global[O]=true}b=null}}},global:{},remove:function(b,l,s,z){if(!(b.nodeType===3||b.nodeType===8)){var y,E=0,G,P,O,Q,aa,ma,Da=m.data(b),wa=Da&&Da.events;if(Da&&wa){if(l&&l.type){s=l.handler;
l=l.type}if(!l||typeof l==="string"&&l.charAt(0)==="."){l=l||"";for(y in wa)m.event.remove(b,y+l)}else{for(l=l.split(" ");y=l[E++];){Q=y;G=y.indexOf(".")<0;P=[];if(!G){P=y.split(".");y=P.shift();O=RegExp("(^|\\.)"+m.map(P.slice(0).sort(),Oa).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(aa=wa[y])if(s){Q=m.event.special[y]||{};for(Ka=z||0;Ka<aa.length;Ka++){ma=aa[Ka];if(s.guid===ma.guid){if(G||O.test(ma.namespace)){z==null&&aa.splice(Ka--,1);Q.remove&&Q.remove.call(b,ma)}if(z!=null)break}}if(aa.length===0||
z!=null&&aa.length===1){if(!Q.teardown||Q.teardown.call(b,P)===false)W(b,y,Da.handle);delete wa[y]}}else for(var Ka=0;Ka<aa.length;Ka++){ma=aa[Ka];if(G||O.test(ma.namespace)){m.event.remove(b,Q,ma.handler,Ka);aa.splice(Ka--,1)}}}if(m.isEmptyObject(wa)){if(l=Da.handle)l.elem=null;delete Da.events;delete Da.handle;m.isEmptyObject(Da)&&m.removeData(b)}}}}},trigger:function(b,l,s,z){var y=b.type||b;if(!z){b=typeof b==="object"?b[sa]?b:m.extend(m.Event(y),b):m.Event(y);if(y.indexOf("!")>=0){b.type=y=y.slice(0,
-1);b.exclusive=true}if(!s){b.stopPropagation();m.event.global[y]&&m.each(m.cache,function(){this.events&&this.events[y]&&m.event.trigger(b,l,this.handle.elem)})}if(!s||s.nodeType===3||s.nodeType===8)return e;b.result=e;b.target=s;l=m.makeArray(l);l.unshift(b)}b.currentTarget=s;(z=m.data(s,"handle"))&&z.apply(s,l);z=s.parentNode||s.ownerDocument;try{if(!(s&&s.nodeName&&m.noData[s.nodeName.toLowerCase()]))if(s["on"+y]&&s["on"+y].apply(s,l)===false)b.result=false}catch(E){}if(!b.isPropagationStopped()&&
z)m.event.trigger(b,l,z,true);else if(!b.isDefaultPrevented()){z=b.target;var G,P=m.nodeName(z,"a")&&y==="click",O=m.event.special[y]||{};if((!O._default||O._default.call(s,b)===false)&&!P&&!(z&&z.nodeName&&m.noData[z.nodeName.toLowerCase()])){try{if(z[y]){if(G=z["on"+y])z["on"+y]=null;m.event.triggered=true;z[y]()}}catch(Q){}if(G)z["on"+y]=G;m.event.triggered=false}}},handle:function(b){var l,s,z,y;b=arguments[0]=m.event.fix(b||a.event);b.currentTarget=this;l=b.type.indexOf(".")<0&&!b.exclusive;
if(!l){s=b.type.split(".");b.type=s.shift();z=RegExp("(^|\\.)"+s.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}y=m.data(this,"events");s=y[b.type];if(y&&s){s=s.slice(0);y=0;for(var E=s.length;y<E;y++){var G=s[y];if(l||z.test(G.namespace)){b.handler=G.handler;b.data=G.data;b.handleObj=G;G=G.handler.apply(this,arguments);if(G!==e){b.result=G;if(G===false){b.preventDefault();b.stopPropagation()}}if(b.isImmediatePropagationStopped())break}}}return b.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(b){if(b[sa])return b;var l=b;b=m.Event(l);for(var s=this.props.length,z;s;){z=this.props[--s];b[z]=l[z]}if(!b.target)b.target=b.srcElement||S;if(b.target.nodeType===3)b.target=b.target.parentNode;if(!b.relatedTarget&&b.fromElement)b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement;if(b.pageX==null&&b.clientX!=null){l=S.documentElement;s=S.body;b.pageX=b.clientX+(l&&l.scrollLeft||s&&s.scrollLeft||0)-(l&&l.clientLeft||s&&s.clientLeft||0);b.pageY=b.clientY+(l&&l.scrollTop||
s&&s.scrollTop||0)-(l&&l.clientTop||s&&s.clientTop||0)}if(!b.which&&(b.charCode||b.charCode===0?b.charCode:b.keyCode))b.which=b.charCode||b.keyCode;if(!b.metaKey&&b.ctrlKey)b.metaKey=b.ctrlKey;if(!b.which&&b.button!==e)b.which=b.button&1?1:b.button&2?3:b.button&4?2:0;return b},guid:1E8,proxy:m.proxy,special:{ready:{setup:m.bindReady,teardown:m.noop},live:{add:function(b){m.event.add(this,b.origType,m.extend({},b,{handler:F}))},remove:function(b){var l=true,s=b.origType.replace($a,"");m.each(m.data(this,
"events").live||[],function(){if(s===this.origType.replace($a,""))return l=false});l&&m.event.remove(this,b.origType,F)}},beforeunload:{setup:function(b,l,s){if(this.setInterval)this.onbeforeunload=s;return false},teardown:function(b,l){if(this.onbeforeunload===l)this.onbeforeunload=null}}}};var W=S.removeEventListener?function(b,l,s){b.removeEventListener(l,s,false)}:function(b,l,s){b.detachEvent("on"+l,s)};m.Event=function(b){if(!this.preventDefault)return new m.Event(b);if(b&&b.type){this.originalEvent=
b;this.type=b.type}else this.type=b;this.timeStamp=p();this[sa]=true};m.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var b=this.originalEvent;if(b){b.preventDefault&&b.preventDefault();b.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=B;var b=this.originalEvent;if(b){b.stopPropagation&&b.stopPropagation();b.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B;this.stopPropagation()},isDefaultPrevented:u,isPropagationStopped:u,
isImmediatePropagationStopped:u};var Va=function(b){var l=b.relatedTarget;try{for(;l&&l!==this;)l=l.parentNode;if(l!==this){b.type=b.data;m.event.handle.apply(this,arguments)}}catch(s){}},fa=function(b){b.type=b.data;m.event.handle.apply(this,arguments)};m.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,l){m.event.special[b]={setup:function(s){m.event.add(this,l,s&&s.selector?fa:Va,b)},teardown:function(s){m.event.remove(this,l,s&&s.selector?fa:Va)}}});if(!m.support.submitBubbles)m.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){m.event.add(this,"click.specialSubmit",function(b){var l=b.target,s=l.type;if((s==="submit"||s==="image")&&m(l).closest("form").length)return D("submit",this,arguments)});m.event.add(this,"keypress.specialSubmit",function(b){var l=b.target,s=l.type;if((s==="text"||s==="password")&&m(l).closest("form").length&&b.keyCode===13)return D("submit",this,arguments)})}else return false},teardown:function(){m.event.remove(this,".specialSubmit")}};if(!m.support.changeBubbles){var Xa=
/textarea|input|select/i,Aa,K=function(b){var l=b.type,s=b.value;if(l==="radio"||l==="checkbox")s=b.checked;else if(l==="select-multiple")s=b.selectedIndex>-1?m.map(b.options,function(z){return z.selected}).join("-"):"";else if(b.nodeName.toLowerCase()==="select")s=b.selectedIndex;return s},Ta=function(b,l){var s=b.target,z,y;if(!(!Xa.test(s.nodeName)||s.readOnly)){z=m.data(s,"_change_data");y=K(s);if(b.type!=="focusout"||s.type!=="radio")m.data(s,"_change_data",y);if(!(z===e||y===z))if(z!=null||
y){b.type="change";return m.event.trigger(b,l,s)}}};m.event.special.change={filters:{focusout:Ta,click:function(b){var l=b.target,s=l.type;if(s==="radio"||s==="checkbox"||l.nodeName.toLowerCase()==="select")return Ta.call(this,b)},keydown:function(b){var l=b.target,s=l.type;if(b.keyCode===13&&l.nodeName.toLowerCase()!=="textarea"||b.keyCode===32&&(s==="checkbox"||s==="radio")||s==="select-multiple")return Ta.call(this,b)},beforeactivate:function(b){b=b.target;m.data(b,"_change_data",K(b))}},setup:function(){if(this.type===
"file")return false;for(var b in Aa)m.event.add(this,b+".specialChange",Aa[b]);return Xa.test(this.nodeName)},teardown:function(){m.event.remove(this,".specialChange");return Xa.test(this.nodeName)}};Aa=m.event.special.change.filters}S.addEventListener&&m.each({focus:"focusin",blur:"focusout"},function(b,l){function s(z){z=m.event.fix(z);z.type=l;return m.event.handle.call(this,z)}m.event.special[l]={setup:function(){this.addEventListener(b,s,true)},teardown:function(){this.removeEventListener(b,
s,true)}}});m.each(["bind","one"],function(b,l){m.fn[l]=function(s,z,y){if(typeof s==="object"){for(var E in s)this[l](E,z,s[E],y);return this}if(m.isFunction(z)){y=z;z=e}var G=l==="one"?m.proxy(y,function(O){m(this).unbind(O,G);return y.apply(this,arguments)}):y;if(s==="unload"&&l!=="one")this.one(s,z,y);else{E=0;for(var P=this.length;E<P;E++)m.event.add(this[E],s,G,z)}return this}});m.fn.extend({unbind:function(b,l){if(typeof b==="object"&&!b.preventDefault)for(var s in b)this.unbind(s,b[s]);else{s=
0;for(var z=this.length;s<z;s++)m.event.remove(this[s],b,l)}return this},delegate:function(b,l,s,z){return this.live(l,s,z,b)},undelegate:function(b,l,s){return arguments.length===0?this.unbind("live"):this.die(l,null,s,b)},trigger:function(b,l){return this.each(function(){m.event.trigger(b,l,this)})},triggerHandler:function(b,l){if(this[0]){b=m.Event(b);b.preventDefault();b.stopPropagation();m.event.trigger(b,l,this[0]);return b.result}},toggle:function(b){for(var l=arguments,s=1;s<l.length;)m.proxy(b,
l[s++]);return this.click(m.proxy(b,function(z){var y=(m.data(this,"lastToggle"+b.guid)||0)%s;m.data(this,"lastToggle"+b.guid,y+1);z.preventDefault();return l[y].apply(this,arguments)||false}))},hover:function(b,l){return this.mouseenter(b).mouseleave(l||b)}});var Sa={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};m.each(["live","die"],function(b,l){m.fn[l]=function(s,z,y,E){var G,P=0,O,Q,aa=E||this.selector,ma=E?this:m(this.context);if(m.isFunction(z)){y=z;z=e}for(s=
(s||"").split(" ");(G=s[P++])!=null;){E=$a.exec(G);O="";if(E){O=E[0];G=G.replace($a,"")}if(G==="hover")s.push("mouseenter"+O,"mouseleave"+O);else{Q=G;if(G==="focus"||G==="blur"){s.push(Sa[G]+O);G+=O}else G=(Sa[G]||G)+O;l==="live"?ma.each(function(){m.event.add(this,H(G,aa),{data:z,selector:aa,handler:y,origType:G,origHandler:y,preType:Q})}):ma.unbind(H(G,aa),y)}}return this}});m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(b,l){m.fn[l]=function(s){return s?this.bind(l,s):this.trigger(l)};if(m.attrFn)m.attrFn[l]=true});a.attachEvent&&!a.addEventListener&&a.attachEvent("onunload",function(){for(var b in m.cache)if(m.cache[b].handle)try{m.event.remove(m.cache[b].handle.elem)}catch(l){}});(function(){function b(g){for(var n="",q,o=0;g[o];o++){q=g[o];if(q.nodeType===3||q.nodeType===4)n+=q.nodeValue;else if(q.nodeType!==8)n+=b(q.childNodes)}return n}function l(g,n,q,o,t,v){t=0;for(var A=o.length;t<A;t++){var C=o[t];
if(C){C=C[g];for(var I=false;C;){if(C.sizcache===q){I=o[C.sizset];break}if(C.nodeType===1&&!v){C.sizcache=q;C.sizset=t}if(C.nodeName.toLowerCase()===n){I=C;break}C=C[g]}o[t]=I}}}function s(g,n,q,o,t,v){t=0;for(var A=o.length;t<A;t++){var C=o[t];if(C){C=C[g];for(var I=false;C;){if(C.sizcache===q){I=o[C.sizset];break}if(C.nodeType===1){if(!v){C.sizcache=q;C.sizset=t}if(typeof n!=="string"){if(C===n){I=true;break}}else if(O.filter(n,[C]).length>0){I=C;break}}C=C[g]}o[t]=I}}}var z=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
y=0,E=Object.prototype.toString,G=false,P=true;[0,0].sort(function(){P=false;return 0});var O=function(g,n,q,o){q=q||[];var t=n=n||S;if(n.nodeType!==1&&n.nodeType!==9)return[];if(!g||typeof g!=="string")return q;for(var v=[],A,C,I,U,ba=true,Y=c(n),L=g;(z.exec(""),A=z.exec(L))!==null;){L=A[3];v.push(A[1]);if(A[2]){U=A[3];break}}if(v.length>1&&aa.exec(g))if(v.length===2&&Q.relative[v[0]])C=k(v[0]+v[1],n);else for(C=Q.relative[v[0]]?[n]:O(v.shift(),n);v.length;){g=v.shift();if(Q.relative[g])g+=v.shift();
C=k(g,C)}else{if(!o&&v.length>1&&n.nodeType===9&&!Y&&Q.match.ID.test(v[0])&&!Q.match.ID.test(v[v.length-1])){A=O.find(v.shift(),n,Y);n=A.expr?O.filter(A.expr,A.set)[0]:A.set[0]}if(n){A=o?{expr:v.pop(),set:Da(o)}:O.find(v.pop(),v.length===1&&(v[0]==="~"||v[0]==="+")&&n.parentNode?n.parentNode:n,Y);C=A.expr?O.filter(A.expr,A.set):A.set;if(v.length>0)I=Da(C);else ba=false;for(;v.length;){var da=v.pop();A=da;if(Q.relative[da])A=v.pop();else da="";if(A==null)A=n;Q.relative[da](I,A,Y)}}else I=[]}I||(I=
C);I||O.error(da||g);if(E.call(I)==="[object Array]")if(ba)if(n&&n.nodeType===1)for(g=0;I[g]!=null;g++){if(I[g]&&(I[g]===true||I[g].nodeType===1&&ab(n,I[g])))q.push(C[g])}else for(g=0;I[g]!=null;g++)I[g]&&I[g].nodeType===1&&q.push(C[g]);else q.push.apply(q,I);else Da(I,q);if(U){O(U,t,q,o);O.uniqueSort(q)}return q};O.uniqueSort=function(g){if(Ka){G=P;g.sort(Ka);if(G)for(var n=1;n<g.length;n++)g[n]===g[n-1]&&g.splice(n--,1)}return g};O.matches=function(g,n){return O(g,null,null,n)};O.find=function(g,
n,q){var o,t;if(!g)return[];for(var v=0,A=Q.order.length;v<A;v++){var C=Q.order[v];if(t=Q.leftMatch[C].exec(g)){var I=t[1];t.splice(1,1);if(I.substr(I.length-1)!=="\\"){t[1]=(t[1]||"").replace(/\\/g,"");o=Q.find[C](t,n,q);if(o!=null){g=g.replace(Q.match[C],"");break}}}}o||(o=n.getElementsByTagName("*"));return{set:o,expr:g}};O.filter=function(g,n,q,o){for(var t=g,v=[],A=n,C,I,U=n&&n[0]&&c(n[0]);g&&n.length;){for(var ba in Q.filter)if((C=Q.leftMatch[ba].exec(g))!=null&&C[2]){var Y=Q.filter[ba],L,da;
da=C[1];I=false;C.splice(1,1);if(da.substr(da.length-1)!=="\\"){if(A===v)v=[];if(Q.preFilter[ba])if(C=Q.preFilter[ba](C,A,q,v,o,U)){if(C===true)continue}else I=L=true;if(C)for(var Ra=0;(da=A[Ra])!=null;Ra++)if(da){L=Y(da,C,Ra,A);var za=o^!!L;if(q&&L!=null)if(za)I=true;else A[Ra]=false;else if(za){v.push(da);I=true}}if(L!==e){q||(A=v);g=g.replace(Q.match[ba],"");if(!I)return[];break}}}if(g===t)if(I==null)O.error(g);else break;t=g}return A};O.error=function(g){throw"Syntax error, unrecognized expression: "+
g;};var Q=O.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},relative:{"+":function(g,n){var q=typeof n==="string",o=q&&!/\W/.test(n);q=q&&!o;if(o)n=n.toLowerCase();o=0;for(var t=g.length,v;o<t;o++)if(v=g[o]){for(;(v=v.previousSibling)&&v.nodeType!==1;);g[o]=q||v&&v.nodeName.toLowerCase()===n?v||false:v===n}q&&O.filter(n,g,true)},">":function(g,n){var q=typeof n==="string";if(q&&!/\W/.test(n)){n=n.toLowerCase();for(var o=0,t=g.length;o<t;o++){var v=
g[o];if(v){q=v.parentNode;g[o]=q.nodeName.toLowerCase()===n?q:false}}}else{o=0;for(t=g.length;o<t;o++)if(v=g[o])g[o]=q?v.parentNode:v.parentNode===n;q&&O.filter(n,g,true)}},"":function(g,n,q){var o=y++,t=s;if(typeof n==="string"&&!/\W/.test(n)){var v=n=n.toLowerCase();t=l}t("parentNode",n,o,g,v,q)},"~":function(g,n,q){var o=y++,t=s;if(typeof n==="string"&&!/\W/.test(n)){var v=n=n.toLowerCase();t=l}t("previousSibling",n,o,g,v,q)}},find:{ID:function(g,n,q){if(typeof n.getElementById!=="undefined"&&
!q)return(g=n.getElementById(g[1]))?[g]:[]},NAME:function(g,n){if(typeof n.getElementsByName!=="undefined"){var q=[];n=n.getElementsByName(g[1]);for(var o=0,t=n.length;o<t;o++)n[o].getAttribute("name")===g[1]&&q.push(n[o]);return q.length===0?null:q}},TAG:function(g,n){return n.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,n,q,o,t,v){g=" "+g[1].replace(/\\/g,"")+" ";if(v)return g;v=0;for(var A;(A=n[v])!=null;v++)if(A)if(t^(A.className&&(" "+A.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=
0))q||o.push(A);else if(q)n[v]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},CHILD:function(g){if(g[1]==="nth"){var n=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=n[1]+(n[2]||1)-0;g[3]=n[3]-0}g[0]=y++;return g},ATTR:function(g,n,q,o,t,v){n=g[1].replace(/\\/g,"");if(!v&&Q.attrMap[n])g[1]=Q.attrMap[n];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,n,q,o,
t){if(g[1]==="not")if((z.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=O(g[3],null,null,n);else{g=O.filter(g[3],n,q,true^t);q||o.push.apply(o,g);return false}else if(Q.match.POS.test(g[0])||Q.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},
empty:function(g){return!g.firstChild},has:function(g,n,q){return!!O(q[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===
g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},setFilters:{first:function(g,n){return n===0},last:function(g,n,q,o){return n===o.length-1},even:function(g,n){return n%2===0},odd:function(g,n){return n%2===1},lt:function(g,n,q){return n<q[3]-0},gt:function(g,n,q){return n>q[3]-0},nth:function(g,n,q){return q[3]-0===n},eq:function(g,n,q){return q[3]-0===n}},filter:{PSEUDO:function(g,n,q,o){var t=n[1],v=Q.filters[t];if(v)return v(g,
q,n,o);else if(t==="contains")return(g.textContent||g.innerText||b([g])||"").indexOf(n[3])>=0;else if(t==="not"){n=n[3];q=0;for(o=n.length;q<o;q++)if(n[q]===g)return false;return true}else O.error("Syntax error, unrecognized expression: "+t)},CHILD:function(g,n){var q=n[1],o=g;switch(q){case "only":case "first":for(;o=o.previousSibling;)if(o.nodeType===1)return false;if(q==="first")return true;o=g;case "last":for(;o=o.nextSibling;)if(o.nodeType===1)return false;return true;case "nth":q=n[2];var t=
n[3];if(q===1&&t===0)return true;n=n[0];var v=g.parentNode;if(v&&(v.sizcache!==n||!g.nodeIndex)){var A=0;for(o=v.firstChild;o;o=o.nextSibling)if(o.nodeType===1)o.nodeIndex=++A;v.sizcache=n}g=g.nodeIndex-t;return q===0?g===0:g%q===0&&g/q>=0}},ID:function(g,n){return g.nodeType===1&&g.getAttribute("id")===n},TAG:function(g,n){return n==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===n},CLASS:function(g,n){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(n)>-1},ATTR:function(g,n){var q=
n[1];g=Q.attrHandle[q]?Q.attrHandle[q](g):g[q]!=null?g[q]:g.getAttribute(q);q=g+"";var o=n[2];n=n[4];return g==null?o==="!=":o==="="?q===n:o==="*="?q.indexOf(n)>=0:o==="~="?(" "+q+" ").indexOf(n)>=0:!n?q&&g!==false:o==="!="?q!==n:o==="^="?q.indexOf(n)===0:o==="$="?q.substr(q.length-n.length)===n:o==="|="?q===n||q.substr(0,n.length+1)===n+"-":false},POS:function(g,n,q,o){var t=Q.setFilters[n[2]];if(t)return t(g,q,n,o)}}},aa=Q.match.POS;for(var ma in Q.match){Q.match[ma]=RegExp(Q.match[ma].source+/(?![^\[]*\])(?![^\(]*\))/.source);
Q.leftMatch[ma]=RegExp(/(^(?:.|\r|\n)*?)/.source+Q.match[ma].source.replace(/\\(\d+)/g,function(g,n){return"\\"+(n-0+1)}))}var Da=function(g,n){g=Array.prototype.slice.call(g,0);if(n){n.push.apply(n,g);return n}return g};try{Array.prototype.slice.call(S.documentElement.childNodes,0)}catch(wa){Da=function(g,n){n=n||[];if(E.call(g)==="[object Array]")Array.prototype.push.apply(n,g);else if(typeof g.length==="number")for(var q=0,o=g.length;q<o;q++)n.push(g[q]);else for(q=0;g[q];q++)n.push(g[q]);return n}}var Ka;
if(S.documentElement.compareDocumentPosition)Ka=function(g,n){if(!g.compareDocumentPosition||!n.compareDocumentPosition){if(g==n)G=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(n)&4?-1:g===n?0:1;if(g===0)G=true;return g};else if("sourceIndex"in S.documentElement)Ka=function(g,n){if(!g.sourceIndex||!n.sourceIndex){if(g==n)G=true;return g.sourceIndex?-1:1}g=g.sourceIndex-n.sourceIndex;if(g===0)G=true;return g};else if(S.createRange)Ka=function(g,n){if(!g.ownerDocument||!n.ownerDocument){if(g==
n)G=true;return g.ownerDocument?-1:1}var q=g.ownerDocument.createRange(),o=n.ownerDocument.createRange();q.setStart(g,0);q.setEnd(g,0);o.setStart(n,0);o.setEnd(n,0);g=q.compareBoundaryPoints(Range.START_TO_END,o);if(g===0)G=true;return g};(function(){var g=S.createElement("div"),n="script"+(new Date).getTime();g.innerHTML="<a name='"+n+"'/>";var q=S.documentElement;q.insertBefore(g,q.firstChild);if(S.getElementById(n)){Q.find.ID=function(o,t,v){if(typeof t.getElementById!=="undefined"&&!v)return(t=
t.getElementById(o[1]))?t.id===o[1]||typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id").nodeValue===o[1]?[t]:e:[]};Q.filter.ID=function(o,t){var v=typeof o.getAttributeNode!=="undefined"&&o.getAttributeNode("id");return o.nodeType===1&&v&&v.nodeValue===t}}q.removeChild(g);q=g=null})();(function(){var g=S.createElement("div");g.appendChild(S.createComment(""));if(g.getElementsByTagName("*").length>0)Q.find.TAG=function(n,q){q=q.getElementsByTagName(n[1]);if(n[1]==="*"){n=[];for(var o=
0;q[o];o++)q[o].nodeType===1&&n.push(q[o]);q=n}return q};g.innerHTML="<a href='#'></a>";if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")Q.attrHandle.href=function(n){return n.getAttribute("href",2)};g=null})();S.querySelectorAll&&function(){var g=O,n=S.createElement("div");n.innerHTML="<p class='TEST'></p>";if(!(n.querySelectorAll&&n.querySelectorAll(".TEST").length===0)){O=function(o,t,v,A){t=t||S;if(!A&&t.nodeType===9&&!c(t))try{return Da(t.querySelectorAll(o),
v)}catch(C){}return g(o,t,v,A)};for(var q in g)O[q]=g[q];n=null}}();(function(){var g=S.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){Q.order.splice(1,0,"CLASS");Q.find.CLASS=function(n,q,o){if(typeof q.getElementsByClassName!=="undefined"&&!o)return q.getElementsByClassName(n[1])};g=null}}})();var ab=S.compareDocumentPosition?
function(g,n){return!!(g.compareDocumentPosition(n)&16)}:function(g,n){return g!==n&&(g.contains?g.contains(n):true)},c=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},k=function(g,n){var q=[],o="",t;for(n=n.nodeType?[n]:n;t=Q.match.PSEUDO.exec(g);){o+=t[0];g=g.replace(Q.match.PSEUDO,"")}g=Q.relative[g]?g+"*":g;t=0;for(var v=n.length;t<v;t++)O(g,n[t],q);return O.filter(o,q)};m.find=O;m.expr=O.selectors;m.expr[":"]=m.expr.filters;m.unique=O.uniqueSort;m.text=
b;m.isXMLDoc=c;m.contains=ab})();var ja=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,V=/,/;la=Array.prototype.slice;var ea=function(b,l,s){if(m.isFunction(l))return m.grep(b,function(y,E){return!!l.call(y,E,y)===s});else if(l.nodeType)return m.grep(b,function(y){return y===l===s});else if(typeof l==="string"){var z=m.grep(b,function(y){return y.nodeType===1});if(Qa.test(l))return m.filter(l,z,!s);else l=m.filter(l,z)}return m.grep(b,function(y){return m.inArray(y,l)>=0===s})};m.fn.extend({find:function(b){for(var l=
this.pushStack("","find",b),s=0,z=0,y=this.length;z<y;z++){s=l.length;m.find(b,this[z],l);if(z>0)for(var E=s;E<l.length;E++)for(var G=0;G<s;G++)if(l[G]===l[E]){l.splice(E--,1);break}}return l},has:function(b){var l=m(b);return this.filter(function(){for(var s=0,z=l.length;s<z;s++)if(m.contains(this,l[s]))return true})},not:function(b){return this.pushStack(ea(this,b,false),"not",b)},filter:function(b){return this.pushStack(ea(this,b,true),"filter",b)},is:function(b){return!!b&&m.filter(b,this).length>
0},closest:function(b,l){if(m.isArray(b)){var s=[],z=this[0],y,E={},G;if(z&&b.length){y=0;for(var P=b.length;y<P;y++){G=b[y];E[G]||(E[G]=m.expr.match.POS.test(G)?m(G,l||this.context):G)}for(;z&&z.ownerDocument&&z!==l;){for(G in E){y=E[G];if(y.jquery?y.index(z)>-1:m(z).is(y)){s.push({selector:G,elem:z});delete E[G]}}z=z.parentNode}}return s}var O=m.expr.match.POS.test(b)?m(b,l||this.context):null;return this.map(function(Q,aa){for(;aa&&aa.ownerDocument&&aa!==l;){if(O?O.index(aa)>-1:m(aa).is(b))return aa;
aa=aa.parentNode}return null})},index:function(b){if(!b||typeof b==="string")return m.inArray(this[0],b?m(b):this.parent().children());return m.inArray(b.jquery?b[0]:b,this)},add:function(b,l){b=typeof b==="string"?m(b,l||this.context):m.makeArray(b);l=m.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!l[0]||!l[0].parentNode||l[0].parentNode.nodeType===11?l:m.unique(l))},andSelf:function(){return this.add(this.prevObject)}});m.each({parent:function(b){return(b=
b.parentNode)&&b.nodeType!==11?b:null},parents:function(b){return m.dir(b,"parentNode")},parentsUntil:function(b,l,s){return m.dir(b,"parentNode",s)},next:function(b){return m.nth(b,2,"nextSibling")},prev:function(b){return m.nth(b,2,"previousSibling")},nextAll:function(b){return m.dir(b,"nextSibling")},prevAll:function(b){return m.dir(b,"previousSibling")},nextUntil:function(b,l,s){return m.dir(b,"nextSibling",s)},prevUntil:function(b,l,s){return m.dir(b,"previousSibling",s)},siblings:function(b){return m.sibling(b.parentNode.firstChild,
b)},children:function(b){return m.sibling(b.firstChild)},contents:function(b){return m.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:m.makeArray(b.childNodes)}},function(b,l){m.fn[b]=function(s,z){var y=m.map(this,l,s);ja.test(b)||(z=s);if(z&&typeof z==="string")y=m.filter(z,y);y=this.length>1?m.unique(y):y;if((this.length>1||V.test(z))&&jb.test(b))y=y.reverse();return this.pushStack(y,b,la.call(arguments).join(","))}});m.extend({filter:function(b,l,s){if(s)b=":not("+b+")";return m.find.matches(b,
l)},dir:function(b,l,s){var z=[];for(b=b[l];b&&b.nodeType!==9&&(s===e||b.nodeType!==1||!m(b).is(s));){b.nodeType===1&&z.push(b);b=b[l]}return z},nth:function(b,l,s){l=l||1;for(var z=0;b;b=b[s])if(b.nodeType===1&&++z===l)break;return b},sibling:function(b,l){for(var s=[];b;b=b.nextSibling)b.nodeType===1&&b!==l&&s.push(b);return s}});var Fa=/ jQuery\d+="(?:\d+|null)"/g,Pa=/^\s+/,db=/(<([\w:]+)[^>]*?)\/>/g,Ea=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,ka=/<([\w:]+)/,bb=/<tbody/i,gb=/<|&#?\w+;/,
cb=/<script|<object|<embed|<option|<style/i,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,La=function(b,l,s){return Ea.test(s)?b:l+"></"+s+">"},Ya={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Ya.optgroup=Ya.option;Ya.tbody=
Ya.tfoot=Ya.colgroup=Ya.caption=Ya.thead;Ya.th=Ya.td;if(!m.support.htmlSerialize)Ya._default=[1,"div<div>","</div>"];m.fn.extend({text:function(b){if(m.isFunction(b))return this.each(function(l){var s=m(this);s.text(b.call(this,l,s.text()))});if(typeof b!=="object"&&b!==e)return this.empty().append((this[0]&&this[0].ownerDocument||S).createTextNode(b));return m.text(this)},wrapAll:function(b){if(m.isFunction(b))return this.each(function(s){m(this).wrapAll(b.call(this,s))});if(this[0]){var l=m(b,this[0].ownerDocument).eq(0).clone(true);
this[0].parentNode&&l.insertBefore(this[0]);l.map(function(){for(var s=this;s.firstChild&&s.firstChild.nodeType===1;)s=s.firstChild;return s}).append(this)}return this},wrapInner:function(b){if(m.isFunction(b))return this.each(function(l){m(this).wrapInner(b.call(this,l))});return this.each(function(){var l=m(this),s=l.contents();s.length?s.wrapAll(b):l.append(b)})},wrap:function(b){return this.each(function(){m(this).wrapAll(b)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,
"body")||m(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.insertBefore(b,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(l){this.parentNode.insertBefore(l,this)});else if(arguments.length){var b=m(arguments[0]);b.push.apply(b,this.toArray());
return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(l){this.parentNode.insertBefore(l,this.nextSibling)});else if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,m(arguments[0]).toArray());return b}},remove:function(b,l){for(var s=0,z;(z=this[s])!=null;s++)if(!b||m.filter(b,[z]).length){if(!l&&z.nodeType===1){m.cleanData(z.getElementsByTagName("*"));m.cleanData([z])}z.parentNode&&
z.parentNode.removeChild(z)}return this},empty:function(){for(var b=0,l;(l=this[b])!=null;b++)for(l.nodeType===1&&m.cleanData(l.getElementsByTagName("*"));l.firstChild;)l.removeChild(l.firstChild);return this},clone:function(b){var l=this.map(function(){if(!m.support.noCloneEvent&&!m.isXMLDoc(this)){var s=this.outerHTML,z=this.ownerDocument;if(!s){s=z.createElement("div");s.appendChild(this.cloneNode(true));s=s.innerHTML}return m.clean([s.replace(Fa,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(Pa,
"")],z)[0]}else return this.cloneNode(true)});if(b===true){J(this,l);J(this.find("*"),l.find("*"))}return l},html:function(b){if(b===e)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Fa,""):null;else if(typeof b==="string"&&!cb.test(b)&&(m.support.leadingWhitespace||!Pa.test(b))&&!Ya[(ka.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(db,La);try{for(var l=0,s=this.length;l<s;l++)if(this[l].nodeType===1){m.cleanData(this[l].getElementsByTagName("*"));this[l].innerHTML=b}}catch(z){this.empty().append(b)}}else m.isFunction(b)?
this.each(function(y){var E=m(this),G=E.html();E.empty().append(function(){return b.call(this,y,G)})}):this.empty().append(b);return this},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(m.isFunction(b))return this.each(function(l){var s=m(this),z=s.html();s.replaceWith(b.call(this,l,z))});if(typeof b!=="string")b=m(b).detach();return this.each(function(){var l=this.nextSibling,s=this.parentNode;m(this).remove();l?m(l).before(b):m(s).append(b)})}else return this.pushStack(m(m.isFunction(b)?
b():b),"replaceWith",b)},detach:function(b){return this.remove(b,true)},domManip:function(b,l,s){var z,y,E=b[0],G=[],P;if(!m.support.checkClone&&arguments.length===3&&typeof E==="string"&&fb.test(E))return this.each(function(){m(this).domManip(b,l,s,true)});if(m.isFunction(E))return this.each(function(Q){var aa=m(this);b[0]=E.call(this,Q,l?aa.html():e);aa.domManip(b,l,s)});if(this[0]){z=E&&E.parentNode;z=m.support.parentNode&&z&&z.nodeType===11&&z.childNodes.length===this.length?{fragment:z}:N(b,
this,G);P=z.fragment;if(y=P.childNodes.length===1?P=P.firstChild:P.firstChild){l=l&&m.nodeName(y,"tr");y=0;for(var O=this.length;y<O;y++)s.call(l?m.nodeName(this[y],"table")?this[y].getElementsByTagName("tbody")[0]||this[y].appendChild(this[y].ownerDocument.createElement("tbody")):this[y]:this[y],y>0||z.cacheable||this.length>1?P.cloneNode(true):P)}G.length&&m.each(G,h)}return this}});m.fragments={};m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(b,l){m.fn[b]=function(s){var z=[];s=m(s);var y=this.length===1&&this[0].parentNode;if(y&&y.nodeType===11&&y.childNodes.length===1&&s.length===1){s[l](this[0]);return this}else{y=0;for(var E=s.length;y<E;y++){var G=(y>0?this.clone(true):this).get();m.fn[l].apply(m(s[y]),G);z=z.concat(G)}return this.pushStack(z,b,s.selector)}}});m.extend({clean:function(b,l,s,z){l=l||S;if(typeof l.createElement==="undefined")l=l.ownerDocument||l[0]&&l[0].ownerDocument||S;for(var y=[],E=0,G;(G=b[E])!=null;E++){if(typeof G===
"number")G+="";if(G){if(typeof G==="string"&&!gb.test(G))G=l.createTextNode(G);else if(typeof G==="string"){G=G.replace(db,La);var P=(ka.exec(G)||["",""])[1].toLowerCase(),O=Ya[P]||Ya._default,Q=O[0],aa=l.createElement("div");for(aa.innerHTML=O[1]+G+O[2];Q--;)aa=aa.lastChild;if(!m.support.tbody){Q=bb.test(G);P=P==="table"&&!Q?aa.firstChild&&aa.firstChild.childNodes:O[1]==="<table>"&&!Q?aa.childNodes:[];for(O=P.length-1;O>=0;--O)m.nodeName(P[O],"tbody")&&!P[O].childNodes.length&&P[O].parentNode.removeChild(P[O])}!m.support.leadingWhitespace&&
Pa.test(G)&&aa.insertBefore(l.createTextNode(Pa.exec(G)[0]),aa.firstChild);G=aa.childNodes}if(G.nodeType)y.push(G);else y=m.merge(y,G)}}if(s)for(E=0;y[E];E++)if(z&&m.nodeName(y[E],"script")&&(!y[E].type||y[E].type.toLowerCase()==="text/javascript"))z.push(y[E].parentNode?y[E].parentNode.removeChild(y[E]):y[E]);else{y[E].nodeType===1&&y.splice.apply(y,[E+1,0].concat(m.makeArray(y[E].getElementsByTagName("script"))));s.appendChild(y[E])}return y},cleanData:function(b){for(var l,s,z=m.cache,y=m.event.special,
E=m.support.deleteExpando,G=0,P;(P=b[G])!=null;G++)if(s=P[m.expando]){l=z[s];if(l.events)for(var O in l.events)y[O]?m.event.remove(P,O):W(P,O,l.handle);if(E)delete P[m.expando];else P.removeAttribute&&P.removeAttribute(m.expando);delete z[s]}}});var Jb=/z-?index|font-?weight|opacity|zoom|line-?height/i,lb=/alpha\([^)]*\)/,Ab=/opacity=([^)]*)/,ub=/float/i,vb=/-([a-z])/ig,ob=/([A-Z])/g,wb=/^-?\d+(?:px)?$/i,mb=/^-?\d/,Kb={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],Bb=
["Top","Bottom"],Cb=S.defaultView&&S.defaultView.getComputedStyle,ia=m.support.cssFloat?"cssFloat":"styleFloat",qb=function(b,l){return l.toUpperCase()};m.fn.css=function(b,l){return r(this,b,l,true,function(s,z,y){if(y===e)return m.curCSS(s,z);if(typeof y==="number"&&!Jb.test(z))y+="px";m.style(s,z,y)})};m.extend({style:function(b,l,s){if(!b||b.nodeType===3||b.nodeType===8)return e;if((l==="width"||l==="height")&&parseFloat(s)<0)s=e;var z=b.style||b,y=s!==e;if(!m.support.opacity&&l==="opacity"){if(y){z.zoom=
1;l=parseInt(s,10)+""==="NaN"?"":"alpha(opacity="+s*100+")";b=z.filter||m.curCSS(b,"filter")||"";z.filter=lb.test(b)?b.replace(lb,l):l}return z.filter&&z.filter.indexOf("opacity=")>=0?parseFloat(Ab.exec(z.filter)[1])/100+"":""}if(ub.test(l))l=ia;l=l.replace(vb,qb);if(y)z[l]=s;return z[l]},css:function(b,l,s,z){if(l==="width"||l==="height"){var y,E=l==="width"?pb:Bb;s=function(){y=l==="width"?b.offsetWidth:b.offsetHeight;z!=="border"&&m.each(E,function(){z||(y-=parseFloat(m.curCSS(b,"padding"+this,
true))||0);if(z==="margin")y+=parseFloat(m.curCSS(b,"margin"+this,true))||0;else y-=parseFloat(m.curCSS(b,"border"+this+"Width",true))||0})};b.offsetWidth!==0?s():m.swap(b,Kb,s);return Math.max(0,Math.round(y))}return m.curCSS(b,l,s)},curCSS:function(b,l,s){var z,y=b.style;if(!m.support.opacity&&l==="opacity"&&b.currentStyle){z=Ab.test(b.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return z===""?"1":z}if(ub.test(l))l=ia;if(!s&&y&&y[l])z=y[l];else if(Cb){if(ub.test(l))l="float";l=l.replace(ob,
"-$1").toLowerCase();y=b.ownerDocument.defaultView;if(!y)return null;if(b=y.getComputedStyle(b,null))z=b.getPropertyValue(l);if(l==="opacity"&&z==="")z="1"}else if(b.currentStyle){s=l.replace(vb,qb);z=b.currentStyle[l]||b.currentStyle[s];if(!wb.test(z)&&mb.test(z)){l=y.left;var E=b.runtimeStyle.left;b.runtimeStyle.left=b.currentStyle.left;y.left=s==="fontSize"?"1em":z||0;z=y.pixelLeft+"px";y.left=l;b.runtimeStyle.left=E}}return z},swap:function(b,l,s){var z={};for(var y in l){z[y]=b.style[y];b.style[y]=
l[y]}s.call(b);for(y in l)b.style[y]=z[y]}});if(m.expr&&m.expr.filters){m.expr.filters.hidden=function(b){var l=b.offsetWidth,s=b.offsetHeight,z=b.nodeName.toLowerCase()==="tr";return l===0&&s===0&&!z?true:l>0&&s>0&&!z?false:m.curCSS(b,"display")==="none"};m.expr.filters.visible=function(b){return!m.expr.filters.hidden(b)}}var nb=p(),xb=/<script(.|\s)*?\/script>/gi,eb=/select|textarea/i,Lb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,ga=/=\?(&|$)/,
rb=/\?/,Db=/(\?|&)_=.*?(&|$)/,Eb=/^(\w+:)?\/\/([^\/?#]+)/,Fb=/%20/g,Gb=m.fn.load;m.fn.extend({load:function(b,l,s){if(typeof b!=="string")return Gb.call(this,b);else if(!this.length)return this;var z=b.indexOf(" ");if(z>=0){var y=b.slice(z,b.length);b=b.slice(0,z)}z="GET";if(l)if(m.isFunction(l)){s=l;l=null}else if(typeof l==="object"){l=m.param(l,m.ajaxSettings.traditional);z="POST"}var E=this;m.ajax({url:b,type:z,dataType:"html",data:l,complete:function(G,P){if(P==="success"||P==="notmodified")E.html(y?
m("<div />").append(G.responseText.replace(xb,"")).find(y):G.responseText);s&&E.each(s,[G.responseText,P,G])}});return this},serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?m.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||eb.test(this.nodeName)||Lb.test(this.type))}).map(function(b,l){b=m(this).val();return b==null?null:m.isArray(b)?m.map(b,function(s){return{name:l.name,
value:s}}):{name:l.name,value:b}}).get()}});m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,l){m.fn[l]=function(s){return this.bind(l,s)}});m.extend({get:function(b,l,s,z){if(m.isFunction(l)){z=z||s;s=l;l=null}return m.ajax({type:"GET",url:b,data:l,success:s,dataType:z})},getScript:function(b,l){return m.get(b,null,l,"script")},getJSON:function(b,l,s){return m.get(b,l,s,"json")},post:function(b,l,s,z){if(m.isFunction(l)){z=z||s;s=l;l={}}return m.ajax({type:"POST",
url:b,data:l,success:s,dataType:z})},ajaxSetup:function(b){m.extend(m.ajaxSettings,b)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:a.XMLHttpRequest&&(a.location.protocol!=="file:"||!a.ActiveXObject)?function(){return new a.XMLHttpRequest}:function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",
json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(b){function l(){y.success&&y.success.call(O,P,G,c);y.global&&z("ajaxSuccess",[c,y])}function s(){y.complete&&y.complete.call(O,c,G);y.global&&z("ajaxComplete",[c,y]);y.global&&!--m.active&&m.event.trigger("ajaxStop")}function z(t,v){(y.context?m(y.context):m.event).trigger(t,v)}var y=m.extend(true,{},m.ajaxSettings,b),E,G,P,O=b&&b.context||y,Q=y.type.toUpperCase();if(y.data&&y.processData&&
typeof y.data!=="string")y.data=m.param(y.data,y.traditional);if(y.dataType==="jsonp"){if(Q==="GET")ga.test(y.url)||(y.url+=(rb.test(y.url)?"&":"?")+(y.jsonp||"callback")+"=?");else if(!y.data||!ga.test(y.data))y.data=(y.data?y.data+"&":"")+(y.jsonp||"callback")+"=?";y.dataType="json"}if(y.dataType==="json"&&(y.data&&ga.test(y.data)||ga.test(y.url))){E=y.jsonpCallback||"jsonp"+nb++;if(y.data)y.data=(y.data+"").replace(ga,"="+E+"$1");y.url=y.url.replace(ga,"="+E+"$1");y.dataType="script";a[E]=a[E]||
function(t){P=t;l();s();a[E]=e;try{delete a[E]}catch(v){}Da&&Da.removeChild(wa)}}if(y.dataType==="script"&&y.cache===null)y.cache=false;if(y.cache===false&&Q==="GET"){var aa=p(),ma=y.url.replace(Db,"$1_="+aa+"$2");y.url=ma+(ma===y.url?(rb.test(y.url)?"&":"?")+"_="+aa:"")}if(y.data&&Q==="GET")y.url+=(rb.test(y.url)?"&":"?")+y.data;y.global&&!m.active++&&m.event.trigger("ajaxStart");aa=(aa=Eb.exec(y.url))&&(aa[1]&&aa[1]!==location.protocol||aa[2]!==location.host);if(y.dataType==="script"&&Q==="GET"&&
aa){var Da=S.getElementsByTagName("head")[0]||S.documentElement,wa=S.createElement("script");wa.src=y.url;if(y.scriptCharset)wa.charset=y.scriptCharset;if(!E){var Ka=false;wa.onload=wa.onreadystatechange=function(){if(!Ka&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){Ka=true;l();s();wa.onload=wa.onreadystatechange=null;Da&&wa.parentNode&&Da.removeChild(wa)}}}Da.insertBefore(wa,Da.firstChild);return e}var ab=false,c=y.xhr();if(c){y.username?c.open(Q,y.url,y.async,y.username,
y.password):c.open(Q,y.url,y.async);try{if(y.data||b&&b.contentType)c.setRequestHeader("Content-Type",y.contentType);if(y.ifModified){m.lastModified[y.url]&&c.setRequestHeader("If-Modified-Since",m.lastModified[y.url]);m.etag[y.url]&&c.setRequestHeader("If-None-Match",m.etag[y.url])}aa||c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Accept",y.dataType&&y.accepts[y.dataType]?y.accepts[y.dataType]+", */*":y.accepts._default)}catch(k){}if(y.beforeSend&&y.beforeSend.call(O,
c,y)===false){y.global&&!--m.active&&m.event.trigger("ajaxStop");c.abort();return false}y.global&&z("ajaxSend",[c,y]);var g=c.onreadystatechange=function(t){if(!c||c.readyState===0||t==="abort"){ab||s();ab=true;if(c)c.onreadystatechange=m.noop}else if(!ab&&c&&(c.readyState===4||t==="timeout")){ab=true;c.onreadystatechange=m.noop;G=t==="timeout"?"timeout":!m.httpSuccess(c)?"error":y.ifModified&&m.httpNotModified(c,y.url)?"notmodified":"success";var v;if(G==="success")try{P=m.httpData(c,y.dataType,
y)}catch(A){G="parsererror";v=A}if(G==="success"||G==="notmodified")E||l();else m.handleError(y,c,G,v);s();t==="timeout"&&c.abort();if(y.async)c=null}};try{var n=c.abort;c.abort=function(){c&&n.call(c);g("abort")}}catch(q){}y.async&&y.timeout>0&&setTimeout(function(){c&&!ab&&g("timeout")},y.timeout);try{c.send(Q==="POST"||Q==="PUT"||Q==="DELETE"?y.data:null)}catch(o){m.handleError(y,c,null,o);s()}y.async||g();return c}},handleError:function(b,l,s,z){if(b.error)b.error.call(b.context||b,l,s,z);if(b.global)(b.context?
m(b.context):m.event).trigger("ajaxError",[l,b,z])},active:0,httpSuccess:function(b){try{return!b.status&&location.protocol==="file:"||b.status>=200&&b.status<300||b.status===304||b.status===1223||b.status===0}catch(l){}return false},httpNotModified:function(b,l){var s=b.getResponseHeader("Last-Modified"),z=b.getResponseHeader("Etag");if(s)m.lastModified[l]=s;if(z)m.etag[l]=z;return b.status===304||b.status===0},httpData:function(b,l,s){var z=b.getResponseHeader("content-type")||"",y=l==="xml"||!l&&
z.indexOf("xml")>=0;b=y?b.responseXML:b.responseText;y&&b.documentElement.nodeName==="parsererror"&&m.error("parsererror");if(s&&s.dataFilter)b=s.dataFilter(b,l);if(typeof b==="string")if(l==="json"||!l&&z.indexOf("json")>=0)b=m.parseJSON(b);else if(l==="script"||!l&&z.indexOf("javascript")>=0)m.globalEval(b);return b},param:function(b,l){function s(G,P){if(m.isArray(P))m.each(P,function(O,Q){l||/\[\]$/.test(G)?z(G,Q):s(G+"["+(typeof Q==="object"||m.isArray(Q)?O:"")+"]",Q)});else!l&&P!=null&&typeof P===
"object"?m.each(P,function(O,Q){s(G+"["+O+"]",Q)}):z(G,P)}function z(G,P){P=m.isFunction(P)?P():P;y[y.length]=encodeURIComponent(G)+"="+encodeURIComponent(P)}var y=[];if(l===e)l=m.ajaxSettings.traditional;if(m.isArray(b)||b.jquery)m.each(b,function(){z(this.name,this.value)});else for(var E in b)s(E,b[E]);return y.join("&").replace(Fb,"+")}});var sb={},yb=/toggle|show|hide/,Hb=/^([+-]=)?([\d+-.]+)(.*)$/,tb,zb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft",
"marginRight","paddingLeft","paddingRight"],["opacity"]];m.fn.extend({show:function(b,l){if(b||b===0)return this.animate(M("show",3),b,l);else{b=0;for(l=this.length;b<l;b++){var s=m.data(this[b],"olddisplay");this[b].style.display=s||"";if(m.css(this[b],"display")==="none"){s=this[b].nodeName;var z;if(sb[s])z=sb[s];else{var y=m("<"+s+" />").appendTo("body");z=y.css("display");if(z==="none")z="block";y.remove();sb[s]=z}m.data(this[b],"olddisplay",z)}}b=0;for(l=this.length;b<l;b++)this[b].style.display=
m.data(this[b],"olddisplay")||"";return this}},hide:function(b,l){if(b||b===0)return this.animate(M("hide",3),b,l);else{b=0;for(l=this.length;b<l;b++){var s=m.data(this[b],"olddisplay");!s&&s!=="none"&&m.data(this[b],"olddisplay",m.css(this[b],"display"))}b=0;for(l=this.length;b<l;b++)this[b].style.display="none";return this}},_toggle:m.fn.toggle,toggle:function(b,l){var s=typeof b==="boolean";if(m.isFunction(b)&&m.isFunction(l))this._toggle.apply(this,arguments);else b==null||s?this.each(function(){var z=
s?b:m(this).is(":hidden");m(this)[z?"show":"hide"]()}):this.animate(M("toggle",3),b,l);return this},fadeTo:function(b,l,s){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:l},b,s)},animate:function(b,l,s,z){var y=m.speed(l,s,z);if(m.isEmptyObject(b))return this.each(y.complete);return this[y.queue===false?"each":"queue"](function(){var E=m.extend({},y),G,P=this.nodeType===1&&m(this).is(":hidden"),O=this;for(G in b){var Q=G.replace(vb,qb);if(G!==Q){b[Q]=b[G];delete b[G];
G=Q}if(b[G]==="hide"&&P||b[G]==="show"&&!P)return E.complete.call(this);if((G==="height"||G==="width")&&this.style){E.display=m.css(this,"display");E.overflow=this.style.overflow}if(m.isArray(b[G])){(E.specialEasing=E.specialEasing||{})[G]=b[G][1];b[G]=b[G][0]}}if(E.overflow!=null)this.style.overflow="hidden";E.curAnim=m.extend({},b);m.each(b,function(aa,ma){var Da=new m.fx(O,E,aa);if(yb.test(ma))Da[ma==="toggle"?P?"show":"hide":ma](b);else{var wa=Hb.exec(ma),Ka=Da.cur(true)||0;if(wa){ma=parseFloat(wa[2]);
var ab=wa[3]||"px";if(ab!=="px"){O.style[aa]=(ma||1)+ab;Ka=(ma||1)/Da.cur(true)*Ka;O.style[aa]=Ka+ab}if(wa[1])ma=(wa[1]==="-="?-1:1)*ma+Ka;Da.custom(Ka,ma,ab)}else Da.custom(Ka,ma,"")}});return true})},stop:function(b,l){var s=m.timers;b&&this.queue([]);this.each(function(){for(var z=s.length-1;z>=0;z--)if(s[z].elem===this){l&&s[z](true);s.splice(z,1)}});l||this.dequeue();return this}});m.each({slideDown:M("show",1),slideUp:M("hide",1),slideToggle:M("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},
function(b,l){m.fn[b]=function(s,z){return this.animate(l,s,z)}});m.extend({speed:function(b,l,s){var z=b&&typeof b==="object"?b:{complete:s||!s&&l||m.isFunction(b)&&b,duration:b,easing:s&&l||l&&!m.isFunction(l)&&l};z.duration=m.fx.off?0:typeof z.duration==="number"?z.duration:m.fx.speeds[z.duration]||m.fx.speeds._default;z.old=z.complete;z.complete=function(){z.queue!==false&&m(this).dequeue();m.isFunction(z.old)&&z.old.call(this)};return z},easing:{linear:function(b,l,s,z){return s+z*b},swing:function(b,
l,s,z){return(-Math.cos(b*Math.PI)/2+0.5)*z+s}},timers:[],fx:function(b,l,s){this.options=l;this.elem=b;this.prop=s;if(!l.orig)l.orig={}}});m.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(m.fx.step[this.prop]||m.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(b){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
return(b=parseFloat(m.css(this.elem,this.prop,b)))&&b>-10000?b:parseFloat(m.curCSS(this.elem,this.prop))||0},custom:function(b,l,s){function z(E){return y.step(E)}this.startTime=p();this.start=b;this.end=l;this.unit=s||this.unit||"px";this.now=this.start;this.pos=this.state=0;var y=this;z.elem=this.elem;if(z()&&m.timers.push(z)&&!tb)tb=setInterval(m.fx.tick,13)},show:function(){this.options.orig[this.prop]=m.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop===
"height"?1:0,this.cur());m(this.elem).show()},hide:function(){this.options.orig[this.prop]=m.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(b){var l=p(),s=true;if(b||l>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var z in this.options.curAnim)if(this.options.curAnim[z]!==true)s=false;if(s){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
b=m.data(this.elem,"olddisplay");this.elem.style.display=b?b:this.options.display;if(m.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&m(this.elem).hide();if(this.options.hide||this.options.show)for(var y in this.options.curAnim)m.style(this.elem,y,this.options.orig[y]);this.options.complete.call(this.elem)}return false}else{y=l-this.startTime;this.state=y/this.options.duration;b=this.options.easing||(m.easing.swing?"swing":"linear");this.pos=m.easing[this.options.specialEasing&&
this.options.specialEasing[this.prop]||b](this.state,y,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};m.extend(m.fx,{tick:function(){for(var b=m.timers,l=0;l<b.length;l++)b[l]()||b.splice(l--,1);b.length||m.fx.stop()},stop:function(){clearInterval(tb);tb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){m.style(b.elem,"opacity",b.now)},_default:function(b){if(b.elem.style&&b.elem.style[b.prop]!=null)b.elem.style[b.prop]=
(b.prop==="width"||b.prop==="height"?Math.max(0,b.now):b.now)+b.unit;else b.elem[b.prop]=b.now}}});if(m.expr&&m.expr.filters)m.expr.filters.animated=function(b){return m.grep(m.timers,function(l){return b===l.elem}).length};m.fn.offset="getBoundingClientRect"in S.documentElement?function(b){var l=this[0];if(b)return this.each(function(y){m.offset.setOffset(this,b,y)});if(!l||!l.ownerDocument)return null;if(l===l.ownerDocument.body)return m.offset.bodyOffset(l);var s=l.getBoundingClientRect(),z=l.ownerDocument;
l=z.body;z=z.documentElement;return{top:s.top+(self.pageYOffset||m.support.boxModel&&z.scrollTop||l.scrollTop)-(z.clientTop||l.clientTop||0),left:s.left+(self.pageXOffset||m.support.boxModel&&z.scrollLeft||l.scrollLeft)-(z.clientLeft||l.clientLeft||0)}}:function(b){var l=this[0];if(b)return this.each(function(aa){m.offset.setOffset(this,b,aa)});if(!l||!l.ownerDocument)return null;if(l===l.ownerDocument.body)return m.offset.bodyOffset(l);m.offset.initialize();var s=l.offsetParent,z=l,y=l.ownerDocument,
E,G=y.documentElement,P=y.body;z=(y=y.defaultView)?y.getComputedStyle(l,null):l.currentStyle;for(var O=l.offsetTop,Q=l.offsetLeft;(l=l.parentNode)&&l!==P&&l!==G;){if(m.offset.supportsFixedPosition&&z.position==="fixed")break;E=y?y.getComputedStyle(l,null):l.currentStyle;O-=l.scrollTop;Q-=l.scrollLeft;if(l===s){O+=l.offsetTop;Q+=l.offsetLeft;if(m.offset.doesNotAddBorder&&!(m.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(l.nodeName))){O+=parseFloat(E.borderTopWidth)||0;Q+=parseFloat(E.borderLeftWidth)||
0}z=s;s=l.offsetParent}if(m.offset.subtractsBorderForOverflowNotVisible&&E.overflow!=="visible"){O+=parseFloat(E.borderTopWidth)||0;Q+=parseFloat(E.borderLeftWidth)||0}z=E}if(z.position==="relative"||z.position==="static"){O+=P.offsetTop;Q+=P.offsetLeft}if(m.offset.supportsFixedPosition&&z.position==="fixed"){O+=Math.max(G.scrollTop,P.scrollTop);Q+=Math.max(G.scrollLeft,P.scrollLeft)}return{top:O,left:Q}};m.offset={initialize:function(){var b=S.body,l=S.createElement("div"),s,z,y,E=parseFloat(m.curCSS(b,
"marginTop",true))||0;m.extend(l.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});l.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.insertBefore(l,b.firstChild);s=l.firstChild;z=s.firstChild;
y=s.nextSibling.firstChild.firstChild;this.doesNotAddBorder=z.offsetTop!==5;this.doesAddBorderForTableAndCells=y.offsetTop===5;z.style.position="fixed";z.style.top="20px";this.supportsFixedPosition=z.offsetTop===20||z.offsetTop===15;z.style.position=z.style.top="";s.style.overflow="hidden";s.style.position="relative";this.subtractsBorderForOverflowNotVisible=z.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=b.offsetTop!==E;b.removeChild(l);m.offset.initialize=m.noop},bodyOffset:function(b){var l=
b.offsetTop,s=b.offsetLeft;m.offset.initialize();if(m.offset.doesNotIncludeMarginInBodyOffset){l+=parseFloat(m.curCSS(b,"marginTop",true))||0;s+=parseFloat(m.curCSS(b,"marginLeft",true))||0}return{top:l,left:s}},setOffset:function(b,l,s){if(/static/.test(m.curCSS(b,"position")))b.style.position="relative";var z=m(b),y=z.offset(),E=parseInt(m.curCSS(b,"top",true),10)||0,G=parseInt(m.curCSS(b,"left",true),10)||0;if(m.isFunction(l))l=l.call(b,s,y);s={top:l.top-y.top+E,left:l.left-y.left+G};"using"in
l?l.using.call(b,s):z.css(s)}};m.fn.extend({position:function(){if(!this[0])return null;var b=this[0],l=this.offsetParent(),s=this.offset(),z=/^body|html$/i.test(l[0].nodeName)?{top:0,left:0}:l.offset();s.top-=parseFloat(m.curCSS(b,"marginTop",true))||0;s.left-=parseFloat(m.curCSS(b,"marginLeft",true))||0;z.top+=parseFloat(m.curCSS(l[0],"borderTopWidth",true))||0;z.left+=parseFloat(m.curCSS(l[0],"borderLeftWidth",true))||0;return{top:s.top-z.top,left:s.left-z.left}},offsetParent:function(){return this.map(function(){for(var b=
this.offsetParent||S.body;b&&!/^body|html$/i.test(b.nodeName)&&m.css(b,"position")==="static";)b=b.offsetParent;return b})}});m.each(["Left","Top"],function(b,l){var s="scroll"+l;m.fn[s]=function(z){var y=this[0],E;if(!y)return null;return z!==e?this.each(function(){if(E=T(this))E.scrollTo(!b?z:m(E).scrollLeft(),b?z:m(E).scrollTop());else this[s]=z}):(E=T(y))?"pageXOffset"in E?E[b?"pageYOffset":"pageXOffset"]:m.support.boxModel&&E.document.documentElement[s]||E.document.body[s]:y[s]}});m.each(["Height",
"Width"],function(b,l){var s=l.toLowerCase();m.fn["inner"+l]=function(){return this[0]?m.css(this[0],s,false,"padding"):null};m.fn["outer"+l]=function(z){return this[0]?m.css(this[0],s,false,z?"margin":"border"):null};m.fn[s]=function(z){var y=this[0];if(!y)return z==null?null:this;if(m.isFunction(z))return this.each(function(E){var G=m(this);G[s](z.call(this,E,G[s]()))});return"scrollTo"in y&&y.document?y.document.compatMode==="CSS1Compat"&&y.document.documentElement["client"+l]||y.document.body["client"+
l]:y.nodeType===9?Math.max(y.documentElement["client"+l],y.body["scroll"+l],y.documentElement["scroll"+l],y.body["offset"+l],y.documentElement["offset"+l]):z===e?m.css(y,s):this.css(s,typeof z==="string"?z:z+"px")}});a.jQuery=a.$=m})(window);var Class={create:function(){function a(){this.initialize.apply(this,arguments)}var e=null,f=$A(arguments);if(Object.isFunction(f[0]))e=f.shift();Object.extend(a,Class.Methods);a.superclass=e;a.subclasses=[];if(e){var h=function(){};h.prototype=e.prototype;a.prototype=new h;e.subclasses.push(a)}for(e=0;e<f.length;e++)a.addMethods(f[e]);if(!a.prototype.initialize)a.prototype.initialize=this.emptyFunction;return a.prototype.constructor=a},emptyFunction:function(){}};
Class.Methods={addMethods:function(a){var e=this.superclass&&this.superclass.prototype,f=Object.keys(a);Object.keys({toString:true}).length||f.push("toString","valueOf");for(var h=0,r=f.length;h<r;h++){var p=f[h],u=a[p];if(e&&Object.isFunction(u)&&u.argumentNames().first()=="$super"){var B=u;u=Object.extend(function(D){return function(){return e[D].apply(this,arguments)}}(p).wrap(B),{valueOf:function(){return B},toString:function(){return B.toString()}})}this.prototype[p]=u}return this}};
Object.extend=function(a,e){for(var f in e)a[f]=e[f];return a};
Object.extend(Object,{inspect:function(a){try{if(Object.isUndefined(a))return"undefined";if(a===null)return"null";return a.inspect?a.inspect():String(a)}catch(e){if(e instanceof RangeError)return"...";throw e;}},toJSON:function(a){switch(typeof a){case "undefined":case "function":case "unknown":return;case "boolean":return a.toString()}if(a===null)return"null";if(a.toJSON)return a.toJSON();if(!Object.isElement(a)){var e=[];for(var f in a){var h=Object.toJSON(a[f]);Object.isUndefined(h)||e.push(f.toJSON()+
": "+h)}return"{"+e.join(", ")+"}"}},toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:function(a){var e=[];for(var f in a)e.push(f);return e},values:function(a){var e=[];for(var f in a)e.push(a[f]);return e},clone:function(a){return Object.extend({},a)},isElement:function(a){return a&&a.nodeType==1},isArray:function(a){return a!=null&&typeof a=="object"&&"splice"in a&&"join"in a},isHash:function(a){return a instanceof
Hash},isFunction:function(a){return typeof a=="function"},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"},isUndefined:function(a){return typeof a=="undefined"}});function $A(a){if(!a)return[];if(a.toArray)return a.toArray();for(var e=a.length||0,f=Array(e);e--;)f[e]=a[e];return f}
if(WebKit=navigator.userAgent.indexOf("AppleWebKit/")>-1)$A=function(a){if(!a)return[];if(!(Object.isFunction(a)&&a=="[object NodeList]")&&a.toArray)return a.toArray();for(var e=a.length||0,f=Array(e);e--;)f[e]=a[e];return f};var b2Settings=Class.create();b2Settings.prototype={initialize:function(){}};b2Settings.USHRT_MAX=65535;b2Settings.b2_pi=Math.PI;b2Settings.b2_massUnitsPerKilogram=1;b2Settings.b2_timeUnitsPerSecond=1;b2Settings.b2_lengthUnitsPerMeter=30;b2Settings.b2_maxManifoldPoints=2;
b2Settings.b2_maxShapesPerBody=64;b2Settings.b2_maxPolyVertices=8;b2Settings.b2_maxProxies=1024;b2Settings.b2_maxPairs=8*b2Settings.b2_maxProxies;b2Settings.b2_linearSlop=0.0050*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_angularSlop=2/180*b2Settings.b2_pi;b2Settings.b2_velocityThreshold=1*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_maxLinearCorrection=0.2*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_maxAngularCorrection=8/180*b2Settings.b2_pi;
b2Settings.b2_contactBaumgarte=0.2;b2Settings.b2_timeToSleep=0.5*b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_linearSleepTolerance=0.01*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_angularSleepTolerance=2/180/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2Assert=function(a){a||(void 0).x++};var b2Vec2=Class.create();
b2Vec2.prototype={initialize:function(a,e){this.x=a;this.y=e},SetZero:function(){this.y=this.x=0},Set:function(a,e){this.x=a;this.y=e},SetV:function(a){this.x=a.x;this.y=a.y},Negative:function(){return new b2Vec2(-this.x,-this.y)},Copy:function(){return new b2Vec2(this.x,this.y)},Add:function(a){this.x+=a.x;this.y+=a.y},Subtract:function(a){this.x-=a.x;this.y-=a.y},Multiply:function(a){this.x*=a;this.y*=a},MulM:function(a){var e=this.x;this.x=a.col1.x*e+a.col2.x*this.y;this.y=a.col1.y*e+a.col2.y*
this.y},MulTM:function(a){var e=b2Math.b2Dot(this,a.col1);this.y=b2Math.b2Dot(this,a.col2);this.x=e},CrossVF:function(a){var e=this.x;this.x=a*this.y;this.y=-a*e},CrossFV:function(a){var e=this.x;this.x=-a*this.y;this.y=a*e},MinV:function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y},MaxV:function(a){this.x=this.x>a.x?this.x:a.x;this.y=this.y>a.y?this.y:a.y},Abs:function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)},Length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},
Normalize:function(){var a=this.Length();if(a<Number.MIN_VALUE)return 0;var e=1/a;this.x*=e;this.y*=e;return a},IsValid:function(){return b2Math.b2IsValid(this.x)&&b2Math.b2IsValid(this.y)},x:null,y:null};b2Vec2.Make=function(a,e){return new b2Vec2(a,e)};var b2Mat22=Class.create();
b2Mat22.prototype={initialize:function(a,e,f){if(a==null)a=0;this.col1=new b2Vec2;this.col2=new b2Vec2;if(e!=null&&f!=null){this.col1.SetV(e);this.col2.SetV(f)}else{e=Math.cos(a);a=Math.sin(a);this.col1.x=e;this.col2.x=-a;this.col1.y=a;this.col2.y=e}},Set:function(a){var e=Math.cos(a);a=Math.sin(a);this.col1.x=e;this.col2.x=-a;this.col1.y=a;this.col2.y=e},SetVV:function(a,e){this.col1.SetV(a);this.col2.SetV(e)},Copy:function(){return new b2Mat22(0,this.col1,this.col2)},SetM:function(a){this.col1.SetV(a.col1);
this.col2.SetV(a.col2)},AddM:function(a){this.col1.x+=a.col1.x;this.col1.y+=a.col1.y;this.col2.x+=a.col2.x;this.col2.y+=a.col2.y},SetIdentity:function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1},SetZero:function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0},Invert:function(a){var e=this.col1.x,f=this.col2.x,h=this.col1.y,r=this.col2.y,p=e*r-f*h;p=1/p;a.col1.x=p*r;a.col2.x=-p*f;a.col1.y=-p*h;a.col2.y=p*e;return a},Solve:function(a,e,f){var h=this.col1.x,r=this.col2.x,p=
this.col1.y,u=this.col2.y,B=h*u-r*p;B=1/B;a.x=B*(u*e-r*f);a.y=B*(h*f-p*e);return a},Abs:function(){this.col1.Abs();this.col2.Abs()},col1:new b2Vec2,col2:new b2Vec2};var b2Math=Class.create();b2Math.prototype={initialize:function(){}};b2Math.b2IsValid=function(a){return isFinite(a)};b2Math.b2Dot=function(a,e){return a.x*e.x+a.y*e.y};b2Math.b2CrossVV=function(a,e){return a.x*e.y-a.y*e.x};b2Math.b2CrossVF=function(a,e){return new b2Vec2(e*a.y,-e*a.x)};
b2Math.b2CrossFV=function(a,e){return new b2Vec2(-a*e.y,a*e.x)};b2Math.b2MulMV=function(a,e){return new b2Vec2(a.col1.x*e.x+a.col2.x*e.y,a.col1.y*e.x+a.col2.y*e.y)};b2Math.b2MulTMV=function(a,e){return new b2Vec2(b2Math.b2Dot(e,a.col1),b2Math.b2Dot(e,a.col2))};b2Math.AddVV=function(a,e){return new b2Vec2(a.x+e.x,a.y+e.y)};b2Math.SubtractVV=function(a,e){return new b2Vec2(a.x-e.x,a.y-e.y)};b2Math.MulFV=function(a,e){return new b2Vec2(a*e.x,a*e.y)};
b2Math.AddMM=function(a,e){return new b2Mat22(0,b2Math.AddVV(a.col1,e.col1),b2Math.AddVV(a.col2,e.col2))};b2Math.b2MulMM=function(a,e){return new b2Mat22(0,b2Math.b2MulMV(a,e.col1),b2Math.b2MulMV(a,e.col2))};b2Math.b2MulTMM=function(a,e){var f=new b2Vec2(b2Math.b2Dot(a.col1,e.col1),b2Math.b2Dot(a.col2,e.col1)),h=new b2Vec2(b2Math.b2Dot(a.col1,e.col2),b2Math.b2Dot(a.col2,e.col2));return new b2Mat22(0,f,h)};b2Math.b2Abs=function(a){return a>0?a:-a};
b2Math.b2AbsV=function(a){return new b2Vec2(b2Math.b2Abs(a.x),b2Math.b2Abs(a.y))};b2Math.b2AbsM=function(a){return new b2Mat22(0,b2Math.b2AbsV(a.col1),b2Math.b2AbsV(a.col2))};b2Math.b2Min=function(a,e){return a<e?a:e};b2Math.b2MinV=function(a,e){return new b2Vec2(b2Math.b2Min(a.x,e.x),b2Math.b2Min(a.y,e.y))};b2Math.b2Max=function(a,e){return a>e?a:e};b2Math.b2MaxV=function(a,e){return new b2Vec2(b2Math.b2Max(a.x,e.x),b2Math.b2Max(a.y,e.y))};
b2Math.b2Clamp=function(a,e,f){return b2Math.b2Max(e,b2Math.b2Min(a,f))};b2Math.b2ClampV=function(a,e,f){return b2Math.b2MaxV(e,b2Math.b2MinV(a,f))};b2Math.b2Swap=function(a,e){var f=a[0];a[0]=e[0];e[0]=f};b2Math.b2Random=function(){return Math.random()*2-1};b2Math.b2NextPowerOfTwo=function(a){a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;a|=a>>16&65535;return a+1};b2Math.b2IsPowerOfTwo=function(a){return a>0&&(a&a-1)==0};b2Math.tempVec2=new b2Vec2;b2Math.tempVec3=new b2Vec2;
b2Math.tempVec4=new b2Vec2;b2Math.tempVec5=new b2Vec2;b2Math.tempMat=new b2Mat22;var b2AABB=Class.create();b2AABB.prototype={IsValid:function(){var a=this.maxVertex.x,e=this.maxVertex.y;a=this.maxVertex.x;e=this.maxVertex.y;a-=this.minVertex.x;e-=this.minVertex.y;return a>=0&&e>=0&&this.minVertex.IsValid()&&this.maxVertex.IsValid()},minVertex:new b2Vec2,maxVertex:new b2Vec2,initialize:function(){this.minVertex=new b2Vec2;this.maxVertex=new b2Vec2}};var b2Bound=Class.create();
b2Bound.prototype={IsLower:function(){return(this.value&1)==0},IsUpper:function(){return(this.value&1)==1},Swap:function(a){var e=this.value,f=this.proxyId,h=this.stabbingCount;this.value=a.value;this.proxyId=a.proxyId;this.stabbingCount=a.stabbingCount;a.value=e;a.proxyId=f;a.stabbingCount=h},value:0,proxyId:0,stabbingCount:0,initialize:function(){}};var b2BoundValues=Class.create();
b2BoundValues.prototype={lowerValues:[0,0],upperValues:[0,0],initialize:function(){this.lowerValues=[0,0];this.upperValues=[0,0]}};var b2Pair=Class.create();
b2Pair.prototype={SetBuffered:function(){this.status|=b2Pair.e_pairBuffered},ClearBuffered:function(){this.status&=~b2Pair.e_pairBuffered},IsBuffered:function(){return(this.status&b2Pair.e_pairBuffered)==b2Pair.e_pairBuffered},SetRemoved:function(){this.status|=b2Pair.e_pairRemoved},ClearRemoved:function(){this.status&=~b2Pair.e_pairRemoved},IsRemoved:function(){return(this.status&b2Pair.e_pairRemoved)==b2Pair.e_pairRemoved},SetFinal:function(){this.status|=b2Pair.e_pairFinal},IsFinal:function(){return(this.status&
b2Pair.e_pairFinal)==b2Pair.e_pairFinal},userData:null,proxyId1:0,proxyId2:0,next:0,status:0,initialize:function(){}};b2Pair.b2_nullPair=b2Settings.USHRT_MAX;b2Pair.b2_nullProxy=b2Settings.USHRT_MAX;b2Pair.b2_tableCapacity=b2Settings.b2_maxPairs;b2Pair.b2_tableMask=b2Pair.b2_tableCapacity-1;b2Pair.e_pairBuffered=1;b2Pair.e_pairRemoved=2;b2Pair.e_pairFinal=4;var b2PairCallback=Class.create();b2PairCallback.prototype={PairAdded:function(){return null},PairRemoved:function(){},initialize:function(){}};
var b2BufferedPair=Class.create();b2BufferedPair.prototype={proxyId1:0,proxyId2:0,initialize:function(){}};var b2PairManager=Class.create();
b2PairManager.prototype={initialize:function(){var a=0;this.m_hashTable=Array(b2Pair.b2_tableCapacity);for(a=0;a<b2Pair.b2_tableCapacity;++a)this.m_hashTable[a]=b2Pair.b2_nullPair;this.m_pairs=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairs[a]=new b2Pair;this.m_pairBuffer=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairBuffer[a]=new b2BufferedPair;for(a=0;a<b2Settings.b2_maxPairs;++a){this.m_pairs[a].proxyId1=b2Pair.b2_nullProxy;this.m_pairs[a].proxyId2=
b2Pair.b2_nullProxy;this.m_pairs[a].userData=null;this.m_pairs[a].status=0;this.m_pairs[a].next=a+1}this.m_pairs[b2Settings.b2_maxPairs-1].next=b2Pair.b2_nullPair;this.m_pairCount=0},Initialize:function(a,e){this.m_broadPhase=a;this.m_callback=e},AddBufferedPair:function(a,e){var f=this.AddPair(a,e);if(f.IsBuffered()==false){f.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=f.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=f.proxyId2;++this.m_pairBufferCount}f.ClearRemoved();
b2BroadPhase.s_validate&&this.ValidateBuffer()},RemoveBufferedPair:function(a,e){var f=this.Find(a,e);if(f!=null){if(f.IsBuffered()==false){f.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=f.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=f.proxyId2;++this.m_pairBufferCount}f.SetRemoved();b2BroadPhase.s_validate&&this.ValidateBuffer()}},Commit:function(){var a=0,e=0,f=this.m_broadPhase.m_proxyPool;for(a=0;a<this.m_pairBufferCount;++a){var h=this.Find(this.m_pairBuffer[a].proxyId1,
this.m_pairBuffer[a].proxyId2);h.ClearBuffered();var r=f[h.proxyId1],p=f[h.proxyId2];if(h.IsRemoved()){h.IsFinal()==true&&this.m_callback.PairRemoved(r.userData,p.userData,h.userData);this.m_pairBuffer[e].proxyId1=h.proxyId1;this.m_pairBuffer[e].proxyId2=h.proxyId2;++e}else if(h.IsFinal()==false){h.userData=this.m_callback.PairAdded(r.userData,p.userData);h.SetFinal()}}for(a=0;a<e;++a)this.RemovePair(this.m_pairBuffer[a].proxyId1,this.m_pairBuffer[a].proxyId2);this.m_pairBufferCount=0;b2BroadPhase.s_validate&&
this.ValidateTable()},AddPair:function(a,e){if(a>e){var f=a;a=e;e=f}f=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask;var h=h=this.FindHash(a,e,f);if(h!=null)return h;var r=this.m_freePair;h=this.m_pairs[r];this.m_freePair=h.next;h.proxyId1=a;h.proxyId2=e;h.status=0;h.userData=null;h.next=this.m_hashTable[f];this.m_hashTable[f]=r;++this.m_pairCount;return h},RemovePair:function(a,e){if(a>e){var f=a;a=e;e=f}for(var h=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask,r=this.m_hashTable[h],p=null;r!=b2Pair.b2_nullPair;)if(b2PairManager.Equals(this.m_pairs[r],
a,e)){f=r;if(p)p.next=this.m_pairs[r].next;else this.m_hashTable[h]=this.m_pairs[r].next;h=this.m_pairs[f];r=h.userData;h.next=this.m_freePair;h.proxyId1=b2Pair.b2_nullProxy;h.proxyId2=b2Pair.b2_nullProxy;h.userData=null;h.status=0;this.m_freePair=f;--this.m_pairCount;return r}else{p=this.m_pairs[r];r=p.next}return null},Find:function(a,e){if(a>e){var f=a;a=e;e=f}f=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask;return this.FindHash(a,e,f)},FindHash:function(a,e,f){for(f=this.m_hashTable[f];f!=b2Pair.b2_nullPair&&
b2PairManager.Equals(this.m_pairs[f],a,e)==false;)f=this.m_pairs[f].next;if(f==b2Pair.b2_nullPair)return null;return this.m_pairs[f]},ValidateBuffer:function(){},ValidateTable:function(){},m_broadPhase:null,m_callback:null,m_pairs:null,m_freePair:0,m_pairCount:0,m_pairBuffer:null,m_pairBufferCount:0,m_hashTable:null};b2PairManager.Hash=function(a,e){var f=e<<16&4294901760|a;f=~f+(f<<15&4294934528);f^=f>>12&1048575;f+=f<<2&4294967292;f^=f>>4&268435455;f*=2057;f^=f>>16&65535;return f};
b2PairManager.Equals=function(a,e,f){return a.proxyId1==e&&a.proxyId2==f};b2PairManager.EqualsPair=function(a,e){return a.proxyId1==e.proxyId1&&a.proxyId2==e.proxyId2};var b2BroadPhase=Class.create();
b2BroadPhase.prototype={initialize:function(a,e){this.m_pairManager=new b2PairManager;this.m_proxyPool=Array(b2Settings.b2_maxPairs);this.m_bounds=Array(2*b2Settings.b2_maxProxies);this.m_queryResults=Array(b2Settings.b2_maxProxies);this.m_quantizationFactor=new b2Vec2;var f=0;this.m_pairManager.Initialize(this,e);this.m_worldAABB=a;for(f=this.m_proxyCount=0;f<b2Settings.b2_maxProxies;f++)this.m_queryResults[f]=0;this.m_bounds=Array(2);for(f=0;f<2;f++){this.m_bounds[f]=Array(2*b2Settings.b2_maxProxies);
for(var h=0;h<2*b2Settings.b2_maxProxies;h++)this.m_bounds[f][h]=new b2Bound}f=a.maxVertex.x;h=a.maxVertex.y;f-=a.minVertex.x;h-=a.minVertex.y;this.m_quantizationFactor.x=b2Settings.USHRT_MAX/f;this.m_quantizationFactor.y=b2Settings.USHRT_MAX/h;for(f=0;f<b2Settings.b2_maxProxies-1;++f){h=new b2Proxy;this.m_proxyPool[f]=h;h.SetNext(f+1);h.timeStamp=0;h.overlapCount=b2BroadPhase.b2_invalid;h.userData=null}h=new b2Proxy;this.m_proxyPool[b2Settings.b2_maxProxies-1]=h;h.SetNext(b2Pair.b2_nullProxy);h.timeStamp=
0;h.overlapCount=b2BroadPhase.b2_invalid;h.userData=null;this.m_freeProxy=0;this.m_timeStamp=1;this.m_queryResultCount=0},InRange:function(a){var e,f,h,r;e=a.minVertex.x;f=a.minVertex.y;e-=this.m_worldAABB.maxVertex.x;f-=this.m_worldAABB.maxVertex.y;h=this.m_worldAABB.minVertex.x;r=this.m_worldAABB.minVertex.y;h-=a.maxVertex.x;r-=a.maxVertex.y;e=b2Math.b2Max(e,h);f=b2Math.b2Max(f,r);return b2Math.b2Max(e,f)<0},GetProxy:function(a){if(a==b2Pair.b2_nullProxy||this.m_proxyPool[a].IsValid()==false)return null;
return this.m_proxyPool[a]},CreateProxy:function(a,e){var f=0,h,r=this.m_freeProxy;h=this.m_proxyPool[r];this.m_freeProxy=h.GetNext();h.overlapCount=0;h.userData=e;h=2*this.m_proxyCount;var p=[],u=[];this.ComputeBounds(p,u,a);for(var B=0;B<2;++B){var D=this.m_bounds[B],F=0,H=0;F=[F];H=[H];this.Query(F,H,p[B],u[B],D,h,B);F=F[0];H=H[0];f=[];var J=0,N=h-H,M,T;for(J=0;J<N;J++){f[J]=new b2Bound;M=f[J];T=D[H+J];M.value=T.value;M.proxyId=T.proxyId;M.stabbingCount=T.stabbingCount}N=f.length;var m=H+2;for(J=
0;J<N;J++){T=f[J];M=D[m+J];M.value=T.value;M.proxyId=T.proxyId;M.stabbingCount=T.stabbingCount}f=[];N=H-F;for(J=0;J<N;J++){f[J]=new b2Bound;M=f[J];T=D[F+J];M.value=T.value;M.proxyId=T.proxyId;M.stabbingCount=T.stabbingCount}N=f.length;m=F+1;for(J=0;J<N;J++){T=f[J];M=D[m+J];M.value=T.value;M.proxyId=T.proxyId;M.stabbingCount=T.stabbingCount}++H;D[F].value=p[B];D[F].proxyId=r;D[H].value=u[B];D[H].proxyId=r;D[F].stabbingCount=F==0?0:D[F-1].stabbingCount;D[H].stabbingCount=D[H-1].stabbingCount;for(f=
F;f<H;++f)D[f].stabbingCount++;for(f=F;f<h+2;++f){F=this.m_proxyPool[D[f].proxyId];if(D[f].IsLower())F.lowerBounds[B]=f;else F.upperBounds[B]=f}}++this.m_proxyCount;for(h=0;h<this.m_queryResultCount;++h)this.m_pairManager.AddBufferedPair(r,this.m_queryResults[h]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();return r},DestroyProxy:function(a){for(var e=this.m_proxyPool[a],f=2*this.m_proxyCount,h=0;h<2;++h){var r=this.m_bounds[h],p=e.lowerBounds[h],u=e.upperBounds[h],
B=r[p].value,D=r[u].value,F=[],H=0,J=u-p-1,N,M;for(H=0;H<J;H++){F[H]=new b2Bound;N=F[H];M=r[p+1+H];N.value=M.value;N.proxyId=M.proxyId;N.stabbingCount=M.stabbingCount}J=F.length;var T=p;for(H=0;H<J;H++){M=F[H];N=r[T+H];N.value=M.value;N.proxyId=M.proxyId;N.stabbingCount=M.stabbingCount}F=[];J=f-u-1;for(H=0;H<J;H++){F[H]=new b2Bound;N=F[H];M=r[u+1+H];N.value=M.value;N.proxyId=M.proxyId;N.stabbingCount=M.stabbingCount}J=F.length;T=u-1;for(H=0;H<J;H++){M=F[H];N=r[T+H];N.value=M.value;N.proxyId=M.proxyId;
N.stabbingCount=M.stabbingCount}J=f-2;for(F=p;F<J;++F){H=this.m_proxyPool[r[F].proxyId];if(r[F].IsLower())H.lowerBounds[h]=F;else H.upperBounds[h]=F}for(J=u-1;p<J;++p)r[p].stabbingCount--;this.Query([0],[0],B,D,r,f-2,h)}for(f=0;f<this.m_queryResultCount;++f)this.m_pairManager.RemoveBufferedPair(a,this.m_queryResults[f]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();e.userData=null;e.overlapCount=b2BroadPhase.b2_invalid;e.lowerBounds[0]=b2BroadPhase.b2_invalid;e.lowerBounds[1]=
b2BroadPhase.b2_invalid;e.upperBounds[0]=b2BroadPhase.b2_invalid;e.upperBounds[1]=b2BroadPhase.b2_invalid;e.SetNext(this.m_freeProxy);this.m_freeProxy=a;--this.m_proxyCount},MoveProxy:function(a,e){var f=0,h=0,r,p,u=0,B;if(!(a==b2Pair.b2_nullProxy||b2Settings.b2_maxProxies<=a))if(e.IsValid()!=false){var D=2*this.m_proxyCount,F=this.m_proxyPool[a],H=new b2BoundValues;this.ComputeBounds(H.lowerValues,H.upperValues,e);var J=new b2BoundValues;for(f=0;f<2;++f){J.lowerValues[f]=this.m_bounds[f][F.lowerBounds[f]].value;
J.upperValues[f]=this.m_bounds[f][F.upperBounds[f]].value}for(f=0;f<2;++f){var N=this.m_bounds[f],M=F.lowerBounds[f],T=F.upperBounds[f],m=H.lowerValues[f],Z=H.upperValues[f],ca=m-N[M].value,S=Z-N[T].value;N[M].value=m;N[T].value=Z;if(ca<0)for(h=M;h>0&&m<N[h-1].value;){r=N[h];p=N[h-1];u=p.proxyId;B=this.m_proxyPool[p.proxyId];p.stabbingCount++;if(p.IsUpper()==true){this.TestOverlap(H,B)&&this.m_pairManager.AddBufferedPair(a,u);B.upperBounds[f]++;r.stabbingCount++}else{B.lowerBounds[f]++;r.stabbingCount--}F.lowerBounds[f]--;
r.Swap(p);--h}if(S>0)for(h=T;h<D-1&&N[h+1].value<=Z;){r=N[h];p=N[h+1];u=p.proxyId;B=this.m_proxyPool[u];p.stabbingCount++;if(p.IsLower()==true){this.TestOverlap(H,B)&&this.m_pairManager.AddBufferedPair(a,u);B.lowerBounds[f]--;r.stabbingCount++}else{B.upperBounds[f]--;r.stabbingCount--}F.upperBounds[f]++;r.Swap(p);h++}if(ca>0)for(h=M;h<D-1&&N[h+1].value<=m;){r=N[h];p=N[h+1];u=p.proxyId;B=this.m_proxyPool[u];p.stabbingCount--;if(p.IsUpper()){this.TestOverlap(J,B)&&this.m_pairManager.RemoveBufferedPair(a,
u);B.upperBounds[f]--;r.stabbingCount--}else{B.lowerBounds[f]--;r.stabbingCount++}F.lowerBounds[f]++;r.Swap(p);h++}if(S<0)for(h=T;h>0&&Z<N[h-1].value;){r=N[h];p=N[h-1];u=p.proxyId;B=this.m_proxyPool[u];p.stabbingCount--;if(p.IsLower()==true){this.TestOverlap(J,B)&&this.m_pairManager.RemoveBufferedPair(a,u);B.lowerBounds[f]++;r.stabbingCount--}else{B.upperBounds[f]++;r.stabbingCount++}F.upperBounds[f]--;r.Swap(p);h--}}}},Commit:function(){this.m_pairManager.Commit()},QueryAABB:function(a,e,f){var h=
[],r=[];this.ComputeBounds(h,r,a);a=[0];var p=[0];this.Query(a,p,h[0],r[0],this.m_bounds[0],2*this.m_proxyCount,0);this.Query(a,p,h[1],r[1],this.m_bounds[1],2*this.m_proxyCount,1);for(r=h=0;r<this.m_queryResultCount&&h<f;++r,++h)e[r]=this.m_proxyPool[this.m_queryResults[r]].userData;this.m_queryResultCount=0;this.IncrementTimeStamp();return h},Validate:function(){for(var a=0;a<2;++a)for(var e=this.m_bounds[a],f=2*this.m_proxyCount,h=0,r=0;r<f;++r)if(e[r].IsLower()==true)h++;else h--},ComputeBounds:function(a,
e,f){var h=f.minVertex.x,r=f.minVertex.y;h=b2Math.b2Min(h,this.m_worldAABB.maxVertex.x);r=b2Math.b2Min(r,this.m_worldAABB.maxVertex.y);h=b2Math.b2Max(h,this.m_worldAABB.minVertex.x);r=b2Math.b2Max(r,this.m_worldAABB.minVertex.y);var p=f.maxVertex.x;f=f.maxVertex.y;p=b2Math.b2Min(p,this.m_worldAABB.maxVertex.x);f=b2Math.b2Min(f,this.m_worldAABB.maxVertex.y);p=b2Math.b2Max(p,this.m_worldAABB.minVertex.x);f=b2Math.b2Max(f,this.m_worldAABB.minVertex.y);a[0]=this.m_quantizationFactor.x*(h-this.m_worldAABB.minVertex.x)&
b2Settings.USHRT_MAX-1;e[0]=this.m_quantizationFactor.x*(p-this.m_worldAABB.minVertex.x)&65535|1;a[1]=this.m_quantizationFactor.y*(r-this.m_worldAABB.minVertex.y)&b2Settings.USHRT_MAX-1;e[1]=this.m_quantizationFactor.y*(f-this.m_worldAABB.minVertex.y)&65535|1},TestOverlapValidate:function(a,e){for(var f=0;f<2;++f){var h=this.m_bounds[f];if(h[a.lowerBounds[f]].value>h[e.upperBounds[f]].value)return false;if(h[a.upperBounds[f]].value<h[e.lowerBounds[f]].value)return false}return true},TestOverlap:function(a,
e){for(var f=0;f<2;++f){var h=this.m_bounds[f];if(a.lowerValues[f]>h[e.upperBounds[f]].value)return false;if(a.upperValues[f]<h[e.lowerBounds[f]].value)return false}return true},Query:function(a,e,f,h,r,p,u){f=b2BroadPhase.BinarySearch(r,p,f);h=b2BroadPhase.BinarySearch(r,p,h);for(p=f;p<h;++p)r[p].IsLower()&&this.IncrementOverlapCount(r[p].proxyId);if(f>0){p=f-1;for(var B=r[p].stabbingCount;B;){if(r[p].IsLower())if(f<=this.m_proxyPool[r[p].proxyId].upperBounds[u]){this.IncrementOverlapCount(r[p].proxyId);
--B}--p}}a[0]=f;e[0]=h},IncrementOverlapCount:function(a){var e=this.m_proxyPool[a];if(e.timeStamp<this.m_timeStamp){e.timeStamp=this.m_timeStamp;e.overlapCount=1}else{e.overlapCount=2;this.m_queryResults[this.m_queryResultCount]=a;++this.m_queryResultCount}},IncrementTimeStamp:function(){if(this.m_timeStamp==b2Settings.USHRT_MAX){for(var a=0;a<b2Settings.b2_maxProxies;++a)this.m_proxyPool[a].timeStamp=0;this.m_timeStamp=1}else++this.m_timeStamp},m_pairManager:new b2PairManager,m_proxyPool:Array(b2Settings.b2_maxPairs),
m_freeProxy:0,m_bounds:Array(2*b2Settings.b2_maxProxies),m_queryResults:Array(b2Settings.b2_maxProxies),m_queryResultCount:0,m_worldAABB:null,m_quantizationFactor:new b2Vec2,m_proxyCount:0,m_timeStamp:0};b2BroadPhase.s_validate=false;b2BroadPhase.b2_invalid=b2Settings.USHRT_MAX;b2BroadPhase.b2_nullEdge=b2Settings.USHRT_MAX;b2BroadPhase.BinarySearch=function(a,e,f){var h=0;for(e-=1;h<=e;){var r=Math.floor((h+e)/2);if(a[r].value>f)e=r-1;else if(a[r].value<f)h=r+1;else return r}return h};
var b2Collision=Class.create();b2Collision.prototype={initialize:function(){}};b2Collision.b2_nullFeature=255;b2Collision.ClipSegmentToLine=function(a,e,f,h){var r=0,p=e[0].v,u=e[1].v,B=b2Math.b2Dot(f,e[0].v)-h;f=b2Math.b2Dot(f,e[1].v)-h;if(B<=0)a[r++]=e[0];if(f<=0)a[r++]=e[1];if(B*f<0){f=B/(B-f);h=a[r].v;h.x=p.x+f*(u.x-p.x);h.y=p.y+f*(u.y-p.y);a[r].id=B>0?e[0].id:e[1].id;++r}return r};
b2Collision.EdgeSeparation=function(a,e,f){var h=a.m_vertices,r=f.m_vertexCount,p=f.m_vertices,u=a.m_normals[e].x,B=a.m_normals[e].y,D=u,F=a.m_R;u=F.col1.x*D+F.col2.x*B;B=F.col1.y*D+F.col2.y*B;var H=u,J=B;F=f.m_R;D=H*F.col1.x+J*F.col1.y;J=H*F.col2.x+J*F.col2.y;H=D;D=0;F=Number.MAX_VALUE;for(var N=0;N<r;++N){var M=p[N];M=M.x*H+M.y*J;if(M<F){F=M;D=N}}F=a.m_R;r=a.m_position.x+(F.col1.x*h[e].x+F.col2.x*h[e].y);a=a.m_position.y+(F.col1.y*h[e].x+F.col2.y*h[e].y);F=f.m_R;e=f.m_position.x+(F.col1.x*p[D].x+
F.col2.x*p[D].y);f=f.m_position.y+(F.col1.y*p[D].x+F.col2.y*p[D].y);e-=r;f-=a;return e*u+f*B};
b2Collision.FindMaxSeparation=function(a,e,f,h){var r=e.m_vertexCount,p=f.m_position.x-e.m_position.x,u=f.m_position.y-e.m_position.y,B=p*e.m_R.col1.x+u*e.m_R.col1.y;u=p*e.m_R.col2.x+u*e.m_R.col2.y;p=0;for(var D=-Number.MAX_VALUE,F=0;F<r;++F){var H=e.m_normals[F].x*B+e.m_normals[F].y*u;if(H>D){D=H;p=F}}B=b2Collision.EdgeSeparation(e,p,f);if(B>0&&h==false)return B;F=p-1>=0?p-1:r-1;H=b2Collision.EdgeSeparation(e,F,f);if(H>0&&h==false)return H;u=p+1<r?p+1:0;var J=b2Collision.EdgeSeparation(e,u,f);if(J>
0&&h==false)return J;if(H>B&&H>J){D=-1;u=F;F=H}else if(J>B){D=1;u=u;F=J}else{a[0]=p;return B}for(;;){p=D==-1?u-1>=0?u-1:r-1:u+1<r?u+1:0;B=b2Collision.EdgeSeparation(e,p,f);if(B>0&&h==false)return B;if(B>F){u=p;F=B}else break}a[0]=u;return F};
b2Collision.FindIncidentEdge=function(a,e,f,h){var r=e.m_vertices,p=h.m_vertexCount,u=h.m_vertices,B=r[f+1==e.m_vertexCount?0:f+1],D=B.x,F=B.y;B=r[f];D-=B.x;F-=B.y;B=D;D=F;F=-B;B=1/Math.sqrt(D*D+F*F);D*=B;F*=B;B=D;r=e.m_R;D=r.col1.x*B+r.col2.x*F;F=r.col1.y*B+r.col2.y*F;e=D;r=h.m_R;B=e*r.col1.x+F*r.col1.y;F=e*r.col2.x+F*r.col2.y;e=B;r=D=0;for(var H=Number.MAX_VALUE,J=0;J<p;++J){var N=J,M=J+1<p?J+1:0;B=u[M];var T=B.x,m=B.y;B=u[N];T-=B.x;m-=B.y;B=T;T=m;m=-B;B=1/Math.sqrt(T*T+m*m);T*=B;m*=B;B=T*e+m*F;
if(B<H){H=B;D=N;r=M}}p=a[0];B=p.v;B.SetV(u[D]);B.MulM(h.m_R);B.Add(h.m_position);p.id.features.referenceFace=f;p.id.features.incidentEdge=D;p.id.features.incidentVertex=D;p=a[1];B=p.v;B.SetV(u[r]);B.MulM(h.m_R);B.Add(h.m_position);p.id.features.referenceFace=f;p.id.features.incidentEdge=D;p.id.features.incidentVertex=r};b2Collision.b2CollidePolyTempVec=new b2Vec2;
b2Collision.b2CollidePoly=function(a,e,f,h){var r=a.pointCount=0,p=[r],u=b2Collision.FindMaxSeparation(p,e,f,h);r=p[0];if(!(u>0&&h==false)){var B=0;p=[B];var D=b2Collision.FindMaxSeparation(p,f,e,h);B=p[0];if(!(D>0&&h==false)){var F=0;if(D>0.98*u+0.0010){u=f;F=B;p=1}else{u=e;e=f;F=r;p=0}f=[new ClipVertex,new ClipVertex];b2Collision.FindIncidentEdge(f,u,F,e);e=u.m_vertices;var H=e[F],J=F+1<u.m_vertexCount?e[F+1]:e[0];r=J.x-H.x;B=J.y-H.y;var N=r,M=u.m_R;r=M.col1.x*N+M.col2.x*B;B=M.col1.y*N+M.col2.y*
B;F=1/Math.sqrt(r*r+B*B);r*=F;B*=F;F=r;e=B;N=F;F=e;e=-N;D=H.x;var T=H.y;N=D;M=u.m_R;D=M.col1.x*N+M.col2.x*T;T=M.col1.y*N+M.col2.y*T;D+=u.m_position.x;T+=u.m_position.y;H=J.x;J=J.y;N=H;M=u.m_R;H=M.col1.x*N+M.col2.x*J;J=M.col1.y*N+M.col2.y*J;H+=u.m_position.x;J+=u.m_position.y;u=F*D+e*T;N=-(r*D+B*T);H=r*H+B*J;J=[new ClipVertex,new ClipVertex];D=[new ClipVertex,new ClipVertex];b2Collision.b2CollidePolyTempVec.Set(-r,-B);M=b2Collision.ClipSegmentToLine(J,f,b2Collision.b2CollidePolyTempVec,N);if(!(M<2)){b2Collision.b2CollidePolyTempVec.Set(r,
B);M=b2Collision.ClipSegmentToLine(D,J,b2Collision.b2CollidePolyTempVec,H);if(!(M<2)){p?a.normal.Set(-F,-e):a.normal.Set(F,e);for(r=f=0;r<b2Settings.b2_maxManifoldPoints;++r){B=D[r].v;B=F*B.x+e*B.y-u;if(B<=0||h==true){H=a.points[f];H.separation=B;H.position.SetV(D[r].v);H.id.Set(D[r].id);H.id.features.flip=p;++f}}a.pointCount=f}}}}};
b2Collision.b2CollideCircle=function(a,e,f,h){a.pointCount=0;var r=f.m_position.x-e.m_position.x,p=f.m_position.y-e.m_position.y,u=r*r+p*p;e=e.m_radius+f.m_radius;if(!(u>e*e&&h==false)){if(u<Number.MIN_VALUE){h=-e;a.normal.Set(0,1)}else{u=Math.sqrt(u);h=u-e;u=1/u;a.normal.x=u*r;a.normal.y=u*p}a.pointCount=1;r=a.points[0];r.id.set_key(0);r.separation=h;r.position.x=f.m_position.x-f.m_radius*a.normal.x;r.position.y=f.m_position.y-f.m_radius*a.normal.y}};
b2Collision.b2CollidePolyAndCircle=function(a,e,f){a.pointCount=0;var h,r,p;r=f.m_position.x-e.m_position.x;p=f.m_position.y-e.m_position.y;var u=e.m_R,B=r*u.col1.x+p*u.col1.y;p=r*u.col2.x+p*u.col2.y;r=B;var D=0,F=-Number.MAX_VALUE;B=f.m_radius;for(h=0;h<e.m_vertexCount;++h){var H=e.m_normals[h].x*(r-e.m_vertices[h].x)+e.m_normals[h].y*(p-e.m_vertices[h].y);if(H>B)return;if(H>F){F=H;D=h}}if(F<Number.MIN_VALUE){a.pointCount=1;p=e.m_normals[D];a.normal.x=u.col1.x*p.x+u.col2.x*p.y;a.normal.y=u.col1.y*
p.x+u.col2.y*p.y;h=a.points[0];h.id.features.incidentEdge=D;h.id.features.incidentVertex=b2Collision.b2_nullFeature;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=F-B}else{F=D+1<e.m_vertexCount?D+1:0;var J=e.m_vertices[F].x-e.m_vertices[D].x;H=e.m_vertices[F].y-e.m_vertices[D].y;var N=Math.sqrt(J*J+H*H);J/=N;H/=N;if(N<Number.MIN_VALUE){r-=e.m_vertices[D].x;p-=e.m_vertices[D].y;
e=Math.sqrt(r*r+p*p);r/=e;p/=e;if(!(e>B)){a.pointCount=1;a.normal.Set(u.col1.x*r+u.col2.x*p,u.col1.y*r+u.col2.y*p);h=a.points[0];h.id.features.incidentEdge=b2Collision.b2_nullFeature;h.id.features.incidentVertex=D;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=e-B}}else{var M=(r-e.m_vertices[D].x)*J+(p-e.m_vertices[D].y)*H;h=a.points[0];h.id.features.incidentEdge=b2Collision.b2_nullFeature;
h.id.features.incidentVertex=b2Collision.b2_nullFeature;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;if(M<=0){J=e.m_vertices[D].x;e=e.m_vertices[D].y;h.id.features.incidentVertex=D}else if(M>=N){J=e.m_vertices[F].x;e=e.m_vertices[F].y;h.id.features.incidentVertex=F}else{J=J*M+e.m_vertices[D].x;e=H*M+e.m_vertices[D].y;h.id.features.incidentEdge=D}r-=J;p-=e;e=Math.sqrt(r*r+p*p);r/=e;p/=e;if(!(e>B)){a.pointCount=1;a.normal.Set(u.col1.x*r+u.col2.x*p,u.col1.y*r+u.col2.y*
p);h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=e-B}}}};b2Collision.b2TestOverlap=function(a,e){var f=e.minVertex,h=a.maxVertex,r=f.x-h.x,p=f.y-h.y;f=a.minVertex;h=e.maxVertex;var u=f.y-h.y;if(r>0||p>0)return false;if(f.x-h.x>0||u>0)return false;return true};var Features=Class.create();
Features.prototype={set_referenceFace:function(a){this._referenceFace=a;this._m_id._key=this._m_id._key&4294967040|this._referenceFace&255},get_referenceFace:function(){return this._referenceFace},_referenceFace:0,set_incidentEdge:function(a){this._incidentEdge=a;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280},get_incidentEdge:function(){return this._incidentEdge},_incidentEdge:0,set_incidentVertex:function(a){this._incidentVertex=a;this._m_id._key=this._m_id._key&4278255615|
this._incidentVertex<<16&16711680},get_incidentVertex:function(){return this._incidentVertex},_incidentVertex:0,set_flip:function(a){this._flip=a;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080},get_flip:function(){return this._flip},_flip:0,_m_id:null,initialize:function(){}};var b2ContactID=Class.create();
b2ContactID.prototype={initialize:function(){this.features=new Features;this.features._m_id=this},Set:function(a){this.set_key(a._key)},Copy:function(){var a=new b2ContactID;a.set_key(this._key);return a},get_key:function(){return this._key},set_key:function(a){this._key=a;this.features._referenceFace=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255},features:new Features,
_key:0};var b2ContactPoint=Class.create();b2ContactPoint.prototype={position:new b2Vec2,separation:null,normalImpulse:null,tangentImpulse:null,id:new b2ContactID,initialize:function(){this.position=new b2Vec2;this.id=new b2ContactID}};var b2Distance=Class.create();b2Distance.prototype={initialize:function(){}};
b2Distance.ProcessTwo=function(a,e,f,h,r){var p=-r[1].x,u=-r[1].y,B=r[0].x-r[1].x,D=r[0].y-r[1].y,F=Math.sqrt(B*B+D*D);B/=F;D/=F;p=p*B+u*D;if(p<=0||F<Number.MIN_VALUE){a.SetV(f[1]);e.SetV(h[1]);f[0].SetV(f[1]);h[0].SetV(h[1]);r[0].SetV(r[1]);return 1}p/=F;a.x=f[1].x+p*(f[0].x-f[1].x);a.y=f[1].y+p*(f[0].y-f[1].y);e.x=h[1].x+p*(h[0].x-h[1].x);e.y=h[1].y+p*(h[0].y-h[1].y);return 2};
b2Distance.ProcessThree=function(a,e,f,h,r){var p=r[0].x,u=r[0].y,B=r[1].x,D=r[1].y,F=r[2].x,H=r[2].y,J=B-p,N=D-u,M=F-p,T=H-u,m=F-B,Z=H-D,ca=-(p*M+u*T),S=F*M+H*T,oa=-(B*m+D*Z);m=F*m+H*Z;if(S<=0&&m<=0){a.SetV(f[2]);e.SetV(h[2]);f[0].SetV(f[2]);h[0].SetV(h[2]);r[0].SetV(r[2]);return 1}N=J*T-N*M;J=N*(p*D-u*B);B=N*(B*H-D*F);if(B<=0&&oa>=0&&m>=0){ca=oa/(oa+m);a.x=f[1].x+ca*(f[2].x-f[1].x);a.y=f[1].y+ca*(f[2].y-f[1].y);e.x=h[1].x+ca*(h[2].x-h[1].x);e.y=h[1].y+ca*(h[2].y-h[1].y);f[0].SetV(f[2]);h[0].SetV(h[2]);
r[0].SetV(r[2]);return 2}p=N*(F*u-H*p);if(p<=0&&ca>=0&&S>=0){ca/=ca+S;a.x=f[0].x+ca*(f[2].x-f[0].x);a.y=f[0].y+ca*(f[2].y-f[0].y);e.x=h[0].x+ca*(h[2].x-h[0].x);e.y=h[0].y+ca*(h[2].y-h[0].y);f[1].SetV(f[2]);h[1].SetV(h[2]);r[1].SetV(r[2]);return 2}ca=B+p+J;ca=1/ca;r=B*ca;ca=p*ca;S=1-r-ca;a.x=r*f[0].x+ca*f[1].x+S*f[2].x;a.y=r*f[0].y+ca*f[1].y+S*f[2].y;e.x=r*h[0].x+ca*h[1].x+S*h[2].x;e.y=r*h[0].y+ca*h[1].y+S*h[2].y;return 3};
b2Distance.InPoinsts=function(a,e,f){for(var h=0;h<f;++h)if(a.x==e[h].x&&a.y==e[h].y)return true;return false};
b2Distance.Distance=function(a,e,f,h){var r=Array(3),p=Array(3),u=Array(3),B=0;a.SetV(f.m_position);e.SetV(h.m_position);for(var D=0,F=0;F<20;++F){var H=e.x-a.x,J=e.y-a.y,N=f.Support(H,J),M=h.Support(-H,-J);D=H*H+J*J;var T=M.x-N.x,m=M.y-N.y;if(D-b2Dot(H*T+J*m)<=0.01*D){if(B==0){a.SetV(N);e.SetV(M)}b2Distance.g_GJK_Iterations=F;return Math.sqrt(D)}switch(B){case 0:r[0].SetV(N);p[0].SetV(M);u[0]=w;a.SetV(r[0]);e.SetV(p[0]);++B;break;case 1:r[1].SetV(N);p[1].SetV(M);u[1].x=T;u[1].y=m;B=b2Distance.ProcessTwo(a,
e,r,p,u);break;case 2:r[2].SetV(N);p[2].SetV(M);u[2].x=T;u[2].y=m;B=b2Distance.ProcessThree(a,e,r,p,u);break}if(B==3){b2Distance.g_GJK_Iterations=F;return 0}H=-Number.MAX_VALUE;for(J=0;J<B;++J)H=b2Math.b2Max(H,u[J].x*u[J].x+u[J].y*u[J].y);if(B==3||D<=100*Number.MIN_VALUE*H){b2Distance.g_GJK_Iterations=F;return Math.sqrt(D)}}b2Distance.g_GJK_Iterations=20;return Math.sqrt(D)};b2Distance.g_GJK_Iterations=0;var b2Manifold=Class.create();
b2Manifold.prototype={initialize:function(){this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactPoint;this.normal=new b2Vec2},points:null,normal:null,pointCount:0};var b2OBB=Class.create();b2OBB.prototype={R:new b2Mat22,center:new b2Vec2,extents:new b2Vec2,initialize:function(){this.R=new b2Mat22;this.center=new b2Vec2;this.extents=new b2Vec2}};var b2Proxy=Class.create();
b2Proxy.prototype={GetNext:function(){return this.lowerBounds[0]},SetNext:function(a){this.lowerBounds[0]=a},IsValid:function(){return this.overlapCount!=b2BroadPhase.b2_invalid},lowerBounds:[0,0],upperBounds:[0,0],overlapCount:0,timeStamp:0,userData:null,initialize:function(){this.lowerBounds=[0,0];this.upperBounds=[0,0]}};var ClipVertex=Class.create();ClipVertex.prototype={v:new b2Vec2,id:new b2ContactID,initialize:function(){this.v=new b2Vec2;this.id=new b2ContactID}};var b2Shape=Class.create();
b2Shape.prototype={TestPoint:function(){return false},GetUserData:function(){return this.m_userData},GetType:function(){return this.m_type},GetBody:function(){return this.m_body},GetPosition:function(){return this.m_position},GetRotationMatrix:function(){return this.m_R},ResetProxy:function(){},GetNext:function(){return this.m_next},initialize:function(a,e){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=
e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex},DestroyProxy:function(){if(this.m_proxyId!=b2Pair.b2_nullProxy){this.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId);this.m_proxyId=b2Pair.b2_nullProxy}},Synchronize:function(){},QuickSync:function(){},Support:function(){},GetMaxRadius:function(){return this.m_maxRadius},m_next:null,m_R:new b2Mat22,m_position:new b2Vec2,m_type:0,m_userData:null,
m_body:null,m_friction:null,m_restitution:null,m_maxRadius:null,m_proxyId:0,m_categoryBits:0,m_maskBits:0,m_groupIndex:0};b2Shape.Create=function(a,e,f){switch(a.type){case b2Shape.e_circleShape:return new b2CircleShape(a,e,f);case b2Shape.e_boxShape:case b2Shape.e_polyShape:return new b2PolyShape(a,e,f)}return null};b2Shape.Destroy=function(a){a.m_proxyId!=b2Pair.b2_nullProxy&&a.m_body.m_world.m_broadPhase.DestroyProxy(a.m_proxyId)};b2Shape.e_unknownShape=-1;b2Shape.e_circleShape=0;
b2Shape.e_boxShape=1;b2Shape.e_polyShape=2;b2Shape.e_meshShape=3;b2Shape.e_shapeTypeCount=4;
b2Shape.PolyMass=function(a,e,f,h){var r=new b2Vec2;r.SetZero();for(var p=0,u=0,B=new b2Vec2(0,0),D=1/3,F=0;F<f;++F){var H=B,J=e[F],N=F+1<f?e[F+1]:e[0],M=b2Math.SubtractVV(J,H),T=b2Math.SubtractVV(N,H),m=b2Math.b2CrossVV(M,T),Z=0.5*m;p+=Z;var ca=new b2Vec2;ca.SetV(H);ca.Add(J);ca.Add(N);ca.Multiply(D*Z);r.Add(ca);J=H.x;H=H.y;N=M.x;M=M.y;Z=T.x;T=T.y;u+=m*(D*(0.25*(N*N+Z*N+Z*Z)+(J*N+J*Z))+0.5*J*J+(D*(0.25*(M*M+T*M+T*T)+(H*M+H*T))+0.5*H*H))}a.mass=h*p;r.Multiply(1/p);a.center=r;u=h*(u-p*b2Math.b2Dot(r,
r));a.I=u};b2Shape.PolyCentroid=function(a,e,f){for(var h=0,r=0,p=0,u=1/3,B=0;B<e;++B){var D=a[B].x,F=a[B].y,H=B+1<e?a[B+1].x:a[0].x,J=B+1<e?a[B+1].y:a[0].y,N=0.5*((D-0)*(J-0)-(F-0)*(H-0));p+=N;h+=N*u*(0+D+H);r+=N*u*(0+F+J)}h*=1/p;r*=1/p;f.Set(h,r)};var b2ShapeDef=Class.create();
b2ShapeDef.prototype={initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0},ComputeMass:function(a){a.center=new b2Vec2(0,0);if(this.density==0){a.mass=0;a.center.Set(0,0);a.I=0}switch(this.type){case b2Shape.e_circleShape:a.mass=this.density*b2Settings.b2_pi*this.radius*this.radius;a.center.Set(0,0);a.I=0.5*a.mass*
this.radius*this.radius;break;case b2Shape.e_boxShape:a.mass=4*this.density*this.extents.x*this.extents.y;a.center.Set(0,0);a.I=a.mass/3*b2Math.b2Dot(this.extents,this.extents);break;case b2Shape.e_polyShape:b2Shape.PolyMass(a,this.vertices,this.vertexCount,this.density);break;default:a.mass=0;a.center.Set(0,0);a.I=0;break}},type:0,userData:null,localPosition:null,localRotation:null,friction:null,restitution:null,density:null,categoryBits:0,maskBits:0,groupIndex:0};var b2BoxDef=Class.create();
Object.extend(b2BoxDef.prototype,b2ShapeDef.prototype);Object.extend(b2BoxDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_boxShape;this.extents=new b2Vec2(1,1)},extents:null});var b2CircleDef=Class.create();Object.extend(b2CircleDef.prototype,b2ShapeDef.prototype);
Object.extend(b2CircleDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_circleShape;this.radius=1},radius:null});var b2CircleShape=Class.create();Object.extend(b2CircleShape.prototype,b2Shape.prototype);
Object.extend(b2CircleShape.prototype,{TestPoint:function(a){var e=new b2Vec2;e.SetV(a);e.Subtract(this.m_position);return b2Math.b2Dot(e,e)<=this.m_radius*this.m_radius},initialize:function(a,e,f){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.m_localPosition=
new b2Vec2;this.m_localPosition.Set(a.localPosition.x-f.x,a.localPosition.y-f.y);this.m_type=b2Shape.e_circleShape;this.m_radius=a.radius;this.m_R.SetM(this.m_body.m_R);a=this.m_R.col1.x*this.m_localPosition.x+this.m_R.col2.x*this.m_localPosition.y;e=this.m_R.col1.y*this.m_localPosition.x+this.m_R.col2.y*this.m_localPosition.y;this.m_position.x=this.m_body.m_position.x+a;this.m_position.y=this.m_body.m_position.y+e;this.m_maxRadius=Math.sqrt(a*a+e*e)+this.m_radius;a=new b2AABB;a.minVertex.Set(this.m_position.x-
this.m_radius,this.m_position.y-this.m_radius);a.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);e=this.m_body.m_world.m_broadPhase;this.m_proxyId=e.InRange(a)?e.CreateProxy(a,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},Synchronize:function(a,e,f,h){this.m_R.SetM(h);this.m_position.x=h.col1.x*this.m_localPosition.x+h.col2.x*this.m_localPosition.y+f.x;this.m_position.y=h.col1.y*this.m_localPosition.x+h.col2.y*this.m_localPosition.y+
f.y;if(this.m_proxyId!=b2Pair.b2_nullProxy){f=a.x+(e.col1.x*this.m_localPosition.x+e.col2.x*this.m_localPosition.y);h=a.y+(e.col1.y*this.m_localPosition.x+e.col2.y*this.m_localPosition.y);a=Math.min(f,this.m_position.x);e=Math.min(h,this.m_position.y);f=Math.max(f,this.m_position.x);var r=Math.max(h,this.m_position.y);h=new b2AABB;h.minVertex.Set(a-this.m_radius,e-this.m_radius);h.maxVertex.Set(f+this.m_radius,r+this.m_radius);a=this.m_body.m_world.m_broadPhase;a.InRange(h)?a.MoveProxy(this.m_proxyId,
h):this.m_body.Freeze()}},QuickSync:function(a,e){this.m_R.SetM(e);this.m_position.x=e.col1.x*this.m_localPosition.x+e.col2.x*this.m_localPosition.y+a.x;this.m_position.y=e.col1.y*this.m_localPosition.x+e.col2.y*this.m_localPosition.y+a.y},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);var e=new b2AABB;e.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);e.maxVertex.Set(this.m_position.x+this.m_radius,
this.m_position.y+this.m_radius);this.m_proxyId=a.InRange(e)?a.CreateProxy(e,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,e,f){var h=Math.sqrt(a*a+e*e);a/=h;e/=h;f.Set(this.m_position.x+this.m_radius*a,this.m_position.y+this.m_radius*e)},m_localPosition:new b2Vec2,m_radius:null});var b2MassData=Class.create();b2MassData.prototype={mass:0,center:new b2Vec2(0,0),I:0,initialize:function(){this.center=new b2Vec2(0,0)}};var b2PolyDef=Class.create();
Object.extend(b2PolyDef.prototype,b2ShapeDef.prototype);
Object.extend(b2PolyDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.vertices=Array(b2Settings.b2_maxPolyVertices);this.type=b2Shape.e_polyShape;for(var a=this.vertexCount=0;a<b2Settings.b2_maxPolyVertices;a++)this.vertices[a]=new b2Vec2},vertices:Array(b2Settings.b2_maxPolyVertices),vertexCount:0});
var b2PolyShape=Class.create();Object.extend(b2PolyShape.prototype,b2Shape.prototype);
Object.extend(b2PolyShape.prototype,{TestPoint:function(a){var e=new b2Vec2;e.SetV(a);e.Subtract(this.m_position);e.MulTM(this.m_R);for(a=0;a<this.m_vertexCount;++a){var f=new b2Vec2;f.SetV(e);f.Subtract(this.m_vertices[a]);if(b2Math.b2Dot(this.m_normals[a],f)>0)return false}return true},initialize:function(a,e,f){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=
0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.syncAABB=new b2AABB;this.syncMat=new b2Mat22;this.m_localCentroid=new b2Vec2;this.m_localOBB=new b2OBB;var h=0,r;e=new b2AABB;this.m_vertices=Array(b2Settings.b2_maxPolyVertices);this.m_coreVertices=Array(b2Settings.b2_maxPolyVertices);this.m_normals=Array(b2Settings.b2_maxPolyVertices);this.m_type=b2Shape.e_polyShape;var p=new b2Mat22(a.localRotation);if(a.type==b2Shape.e_boxShape){this.m_localCentroid.x=
a.localPosition.x-f.x;this.m_localCentroid.y=a.localPosition.y-f.y;this.m_vertexCount=4;f=a.extents.x;r=a.extents.y;a=Math.max(0,f-2*b2Settings.b2_linearSlop);var u=Math.max(0,r-2*b2Settings.b2_linearSlop);h=this.m_vertices[0]=new b2Vec2;h.x=p.col1.x*f+p.col2.x*r;h.y=p.col1.y*f+p.col2.y*r;h=this.m_vertices[1]=new b2Vec2;h.x=p.col1.x*-f+p.col2.x*r;h.y=p.col1.y*-f+p.col2.y*r;h=this.m_vertices[2]=new b2Vec2;h.x=p.col1.x*-f+p.col2.x*-r;h.y=p.col1.y*-f+p.col2.y*-r;h=this.m_vertices[3]=new b2Vec2;h.x=p.col1.x*
f+p.col2.x*-r;h.y=p.col1.y*f+p.col2.y*-r;h=this.m_coreVertices[0]=new b2Vec2;h.x=p.col1.x*a+p.col2.x*u;h.y=p.col1.y*a+p.col2.y*u;h=this.m_coreVertices[1]=new b2Vec2;h.x=p.col1.x*-a+p.col2.x*u;h.y=p.col1.y*-a+p.col2.y*u;h=this.m_coreVertices[2]=new b2Vec2;h.x=p.col1.x*-a+p.col2.x*-u;h.y=p.col1.y*-a+p.col2.y*-u;h=this.m_coreVertices[3]=new b2Vec2;h.x=p.col1.x*a+p.col2.x*-u;h.y=p.col1.y*a+p.col2.y*-u}else{this.m_vertexCount=a.vertexCount;b2Shape.PolyCentroid(a.vertices,a.vertexCount,b2PolyShape.tempVec);
u=b2PolyShape.tempVec.x;var B=b2PolyShape.tempVec.y;this.m_localCentroid.x=a.localPosition.x+(p.col1.x*u+p.col2.x*B)-f.x;this.m_localCentroid.y=a.localPosition.y+(p.col1.y*u+p.col2.y*B)-f.y;for(h=0;h<this.m_vertexCount;++h){this.m_vertices[h]=new b2Vec2;this.m_coreVertices[h]=new b2Vec2;f=a.vertices[h].x-u;r=a.vertices[h].y-B;this.m_vertices[h].x=p.col1.x*f+p.col2.x*r;this.m_vertices[h].y=p.col1.y*f+p.col2.y*r;f=this.m_vertices[h].x;r=this.m_vertices[h].y;var D=Math.sqrt(f*f+r*r);if(D>Number.MIN_VALUE){f*=
1/D;r*=1/D}this.m_coreVertices[h].x=this.m_vertices[h].x-2*b2Settings.b2_linearSlop*f;this.m_coreVertices[h].y=this.m_vertices[h].y-2*b2Settings.b2_linearSlop*r}}a=p=Number.MAX_VALUE;f=-Number.MAX_VALUE;r=-Number.MAX_VALUE;for(h=this.m_maxRadius=0;h<this.m_vertexCount;++h){u=this.m_vertices[h];p=Math.min(p,u.x);a=Math.min(a,u.y);f=Math.max(f,u.x);r=Math.max(r,u.y);this.m_maxRadius=Math.max(this.m_maxRadius,u.Length())}this.m_localOBB.R.SetIdentity();this.m_localOBB.center.Set((p+f)*0.5,(a+r)*0.5);
this.m_localOBB.extents.Set((f-p)*0.5,(r-a)*0.5);for(h=0;h<this.m_vertexCount;++h){this.m_normals[h]=new b2Vec2;p=h;a=h+1<this.m_vertexCount?h+1:0;this.m_normals[h].x=this.m_vertices[a].y-this.m_vertices[p].y;this.m_normals[h].y=-(this.m_vertices[a].x-this.m_vertices[p].x);this.m_normals[h].Normalize()}for(h=0;h<this.m_vertexCount;++h);this.m_R.SetM(this.m_body.m_R);this.m_position.x=this.m_body.m_position.x+(this.m_R.col1.x*this.m_localCentroid.x+this.m_R.col2.x*this.m_localCentroid.y);this.m_position.y=
this.m_body.m_position.y+(this.m_R.col1.y*this.m_localCentroid.x+this.m_R.col2.y*this.m_localCentroid.y);b2PolyShape.tAbsR.col1.x=this.m_R.col1.x*this.m_localOBB.R.col1.x+this.m_R.col2.x*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col1.y=this.m_R.col1.y*this.m_localOBB.R.col1.x+this.m_R.col2.y*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col2.x=this.m_R.col1.x*this.m_localOBB.R.col2.x+this.m_R.col2.x*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.col2.y=this.m_R.col1.y*this.m_localOBB.R.col2.x+this.m_R.col2.y*
this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.Abs();f=b2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y;r=b2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y;h=this.m_position.x+(this.m_R.col1.x*this.m_localOBB.center.x+this.m_R.col2.x*this.m_localOBB.center.y);p=this.m_position.y+(this.m_R.col1.y*this.m_localOBB.center.x+this.m_R.col2.y*this.m_localOBB.center.y);e.minVertex.x=h-f;e.minVertex.y=p-r;
e.maxVertex.x=h+f;e.maxVertex.y=p+r;h=this.m_body.m_world.m_broadPhase;this.m_proxyId=h.InRange(e)?h.CreateProxy(e,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},syncAABB:new b2AABB,syncMat:new b2Mat22,Synchronize:function(a,e,f,h){this.m_R.SetM(h);this.m_position.x=this.m_body.m_position.x+(h.col1.x*this.m_localCentroid.x+h.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(h.col1.y*this.m_localCentroid.x+h.col2.y*this.m_localCentroid.y);
if(this.m_proxyId!=b2Pair.b2_nullProxy){var r,p;r=e.col1;p=e.col2;var u=this.m_localOBB.R.col1,B=this.m_localOBB.R.col2;this.syncMat.col1.x=r.x*u.x+p.x*u.y;this.syncMat.col1.y=r.y*u.x+p.y*u.y;this.syncMat.col2.x=r.x*B.x+p.x*B.y;this.syncMat.col2.y=r.y*B.x+p.y*B.y;this.syncMat.Abs();r=this.m_localCentroid.x+this.m_localOBB.center.x;p=this.m_localCentroid.y+this.m_localOBB.center.y;u=a.x+(e.col1.x*r+e.col2.x*p);a=a.y+(e.col1.y*r+e.col2.y*p);r=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*
this.m_localOBB.extents.y;p=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=u-r;this.syncAABB.minVertex.y=a-p;this.syncAABB.maxVertex.x=u+r;this.syncAABB.maxVertex.y=a+p;r=h.col1;p=h.col2;u=this.m_localOBB.R.col1;B=this.m_localOBB.R.col2;this.syncMat.col1.x=r.x*u.x+p.x*u.y;this.syncMat.col1.y=r.y*u.x+p.y*u.y;this.syncMat.col2.x=r.x*B.x+p.x*B.y;this.syncMat.col2.y=r.y*B.x+p.y*B.y;this.syncMat.Abs();r=this.m_localCentroid.x+this.m_localOBB.center.x;
p=this.m_localCentroid.y+this.m_localOBB.center.y;u=f.x+(h.col1.x*r+h.col2.x*p);a=f.y+(h.col1.y*r+h.col2.y*p);r=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;p=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=Math.min(this.syncAABB.minVertex.x,u-r);this.syncAABB.minVertex.y=Math.min(this.syncAABB.minVertex.y,a-p);this.syncAABB.maxVertex.x=Math.max(this.syncAABB.maxVertex.x,u+r);this.syncAABB.maxVertex.y=
Math.max(this.syncAABB.maxVertex.y,a+p);f=this.m_body.m_world.m_broadPhase;f.InRange(this.syncAABB)?f.MoveProxy(this.m_proxyId,this.syncAABB):this.m_body.Freeze()}},QuickSync:function(a,e){this.m_R.SetM(e);this.m_position.x=a.x+(e.col1.x*this.m_localCentroid.x+e.col2.x*this.m_localCentroid.y);this.m_position.y=a.y+(e.col1.y*this.m_localCentroid.x+e.col2.y*this.m_localCentroid.y)},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);
var e=b2Math.b2MulMM(this.m_R,this.m_localOBB.R);e=b2Math.b2AbsM(e);e=b2Math.b2MulMV(e,this.m_localOBB.extents);var f=b2Math.b2MulMV(this.m_R,this.m_localOBB.center);f.Add(this.m_position);var h=new b2AABB;h.minVertex.SetV(f);h.minVertex.Subtract(e);h.maxVertex.SetV(f);h.maxVertex.Add(e);this.m_proxyId=a.InRange(h)?a.CreateProxy(h,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,e,f){var h=a*this.m_R.col1.x+e*this.m_R.col1.y;a=a*this.m_R.col2.x+
e*this.m_R.col2.y;e=0;for(var r=this.m_coreVertices[0].x*h+this.m_coreVertices[0].y*a,p=1;p<this.m_vertexCount;++p){var u=this.m_coreVertices[p].x*h+this.m_coreVertices[p].y*a;if(u>r){e=p;r=u}}f.Set(this.m_position.x+(this.m_R.col1.x*this.m_coreVertices[e].x+this.m_R.col2.x*this.m_coreVertices[e].y),this.m_position.y+(this.m_R.col1.y*this.m_coreVertices[e].x+this.m_R.col2.y*this.m_coreVertices[e].y))},m_localCentroid:new b2Vec2,m_localOBB:new b2OBB,m_vertices:null,m_coreVertices:null,m_vertexCount:0,
m_normals:null});b2PolyShape.tempVec=new b2Vec2;b2PolyShape.tAbsR=new b2Mat22;var b2Body=Class.create();
b2Body.prototype={SetOriginPosition:function(a,e){if(!this.IsFrozen()){this.m_rotation=e;this.m_R.Set(this.m_rotation);this.m_position=b2Math.AddVV(a,b2Math.b2MulMV(this.m_R,this.m_center));this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var f=this.m_shapeList;f!=null;f=f.m_next)f.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,
this.m_center))},SetCenterPosition:function(a,e){if(!this.IsFrozen()){this.m_rotation=e;this.m_R.Set(this.m_rotation);this.m_position.SetV(a);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var f=this.m_shapeList;f!=null;f=f.m_next)f.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetCenterPosition:function(){return this.m_position},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},
SetLinearVelocity:function(a){this.m_linearVelocity.SetV(a)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(a){this.m_angularVelocity=a},GetAngularVelocity:function(){return this.m_angularVelocity},ApplyForce:function(a,e){if(this.IsSleeping()==false){this.m_force.Add(a);this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(e,this.m_position),a)}},ApplyTorque:function(a){if(this.IsSleeping()==false)this.m_torque+=a},ApplyImpulse:function(a,e){if(this.IsSleeping()==
false){this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,a));this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(e,this.m_position),a)}},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(a){return b2Math.AddVV(this.m_position,b2Math.b2MulMV(this.m_R,a))},GetWorldVector:function(a){return b2Math.b2MulMV(this.m_R,a)},GetLocalPoint:function(a){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(a,this.m_position))},GetLocalVector:function(a){return b2Math.b2MulTMV(this.m_R,
a)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(a){if(a)this.m_flags|=b2Body.e_allowSleepFlag;else{this.m_flags&=~b2Body.e_allowSleepFlag;this.WakeUp()}},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag;this.m_sleepTime=0},GetShapeList:function(){return this.m_shapeList},
GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(a,e){this.sMat0=new b2Mat22;this.m_position=new b2Vec2;this.m_R=new b2Mat22(0);this.m_position0=new b2Vec2;var f=0,h,r;this.m_flags=0;this.m_position.SetV(a.position);this.m_rotation=a.rotation;this.m_R.Set(this.m_rotation);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;
this.m_world=e;this.m_linearDamping=b2Math.b2Clamp(1-a.linearDamping,0,1);this.m_angularDamping=b2Math.b2Clamp(1-a.angularDamping,0,1);this.m_force=new b2Vec2(0,0);this.m_mass=this.m_torque=0;var p=Array(b2Settings.b2_maxShapesPerBody);for(f=0;f<b2Settings.b2_maxShapesPerBody;f++)p[f]=new b2MassData;this.m_shapeCount=0;this.m_center=new b2Vec2(0,0);for(f=0;f<b2Settings.b2_maxShapesPerBody;++f){h=a.shapes[f];if(h==null)break;r=p[f];h.ComputeMass(r);this.m_mass+=r.mass;this.m_center.x+=r.mass*(h.localPosition.x+
r.center.x);this.m_center.y+=r.mass*(h.localPosition.y+r.center.y);++this.m_shapeCount}if(this.m_mass>0){this.m_center.Multiply(1/this.m_mass);this.m_position.Add(b2Math.b2MulMV(this.m_R,this.m_center))}else this.m_flags|=b2Body.e_staticFlag;for(f=this.m_I=0;f<this.m_shapeCount;++f){h=a.shapes[f];r=p[f];this.m_I+=r.I;h=b2Math.SubtractVV(b2Math.AddVV(h.localPosition,r.center),this.m_center);this.m_I+=r.mass*b2Math.b2Dot(h,h)}this.m_invMass=this.m_mass>0?1/this.m_mass:0;this.m_invI=this.m_I>0&&a.preventRotation==
false?1/this.m_I:this.m_I=0;this.m_linearVelocity=b2Math.AddVV(a.linearVelocity,b2Math.b2CrossFV(a.angularVelocity,this.m_center));this.m_angularVelocity=a.angularVelocity;this.m_shapeList=this.m_next=this.m_prev=this.m_contactList=this.m_jointList=null;for(f=0;f<this.m_shapeCount;++f){h=a.shapes[f];r=b2Shape.Create(h,this,this.m_center);r.m_next=this.m_shapeList;this.m_shapeList=r}this.m_sleepTime=0;if(a.allowSleep)this.m_flags|=b2Body.e_allowSleepFlag;if(a.isSleeping)this.m_flags|=b2Body.e_sleepFlag;
if(this.m_flags&b2Body.e_sleepFlag||this.m_invMass==0){this.m_linearVelocity.Set(0,0);this.m_angularVelocity=0}this.m_userData=a.userData},Destroy:function(){for(var a=this.m_shapeList;a;){var e=a;a=a.m_next;b2Shape.Destroy(e)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var a=this.m_shapeList;a!=null;a=a.m_next)a.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)},QuickSyncShapes:function(){for(var a=this.m_shapeList;a!=null;a=a.m_next)a.QuickSync(this.m_position,
this.m_R)},IsConnected:function(a){for(var e=this.m_jointList;e!=null;e=e.next)if(e.other==a)return e.joint.m_collideConnected==false;return false},Freeze:function(){this.m_flags|=b2Body.e_frozenFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;for(var a=this.m_shapeList;a!=null;a=a.m_next)a.DestroyProxy()},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,
m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,m_angularDamping:null,m_sleepTime:null,m_userData:null};b2Body.e_staticFlag=1;b2Body.e_frozenFlag=2;b2Body.e_islandFlag=4;b2Body.e_sleepFlag=8;b2Body.e_allowSleepFlag=16;b2Body.e_destroyFlag=32;var b2BodyDef=Class.create();
b2BodyDef.prototype={initialize:function(){this.shapes=[];this.userData=null;for(var a=0;a<b2Settings.b2_maxShapesPerBody;a++)this.shapes[a]=null;this.position=new b2Vec2(0,0);this.rotation=0;this.linearVelocity=new b2Vec2(0,0);this.angularDamping=this.linearDamping=this.angularVelocity=0;this.allowSleep=true;this.preventRotation=this.isSleeping=false},userData:null,shapes:[],position:null,rotation:null,linearVelocity:null,angularVelocity:null,linearDamping:null,angularDamping:null,allowSleep:null,
isSleeping:null,preventRotation:null,AddShape:function(a){for(var e=0;e<b2Settings.b2_maxShapesPerBody;++e)if(this.shapes[e]==null){this.shapes[e]=a;break}}};var b2CollisionFilter=Class.create();b2CollisionFilter.prototype={ShouldCollide:function(a,e){if(a.m_groupIndex==e.m_groupIndex&&a.m_groupIndex!=0)return a.m_groupIndex>0;return(a.m_maskBits&e.m_categoryBits)!=0&&(a.m_categoryBits&e.m_maskBits)!=0},initialize:function(){}};b2CollisionFilter.b2_defaultFilter=new b2CollisionFilter;
var b2Island=Class.create();
b2Island.prototype={initialize:function(a,e,f,h){var r=0;this.m_bodyCapacity=a;this.m_contactCapacity=e;this.m_jointCapacity=f;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodies=Array(a);for(r=0;r<a;r++)this.m_bodies[r]=null;this.m_contacts=Array(e);for(r=0;r<e;r++)this.m_contacts[r]=null;this.m_joints=Array(f);for(r=0;r<f;r++)this.m_joints[r]=null;this.m_allocator=h},Clear:function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},Solve:function(a,e){var f=0,h;for(f=
0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_linearVelocity.Add(b2Math.MulFV(a.dt,b2Math.AddVV(e,b2Math.MulFV(h.m_invMass,h.m_force))));h.m_angularVelocity+=a.dt*h.m_invI*h.m_torque;h.m_linearVelocity.Multiply(h.m_linearDamping);h.m_angularVelocity*=h.m_angularDamping;h.m_position0.SetV(h.m_position);h.m_rotation0=h.m_rotation}}var r=new b2ContactSolver(this.m_contacts,this.m_contactCount,this.m_allocator);r.PreSolve();for(f=0;f<this.m_jointCount;++f)this.m_joints[f].PrepareVelocitySolver();
for(f=0;f<a.iterations;++f){r.SolveVelocityConstraints();for(h=0;h<this.m_jointCount;++h)this.m_joints[h].SolveVelocityConstraints(a)}for(f=0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_position.x+=a.dt*h.m_linearVelocity.x;h.m_position.y+=a.dt*h.m_linearVelocity.y;h.m_rotation+=a.dt*h.m_angularVelocity;h.m_R.Set(h.m_rotation)}}for(f=0;f<this.m_jointCount;++f)this.m_joints[f].PreparePositionSolver();if(b2World.s_enablePositionCorrection)for(b2Island.m_positionIterationCount=
0;b2Island.m_positionIterationCount<a.iterations;++b2Island.m_positionIterationCount){h=r.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);var p=true;for(f=0;f<this.m_jointCount;++f){var u=this.m_joints[f].SolvePositionConstraints();p=p&&u}if(h&&p)break}r.PostSolve();for(f=0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_R.Set(h.m_rotation);h.SynchronizeShapes();h.m_force.Set(0,0);h.m_torque=0}}},UpdateSleep:function(a){var e=0,f,h=Number.MAX_VALUE,r=b2Settings.b2_linearSleepTolerance*
b2Settings.b2_linearSleepTolerance,p=b2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance;for(e=0;e<this.m_bodyCount;++e){f=this.m_bodies[e];if(f.m_invMass!=0){if((f.m_flags&b2Body.e_allowSleepFlag)==0)h=f.m_sleepTime=0;if((f.m_flags&b2Body.e_allowSleepFlag)==0||f.m_angularVelocity*f.m_angularVelocity>p||b2Math.b2Dot(f.m_linearVelocity,f.m_linearVelocity)>r)h=f.m_sleepTime=0;else{f.m_sleepTime+=a;h=b2Math.b2Min(h,f.m_sleepTime)}}}if(h>=b2Settings.b2_timeToSleep)for(e=0;e<this.m_bodyCount;++e){f=
this.m_bodies[e];f.m_flags|=b2Body.e_sleepFlag}},AddBody:function(a){this.m_bodies[this.m_bodyCount++]=a},AddContact:function(a){this.m_contacts[this.m_contactCount++]=a},AddJoint:function(a){this.m_joints[this.m_jointCount++]=a},m_allocator:null,m_bodies:null,m_contacts:null,m_joints:null,m_bodyCount:0,m_jointCount:0,m_contactCount:0,m_bodyCapacity:0,m_contactCapacity:0,m_jointCapacity:0,m_positionError:null};b2Island.m_positionIterationCount=0;var b2TimeStep=Class.create();
b2TimeStep.prototype={dt:null,inv_dt:null,iterations:0,initialize:function(){}};var b2ContactNode=Class.create();b2ContactNode.prototype={other:null,contact:null,prev:null,next:null,initialize:function(){}};var b2Contact=Class.create();
b2Contact.prototype={GetManifolds:function(){return null},GetManifoldCount:function(){return this.m_manifoldCount},GetNext:function(){return this.m_next},GetShape1:function(){return this.m_shape1},GetShape2:function(){return this.m_shape2},initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);
this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null}},Evaluate:function(){},m_flags:0,m_prev:null,m_next:null,m_node1:new b2ContactNode,m_node2:new b2ContactNode,m_shape1:null,m_shape2:null,m_manifoldCount:0,m_friction:null,m_restitution:null};
b2Contact.e_islandFlag=1;b2Contact.e_destroyFlag=2;b2Contact.AddType=function(a,e,f,h){b2Contact.s_registers[f][h].createFcn=a;b2Contact.s_registers[f][h].destroyFcn=e;b2Contact.s_registers[f][h].primary=true;if(f!=h){b2Contact.s_registers[h][f].createFcn=a;b2Contact.s_registers[h][f].destroyFcn=e;b2Contact.s_registers[h][f].primary=false}};
b2Contact.InitializeRegisters=function(){b2Contact.s_registers=Array(b2Shape.e_shapeTypeCount);for(var a=0;a<b2Shape.e_shapeTypeCount;a++){b2Contact.s_registers[a]=Array(b2Shape.e_shapeTypeCount);for(var e=0;e<b2Shape.e_shapeTypeCount;e++)b2Contact.s_registers[a][e]=new b2ContactRegister}b2Contact.AddType(b2CircleContact.Create,b2CircleContact.Destroy,b2Shape.e_circleShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyAndCircleContact.Create,b2PolyAndCircleContact.Destroy,b2Shape.e_polyShape,b2Shape.e_circleShape);
b2Contact.AddType(b2PolyContact.Create,b2PolyContact.Destroy,b2Shape.e_polyShape,b2Shape.e_polyShape)};b2Contact.Create=function(a,e,f){if(b2Contact.s_initialized==false){b2Contact.InitializeRegisters();b2Contact.s_initialized=true}var h=a.m_type,r=e.m_type,p=b2Contact.s_registers[h][r].createFcn;if(p)if(b2Contact.s_registers[h][r].primary)return p(a,e,f);else{a=p(e,a,f);for(e=0;e<a.GetManifoldCount();++e){f=a.GetManifolds()[e];f.normal=f.normal.Negative()}return a}else return null};
b2Contact.Destroy=function(a,e){if(a.GetManifoldCount()>0){a.m_shape1.m_body.WakeUp();a.m_shape2.m_body.WakeUp()}var f=b2Contact.s_registers[a.m_shape1.m_type][a.m_shape2.m_type].destroyFcn;f(a,e)};b2Contact.s_registers=null;b2Contact.s_initialized=false;var b2ContactConstraint=Class.create();
b2ContactConstraint.prototype={initialize:function(){this.normal=new b2Vec2;this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactConstraintPoint},points:null,normal:new b2Vec2,manifold:null,body1:null,body2:null,friction:null,restitution:null,pointCount:0};var b2ContactConstraintPoint=Class.create();
b2ContactConstraintPoint.prototype={localAnchor1:new b2Vec2,localAnchor2:new b2Vec2,normalImpulse:null,tangentImpulse:null,positionImpulse:null,normalMass:null,tangentMass:null,separation:null,velocityBias:null,initialize:function(){this.localAnchor1=new b2Vec2;this.localAnchor2=new b2Vec2}};var b2ContactRegister=Class.create();b2ContactRegister.prototype={createFcn:null,destroyFcn:null,primary:null,initialize:function(){}};var b2ContactSolver=Class.create();
b2ContactSolver.prototype={initialize:function(a,e,f){this.m_constraints=[];this.m_allocator=f;var h,r;for(f=this.m_constraintCount=0;f<e;++f)this.m_constraintCount+=a[f].GetManifoldCount();for(f=0;f<this.m_constraintCount;f++)this.m_constraints[f]=new b2ContactConstraint;var p=0;for(f=0;f<e;++f){var u=a[f],B=u.m_shape1.m_body,D=u.m_shape2.m_body,F=u.GetManifoldCount(),H=u.GetManifolds(),J=u.m_friction;u=u.m_restitution;for(var N=B.m_linearVelocity.x,M=B.m_linearVelocity.y,T=D.m_linearVelocity.x,
m=D.m_linearVelocity.y,Z=B.m_angularVelocity,ca=D.m_angularVelocity,S=0;S<F;++S){var oa=H[S],Ba=oa.normal.x,Qa=oa.normal.y,Ga=this.m_constraints[p];Ga.body1=B;Ga.body2=D;Ga.manifold=oa;Ga.normal.x=Ba;Ga.normal.y=Qa;Ga.pointCount=oa.pointCount;Ga.friction=J;Ga.restitution=u;for(var Ma=0;Ma<Ga.pointCount;++Ma){var ua=oa.points[Ma],pa=Ga.points[Ma];pa.normalImpulse=ua.normalImpulse;pa.tangentImpulse=ua.tangentImpulse;pa.separation=ua.separation;var Ca=ua.position.x-B.m_position.x,ta=ua.position.y-B.m_position.y,
va=ua.position.x-D.m_position.x;ua=ua.position.y-D.m_position.y;h=pa.localAnchor1;r=B.m_R;h.x=Ca*r.col1.x+ta*r.col1.y;h.y=Ca*r.col2.x+ta*r.col2.y;h=pa.localAnchor2;r=D.m_R;h.x=va*r.col1.x+ua*r.col1.y;h.y=va*r.col2.x+ua*r.col2.y;h=Ca*Ca+ta*ta;r=va*va+ua*ua;var qa=Ca*Ba+ta*Qa,Za=va*Ba+ua*Qa,X=B.m_invMass+D.m_invMass;X+=B.m_invI*(h-qa*qa)+D.m_invI*(r-Za*Za);pa.normalMass=1/X;Za=Qa;X=-Ba;qa=Ca*Za+ta*X;Za=va*Za+ua*X;X=B.m_invMass+D.m_invMass;X+=B.m_invI*(h-qa*qa)+D.m_invI*(r-Za*Za);pa.tangentMass=1/X;
pa.velocityBias=0;if(pa.separation>0)pa.velocityBias=-60*pa.separation;Ca=Ga.normal.x*(T+-ca*ua-N- -Z*ta)+Ga.normal.y*(m+ca*va-M-Z*Ca);if(Ca<-b2Settings.b2_velocityThreshold)pa.velocityBias+=-Ga.restitution*Ca}++p}}},PreSolve:function(){for(var a,e,f=0;f<this.m_constraintCount;++f){var h=this.m_constraints[f],r=h.body1,p=h.body2,u=r.m_invMass,B=r.m_invI,D=p.m_invMass,F=p.m_invI,H=h.normal.x,J=h.normal.y,N=J,M=-H,T=0,m=0;if(b2World.s_enableWarmStarting){m=h.pointCount;for(T=0;T<m;++T){var Z=h.points[T],
ca=Z.normalImpulse*H+Z.tangentImpulse*N,S=Z.normalImpulse*J+Z.tangentImpulse*M;e=r.m_R;a=Z.localAnchor1;var oa=e.col1.x*a.x+e.col2.x*a.y,Ba=e.col1.y*a.x+e.col2.y*a.y;e=p.m_R;a=Z.localAnchor2;var Qa=e.col1.x*a.x+e.col2.x*a.y;a=e.col1.y*a.x+e.col2.y*a.y;r.m_angularVelocity-=B*(oa*S-Ba*ca);r.m_linearVelocity.x-=u*ca;r.m_linearVelocity.y-=u*S;p.m_angularVelocity+=F*(Qa*S-a*ca);p.m_linearVelocity.x+=D*ca;p.m_linearVelocity.y+=D*S;Z.positionImpulse=0}}else{m=h.pointCount;for(T=0;T<m;++T){r=h.points[T];
r.normalImpulse=0;r.tangentImpulse=0;r.positionImpulse=0}}}},SolveVelocityConstraints:function(){for(var a=0,e,f,h,r,p,u,B,D,F=0;F<this.m_constraintCount;++F){var H=this.m_constraints[F],J=H.body1,N=H.body2,M=J.m_angularVelocity,T=J.m_linearVelocity,m=N.m_angularVelocity,Z=N.m_linearVelocity,ca=J.m_invMass,S=J.m_invI,oa=N.m_invMass,Ba=N.m_invI,Qa=H.normal.x,Ga=H.normal.y,Ma=Ga,ua=-Qa,pa=H.pointCount;for(a=0;a<pa;++a){e=H.points[a];p=J.m_R;u=e.localAnchor1;f=p.col1.x*u.x+p.col2.x*u.y;h=p.col1.y*u.x+
p.col2.y*u.y;p=N.m_R;u=e.localAnchor2;r=p.col1.x*u.x+p.col2.x*u.y;p=p.col1.y*u.x+p.col2.y*u.y;u=Z.x+-m*p-T.x- -M*h;B=Z.y+m*r-T.y-M*f;u=-e.normalMass*(u*Qa+B*Ga-e.velocityBias);B=b2Math.b2Max(e.normalImpulse+u,0);u=B-e.normalImpulse;D=u*Qa;u*=Ga;T.x-=ca*D;T.y-=ca*u;M-=S*(f*u-h*D);Z.x+=oa*D;Z.y+=oa*u;m+=Ba*(r*u-p*D);e.normalImpulse=B;u=Z.x+-m*p-T.x- -M*h;B=Z.y+m*r-T.y-M*f;u=e.tangentMass*-(u*Ma+B*ua);B=H.friction*e.normalImpulse;B=b2Math.b2Clamp(e.tangentImpulse+u,-B,B);u=B-e.tangentImpulse;D=u*Ma;
u*=ua;T.x-=ca*D;T.y-=ca*u;M-=S*(f*u-h*D);Z.x+=oa*D;Z.y+=oa*u;m+=Ba*(r*u-p*D);e.tangentImpulse=B}J.m_angularVelocity=M;N.m_angularVelocity=m}},SolvePositionConstraints:function(a){for(var e=0,f,h,r=0;r<this.m_constraintCount;++r){for(var p=this.m_constraints[r],u=p.body1,B=p.body2,D=u.m_position,F=u.m_rotation,H=B.m_position,J=B.m_rotation,N=u.m_invMass,M=u.m_invI,T=B.m_invMass,m=B.m_invI,Z=p.normal.x,ca=p.normal.y,S=p.pointCount,oa=0;oa<S;++oa){var Ba=p.points[oa];f=u.m_R;h=Ba.localAnchor1;var Qa=
f.col1.x*h.x+f.col2.x*h.y,Ga=f.col1.y*h.x+f.col2.y*h.y;f=B.m_R;h=Ba.localAnchor2;var Ma=f.col1.x*h.x+f.col2.x*h.y;f=f.col1.y*h.x+f.col2.y*h.y;h=(H.x+Ma-(D.x+Qa))*Z+(H.y+f-(D.y+Ga))*ca+Ba.separation;e=b2Math.b2Min(e,h);h=a*b2Math.b2Clamp(h+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);h=-Ba.normalMass*h;var ua=Ba.positionImpulse;Ba.positionImpulse=b2Math.b2Max(ua+h,0);h=Ba.positionImpulse-ua;Ba=h*Z;h*=ca;D.x-=N*Ba;D.y-=N*h;F-=M*(Qa*h-Ga*Ba);u.m_R.Set(F);H.x+=T*Ba;H.y+=T*h;J+=m*(Ma*
h-f*Ba);B.m_R.Set(J)}u.m_rotation=F;B.m_rotation=J}return e>=-b2Settings.b2_linearSlop},PostSolve:function(){for(var a=0;a<this.m_constraintCount;++a)for(var e=this.m_constraints[a],f=e.manifold,h=0;h<e.pointCount;++h){var r=f.points[h],p=e.points[h];r.normalImpulse=p.normalImpulse;r.tangentImpulse=p.tangentImpulse}},m_allocator:null,m_constraints:[],m_constraintCount:0};var b2CircleContact=Class.create();Object.extend(b2CircleContact.prototype,b2Contact.prototype);
Object.extend(b2CircleContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0}},Evaluate:function(){b2Collision.b2CollideCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);this.m_manifoldCount=this.m_manifold[0].pointCount>0?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});
b2CircleContact.Create=function(a,e){return new b2CircleContact(a,e)};b2CircleContact.Destroy=function(){};var b2Conservative=Class.create();b2Conservative.prototype={initialize:function(){}};b2Conservative.R1=new b2Mat22;b2Conservative.R2=new b2Mat22;b2Conservative.x1=new b2Vec2;b2Conservative.x2=new b2Vec2;
b2Conservative.Conservative=function(a,e){var f=a.GetBody(),h=e.GetBody(),r=f.m_position.x-f.m_position0.x,p=f.m_position.y-f.m_position0.y,u=f.m_rotation-f.m_rotation0,B=h.m_position.x-h.m_position0.x,D=h.m_position.y-h.m_position0.y,F=h.m_rotation-h.m_rotation0,H=a.GetMaxRadius(),J=e.GetMaxRadius(),N=f.m_position0.x,M=f.m_position0.y,T=f.m_rotation0,m=h.m_position0.x,Z=h.m_position0.y,ca=h.m_rotation0,S=N,oa=M,Ba=T,Qa=m,Ga=Z,Ma=ca;b2Conservative.R1.Set(Ba);b2Conservative.R2.Set(Ma);a.QuickSync(p1,
b2Conservative.R1);e.QuickSync(p2,b2Conservative.R2);var ua=0,pa,Ca;pa=0;for(var ta=true,va=0;va<10;++va){var qa=b2Distance.Distance(b2Conservative.x1,b2Conservative.x2,a,e);if(qa<b2Settings.b2_linearSlop){ta=va==0?false:true;break}if(va==0){pa=b2Conservative.x2.x-b2Conservative.x1.x;Ca=b2Conservative.x2.y-b2Conservative.x1.y;pa=pa*(r-B)+Ca*(p-D)+Math.abs(u)*H+Math.abs(F)*J;if(Math.abs(pa)<Number.MIN_VALUE){ta=false;break}pa=1/pa}qa=ua+qa*pa;if(qa<0||1<qa){ta=false;break}if(qa<(1+100*Number.MIN_VALUE)*
ua){ta=true;break}ua=qa;S=N+ua*v1.x;oa=M+ua*v1.y;Ba=T+ua*u;Qa=m+ua*v2.x;Ga=Z+ua*v2.y;Ma=ca+ua*F;b2Conservative.R1.Set(Ba);b2Conservative.R2.Set(Ma);a.QuickSync(p1,b2Conservative.R1);e.QuickSync(p2,b2Conservative.R2)}if(ta){pa=b2Conservative.x2.x-b2Conservative.x1.x;Ca=b2Conservative.x2.y-b2Conservative.x1.y;r=Math.sqrt(pa*pa+Ca*Ca);if(r>FLT_EPSILON)d*=b2_linearSlop/r;if(f.IsStatic()){f.m_position.x=S;f.m_position.y=oa}else{f.m_position.x=S-pa;f.m_position.y=oa-Ca}f.m_rotation=Ba;f.m_R.Set(Ba);f.QuickSyncShapes();
if(h.IsStatic()){h.m_position.x=Qa;h.m_position.y=Ga}else{h.m_position.x=Qa+pa;h.m_position.y=Ga+Ca}h.m_position.x=Qa+pa;h.m_position.y=Ga+Ca;h.m_rotation=Ma;h.m_R.Set(Ma);h.QuickSyncShapes();return true}a.QuickSync(f.m_position,f.m_R);e.QuickSync(h.m_position,h.m_R);return false};var b2NullContact=Class.create();Object.extend(b2NullContact.prototype,b2Contact.prototype);
Object.extend(b2NullContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null}},Evaluate:function(){},GetManifolds:function(){return null}});var b2PolyAndCircleContact=Class.create();Object.extend(b2PolyAndCircleContact.prototype,b2Contact.prototype);
Object.extend(b2PolyAndCircleContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];b2Settings.b2Assert(this.m_shape1.m_type==b2Shape.e_polyShape);b2Settings.b2Assert(this.m_shape2.m_type==b2Shape.e_circleShape);this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0}},Evaluate:function(){b2Collision.b2CollidePolyAndCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,
false);this.m_manifoldCount=this.m_manifold[0].pointCount>0?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyAndCircleContact.Create=function(a,e){return new b2PolyAndCircleContact(a,e)};b2PolyAndCircleContact.Destroy=function(){};var b2PolyContact=Class.create();Object.extend(b2PolyContact.prototype,b2Contact.prototype);
Object.extend(b2PolyContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m0=new b2Manifold;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0}},m0:new b2Manifold,Evaluate:function(){for(var a=this.m_manifold[0],e=this.m0.points,f=0;f<a.pointCount;f++){var h=e[f],r=a.points[f];h.normalImpulse=r.normalImpulse;h.tangentImpulse=r.tangentImpulse;h.id=r.id.Copy()}this.m0.pointCount=a.pointCount;b2Collision.b2CollidePoly(a,this.m_shape1,
this.m_shape2,false);if(a.pointCount>0){e=[false,false];for(f=0;f<a.pointCount;++f){h=a.points[f];h.normalImpulse=0;h.tangentImpulse=0;r=h.id.key;for(var p=0;p<this.m0.pointCount;++p)if(e[p]!=true){var u=this.m0.points[p];if(u.id.key==r){e[p]=true;h.normalImpulse=u.normalImpulse;h.tangentImpulse=u.tangentImpulse;break}}}this.m_manifoldCount=1}else this.m_manifoldCount=0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});
b2PolyContact.Create=function(a,e){return new b2PolyContact(a,e)};b2PolyContact.Destroy=function(){};var b2ContactManager=Class.create();Object.extend(b2ContactManager.prototype,b2PairCallback.prototype);
Object.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact;this.m_world=null;this.m_destroyImmediate=false},PairAdded:function(a,e){var f=a,h=e,r=f.m_body,p=h.m_body;if(r.IsStatic()&&p.IsStatic())return this.m_nullContact;if(f.m_body==h.m_body)return this.m_nullContact;if(p.IsConnected(r))return this.m_nullContact;if(this.m_world.m_filter!=null&&this.m_world.m_filter.ShouldCollide(f,h)==false)return this.m_nullContact;if(p.m_invMass==0){r=f;f=h;h=r}f=b2Contact.Create(f,
h,this.m_world.m_blockAllocator);if(f==null)return this.m_nullContact;else{f.m_prev=null;f.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null)this.m_world.m_contactList.m_prev=f;this.m_world.m_contactList=f;this.m_world.m_contactCount++}return f},PairRemoved:function(a,e,f){if(f!=null)if(f!=this.m_nullContact)if(this.m_destroyImmediate==true)this.DestroyContact(f);else f.m_flags|=b2Contact.e_destroyFlag},DestroyContact:function(a){if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=
a.m_prev;if(a==this.m_world.m_contactList)this.m_world.m_contactList=a.m_next;if(a.GetManifoldCount()>0){var e=a.m_shape1.m_body,f=a.m_shape2.m_body,h=a.m_node1,r=a.m_node2;e.WakeUp();f.WakeUp();if(h.prev)h.prev.next=h.next;if(h.next)h.next.prev=h.prev;if(h==e.m_contactList)e.m_contactList=h.next;h.prev=null;h.next=null;if(r.prev)r.prev.next=r.next;if(r.next)r.next.prev=r.prev;if(r==f.m_contactList)f.m_contactList=r.next;r.prev=null;r.next=null}b2Contact.Destroy(a,this.m_world.m_blockAllocator);--this.m_world.m_contactCount},
CleanContactList:function(){for(var a=this.m_world.m_contactList;a!=null;){var e=a;a=a.m_next;e.m_flags&b2Contact.e_destroyFlag&&this.DestroyContact(e)}},Collide:function(){for(var a,e,f,h,r=this.m_world.m_contactList;r!=null;r=r.m_next)if(!(r.m_shape1.m_body.IsSleeping()&&r.m_shape2.m_body.IsSleeping())){a=r.GetManifoldCount();r.Evaluate();e=r.GetManifoldCount();if(a==0&&e>0){a=r.m_shape1.m_body;e=r.m_shape2.m_body;f=r.m_node1;h=r.m_node2;f.contact=r;f.other=e;f.prev=null;f.next=a.m_contactList;
if(f.next!=null)f.next.prev=r.m_node1;a.m_contactList=r.m_node1;h.contact=r;h.other=a;h.prev=null;h.next=e.m_contactList;if(h.next!=null)h.next.prev=h;e.m_contactList=h}else if(a>0&&e==0){a=r.m_shape1.m_body;e=r.m_shape2.m_body;f=r.m_node1;h=r.m_node2;if(f.prev)f.prev.next=f.next;if(f.next)f.next.prev=f.prev;if(f==a.m_contactList)a.m_contactList=f.next;f.prev=null;f.next=null;if(h.prev)h.prev.next=h.next;if(h.next)h.next.prev=h.prev;if(h==e.m_contactList)e.m_contactList=h.next;h.prev=null;h.next=
null}}},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});var b2World=Class.create();
b2World.prototype={initialize:function(a,e,f){this.step=new b2TimeStep;this.m_contactManager=new b2ContactManager;this.m_listener=null;this.m_filter=b2CollisionFilter.b2_defaultFilter;this.m_jointList=this.m_contactList=this.m_bodyList=null;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodyDestroyList=null;this.m_allowSleep=f;this.m_gravity=e;this.m_contactManager.m_world=this;this.m_broadPhase=new b2BroadPhase(a,this.m_contactManager);this.m_groundBody=this.CreateBody(new b2BodyDef)},
SetListener:function(a){this.m_listener=a},SetFilter:function(a){this.m_filter=a},CreateBody:function(a){a=new b2Body(a,this);a.m_prev=null;if(a.m_next=this.m_bodyList)this.m_bodyList.m_prev=a;this.m_bodyList=a;++this.m_bodyCount;return a},DestroyBody:function(a){if(!(a.m_flags&b2Body.e_destroyFlag)){if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_bodyList)this.m_bodyList=a.m_next;a.m_flags|=b2Body.e_destroyFlag;--this.m_bodyCount;a.m_prev=null;a.m_next=this.m_bodyDestroyList;
this.m_bodyDestroyList=a}},CleanBodyList:function(){this.m_contactManager.m_destroyImmediate=true;for(var a=this.m_bodyDestroyList;a;){var e=a;a=a.m_next;for(var f=e.m_jointList;f;){var h=f;f=f.next;this.m_listener&&this.m_listener.NotifyJointDestroyed(h.joint);this.DestroyJoint(h.joint)}e.Destroy()}this.m_bodyDestroyList=null;this.m_contactManager.m_destroyImmediate=false},CreateJoint:function(a){var e=b2Joint.Create(a,this.m_blockAllocator);e.m_prev=null;if(e.m_next=this.m_jointList)this.m_jointList.m_prev=
e;this.m_jointList=e;++this.m_jointCount;e.m_node1.joint=e;e.m_node1.other=e.m_body2;e.m_node1.prev=null;if(e.m_node1.next=e.m_body1.m_jointList)e.m_body1.m_jointList.prev=e.m_node1;e.m_body1.m_jointList=e.m_node1;e.m_node2.joint=e;e.m_node2.other=e.m_body1;e.m_node2.prev=null;if(e.m_node2.next=e.m_body2.m_jointList)e.m_body2.m_jointList.prev=e.m_node2;e.m_body2.m_jointList=e.m_node2;if(a.collideConnected==false)for(a=(a.body1.m_shapeCount<a.body2.m_shapeCount?a.body1:a.body2).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase);
return e},DestroyJoint:function(a){var e=a.m_collideConnected;if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_jointList)this.m_jointList=a.m_next;var f=a.m_body1,h=a.m_body2;f.WakeUp();h.WakeUp();if(a.m_node1.prev)a.m_node1.prev.next=a.m_node1.next;if(a.m_node1.next)a.m_node1.next.prev=a.m_node1.prev;if(a.m_node1==f.m_jointList)f.m_jointList=a.m_node1.next;a.m_node1.prev=null;a.m_node1.next=null;if(a.m_node2.prev)a.m_node2.prev.next=a.m_node2.next;if(a.m_node2.next)a.m_node2.next.prev=
a.m_node2.prev;if(a.m_node2==h.m_jointList)h.m_jointList=a.m_node2.next;a.m_node2.prev=null;a.m_node2.next=null;b2Joint.Destroy(a,this.m_blockAllocator);--this.m_jointCount;if(e==false)for(a=(f.m_shapeCount<h.m_shapeCount?f:h).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase)},GetGroundBody:function(){return this.m_groundBody},step:new b2TimeStep,Step:function(a,e){var f,h;this.step.dt=a;this.step.iterations=e;this.step.inv_dt=a>0?1/a:0;this.m_positionIterationCount=0;this.m_contactManager.CleanContactList();
this.CleanBodyList();this.m_contactManager.Collide();var r=new b2Island(this.m_bodyCount,this.m_contactCount,this.m_jointCount,this.m_stackAllocator);for(f=this.m_bodyList;f!=null;f=f.m_next)f.m_flags&=~b2Body.e_islandFlag;for(var p=this.m_contactList;p!=null;p=p.m_next)p.m_flags&=~b2Contact.e_islandFlag;for(p=this.m_jointList;p!=null;p=p.m_next)p.m_islandFlag=false;p=Array(this.m_bodyCount);for(var u=0;u<this.m_bodyCount;u++)p[u]=null;for(u=this.m_bodyList;u!=null;u=u.m_next)if(!(u.m_flags&(b2Body.e_staticFlag|
b2Body.e_islandFlag|b2Body.e_sleepFlag|b2Body.e_frozenFlag))){r.Clear();var B=0;p[B++]=u;for(u.m_flags|=b2Body.e_islandFlag;B>0;){f=p[--B];r.AddBody(f);f.m_flags&=~b2Body.e_sleepFlag;if(!(f.m_flags&b2Body.e_staticFlag)){for(var D=f.m_contactList;D!=null;D=D.next)if(!(D.contact.m_flags&b2Contact.e_islandFlag)){r.AddContact(D.contact);D.contact.m_flags|=b2Contact.e_islandFlag;h=D.other;if(!(h.m_flags&b2Body.e_islandFlag)){p[B++]=h;h.m_flags|=b2Body.e_islandFlag}}for(f=f.m_jointList;f!=null;f=f.next)if(f.joint.m_islandFlag!=
true){r.AddJoint(f.joint);f.joint.m_islandFlag=true;h=f.other;if(!(h.m_flags&b2Body.e_islandFlag)){p[B++]=h;h.m_flags|=b2Body.e_islandFlag}}}}r.Solve(this.step,this.m_gravity);this.m_positionIterationCount=b2Math.b2Max(this.m_positionIterationCount,b2Island.m_positionIterationCount);this.m_allowSleep&&r.UpdateSleep(a);for(h=0;h<r.m_bodyCount;++h){f=r.m_bodies[h];if(f.m_flags&b2Body.e_staticFlag)f.m_flags&=~b2Body.e_islandFlag;if(f.IsFrozen()&&this.m_listener)if(this.m_listener.NotifyBoundaryViolated(f)==
b2WorldListener.b2_destroyBody){this.DestroyBody(f);r.m_bodies[h]=null}}}this.m_broadPhase.Commit()},Query:function(a,e,f){var h=[];a=this.m_broadPhase.QueryAABB(a,h,f);for(f=0;f<a;++f)e[f]=h[f];return a},GetBodyList:function(){return this.m_bodyList},GetJointList:function(){return this.m_jointList},GetContactList:function(){return this.m_contactList},m_blockAllocator:null,m_stackAllocator:null,m_broadPhase:null,m_contactManager:new b2ContactManager,m_bodyList:null,m_contactList:null,m_jointList:null,
m_bodyCount:0,m_contactCount:0,m_jointCount:0,m_bodyDestroyList:null,m_gravity:null,m_allowSleep:null,m_groundBody:null,m_listener:null,m_filter:null,m_positionIterationCount:0};b2World.s_enablePositionCorrection=1;b2World.s_enableWarmStarting=1;var b2WorldListener=Class.create();b2WorldListener.prototype={NotifyJointDestroyed:function(){},NotifyBoundaryViolated:function(){return b2WorldListener.b2_freezeBody},initialize:function(){}};b2WorldListener.b2_freezeBody=0;
b2WorldListener.b2_destroyBody=1;jQuery.preloadCssImages=function(a){function e(){clearTimeout(B);if(p&&p.length&&p[r]){r++;if(a.statusTextEl){var D=p[r]?"Now Loading: <span>"+p[r].split("/")[p[r].split("/").length-1]:"Loading complete";jQuery(a.statusTextEl).html('<span class="numLoaded">'+r+'</span> of <span class="numTotal">'+p.length+'</span> loaded (<span class="percentLoaded">'+(r/p.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+D+"</span></span>")}if(a.statusBarEl){D=jQuery(a.statusBarEl).width();jQuery(a.statusBarEl).css("background-position",
-(D-(D*r/p.length).toFixed(0))+"px 50%")}f()}}function f(){if(p&&p.length&&p[r]){var D=new Image;D.src=p[r];D.complete?e():jQuery(D).bind("error load onreadystatechange",e);B=setTimeout(e,a.errorDelay)}}function h(D,F){for(var H=[],J=[],N,M=D.length;M--;){var T="";if(F&&F[M])N=F[M];else{N=(D[M].href?D[M].href:"window.location.href").split("/");N.pop();if(N=N.join("/"))N+="/"}if(D[M].cssRules||D[M].rules){u=D[M].cssRules?D[M].cssRules:D[M].rules;for(var m=u.length;m--;)if(u[m].style&&u[m].style.cssText){var Z=
u[m].style.cssText;if(Z.toLowerCase().indexOf("url")!=-1)T+=Z}}if(T=T.match(/[^\("]+\.(gif|jpg|jpeg|png)/g))for(m=T.length;m--;){Z=T[m].charAt(0)=="/"||T[m].match("://")?T[m]:N+T[m];jQuery.inArray(Z,p)==-1&&p.push(Z)}if(D[M].imports&&D[M].imports.length){T=0;for(m=D[M].imports.length;T<m;T++){Z=D[M].imports[T].href;Z=Z.split("/");Z.pop();if(Z=Z.join("/"))Z+="/";Z=Z.charAt(0)=="/"||Z.match("://")?Z:N+Z;J.push(Z);H.push(D[M].imports[T])}}}if(H.length){h(H,J);return false}for(H=a.simultaneousCacheLoading;H--;)setTimeout(f,
H)}a=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,simultaneousCacheLoading:2},a);var r=0,p=[],u,B;h(document.styleSheets);return p};(function(a){function e(){var p=r.parse(this.title);isNaN(p)||a(this).text(f(p));return this}function f(p){return r.inWords((new Date).getTime()-p.getTime())}function h(p,u){return(a.isFunction(p)?p(u):p).replace(/%d/i,u)}a.timeago=function(p){return p instanceof Date?f(p):typeof p=="string"?f(a.timeago.parse(p)):f(a.timeago.parse(a(p).attr("title")))};var r=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",
ago:null,fromNow:null,seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}},inWords:function(p){var u=this.settings.strings,B=u.prefixAgo,D=u.suffixAgo||u.ago;if(this.settings.allowFuture){if(p<0){B=u.prefixFromNow;D=u.suffixFromNow||u.fromNow}p=Math.abs(p)}p=p/1E3;var F=p/60,H=F/60,J=H/24,N=J/365;u=p<45&&h(u.seconds,Math.round(p))||
p<90&&h(u.minute,1)||F<45&&h(u.minutes,Math.round(F))||F<90&&h(u.hour,1)||H<24&&h(u.hours,Math.round(H))||H<48&&h(u.day,1)||J<30&&h(u.days,Math.floor(J))||J<60&&h(u.month,1)||J<365&&h(u.months,Math.floor(J/30))||N<2&&h(u.year,1)||h(u.years,Math.floor(N));return a.trim([B,u,D].join(" "))},parse:function(p){p=a.trim(p);p=p.replace(/-/,"/").replace(/-/,"/");p=p.replace(/T/," ").replace(/Z/," UTC");p=p.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(p)}});a.fn.timeago=function(){var p=this;p.each(e);
var u=r.settings;u.refreshMillis>0&&setInterval(function(){p.each(e)},u.refreshMillis);return p};a.browser.msie&&a.browser.version<7&&document.createElement("abbr")})(jQuery);Raphael=function(){function a(){if(a.is(arguments[0],Sa)){for(var c=arguments[0],k=yb[Ia](a,c.splice(0,3+a.is(c[0],K))),g=k.set(),n=0,q=c[W];n<q;n++){var o=c[n]||{};Za.test(o.type)&&g[ea](k[o.type]().attr(o))}return g}return yb[Ia](a,arguments)}function e(){}function f(c){if(a.vml){var k=/^\s+|\s+$/g;f=p(function(n){var q;n=ya(n)[La](k,ra);try{var o=new sa.ActiveXObject("htmlfile");o.write("<body>");o.close();q=o.body}catch(t){q=sa.createPopup().document.body}o=q.createTextRange();try{q.style.color=
n;var v=o.queryCommandValue("ForeColor");v=(v&255)<<16|v&65280|(v&16711680)>>>16;return"#"+("000000"+v[ja](16)).slice(-6)}catch(A){return"none"}})}else{var g=xa.createElement("i");g.title="Rapha\u00ebl Colour Picker";g.style.display="none";xa.body[ha](g);f=p(function(n){g.style.color=n;return xa.defaultView.getComputedStyle(g,ra).getPropertyValue("color")})}return f(c)}function h(){return"hsb("+[this.h,this.s,this.b]+")"}function r(){return this.hex}function p(c,k,g){function n(){var q=Array[X].slice.call(arguments,
0),o=q[Oa]("\u25ba"),t=n.cache=n.cache||{},v=n.count=n.count||[];if(t[la](o))return g?g(t[o]):t[o];v[W]>=1E3&&delete t[v.shift()];v[ea](o);t[o]=c[Ia](k,q);return g?g(t[o]):t[o]}return n}function u(c){var k=[];if(!a.is(c,Sa)||!a.is(c&&c[0],Sa))c=a.parsePathString(c);for(var g=0,n=c[W];g<n;g++){k[g]=[];for(var q=0,o=c[g][W];q<o;q++)k[g][q]=c[g][q]}k[ja]=a._path2string;return k}function B(c,k,g,n,q,o){var t=1/3,v=2/3;return[t*c+v*g,t*k+v*n,t*q+v*g,t*o+v*n,q,o]}function D(c,k,g,n,q,o,t,v,A,C){var I=fa.PI,
U=I*120/180,ba=I/180*(+q||0),Y=[],L,da=p(function(Ua,kb,Ib){var Mb=Ua*fa.cos(Ib)-kb*fa.sin(Ib);Ua=Ua*fa.sin(Ib)+kb*fa.cos(Ib);return{x:Mb,y:Ua}});if(C){na=C[0];L=C[1];o=C[2];za=C[3]}else{L=da(c,k,-ba);c=L.x;k=L.y;L=da(v,A,-ba);v=L.x;A=L.y;fa.cos(I/180*q);fa.sin(I/180*q);L=(c-v)/2;na=(k-A)/2;za=L*L/(g*g)+na*na/(n*n);if(za>1){za=fa.sqrt(za);g=za*g;n=za*n}za=g*g;var Ra=n*n;za=(o==t?-1:1)*fa.sqrt(fa.abs((za*Ra-za*na*na-Ra*L*L)/(za*na*na+Ra*L*L)));o=za*g*na/n+(c+v)/2;var za=za*-n*L/g+(k+A)/2,na=fa.asin(((k-
za)/n).toFixed(7));L=fa.asin(((A-za)/n).toFixed(7));na=c<o?I-na:na;L=v<o?I-L:L;na<0&&(na=I*2+na);L<0&&(L=I*2+L);if(t&&na>L)na-=I*2;if(!t&&L>na)L-=I*2}I=L-na;if(fa.abs(I)>U){Y=L;I=v;Ra=A;L=na+U*(t&&L>na?1:-1);v=o+g*fa.cos(L);A=za+n*fa.sin(L);Y=D(v,A,g,n,q,0,t,I,Ra,[L,Y,o,za])}I=L-na;q=fa.cos(na);o=fa.sin(na);t=fa.cos(L);L=fa.sin(L);I=fa.tan(I/4);g=4/3*g*I;I=4/3*n*I;n=[c,k];c=[c+g*o,k-I*q];k=[v+g*L,A-I*t];v=[v,A];c[0]=2*n[0]-c[0];c[1]=2*n[1]-c[1];if(C)return[c,k,v][Na](Y);else{Y=[c,k,v][Na](Y)[Oa]()[Ha](",");
C=[];v=0;for(A=Y[W];v<A;v++)C[v]=v%2?da(Y[v-1],Y[v],ba).y:da(Y[v],Y[v+1],ba).x;return C}}function F(c,k,g,n,q,o,t,v,A){var C=1-A;return{x:V(C,3)*c+V(C,2)*3*A*g+C*3*A*A*q+V(A,3)*t,y:V(C,3)*k+V(C,2)*3*A*n+C*3*A*A*o+V(A,3)*v}}function H(c,k,g,n){if(a.is(c,Ta)||a.is(c,"object")){c=a.is(c,Ta)?xa.getElementById(c):c;if(c.tagName)return k==null?{container:c,width:c.style.pixelWidth||c.offsetWidth,height:c.style.pixelHeight||c.offsetHeight}:{container:c,width:k,height:g}}else return{container:1,x:c,y:k,width:g,
height:n}}function J(c,k){var g=this;for(var n in k)if(k[la](n)&&!(n in c))switch(typeof k[n]){case "function":(function(q){c[n]=c===g?q:function(){return q[Ia](g,arguments)}})(k[n]);break;case "object":c[n]=c[n]||{};J.call(this,c[n],k[n]);break;default:c[n]=k[n];break}}function N(c,k){c==k.top&&(k.top=c.prev);c==k.bottom&&(k.bottom=c.next);c.next&&(c.next.prev=c.prev);c.prev&&(c.prev.next=c.next)}function M(c,k){if(k.top!==c){N(c,k);c.next=null;c.prev=k.top;k.top.next=c;k.top=c}}function T(c,k){if(k.bottom!==
c){N(c,k);c.next=k.bottom;c.prev=null;k.bottom.prev=c;k.bottom=c}}function m(c,k,g){N(c,g);k==g.top&&(g.top=c);k.next&&(k.next.prev=c);c.next=k.next;c.prev=k;k.next=c}function Z(c,k,g){N(c,g);k==g.bottom&&(g.bottom=c);k.prev&&(k.prev.next=c);c.prev=k.prev;k.prev=c;c.next=k}function ca(c){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+c+"\u201d of removed object");}}function S(){this.returnValue=false}function oa(){return this.originalEvent.preventDefault()}function Ba(){this.cancelBubble=
true}function Qa(){return this.originalEvent.stopPropagation()}function Ga(){return this.x+Ja+this.y}function Ma(c,k){return function(g,n,q){g=pb(g);for(var o,t,v,A,C="",I={},U=0,ba=0,Y=g.length;ba<Y;ba++){v=g[ba];if(v[0]=="M"){o=+v[1];t=+v[2]}else{A=Q(o,t,v[1],v[2],v[3],v[4],v[5],v[6]);if(U+A>n){if(k&&!I.start){o=O(o,t,v[1],v[2],v[3],v[4],v[5],v[6],n-U);C+=["C",o.start.x,o.start.y,o.m.x,o.m.y,o.x,o.y];if(q)return C;I.start=C;C=["M",o.x,o.y+"C",o.n.x,o.n.y,o.end.x,o.end.y,v[5],v[6]][Oa]();U+=A;o=
+v[5];t=+v[6];continue}if(!c&&!k){o=O(o,t,v[1],v[2],v[3],v[4],v[5],v[6],n-U);return{x:o.x,y:o.y,alpha:o.alpha}}}U+=A;o=+v[5];t=+v[6]}C+=v}I.end=C;o=c?U:k?I:a.findDotsAtSegment(o,t,v[1],v[2],v[3],v[4],v[5],v[6],1);o.alpha&&(o={x:o.x,y:o.y,alpha:o.alpha});return o}}function ua(){var c=+new Date;for(var k in wa)if(k!="length"&&wa[la](k)){var g=wa[k];if(g.stop||g.el.removed){delete wa[k];wa[W]--}else{var n=c-g.start,q=g.ms,o=g.easing,t=g.from,v=g.diff,A=g.to,C=g.t,I=g.prev||0,U=g.el,ba=g.callback,Y={},
L;if(n<q){ba=a.easing_formulas[o]?a.easing_formulas[o](n/q):n/q;for(var da in t)if(t[la](da)){switch(fb[da]){case "along":L=ba*q*v[da];A.back&&(L=A.len-L);o=ma(A[da],L);U.translate(v.sx-v.x||0,v.sy-v.y||0);v.x=o.x;v.y=o.y;U.translate(o.x-v.sx,o.y-v.sy);A.rot&&U.rotate(v.r+o.alpha,o.x,o.y);break;case K:L=+t[da]+ba*q*v[da];break;case "colour":L="rgb("+[pa(Ea(t[da].r+ba*q*v[da].r)),pa(Ea(t[da].g+ba*q*v[da].g)),pa(Ea(t[da].b+ba*q*v[da].b))][Oa](",")+")";break;case "path":L=[];o=0;for(var Ra=t[da][W];o<
Ra;o++){L[o]=[t[da][o][0]];for(var za=1,na=t[da][o][W];za<na;za++)L[o][za]=+t[da][o][za]+ba*q*v[da][o][za];L[o]=L[o][Oa](Ja)}L=L[Oa](Ja);break;case "csv":switch(da){case "translation":L=v[da][0]*(n-I);o=v[da][1]*(n-I);C.x+=L;C.y+=o;L=L+Ja+o;break;case "rotation":L=+t[da][0]+ba*q*v[da][0];t[da][1]&&(L+=","+t[da][1]+","+t[da][2]);break;case "scale":L=[+t[da][0]+ba*q*v[da][0],+t[da][1]+ba*q*v[da][1],2 in A[da]?A[da][2]:ra,3 in A[da]?A[da][3]:ra][Oa](Ja);break;case "clip-rect":L=[];for(o=4;o--;)L[o]=
+t[da][o]+ba*q*v[da][o];break}break}Y[da]=L}U.attr(Y);U._run&&U._run.call(U)}else{if(A.along){o=ma(A.along,A.len*!A.back);U.translate(v.sx-(v.x||0)+o.x-v.sx,v.sy-(v.y||0)+o.y-v.sy);A.rot&&U.rotate(v.r+o.alpha,o.x,o.y)}(C.x||C.y)&&U.translate(-C.x,-C.y);A.scale&&(A.scale+=ra);U.attr(A);delete wa[k];wa[W]--;U.in_animation=null;a.is(ba,"function")&&ba.call(U)}g.prev=n}}a.svg&&U&&U.paper&&U.paper.safari();wa[W]&&sa.setTimeout(ua)}function pa(c){return Xa(Aa(c,255),0)}function Ca(c,k){if(c==null)return{x:this._.tx,
y:this._.ty,toString:Ga};this._.tx+=+c;this._.ty+=+k;switch(this.type){case "circle":case "ellipse":this.attr({cx:+c+this.attrs.cx,cy:+k+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+c+this.attrs.x,y:+k+this.attrs.y});break;case "path":var g=wb(this.attrs.path);g[0][1]+=+c;g[0][2]+=+k;this.attr({path:g});break}return this}function ta(c){return function(k,g,n,q){var o={back:c};a.is(n,"function")?q=n:o.rot=n;k&&k.constructor==ga&&(k=k.attrs.path);k&&(o.along=k);return this.animate(o,
g,q)}}function va(c){this.items=[];this[W]=0;this.type="set";if(c)for(var k=0,g=c[W];k<g;k++)if(c[k]&&(c[k].constructor==ga||c[k].constructor==va)){this[this.items[W]]=this.items[this.items[W]]=c[k];this[W]++}}a.version="1.4.4";var qa=/[, ]+/,Za=/^(circle|rect|path|ellipse|text|image)$/,X="prototype",la="hasOwnProperty",xa=document,sa=window,Wa={was:Object[X][la].call(sa,"Raphael"),is:sa.Raphael},ha="appendChild",Ia="apply",Na="concat",hb="createTouch"in xa,ra="",Ja=" ",ya=String,Ha="split",ib="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[Ha](Ja),
$a={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Oa="join",W="length",Va=String[X].toLowerCase,fa=Math,Xa=fa.max,Aa=fa.min,K="number",Ta="string",Sa="array",ja="toString",jb=Object[X][ja],V=fa.pow,ea="push",Fa=/^(?=[\da-f]$)/,Pa=/^url\(['"]?([^\)]+?)['"]?\)$/i,db=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+(?:\s*,\s*[\d\.]+)?)\s*\)|rgba?\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%(?:\s*,\s*[\d\.]+%))\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i,
Ea=fa.round,ka=parseFloat,bb=parseInt,gb=String[X].toUpperCase,cb={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,
target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},fb={along:"along",blur:K,"clip-rect":"csv",cx:K,cy:K,fill:"colour","fill-opacity":K,"font-size":K,height:K,opacity:K,path:"path",r:K,rotation:"csv",rx:K,ry:K,scale:"csv",stroke:"colour","stroke-opacity":K,"stroke-width":K,translation:"csv",width:K,x:K,y:K},La="replace";a.type=sa.SVGAngle||xa.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var Ya=
xa.createElement("div");Ya.innerHTML="<!--[if vml]><br><br><![endif]--\>";if(Ya.childNodes[W]!=2)return a.type=null;Ya=null}a.svg=!(a.vml=a.type=="VML");e[X]=a[X];a._id=0;a._oid=0;a.fn={};a.is=function(c,k){k=Va.call(k);return k=="object"&&c===Object(c)||k=="undefined"&&typeof c==k||k=="null"&&c==null||Va.call(jb.call(c).slice(8,-1))==k};a.setWindow=function(c){sa=c;xa=sa.document};a.hsb2rgb=p(function(c,k,g){if(a.is(c,"object")&&"h"in c&&"s"in c&&"b"in c){g=c.b;k=c.s;c=c.h}var n;if(g==0)return{r:0,
g:0,b:0,hex:"#000"};if(c>1||k>1||g>1){c/=255;k/=255;g/=255}n=~~(c*6);c=c*6-n;var q=g*(1-k),o=g*(1-k*c),t=g*(1-k*(1-c));c=[g,o,q,q,t,g,g][n];k=[t,g,g,o,q,q,t][n];n=[q,q,t,g,g,o,q][n];c*=255;k*=255;n*=255;g={r:c,g:k,b:n,toString:r};c=(~~c)[ja](16);k=(~~k)[ja](16);n=(~~n)[ja](16);c=c[La](Fa,"0");k=k[La](Fa,"0");n=n[La](Fa,"0");g.hex="#"+c+k+n;return g},a);a.rgb2hsb=p(function(c,k,g){if(a.is(c,"object")&&"r"in c&&"g"in c&&"b"in c){g=c.b;k=c.g;c=c.r}if(a.is(c,Ta)){var n=a.getRGB(c);c=n.r;k=n.g;g=n.b}if(c>
1||k>1||g>1){c/=255;k/=255;g/=255}var q=Xa(c,k,g),o=Aa(c,k,g);n=q;if(o==q)return{h:0,s:0,b:q};else{var t=q-o;o=t/q;c=c==q?(k-g)/t:k==q?2+(g-c)/t:4+(c-k)/t;c/=6;c<0&&c++;c>1&&c--}return{h:c,s:o,b:n,toString:h}},a);var Jb=/,?([achlmqrstvxz]),?/gi,lb=/\s*,\s*/,Ab={hs:1,rg:1};a._path2string=function(){return this.join(",")[La](Jb,"$1")};a.getRGB=p(function(c){if(!c||(c=ya(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(c=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(Ab[la](c.substring(0,
2))||c.charAt()=="#")&&(c=f(c));var k,g,n,q,o;if(c=c.match(db)){if(c[2]){n=bb(c[2].substring(5),16);g=bb(c[2].substring(3,5),16);k=bb(c[2].substring(1,3),16)}if(c[3]){n=bb((o=c[3].charAt(3))+o,16);g=bb((o=c[3].charAt(2))+o,16);k=bb((o=c[3].charAt(1))+o,16)}if(c[4]){c=c[4][Ha](lb);k=ka(c[0]);g=ka(c[1]);n=ka(c[2]);q=ka(c[3])}if(c[5]){c=c[5][Ha](lb);k=ka(c[0])*2.55;g=ka(c[1])*2.55;n=ka(c[2])*2.55;q=ka(c[3])}if(c[6]){c=c[6][Ha](lb);k=ka(c[0]);g=ka(c[1]);n=ka(c[2]);return a.hsb2rgb(k,g,n)}if(c[7]){c=c[7][Ha](lb);
k=ka(c[0])*2.55;g=ka(c[1])*2.55;n=ka(c[2])*2.55;return a.hsb2rgb(k,g,n)}c={r:k,g:g,b:n};k=(~~k)[ja](16);g=(~~g)[ja](16);n=(~~n)[ja](16);k=k[La](Fa,"0");g=g[La](Fa,"0");n=n[La](Fa,"0");c.hex="#"+k+g+n;isFinite(ka(q))&&(c.o=q);return c}return{r:-1,g:-1,b:-1,hex:"none",error:1}},a);a.getColor=function(c){c=this.getColor.start=this.getColor.start||{h:0,s:1,b:c||0.75};var k=this.hsb2rgb(c.h,c.s,c.b);c.h+=0.075;if(c.h>1){c.h=0;c.s-=0.2;c.s<=0&&(this.getColor.start={h:0,s:1,b:c.b})}return k.hex};a.getColor.reset=
function(){delete this.start};var ub=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,vb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig;a.parsePathString=p(function(c){if(!c)return null;var k={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=[];if(a.is(c,Sa)&&a.is(c[0],Sa))g=u(c);g[W]||ya(c)[La](ub,function(n,q,o){var t=[];n=Va.call(q);o[La](vb,function(v,A){A&&t[ea](+A)});if(n=="m"&&t[W]>2){g[ea]([q][Na](t.splice(0,2)));n="l";q=q=="m"?"l":"L"}for(;t[W]>=k[n];){g[ea]([q][Na](t.splice(0,k[n])));if(!k[n])break}});
g[ja]=a._path2string;return g});a.findDotsAtSegment=function(c,k,g,n,q,o,t,v,A){var C=1-A,I=V(C,3)*c+V(C,2)*3*A*g+C*3*A*A*q+V(A,3)*t;C=V(C,3)*k+V(C,2)*3*A*n+C*3*A*A*o+V(A,3)*v;var U=c+2*A*(g-c)+A*A*(q-2*g+c),ba=k+2*A*(n-k)+A*A*(o-2*n+k),Y=g+2*A*(q-g)+A*A*(t-2*q+g),L=n+2*A*(o-n)+A*A*(v-2*o+n);c=(1-A)*c+A*g;k=(1-A)*k+A*n;q=(1-A)*q+A*t;o=(1-A)*o+A*v;v=90-fa.atan((U-Y)/(ba-L))*180/fa.PI;(U>Y||ba<L)&&(v+=180);return{x:I,y:C,m:{x:U,y:ba},n:{x:Y,y:L},start:{x:c,y:k},end:{x:q,y:o},alpha:v}};var ob=p(function(c){if(!c)return{x:0,
y:0,width:0,height:0};c=pb(c);for(var k=0,g=0,n=[],q=[],o,t=0,v=c[W];t<v;t++){o=c[t];if(o[0]=="M"){k=o[1];g=o[2];n[ea](k);q[ea](g)}else{k=Kb(k,g,o[1],o[2],o[3],o[4],o[5],o[6]);n=n[Na](k.min.x,k.max.x);q=q[Na](k.min.y,k.max.y);k=o[5];g=o[6]}}c=Aa[Ia](0,n);o=Aa[Ia](0,q);return{x:c,y:o,width:Xa[Ia](0,n)-c,height:Xa[Ia](0,q)-o}}),wb=p(function(c){if(!a.is(c,Sa)||!a.is(c&&c[0],Sa))c=a.parsePathString(c);var k=[],g=0,n=0,q=0,o=0,t=0;if(c[0][0]=="M"){g=c[0][1];n=c[0][2];q=g;o=n;t++;k[ea](["M",g,n])}for(var v=
c[W];t<v;t++){var A=k[t]=[],C=c[t];if(C[0]!=Va.call(C[0])){A[0]=Va.call(C[0]);switch(A[0]){case "a":A[1]=C[1];A[2]=C[2];A[3]=C[3];A[4]=C[4];A[5]=C[5];A[6]=+(C[6]-g).toFixed(3);A[7]=+(C[7]-n).toFixed(3);break;case "v":A[1]=+(C[1]-n).toFixed(3);break;case "m":q=C[1];o=C[2];default:for(var I=1,U=C[W];I<U;I++)A[I]=+(C[I]-(I%2?g:n)).toFixed(3)}}else{k[t]=[];if(C[0]=="m"){q=C[1]+g;o=C[2]+n}A=0;for(I=C[W];A<I;A++)k[t][A]=C[A]}C=k[t][W];switch(k[t][0]){case "z":g=q;n=o;break;case "h":g+=+k[t][C-1];break;
case "v":n+=+k[t][C-1];break;default:g+=+k[t][C-2];n+=+k[t][C-1]}}k[ja]=a._path2string;return k},0,u),mb=p(function(c){if(!a.is(c,Sa)||!a.is(c&&c[0],Sa))c=a.parsePathString(c);var k=[],g=0,n=0,q=0,o=0,t=0;if(c[0][0]=="M"){g=+c[0][1];n=+c[0][2];q=g;o=n;t++;k[0]=["M",g,n]}for(var v=c[W];t<v;t++){var A=k[t]=[],C=c[t];if(C[0]!=gb.call(C[0])){A[0]=gb.call(C[0]);switch(A[0]){case "A":A[1]=C[1];A[2]=C[2];A[3]=C[3];A[4]=C[4];A[5]=C[5];A[6]=+(C[6]+g);A[7]=+(C[7]+n);break;case "V":A[1]=+C[1]+n;break;case "H":A[1]=
+C[1]+g;break;case "M":q=+C[1]+g;o=+C[2]+n;default:for(var I=1,U=C[W];I<U;I++)A[I]=+C[I]+(I%2?g:n)}}else{I=0;for(U=C[W];I<U;I++)k[t][I]=C[I]}switch(A[0]){case "Z":g=q;n=o;break;case "H":g=A[1];break;case "V":n=A[1];break;case "M":q=k[t][k[t][W]-2];o=k[t][k[t][W]-1];default:g=k[t][k[t][W]-2];n=k[t][k[t][W]-1]}}k[ja]=a._path2string;return k},null,u),Kb=p(function(c,k,g,n,q,o,t,v){var A=q-2*g+c-(t-2*q+g),C=2*(g-c)-2*(q-g),I=c-g,U=(-C+fa.sqrt(C*C-4*A*I))/2/A;A=(-C-fa.sqrt(C*C-4*A*I))/2/A;var ba=[k,v],
Y=[c,t];fa.abs(U)>1E12&&(U=0.5);fa.abs(A)>1E12&&(A=0.5);if(U>0&&U<1){U=F(c,k,g,n,q,o,t,v,U);Y[ea](U.x);ba[ea](U.y)}if(A>0&&A<1){U=F(c,k,g,n,q,o,t,v,A);Y[ea](U.x);ba[ea](U.y)}A=o-2*n+k-(v-2*o+n);C=2*(n-k)-2*(o-n);I=k-n;U=(-C+fa.sqrt(C*C-4*A*I))/2/A;A=(-C-fa.sqrt(C*C-4*A*I))/2/A;fa.abs(U)>1E12&&(U=0.5);fa.abs(A)>1E12&&(A=0.5);if(U>0&&U<1){U=F(c,k,g,n,q,o,t,v,U);Y[ea](U.x);ba[ea](U.y)}if(A>0&&A<1){U=F(c,k,g,n,q,o,t,v,A);Y[ea](U.x);ba[ea](U.y)}return{min:{x:Aa[Ia](0,Y),y:Aa[Ia](0,ba)},max:{x:Xa[Ia](0,
Y),y:Xa[Ia](0,ba)}}}),pb=p(function(c,k){function g(Y,L){var da;if(!Y)return["C",L.x,L.y,L.x,L.y,L.x,L.y];!(Y[0]in{T:1,Q:1})&&(L.qx=L.qy=null);switch(Y[0]){case "M":L.X=Y[1];L.Y=Y[2];break;case "A":Y=["C"][Na](D[Ia](0,[L.x,L.y][Na](Y.slice(1))));break;case "S":da=L.x+(L.x-(L.bx||L.x));L=L.y+(L.y-(L.by||L.y));Y=["C",da,L][Na](Y.slice(1));break;case "T":L.qx=L.x+(L.x-(L.qx||L.x));L.qy=L.y+(L.y-(L.qy||L.y));Y=["C"][Na](B(L.x,L.y,L.qx,L.qy,Y[1],Y[2]));break;case "Q":L.qx=Y[1];L.qy=Y[2];Y=["C"][Na](B(L.x,
L.y,Y[1],Y[2],Y[3],Y[4]));break;case "L":Y=["C"][Na]([L.x,L.y,Y[1],Y[2],Y[1],Y[2]]);break;case "H":Y=["C"][Na]([L.x,L.y,Y[1],L.y,Y[1],L.y]);break;case "V":Y=["C"][Na]([L.x,L.y,L.x,Y[1],L.x,Y[1]]);break;case "Z":Y=["C"][Na]([L.x,L.y,L.X,L.Y,L.X,L.Y]);break}return Y}function n(Y,L){if(Y[L][W]>7){Y[L].shift();for(var da=Y[L];da[W];)Y.splice(L++,0,["C"][Na](da.splice(0,6)));Y.splice(L,1);A=Xa(o[W],t&&t[W]||0)}}function q(Y,L,da,Ra,za){if(Y&&L&&Y[za][0]=="M"&&L[za][0]!="M"){L.splice(za,0,["M",Ra.x,Ra.y]);
da.bx=0;da.by=0;da.x=Y[za][1];da.y=Y[za][2];A=Xa(o[W],t&&t[W]||0)}}var o=mb(c),t=k&&mb(k);c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};for(var v=0,A=Xa(o[W],t&&t[W]||0);v<A;v++){o[v]=g(o[v],c);n(o,v);t&&(t[v]=g(t[v],k));t&&n(t,v);q(o,t,c,k,v);q(t,o,k,c,v);var C=o[v],I=t&&t[v],U=C[W],ba=t&&I[W];c.x=C[U-2];c.y=C[U-1];c.bx=ka(C[U-4])||c.x;c.by=ka(C[U-3])||c.y;k.bx=t&&(ka(I[ba-4])||k.x);k.by=t&&(ka(I[ba-3])||k.y);k.x=t&&I[ba-2];k.y=t&&I[ba-1]}return t?[o,
t]:o},null,u),Bb=p(function(c){for(var k=[],g=0,n=c[W];g<n;g++){var q={},o=c[g].match(/^([^:]*):?([\d\.]*)/);q.color=a.getRGB(o[1]);if(q.color.error)return null;q.color=q.color.hex;o[2]&&(q.offset=o[2]+"%");k[ea](q)}g=1;for(n=k[W]-1;g<n;g++)if(!k[g].offset){c=ka(k[g-1].offset||0);o=0;for(q=g+1;q<n;q++)if(k[q].offset){o=k[q].offset;break}if(!o){o=100;q=n}o=ka(o);for(o=(o-c)/(q-g+1);g<q;g++){c+=o;k[g].offset=c+"%"}}return k}),Cb=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;a.pathToRelative=wb;if(a.svg){e[X].svgns=
"http://www.w3.org/2000/svg";e[X].xlink="http://www.w3.org/1999/xlink";Ea=function(c){return+c+(~~c===c)*0.5};var ia=function(c,k){if(k)for(var g in k)k[la](g)&&c.setAttribute(g,ya(k[g]));else{c=xa.createElementNS(e[X].svgns,c);c.style.webkitTapHighlightColor="rgba(0,0,0,0)";return c}};a[ja]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var qb=function(c,k){var g=ia("path");k.canvas&&k.canvas[ha](g);k=new ga(g,k);k.type="path";eb(k,{fill:"none",stroke:"#000",
path:c});return k},nb=function(c,k,g){var n="linear",q=0.5,o=0.5,t=c.style;k=ya(k)[La](Cb,function(I,U,ba){n="radial";if(U&&ba){q=ka(U);o=ka(ba);I=(o>0.5)*2-1;V(q-0.5,2)+V(o-0.5,2)>0.25&&(o=fa.sqrt(0.25-V(q-0.5,2))*I+0.5)&&o!=0.5&&(o=o.toFixed(5)-1.0E-5*I)}return ra});k=k[Ha](/\s*\-\s*/);if(n=="linear"){var v=k.shift();v=-ka(v);if(isNaN(v))return null;v=[0,0,fa.cos(v*fa.PI/180),fa.sin(v*fa.PI/180)];var A=1/(Xa(fa.abs(v[2]),fa.abs(v[3]))||1);v[2]*=A;v[3]*=A;if(v[2]<0){v[0]=-v[2];v[2]=0}if(v[3]<0){v[1]=
-v[3];v[3]=0}}k=Bb(k);if(!k)return null;A=c.getAttribute("fill");(A=A.match(/^url\(#(.*)\)$/))&&g.defs.removeChild(xa.getElementById(A[1]));A=ia(n+"Gradient");A.id="r"+(a._id++)[ja](36);ia(A,n=="radial"?{fx:q,fy:o}:{x1:v[0],y1:v[1],x2:v[2],y2:v[3]});g.defs[ha](A);g=0;for(v=k[W];g<v;g++){var C=ia("stop");ia(C,{offset:k[g].offset?k[g].offset:!g?"0%":"100%","stop-color":k[g].color||"#fff"});A[ha](C)}ia(c,{fill:"url(#"+A.id+")",opacity:1,"fill-opacity":1});t.fill=ra;t.opacity=1;return t.fillOpacity=1},
xb=function(c){var k=c.getBBox();ia(c.pattern,{patternTransform:a.format("translate({0},{1})",k.x,k.y)})},eb=function(c,k){function g(L,da){if(da=n[Va.call(da)]){var Ra=L.attrs["stroke-width"]||"1";L={round:Ra,square:Ra,butt:0}[L.attrs["stroke-linecap"]||k["stroke-linecap"]]||0;for(var za=[],na=da[W];na--;)za[na]=da[na]*Ra+(na%2?1:-1)*L;ia(q,{"stroke-dasharray":za[Oa](",")})}}var n={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,
1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},q=c.node,o=c.attrs,t=c.rotate();k[la]("rotation")&&(t=k.rotation);var v=ya(t)[Ha](qa);if(v.length-1){v[1]=+v[1];v[2]=+v[2]}else v=null;ka(t)&&c.rotate(0,true);for(var A in k)if(k[la](A))if(cb[la](A)){var C=k[A];o[A]=C;switch(A){case "blur":c.blur(C);break;case "rotation":c.rotate(C,true);break;case "href":case "title":case "target":var I=q.parentNode;if(Va.call(I.tagName)!="a"){var U=ia("a");I.insertBefore(U,q);U[ha](q);I=U}I.setAttributeNS(c.paper.xlink,
A,C);break;case "cursor":q.style.cursor=C;break;case "clip-rect":I=ya(C)[Ha](qa);if(I[W]==4){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var ba=ia("clipPath");U=ia("rect");ba.id="r"+(a._id++)[ja](36);ia(U,{x:I[0],y:I[1],width:I[2],height:I[3]});ba[ha](U);c.paper.defs[ha](ba);ia(q,{"clip-path":"url(#"+ba.id+")"});c.clip=U}if(!C){(C=xa.getElementById(q.getAttribute("clip-path")[La](/(^url\(#|\)$)/g,ra)))&&C.parentNode.removeChild(C);ia(q,{"clip-path":ra});delete c.clip}break;
case "path":if(c.type=="path")ia(q,{d:C?o.path=mb(C):"M0,0"});break;case "width":q.setAttribute(A,C);if(o.fx){A="x";C=o.x}else break;case "x":if(o.fx)C=-o.x-(o.width||0);case "rx":if(A=="rx"&&c.type=="rect")break;case "cx":v&&(A=="x"||A=="cx")&&(v[1]+=C-o[A]);q.setAttribute(A,Ea(C));c.pattern&&xb(c);break;case "height":q.setAttribute(A,C);if(o.fy){A="y";C=o.y}else break;case "y":if(o.fy)C=-o.y-(o.height||0);case "ry":if(A=="ry"&&c.type=="rect")break;case "cy":v&&(A=="y"||A=="cy")&&(v[2]+=C-o[A]);
q.setAttribute(A,Ea(C));c.pattern&&xb(c);break;case "r":c.type=="rect"?ia(q,{rx:C,ry:C}):q.setAttribute(A,C);break;case "src":c.type=="image"&&q.setAttributeNS(c.paper.xlink,"href",C);break;case "stroke-width":q.style.strokeWidth=C;q.setAttribute(A,C);o["stroke-dasharray"]&&g(c,o["stroke-dasharray"]);break;case "stroke-dasharray":g(c,C);break;case "translation":C=ya(C)[Ha](qa);C[0]=+C[0]||0;C[1]=+C[1]||0;if(v){v[1]+=C[0];v[2]+=C[1]}Ca.call(c,C[0],C[1]);break;case "scale":C=ya(C)[Ha](qa);c.scale(+C[0]||
1,+C[1]||+C[0]||1,isNaN(ka(C[2]))?null:+C[2],isNaN(ka(C[3]))?null:+C[3]);break;case "fill":if(I=ya(C).match(Pa)){ba=ia("pattern");var Y=ia("image");ba.id="r"+(a._id++)[ja](36);ia(ba,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});ia(Y,{x:0,y:0});Y.setAttributeNS(c.paper.xlink,"href",I[1]);ba[ha](Y);C=xa.createElement("img");C.style.cssText="position:absolute;left:-9999em;top-9999em";C.onload=function(){ia(ba,{width:this.offsetWidth,height:this.offsetHeight});ia(Y,{width:this.offsetWidth,
height:this.offsetHeight});xa.body.removeChild(this);c.paper.safari()};xa.body[ha](C);C.src=I[1];c.paper.defs[ha](ba);q.style.fill="url(#"+ba.id+")";ia(q,{fill:"url(#"+ba.id+")"});c.pattern=ba;c.pattern&&xb(c);break}I=a.getRGB(C);if(I.error){if(({circle:1,ellipse:1}[la](c.type)||ya(C).charAt()!="r")&&nb(q,C,c.paper)){o.gradient=C;o.fill="none";break}}else{delete k.gradient;delete o.gradient;!a.is(o.opacity,"undefined")&&a.is(k.opacity,"undefined")&&ia(q,{opacity:o.opacity});!a.is(o["fill-opacity"],
"undefined")&&a.is(k["fill-opacity"],"undefined")&&ia(q,{"fill-opacity":o["fill-opacity"]})}I[la]("o")&&ia(q,{"fill-opacity":I.o/100});case "stroke":I=a.getRGB(C);q.setAttribute(A,I.hex);A=="stroke"&&I[la]("o")&&ia(q,{"stroke-opacity":I.o/100});break;case "gradient":(({circle:1,ellipse:1})[la](c.type)||ya(C).charAt()!="r")&&nb(q,C,c.paper);break;case "opacity":case "fill-opacity":if(o.gradient){if(I=xa.getElementById(q.getAttribute("fill")[La](/^url\(#|\)$/g,ra))){I=I.getElementsByTagName("stop");
I[I[W]-1].setAttribute("stop-opacity",C)}break}default:A=="font-size"&&(C=bb(C,10)+"px");I=A[La](/(\-.)/g,function(L){return gb.call(L.substring(1))});q.style[I]=C;q.setAttribute(A,C);break}}Lb(c,k);if(v)c.rotate(v.join(Ja));else ka(t)&&c.rotate(t,true)},Lb=function(c,k){if(!(c.type!="text"||!(k[la]("text")||k[la]("font")||k[la]("font-size")||k[la]("x")||k[la]("y")))){var g=c.attrs,n=c.node,q=n.firstChild?bb(xa.defaultView.getComputedStyle(n.firstChild,ra).getPropertyValue("font-size"),10):10;if(k[la]("text")){for(g.text=
k.text;n.firstChild;)n.removeChild(n.firstChild);k=ya(k.text)[Ha]("\n");for(var o=0,t=k[W];o<t;o++)if(k[o]){var v=ia("tspan");o&&ia(v,{dy:q*1.2,x:g.x});v[ha](xa.createTextNode(k[o]));n[ha](v)}}else{k=n.getElementsByTagName("tspan");o=0;for(t=k[W];o<t;o++)o&&ia(k[o],{dy:q*1.2,x:g.x})}ia(n,{y:g.y});c=c.getBBox();(c=g.y-(c.y+c.height/2))&&isFinite(c)&&ia(n,{y:g.y+c})}},ga=function(c,k){this[0]=c;this.id=a._oid++;this.node=c;c.raphael=this;this.paper=k;this.attrs=this.attrs||{};this.transformations=[];
this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!k.bottom&&(k.bottom=this);(this.prev=k.top)&&(k.top.next=this);k.top=this;this.next=null};ga[X].rotate=function(c,k,g){if(this.removed)return this;if(c==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][Oa](Ja);return this._.rt.deg}var n=this.getBBox();c=ya(c)[Ha](qa);if(c[W]-1){k=ka(c[1]);g=ka(c[2])}c=ka(c[0]);if(k!=null)this._.rt.deg=c;else this._.rt.deg+=c;g==null&&(k=null);this._.rt.cx=k;this._.rt.cy=g;k=k==null?n.x+n.width/
2:k;g=g==null?n.y+n.height/2:g;if(this._.rt.deg){this.transformations[0]=a.format("rotate({0} {1} {2})",this._.rt.deg,k,g);this.clip&&ia(this.clip,{transform:a.format("rotate({0} {1} {2})",-this._.rt.deg,k,g)})}else{this.transformations[0]=ra;this.clip&&ia(this.clip,{transform:ra})}ia(this.node,{transform:this.transformations[Oa](Ja)});return this};ga[X].hide=function(){!this.removed&&(this.node.style.display="none");return this};ga[X].show=function(){!this.removed&&(this.node.style.display="");return this};
ga[X].remove=function(){if(!this.removed){N(this,this.paper);this.node.parentNode.removeChild(this.node);for(var c in this)delete this[c];this.removed=true}};ga[X].getBBox=function(){if(this.removed)return this;if(this.type=="path")return ob(this.attrs.path);if(this.node.style.display=="none"){this.show();var c=true}var k={};try{k=this.node.getBBox()}catch(g){}finally{k=k||{}}if(this.type=="text"){k={x:k.x,y:Infinity,width:0,height:0};for(var n=0,q=this.node.getNumberOfChars();n<q;n++){var o=this.node.getExtentOfChar(n);
o.y<k.y&&(k.y=o.y);o.y+o.height-k.y>k.height&&(k.height=o.y+o.height-k.y);o.x+o.width-k.x>k.width&&(k.width=o.x+o.width-k.x)}}c&&this.hide();return k};ga[X].attr=function(c,k){if(this.removed)return this;if(c==null){c={};for(var g in this.attrs)if(this.attrs[la](g))c[g]=this.attrs[g];this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(k==null&&a.is(c,Ta)){if(c=="translation")return Ca.call(this);
if(c=="rotation")return this.rotate();if(c=="scale")return this.scale();if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[c]}if(k==null&&a.is(c,Sa)){k={};g=0;for(var n=c.length;g<n;g++)k[c[g]]=this.attr(c[g]);return k}if(k!=null){g={};g[c]=k;eb(this,g)}else c!=null&&a.is(c,"object")&&eb(this,c);return this};ga[X].toFront=function(){if(this.removed)return this;this.node.parentNode[ha](this.node);var c=this.paper;c.top!=this&&M(this,c);return this};
ga[X].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);T(this,this.paper)}return this};ga[X].insertAfter=function(c){if(this.removed)return this;var k=c.node;k.nextSibling?k.parentNode.insertBefore(this.node,k.nextSibling):k.parentNode[ha](this.node);m(this,c,this.paper);return this};ga[X].insertBefore=function(c){if(this.removed)return this;var k=c.node;k.parentNode.insertBefore(this.node,
k);Z(this,c,this.paper);return this};ga[X].blur=function(c){if(+c!==0){var k=ia("filter"),g=ia("feGaussianBlur");this.attrs.blur=c;k.id="r"+(a._id++)[ja](36);ia(g,{stdDeviation:+c||1.5});k.appendChild(g);this.paper.defs.appendChild(k);this._blur=k;ia(this.node,{filter:"url(#"+k.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};var rb=function(c,k,g,n){k=Ea(k);g=Ea(g);var q=ia("circle");c.canvas&&
c.canvas[ha](q);c=new ga(q,c);c.attrs={cx:k,cy:g,r:n,fill:"none",stroke:"#000"};c.type="circle";ia(q,c.attrs);return c},Db=function(c,k,g,n,q,o){k=Ea(k);g=Ea(g);var t=ia("rect");c.canvas&&c.canvas[ha](t);c=new ga(t,c);c.attrs={x:k,y:g,width:n,height:q,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"};c.type="rect";ia(t,c.attrs);return c},Eb=function(c,k,g,n,q){k=Ea(k);g=Ea(g);var o=ia("ellipse");c.canvas&&c.canvas[ha](o);c=new ga(o,c);c.attrs={cx:k,cy:g,rx:n,ry:q,fill:"none",stroke:"#000"};c.type=
"ellipse";ia(o,c.attrs);return c},Fb=function(c,k,g,n,q,o){var t=ia("image");ia(t,{x:g,y:n,width:q,height:o,preserveAspectRatio:"none"});t.setAttributeNS(c.xlink,"href",k);c.canvas&&c.canvas[ha](t);c=new ga(t,c);c.attrs={x:g,y:n,width:q,height:o,src:k};c.type="image";return c},Gb=function(c,k,g,n){var q=ia("text");ia(q,{x:k,y:g,"text-anchor":"middle"});c.canvas&&c.canvas[ha](q);c=new ga(q,c);c.attrs={x:k,y:g,"text-anchor":"middle",text:n,font:cb.font,stroke:"none",fill:"#000"};c.type="text";eb(c,
c.attrs);return c},sb=function(c,k){this.width=c||this.width;this.height=k||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},yb=function(){var c=H[Ia](0,arguments),k=c&&c.container,g=c.x,n=c.y,q=c.width;c=c.height;if(!k)throw Error("SVG container not found.");var o=ia("svg");g=g||0;n=n||0;q=q||512;c=c||342;ia(o,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:q,height:c});if(k==1){o.style.cssText="position:absolute;left:"+g+
"px;top:"+n+"px";xa.body[ha](o)}else k.firstChild?k.insertBefore(o,k.firstChild):k[ha](o);k=new e;k.width=q;k.height=c;k.canvas=o;J.call(k,k,a.fn);k.clear();return k};e[X].clear=function(){for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null;(this.desc=ia("desc"))[ha](xa.createTextNode("Created with Rapha\u00ebl"));c[ha](this.desc);c[ha](this.defs=ia("defs"))};e[X].remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]=
ca(c)}}if(a.vml){var Hb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},tb=/([clmz]),?([^clmz]*)/gi,zb=/-?[^,\s-]+/g,b=1E3+Ja+1E3,l={path:1,rect:1},s=function(c){var k=/[ahqstv]/ig,g=mb;ya(c).match(k)&&(g=pb);k=/[clmz]/g;if(g==mb&&!ya(c).match(k))return c=ya(c)[La](tb,function(A,C,I){var U=[],ba=Va.call(C)=="m",Y=Hb[C];I[La](zb,function(L){if(ba&&U[W]==2){Y+=U+Hb[C=="m"?"l":"L"];U=[]}U[ea](Ea(L*10))});return Y+U});k=g(c);var n;c=[];for(var q=0,o=k[W];q<o;q++){g=k[q];n=Va.call(k[q][0]);n=="z"&&(n=
"x");for(var t=1,v=g[W];t<v;t++)n+=Ea(g[t]*10)+(t!=v-1?",":ra);c[ea](n)}return c[Oa](Ja)};a[ja]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};qb=function(c,k){var g=E("group");g.style.cssText="position:absolute;left:0;top:0;width:"+k.width+"px;height:"+k.height+"px";g.coordsize=k.coordsize;g.coordorigin=k.coordorigin;var n=E("shape"),q=n.style;q.width=k.width+"px";q.height=k.height+"px";n.coordsize=b;n.coordorigin=k.coordorigin;
g[ha](n);n=new ga(n,g,k);q={fill:"none",stroke:"#000"};c&&(q.path=c);n.isAbsolute=true;n.type="path";n.path=[];n.Path=ra;eb(n,q);k.canvas[ha](g);return n};eb=function(c,k){c.attrs=c.attrs||{};var g=c.node,n=c.attrs,q=g.style,o;o=(k.x!=n.x||k.y!=n.y||k.width!=n.width||k.height!=n.height||k.r!=n.r)&&c.type=="rect";var t=c;for(var v in k)if(k[la](v))n[v]=k[v];if(o){n.path=y(n.x,n.y,n.width,n.height,n.r);c.X=n.x;c.Y=n.y;c.W=n.width;c.H=n.height}k.href&&(g.href=k.href);k.title&&(g.title=k.title);k.target&&
(g.target=k.target);k.cursor&&(q.cursor=k.cursor);"blur"in k&&c.blur(k.blur);if(k.path&&c.type=="path"||o)g.path=s(n.path);k.rotation!=null&&c.rotate(k.rotation,true);if(k.translation){o=ya(k.translation)[Ha](qa);Ca.call(c,o[0],o[1]);if(c._.rt.cx!=null){c._.rt.cx+=+o[0];c._.rt.cy+=+o[1];c.setBox(c.attrs,o[0],o[1])}}if(k.scale){o=ya(k.scale)[Ha](qa);c.scale(+o[0]||1,+o[1]||+o[0]||1,+o[2]||null,+o[3]||null)}if("clip-rect"in k){o=ya(k["clip-rect"])[Ha](qa);if(o[W]==4){o[2]=+o[2]+ +o[0];o[3]=+o[3]+ +o[1];
v=g.clipRect||xa.createElement("div");var A=v.style,C=g.parentNode;A.clip=a.format("rect({1}px {2}px {3}px {0}px)",o);if(!g.clipRect){A.position="absolute";A.top=0;A.left=0;A.width=c.paper.width+"px";A.height=c.paper.height+"px";C.parentNode.insertBefore(v,C);v[ha](C);g.clipRect=v}}if(!k["clip-rect"])g.clipRect&&(g.clipRect.style.clip=ra)}if(c.type=="image"&&k.src)g.src=k.src;if(c.type=="image"&&k.opacity){g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+k.opacity*100+")";q.filter=
(g.filterMatrix||ra)+(g.filterOpacity||ra)}k.font&&(q.font=k.font);k["font-family"]&&(q.fontFamily='"'+k["font-family"][Ha](",")[0][La](/^['"]+|['"]+$/g,ra)+'"');k["font-size"]&&(q.fontSize=k["font-size"]);k["font-weight"]&&(q.fontWeight=k["font-weight"]);k["font-style"]&&(q.fontStyle=k["font-style"]);if(k.opacity!=null||k["stroke-width"]!=null||k.fill!=null||k.stroke!=null||k["stroke-width"]!=null||k["stroke-opacity"]!=null||k["fill-opacity"]!=null||k["stroke-dasharray"]!=null||k["stroke-miterlimit"]!=
null||k["stroke-linejoin"]!=null||k["stroke-linecap"]!=null){g=c.shape||g;q=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];o=false;!q&&(o=q=E("fill"));if("fill-opacity"in k||"opacity"in k){c=((+n["fill-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+a.getRGB(k.fill).o+1||2)-1);c<0&&(c=0);c>1&&(c=1);q.opacity=c}k.fill&&(q.on=true);if(q.on==null||k.fill=="none")q.on=false;if(q.on&&k.fill)if(c=k.fill.match(Pa)){q.src=c[1];q.type="tile"}else{q.color=a.getRGB(k.fill).hex;q.src=ra;q.type=
"solid";if(a.getRGB(k.fill).error&&(t.type in{circle:1,ellipse:1}||ya(k.fill).charAt()!="r")&&nb(t,k.fill)){n.fill="none";n.gradient=k.fill}}o&&g[ha](q);q=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];o=false;!q&&(o=q=E("stroke"));if(k.stroke&&k.stroke!="none"||k["stroke-width"]||k["stroke-opacity"]!=null||k["stroke-dasharray"]||k["stroke-miterlimit"]||k["stroke-linejoin"]||k["stroke-linecap"])q.on=true;(k.stroke=="none"||q.on==null||k.stroke==0||k["stroke-width"]==0)&&(q.on=
false);c=a.getRGB(k.stroke);q.on&&k.stroke&&(q.color=c.hex);c=((+n["stroke-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+c.o+1||2)-1);v=(ka(k["stroke-width"])||1)*0.75;c<0&&(c=0);c>1&&(c=1);k["stroke-width"]==null&&(v=n["stroke-width"]);k["stroke-width"]&&(q.weight=v);v&&v<1&&(c*=v)&&(q.weight=1);q.opacity=c;k["stroke-linejoin"]&&(q.joinstyle=k["stroke-linejoin"]||"miter");q.miterlimit=k["stroke-miterlimit"]||8;k["stroke-linecap"]&&(q.endcap=k["stroke-linecap"]=="butt"?"flat":k["stroke-linecap"]=="square"?
"square":"round");if(k["stroke-dasharray"]){c={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};q.dashstyle=c[la](k["stroke-dasharray"])?c[k["stroke-dasharray"]]:ra}o&&g[ha](q)}if(t.type=="text"){q=t.paper.span.style;n.font&&(q.font=n.font);n["font-family"]&&(q.fontFamily=n["font-family"]);n["font-size"]&&(q.fontSize=n["font-size"]);n["font-weight"]&&(q.fontWeight=n["font-weight"]);
n["font-style"]&&(q.fontStyle=n["font-style"]);t.node.string&&(t.paper.span.innerHTML=ya(t.node.string)[La](/</g,"&#60;")[La](/&/g,"&#38;")[La](/\n/g,"<br>"));t.W=n.w=t.paper.span.offsetWidth;t.H=n.h=t.paper.span.offsetHeight;t.X=n.x;t.Y=n.y+Ea(t.H/2);switch(n["text-anchor"]){case "start":t.node.style["v-text-align"]="left";t.bbx=Ea(t.W/2);break;case "end":t.node.style["v-text-align"]="right";t.bbx=-Ea(t.W/2);break;default:t.node.style["v-text-align"]="center";break}}};nb=function(c,k){c.attrs=c.attrs||
{};var g="linear",n=".5 .5";c.attrs.gradient=k;k=ya(k)[La](Cb,function(A,C,I){g="radial";if(C&&I){C=ka(C);I=ka(I);V(C-0.5,2)+V(I-0.5,2)>0.25&&(I=fa.sqrt(0.25-V(C-0.5,2))*((I>0.5)*2-1)+0.5);n=C+Ja+I}return ra});k=k[Ha](/\s*\-\s*/);if(g=="linear"){var q=k.shift();q=-ka(q);if(isNaN(q))return null}var o=Bb(k);if(!o)return null;c=c.shape||c.node;k=c.getElementsByTagName("fill")[0]||E("fill");!k.parentNode&&c.appendChild(k);if(o[W]){k.on=true;k.method="none";k.color=o[0].color;k.color2=o[o[W]-1].color;
c=[];for(var t=0,v=o[W];t<v;t++)o[t].offset&&c[ea](o[t].offset+Ja+o[t].color);k.colors&&(k.colors.value=c[W]?c[Oa]():"0% "+k.color);if(g=="radial"){k.type="gradientradial";k.focus="100%";k.focussize=n;k.focusposition=n}else{k.type="gradient";k.angle=(270-q)%360}}return 1};ga=function(c,k,g){this[0]=c;this.id=a._oid++;this.node=c;c.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=k;this.paper=g;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!g.bottom&&(g.bottom=this);(this.prev=g.top)&&(g.top.next=this);
g.top=this;this.next=null};ga[X].rotate=function(c,k,g){if(this.removed)return this;if(c==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][Oa](Ja);return this._.rt.deg}c=ya(c)[Ha](qa);if(c[W]-1){k=ka(c[1]);g=ka(c[2])}c=ka(c[0]);if(k!=null)this._.rt.deg=c;else this._.rt.deg+=c;g==null&&(k=null);this._.rt.cx=k;this._.rt.cy=g;this.setBox(this.attrs,k,g);this.Group.style.rotation=this._.rt.deg;return this};ga[X].setBox=function(c,k,g){if(this.removed)return this;var n=this.Group.style,
q=this.shape&&this.shape.style||this.node.style;c=c||{};for(var o in c)if(c[la](o))this.attrs[o]=c[o];k=k||this._.rt.cx;g=g||this._.rt.cy;var t=this.attrs,v;switch(this.type){case "circle":c=t.cx-t.r;o=t.cy-t.r;v=t=t.r*2;break;case "ellipse":c=t.cx-t.rx;o=t.cy-t.ry;v=t.rx*2;t=t.ry*2;break;case "image":c=+t.x;o=+t.y;v=t.width||0;t=t.height||0;break;case "text":this.textpath.v=["m",Ea(t.x),", ",Ea(t.y-2),"l",Ea(t.x)+1,", ",Ea(t.y-2)][Oa](ra);c=t.x-Ea(this.W/2);o=t.y-this.H/2;v=this.W;t=this.H;break;
case "rect":case "path":if(this.attrs.path){t=ob(this.attrs.path);c=t.x;o=t.y;v=t.width;t=t.height}else{o=c=0;v=this.paper.width;t=this.paper.height}break;default:o=c=0;v=this.paper.width;t=this.paper.height;break}k=k==null?c+v/2:k;g=g==null?o+t/2:g;k-=this.paper.width/2;g-=this.paper.height/2;var A;n.left!=(A=k+"px")&&(n.left=A);n.top!=(A=g+"px")&&(n.top=A);this.X=l[la](this.type)?-k:c;this.Y=l[la](this.type)?-g:o;this.W=v;this.H=t;if(l[la](this.type)){q.left!=(A=-k*10+"px")&&(q.left=A);q.top!=(A=
-g*10+"px")&&(q.top=A)}else if(this.type=="text"){q.left!=(A=-k+"px")&&(q.left=A);q.top!=(A=-g+"px")&&(q.top=A)}else{n.width!=(A=this.paper.width+"px")&&(n.width=A);n.height!=(A=this.paper.height+"px")&&(n.height=A);q.left!=(A=c-k+"px")&&(q.left=A);q.top!=(A=o-g+"px")&&(q.top=A);q.width!=(A=v+"px")&&(q.width=A);q.height!=(A=t+"px")&&(q.height=A)}};ga[X].hide=function(){!this.removed&&(this.Group.style.display="none");return this};ga[X].show=function(){!this.removed&&(this.Group.style.display="block");
return this};ga[X].getBBox=function(){if(this.removed)return this;if(l[la](this.type))return ob(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};ga[X].remove=function(){if(!this.removed){N(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var c in this)delete this[c];this.removed=true}};ga[X].attr=function(c,k){if(this.removed)return this;if(c==
null){c={};for(var g in this.attrs)if(this.attrs[la](g))c[g]=this.attrs[g];this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(k==null&&a.is(c,Ta)){if(c=="translation")return Ca.call(this);if(c=="rotation")return this.rotate();if(c=="scale")return this.scale();if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[c]}if(this.attrs&&
k==null&&a.is(c,Sa)){var n={};g=0;for(k=c[W];g<k;g++)n[c[g]]=this.attr(c[g]);return n}if(k!=null){n={};n[c]=k}k==null&&a.is(c,"object")&&(n=c);if(n){if(n.text&&this.type=="text")this.node.string=n.text;eb(this,n);if(n.gradient&&({circle:1,ellipse:1}[la](this.type)||ya(n.gradient).charAt()!="r"))nb(this,n.gradient);(!l[la](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};ga[X].toFront=function(){!this.removed&&this.Group.parentNode[ha](this.Group);this.paper.top!=this&&M(this,this.paper);
return this};ga[X].toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);T(this,this.paper)}return this};ga[X].insertAfter=function(c){if(this.removed)return this;c.Group.nextSibling?c.Group.parentNode.insertBefore(this.Group,c.Group.nextSibling):c.Group.parentNode[ha](this.Group);m(this,c,this.paper);return this};ga[X].insertBefore=function(c){if(this.removed)return this;c.Group.parentNode.insertBefore(this.Group,
c.Group);Z(this,c,this.paper);return this};var z=/ progid:\S+Blur\([^\)]+\)/g;ga[X].blur=function(c){var k=this.node.runtimeStyle,g=k.filter;g=g.replace(z,ra);if(+c!==0){this.attrs.blur=c;k.filter=g+Ja+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+c||1.5)+")";k.margin=Raphael.format("-{0}px 0 0 -{0}px",Math.round(+c||1.5))}else{k.filter=g;k.margin=0;delete this.attrs.blur}};rb=function(c,k,g,n){var q=E("group"),o=E("oval");q.style.cssText="position:absolute;left:0;top:0;width:"+c.width+
"px;height:"+c.height+"px";q.coordsize=b;q.coordorigin=c.coordorigin;q[ha](o);o=new ga(o,q,c);o.type="circle";eb(o,{stroke:"#000",fill:"none"});o.attrs.cx=k;o.attrs.cy=g;o.attrs.r=n;o.setBox({x:k-n,y:g-n,width:n*2,height:n*2});c.canvas[ha](q);return o};var y=function(c,k,g,n,q){return q?a.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",c+q,k,g-q*2,q,-q,n-q*2,q*2-g,q*2-n):a.format("M{0},{1}l{2},0,0,{3},{4},0z",c,k,g,
n,-g)};Db=function(c,k,g,n,q,o){var t=y(k,g,n,q,o);c=c.path(t);var v=c.attrs;c.X=v.x=k;c.Y=v.y=g;c.W=v.width=n;c.H=v.height=q;v.r=o;v.path=t;c.type="rect";return c};Eb=function(c,k,g,n,q){var o=E("group"),t=E("oval");o.style.cssText="position:absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px";o.coordsize=b;o.coordorigin=c.coordorigin;o[ha](t);t=new ga(t,o,c);t.type="ellipse";eb(t,{stroke:"#000"});t.attrs.cx=k;t.attrs.cy=g;t.attrs.rx=n;t.attrs.ry=q;t.setBox({x:k-n,y:g-q,width:n*2,height:q*
2});c.canvas[ha](o);return t};Fb=function(c,k,g,n,q,o){var t=E("group"),v=E("image");t.style.cssText="position:absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px";t.coordsize=b;t.coordorigin=c.coordorigin;v.src=k;t[ha](v);v=new ga(v,t,c);v.type="image";v.attrs.src=k;v.attrs.x=g;v.attrs.y=n;v.attrs.w=q;v.attrs.h=o;v.setBox({x:g,y:n,width:q,height:o});c.canvas[ha](t);return v};Gb=function(c,k,g,n){var q=E("group"),o=E("shape"),t=o.style,v=E("path"),A=E("textpath");q.style.cssText="position:absolute;left:0;top:0;width:"+
c.width+"px;height:"+c.height+"px";q.coordsize=b;q.coordorigin=c.coordorigin;v.v=a.format("m{0},{1}l{2},{1}",Ea(k*10),Ea(g*10),Ea(k*10)+1);v.textpathok=true;t.width=c.width;t.height=c.height;A.string=ya(n);A.on=true;o[ha](A);o[ha](v);q[ha](o);t=new ga(A,q,c);t.shape=o;t.textpath=v;t.type="text";t.attrs.text=n;t.attrs.x=k;t.attrs.y=g;t.attrs.w=1;t.attrs.h=1;eb(t,{font:cb.font,stroke:"none",fill:"#000"});t.setBox();c.canvas[ha](q);return t};sb=function(c,k){var g=this.canvas.style;c==+c&&(c+="px");
k==+k&&(k+="px");g.width=c;g.height=k;g.clip="rect(0 "+c+" "+k+" 0)";return this};var E;xa.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!xa.namespaces.rvml&&xa.namespaces.add("rvml","urn:schemas-microsoft-com:vml");E=function(c){return xa.createElement("<rvml:"+c+' class="rvml">')}}catch(G){E=function(c){return xa.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}yb=function(){var c=H[Ia](0,arguments),k=c.container,g=c.height,n=c.width,q=c.x;c=c.y;
if(!k)throw Error("VML container not found.");var o=new e,t=o.canvas=xa.createElement("div"),v=t.style;q=q||0;c=c||0;n=n||512;g=g||342;n==+n&&(n+="px");g==+g&&(g+="px");o.width=1E3;o.height=1E3;o.coordsize=1E4+Ja+1E4;o.coordorigin="0 0";o.span=xa.createElement("span");o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";t[ha](o.span);v.cssText=a.format("width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
n,g);if(k==1){xa.body[ha](t);v.left=q+"px";v.top=c+"px";v.position="absolute"}else k.firstChild?k.insertBefore(t,k.firstChild):k[ha](t);J.call(o,o,a.fn);return o};e[X].clear=function(){this.canvas.innerHTML=ra;this.span=xa.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[ha](this.span);this.bottom=this.top=null};e[X].remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]=
ca(c);return true}}e[X].safari=/^Apple|^Google/.test(sa.navigator.vendor)&&(!(sa.navigator.userAgent.indexOf("Version/4.0")+1)||sa.navigator.platform.slice(0,2)=="iP")?function(){var c=this.rect(-99,-99,this.width+99,this.height+99);sa.setTimeout(function(){c.remove()})}:function(){};var P=function(){if(xa.addEventListener)return function(c,k,g,n){function q(t){if(hb&&$a[la](k))for(var v=0,A=t.targetTouches&&t.targetTouches.length;v<A;v++)if(t.targetTouches[v].target==c){A=t;t=t.targetTouches[v];
t.originalEvent=A;t.preventDefault=oa;t.stopPropagation=Qa;break}return g.call(n,t)}var o=hb&&$a[k]?$a[k]:k;c.addEventListener(o,q,false);return function(){c.removeEventListener(o,q,false);return true}};else if(xa.attachEvent)return function(c,k,g,n){function q(o){o=o||sa.event;o.preventDefault=o.preventDefault||S;o.stopPropagation=o.stopPropagation||Ba;return g.call(n,o)}c.attachEvent("on"+k,q);return function(){c.detachEvent("on"+k,q);return true}}}();for(Ya=ib[W];Ya--;)(function(c){a[c]=ga[X][c]=
function(k){if(a.is(k,"function")){this.events=this.events||[];this.events.push({name:c,f:k,unbind:P(this.shape||this.node||xa,c,k,this)})}return this};a["un"+c]=ga[X]["un"+c]=function(k){for(var g=this.events,n=g[W];n--;)if(g[n].name==c&&g[n].f==k){g[n].unbind();g.splice(n,1);!g.length&&delete this.events;return this}return this}})(ib[Ya]);ga[X].hover=function(c,k){return this.mouseover(c).mouseout(k)};ga[X].unhover=function(c,k){return this.unmouseover(c).unmouseout(k)};ga[X].drag=function(c,k,
g){function n(t){var v=t.clientX,A=t.clientY;if(hb)for(var C=t.touches.length,I;C--;){I=t.touches[C];if(I.identifier==o._drag.id){v=I.clientX;A=I.clientY;(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();c&&c.call(o,v-o._drag.x,A-o._drag.y,v,A)}function q(){o._drag={};Raphael.unmousemove(n).unmouseup(q);g&&g.call(o)}this._drag={};var o=this.mousedown(function(t){(t.originalEvent?t.originalEvent:t).preventDefault();this._drag.x=t.clientX;this._drag.y=t.clientY;this._drag.id=
t.identifier;k&&k.call(this,t.clientX,t.clientY);Raphael.mousemove(n).mouseup(q)});return this};e[X].circle=function(c,k,g){return rb(this,c||0,k||0,g||0)};e[X].rect=function(c,k,g,n,q){return Db(this,c||0,k||0,g||0,n||0,q||0)};e[X].ellipse=function(c,k,g,n){return Eb(this,c||0,k||0,g||0,n||0)};e[X].path=function(c){c&&!a.is(c,Ta)&&!a.is(c[0],Sa)&&(c+=ra);return qb(a.format[Ia](a,arguments),this)};e[X].image=function(c,k,g,n,q){return Fb(this,c||"about:blank",k||0,g||0,n||0,q||0)};e[X].text=function(c,
k,g){return Gb(this,c||0,k||0,g||ra)};e[X].set=function(c){arguments[W]>1&&(c=Array[X].splice.call(arguments,0,arguments[W]));return new va(c)};e[X].setSize=sb;e[X].top=e[X].bottom=null;e[X].raphael=a;ga[X].resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};ga[X].scale=function(c,k,g,n){if(this.removed)return this;if(c==null&&k==null)return{x:this._.sx,y:this._.sy,toString:Ga};k=k||c;!+k&&(k=c);var q,o,t=this.attrs;if(c!=0){var v=this.getBBox(),A=v.x+
v.width/2,C=v.y+v.height/2;q=c/this._.sx;o=k/this._.sy;g=+g||g==0?g:A;n=+n||n==0?n:C;v=~~(c/fa.abs(c));var I=~~(k/fa.abs(k)),U=this.node.style,ba=g+(A-g)*q;C=n+(C-n)*o;switch(this.type){case "rect":case "image":var Y=t.width*v*q,L=t.height*I*o;this.attr({height:L,r:t.r*Aa(v*q,I*o),width:Y,x:ba-Y/2,y:C-L/2});break;case "circle":case "ellipse":this.attr({rx:t.rx*v*q,ry:t.ry*I*o,r:t.r*Aa(v*q,I*o),cx:ba,cy:C});break;case "text":this.attr({x:ba,y:C});break;case "path":A=wb(t.path);for(var da=true,Ra=0,
za=A[W];Ra<za;Ra++){var na=A[Ra],Ua=gb.call(na[0]);if(!(Ua=="M"&&da)){da=false;if(Ua=="A"){na[A[Ra][W]-2]*=q;na[A[Ra][W]-1]*=o;na[1]*=v*q;na[2]*=I*o;na[5]=+!(v+I?!+na[5]:+na[5])}else if(Ua=="H"){Ua=1;for(var kb=na[W];Ua<kb;Ua++)na[Ua]*=q}else if(Ua=="V"){Ua=1;for(kb=na[W];Ua<kb;Ua++)na[Ua]*=o}else{Ua=1;for(kb=na[W];Ua<kb;Ua++)na[Ua]*=Ua%2?q:o}}}o=ob(A);q=ba-o.x-o.width/2;o=C-o.y-o.height/2;A[0][1]+=q;A[0][2]+=o;this.attr({path:A});break}if(this.type in{text:1,image:1}&&(v!=1||I!=1))if(this.transformations){this.transformations[2]=
"scale("[Na](v,",",I,")");this.node.setAttribute("transform",this.transformations[Oa](Ja));q=v==-1?-t.x-(Y||0):t.x;o=I==-1?-t.y-(L||0):t.y;this.attr({x:q,y:o});t.fx=v-1;t.fy=I-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11="[Na](v,", M12=0, M21=0, M22=",I,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");U.filter=(this.node.filterMatrix||ra)+(this.node.filterOpacity||ra)}else if(this.transformations){this.transformations[2]=ra;this.node.setAttribute("transform",
this.transformations[Oa](Ja));t.fx=0;t.fy=0}else{this.node.filterMatrix=ra;U.filter=(this.node.filterMatrix||ra)+(this.node.filterOpacity||ra)}t.scale=[c,k,g,n][Oa](Ja);this._.sx=c;this._.sy=k}return this};ga[X].clone=function(){if(this.removed)return null;var c=this.attr();delete c.scale;delete c.translation;return this.paper[this.type]().attr(c)};var O=p(function(c,k,g,n,q,o,t,v,A){for(var C=0,I,U=0;U<1.001;U+=0.0010){var ba=a.findDotsAtSegment(c,k,g,n,q,o,t,v,U);U&&(C+=V(V(I.x-ba.x,2)+V(I.y-ba.y,
2),0.5));if(C>=A)return ba;I=ba}}),Q=p(function(c,k,g,n,q,o,t,v){for(var A={x:0,y:0},C=0,I=0;I<1.01;I+=0.01){var U=F(c,k,g,n,q,o,t,v,I);I&&(C+=V(V(A.x-U.x,2)+V(A.y-U.y,2),0.5));A=U}return C}),aa=Ma(1),ma=Ma(),Da=Ma(0,1);ga[X].getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return aa(this.attrs.path)}};ga[X].getPointAtLength=function(c){if(this.type=="path")return ma(this.attrs.path,c)};ga[X].getSubpath=function(c,k){if(this.type=="path"){if(fa.abs(this.getTotalLength()-
k)<1.0E-6)return Da(this.attrs.path,c).end;k=Da(this.attrs.path,k,1);return c?Da(k,c).end:k}};a.easing_formulas={linear:function(c){return c},"<":function(c){return V(c,3)},">":function(c){return V(c-1,3)+1},"<>":function(c){c*=2;if(c<1)return V(c,3)/2;c-=2;return(V(c,3)+2)/2},backIn:function(c){return c*c*(2.70158*c-1.70158)},backOut:function(c){c-=1;return c*c*(2.70158*c+1.70158)+1},elastic:function(c){if(c==0||c==1)return c;return V(2,-10*c)*fa.sin((c-0.075)*2*fa.PI/0.3)+1},bounce:function(c){if(c<
1/2.75)c=7.5625*c*c;else if(c<2/2.75){c-=1.5/2.75;c=7.5625*c*c+0.75}else if(c<2.5/2.75){c-=2.25/2.75;c=7.5625*c*c+0.9375}else{c-=2.625/2.75;c=7.5625*c*c+0.984375}return c}};var wa={length:0};ga[X].animateWith=function(c,k,g,n,q){wa[c.id]&&(k.start=wa[c.id].start);return this.animate(k,g,n,q)};ga[X].animateAlong=ta();ga[X].animateAlongBack=ta(1);ga[X].onAnimation=function(c){this._run=c||0;return this};ga[X].animate=function(c,k,g,n){if(a.is(g,"function")||!g)n=g||null;var q={},o={},t={};for(var v in c)if(c[la](v))if(fb[la](v)){q[v]=
this.attr(v);q[v]==null&&(q[v]=cb[v]);o[v]=c[v];switch(fb[v]){case "along":var A=aa(c[v]),C=ma(c[v],A*!!c.back),I=this.getBBox();t[v]=A/k;t.tx=I.x;t.ty=I.y;t.sx=C.x;t.sy=C.y;o.rot=c.rot;o.back=c.back;o.len=A;c.rot&&(t.r=ka(this.rotate())||0);break;case K:t[v]=(o[v]-q[v])/k;break;case "colour":q[v]=a.getRGB(q[v]);A=a.getRGB(o[v]);t[v]={r:(A.r-q[v].r)/k,g:(A.g-q[v].g)/k,b:(A.b-q[v].b)/k};break;case "path":A=pb(q[v],o[v]);q[v]=A[0];C=A[1];t[v]=[];A=0;for(I=q[v][W];A<I;A++){t[v][A]=[0];for(var U=1,ba=
q[v][A][W];U<ba;U++)t[v][A][U]=(C[A][U]-q[v][A][U])/k}break;case "csv":C=ya(c[v])[Ha](qa);A=ya(q[v])[Ha](qa);switch(v){case "translation":q[v]=[0,0];t[v]=[C[0]/k,C[1]/k];break;case "rotation":q[v]=A[1]==C[1]&&A[2]==C[2]?A:[0,C[1],C[2]];t[v]=[(C[0]-q[v][0])/k,0,0];break;case "scale":c[v]=C;q[v]=ya(q[v])[Ha](qa);t[v]=[(C[0]-q[v][0])/k,(C[1]-q[v][1])/k,0,0];break;case "clip-rect":q[v]=ya(q[v])[Ha](qa);t[v]=[];for(A=4;A--;)t[v][A]=(C[A]-q[v][A])/k;break}o[v]=C}}this.stop();this.in_animation=1;wa[this.id]=
{start:c.start||+new Date,ms:k,easing:g,from:q,diff:t,to:o,el:this,callback:n,t:{x:0,y:0}};++wa[W]==1&&ua();return this};ga[X].stop=function(){wa[this.id]&&wa[W]--;delete wa[this.id];return this};ga[X].translate=function(c,k){return this.attr({translation:c+" "+k})};ga[X][ja]=function(){return"Rapha\u00ebl\u2019s object"};a.ae=wa;va[X][ea]=function(){for(var c,k,g=0,n=arguments[W];g<n;g++)if((c=arguments[g])&&(c.constructor==ga||c.constructor==va)){k=this.items[W];this[k]=this.items[k]=c;this[W]++}return this};
va[X].pop=function(){delete this[this[W]--];return this.items.pop()};for(var Ka in ga[X])if(ga[X][la](Ka))va[X][Ka]=function(c){return function(){for(var k=0,g=this.items[W];k<g;k++)this.items[k][c][Ia](this.items[k],arguments);return this}}(Ka);va[X].attr=function(c,k){if(c&&a.is(c,Sa)&&a.is(c[0],"object")){k=0;for(var g=c[W];k<g;k++)this.items[k].attr(c[k])}else{g=0;for(var n=this.items[W];g<n;g++)this.items[g].attr(c,k)}return this};va[X].animate=function(c,k,g,n){(a.is(g,"function")||!g)&&(n=
g||null);var q=this.items[W],o=q,t,v=this,A;n&&(A=function(){!--q&&n.call(v)});g=a.is(g,Ta)?g:A;for(t=this.items[--o].animate(c,k,g,A);o--;)this.items[o].animateWith(t,c,k,g,A);return this};va[X].insertAfter=function(c){for(var k=this.items[W];k--;)this.items[k].insertAfter(c);return this};va[X].getBBox=function(){for(var c=[],k=[],g=[],n=[],q=this.items[W];q--;){var o=this.items[q].getBBox();c[ea](o.x);k[ea](o.y);g[ea](o.x+o.width);n[ea](o.y+o.height)}c=Aa[Ia](0,c);k=Aa[Ia](0,k);return{x:c,y:k,width:Xa[Ia](0,
g)-c,height:Xa[Ia](0,n)-k}};va[X].clone=function(c){c=new va;for(var k=0,g=this.items[W];k<g;k++)c[ea](this.items[k].clone());return c};a.registerFont=function(c){if(!c.face)return c;this.fonts=this.fonts||{};var k={w:c.w,face:{},glyphs:{}},g=c.face["font-family"];for(var n in c.face)if(c.face[la](n))k.face[n]=c.face[n];if(this.fonts[g])this.fonts[g][ea](k);else this.fonts[g]=[k];if(!c.svg){k.face["units-per-em"]=bb(c.face["units-per-em"],10);for(var q in c.glyphs)if(c.glyphs[la](q)){g=c.glyphs[q];
k.glyphs[q]={w:g.w,k:{},d:g.d&&"M"+g.d[La](/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"};if(g.k)for(var o in g.k)if(g[la](o))k.glyphs[q].k[o]=g.k[o]}}return c};e[X].getFont=function(c,k,g,n){n=n||"normal";g=g||"normal";k=+k||{normal:400,bold:700,lighter:300,bolder:800}[k]||400;if(a.fonts){var q=a.fonts[c];if(!q){c=RegExp("(^|\\s)"+c[La](/[^\w\d\s+!~.:_-]/g,ra)+"(\\s|$)","i");for(var o in a.fonts)if(a.fonts[la](o))if(c.test(o)){q=a.fonts[o];break}}var t;if(q){o=
0;for(c=q[W];o<c;o++){t=q[o];if(t.face["font-weight"]==k&&(t.face["font-style"]==g||!t.face["font-style"])&&t.face["font-stretch"]==n)break}}return t}};e[X].print=function(c,k,g,n,q,o){o=o||"middle";var t=this.set(),v=ya(g)[Ha](ra),A=0;a.is(n,g)&&(n=this.getFont(n));if(n){g=(q||16)/n.face["units-per-em"];var C=n.face.bbox.split(qa);q=+C[0];o=+C[1]+(o=="baseline"?C[3]-C[1]+ +n.face.descent:(C[3]-C[1])/2);C=0;for(var I=v[W];C<I;C++){var U=C&&n.glyphs[v[C-1]]||{},ba=n.glyphs[v[C]];A+=C?(U.w||n.w)+(U.k&&
U.k[v[C]]||0):0;ba&&ba.d&&t[ea](this.path(ba.d).attr({fill:"#000",stroke:"none",translation:[A,0]}))}t.scale(g,g,q,o).translate(c-q,k-o)}return t};var ab=/\{(\d+)\}/g;a.format=function(c,k){var g=a.is(k,Sa)?[0][Na](k):arguments;c&&a.is(c,Ta)&&g[W]-1&&(c=c[La](ab,function(n,q){return g[++q]==null?ra:g[q]}));return c||ra};a.ninja=function(){Wa.was?Raphael=Wa.is:delete Raphael;return a};a.el=ga[X];return a}();(function(a,e){function f(V,ea){V=V?' id="'+ca+V+'"':"";return a("<div"+V+(ea?' style="'+ea+'"':"")+"/>")}function h(V,ea){ea=ea===T?Wa.width():Wa.height();return typeof V==="string"?Math.round(V.match(/%/)?ea/100*parseInt(V,10):parseInt(V,10)):V}function r(V){V=a.isFunction(V)?V.call(fa):V;return K.photo||V.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function p(){for(var V in K)if(a.isFunction(K[V])&&V.substring(0,2)!==M)K[V]=K[V].call(fa);K.rel=K.rel||fa.rel||N;K.href=K.href||a(fa).attr("href");
K.title=K.title||fa.title}function u(V){fa=V;K=a.extend({},a(fa).data(Z));p();if(K.rel!==N){sa=a("."+jb).filter(function(){return(a(this).data(Z).rel||this.rel)===K.rel});Aa=sa.index(fa);if(Aa===-1){sa=sa.add(fa);Aa=sa.length-1}}else{sa=a(fa);Aa=0}if(!Ta){Ta=Sa=J;Xa=fa;try{Xa.blur()}catch(ea){}a.event.trigger(S);K.onOpen&&K.onOpen.call(fa);Ca.css({opacity:+K.opacity,cursor:K.overlayClose?"pointer":H}).show();K.w=h(K.initialWidth,T);K.h=h(K.initialHeight,F);ja.position(0);ua&&Wa.bind(D+pa+" scroll."+
pa,function(){Ca.css({width:Wa.width(),height:Wa.height(),top:Wa.scrollTop(),left:Wa.scrollLeft()})}).trigger("scroll."+pa)}ra.add(Ha).add(ya).add(Ja).add(hb).hide();ib.html(K.close).show();ja.slideshow();ja.load()}var B="click",D="resize.",F="y",H="auto",J=true,N="nofollow",M="on",T="x",m={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:J,scrolling:J,inline:false,html:false,
iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:J,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,loop:J,slideshow:false,slideshowAuto:J,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:J,escKey:J,arrowKey:J},Z="colorbox",ca="cbox",S=ca+"_open",oa=ca+"_load",Ba=ca+"_complete",Qa=ca+"_cleanup",Ga=ca+
"_closed",Ma=a.browser.msie&&!a.support.opacity,ua=Ma&&a.browser.version<7,pa=ca+"_IE6",Ca,ta,va,qa,Za,X,la,xa,sa,Wa,ha,Ia,Na,hb,ra,Ja,ya,Ha,ib,$a,Oa,W,Va,fa,Xa,Aa,K,Ta,Sa,ja,jb=ca+"Element";ja=a.fn[Z]=a[Z]=function(V,ea){var Fa=this;if(!Fa[0]&&Fa.selector)return Fa;V=V||{};if(ea)V.onComplete=ea;if(!Fa[0]||Fa.selector===undefined){Fa=a("<a/>");V.open=J}Fa.each(function(){a(this).data(Z,a.extend({},a(this).data(Z)||m,V)).addClass(jb)});V.open&&u(Fa[0]);return Fa};ja.init=function(){Wa=a(e);ta=f().attr({id:Z,
"class":Ma?ca+"IE":""});Ca=f("Overlay",ua?"position:absolute":"").hide();va=f("Wrapper");qa=f("Content").append(ha=f("LoadedContent","width:0; height:0"),Na=f("LoadingOverlay").add(f("LoadingGraphic")),hb=f("Title"),ra=f("Current"),ya=f("Next"),Ha=f("Previous"),Ja=f("Slideshow"),ib=f("Close"));va.append(f().append(f("TopLeft"),Za=f("TopCenter"),f("TopRight")),f().append(X=f("MiddleLeft"),qa,la=f("MiddleRight")),f().append(f("BottomLeft"),xa=f("BottomCenter"),f("BottomRight"))).children().children().css({"float":"left"});
Ia=f(false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(Ca,ta.append(va,Ia));qa.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");$a=Za.height()+xa.height()+qa.outerHeight(J)-qa.height();Oa=X.width()+la.width()+qa.outerWidth(J)-qa.width();W=ha.outerHeight(J);Va=ha.outerWidth(J);ta.css({"padding-bottom":$a,"padding-right":Oa}).hide();ya.click(ja.next);Ha.click(ja.prev);ib.click(ja.close);qa.children().removeClass("hover");
a("."+jb).live(B,function(V){if(V.button!==0&&typeof V.button!=="undefined"||V.ctrlKey||V.shiftKey||V.altKey)return J;else{u(this);return false}});Ca.click(function(){K.overlayClose&&ja.close()});a(document).bind("keydown",function(V){if(Ta&&K.escKey&&V.keyCode===27){V.preventDefault();ja.close()}if(Ta&&K.arrowKey&&!Sa&&sa[1])if(V.keyCode===37&&(Aa||K.loop)){V.preventDefault();Ha.click()}else if(V.keyCode===39&&(Aa<sa.length-1||K.loop)){V.preventDefault();ya.click()}})};ja.remove=function(){ta.add(Ca).remove();
a("."+jb).die(B).removeData(Z).removeClass(jb)};ja.position=function(V,ea){function Fa(ka){Za[0].style.width=xa[0].style.width=qa[0].style.width=ka.style.width;Na[0].style.height=Na[1].style.height=qa[0].style.height=X[0].style.height=la[0].style.height=ka.style.height}var Pa,db=Math.max(Wa.height()-K.h-W-$a,0)/2+Wa.scrollTop(),Ea=Math.max(Wa.width()-K.w-Va-Oa,0)/2+Wa.scrollLeft();Pa=ta.width()===K.w+Va&&ta.height()===K.h+W?0:V;va[0].style.width=va[0].style.height="9999px";ta.dequeue().animate({width:K.w+
Va,height:K.h+W,top:db,left:Ea},{duration:Pa,complete:function(){Fa(this);Sa=false;va[0].style.width=K.w+Va+Oa+"px";va[0].style.height=K.h+W+$a+"px";ea&&ea()},step:function(){Fa(this)}})};ja.resize=function(V){if(Ta){V=V||{};if(V.width)K.w=h(V.width,T)-Va-Oa;if(V.innerWidth)K.w=h(V.innerWidth,T);ha.css({width:K.w});if(V.height)K.h=h(V.height,F)-W-$a;if(V.innerHeight)K.h=h(V.innerHeight,F);if(!V.innerHeight&&!V.height){V=ha.wrapInner("<div style='overflow:auto'></div>").children();K.h=V.height();V.replaceWith(V.children())}ha.css({height:K.h});
ja.position(K.transition==="none"?0:K.speed)}};ja.prep=function(V){function ea(db){var Ea,ka,bb,gb,cb=sa.length,fb=K.loop;ja.position(db,function(){function La(){Ma&&ta[0].style.removeAttribute("filter")}if(Ta){Ma&&Fa&&ha.fadeIn(100);K.iframe&&a("<iframe frameborder=0"+(K.scrolling?"":" scrolling='no'")+(Ma?" allowtransparency='true'":"")+"/>").appendTo(ha).attr({src:K.href,name:(new Date).getTime()});ha.show();hb.show().html(K.title);if(cb>1){ra.html(K.current.replace(/\{current\}/,Aa+1).replace(/\{total\}/,
cb)).show();ya[fb||Aa<cb-1?"show":"hide"]().html(K.next);Ha[fb||Aa?"show":"hide"]().html(K.previous);Ea=Aa?sa[Aa-1]:sa[cb-1];bb=Aa<cb-1?sa[Aa+1]:sa[0];if(K.slideshow){Ja.show();Aa===cb-1&&!fb&&ta.is("."+ca+"Slideshow_on")&&Ja.click()}if(K.preloading){gb=a(bb).data(Z).href||bb.href;ka=a(Ea).data(Z).href||Ea.href;if(r(gb))a("<img/>")[0].src=gb;if(r(ka))a("<img/>")[0].src=ka}}Na.hide();K.transition==="fade"?ta.fadeTo(Pa,1,function(){La()}):La();Wa.bind(D+ca,function(){ja.position(0)});a.event.trigger(Ba);
K.onComplete&&K.onComplete.call(fa)}})}if(Ta){var Fa,Pa=K.transition==="none"?0:K.speed;Wa.unbind(D+ca);ha.remove();ha=f("LoadedContent").html(V);ha.hide().appendTo(Ia.show()).css({width:function(){K.w=K.w||ha.width();K.w=K.mw&&K.mw<K.w?K.mw:K.w;return K.w}(),overflow:K.scrolling?H:"hidden"}).css({height:function(){K.h=K.h||ha.height();K.h=K.mh&&K.mh<K.h?K.mh:K.h;return K.h}()}).prependTo(qa);Ia.hide();a("#"+ca+"Photo").css({cssFloat:"none"});ua&&a("select").not(ta.find("select")).filter(function(){return this.style.visibility!==
"hidden"}).css({visibility:"hidden"}).one(Qa,function(){this.style.visibility="inherit"});K.transition==="fade"?ta.fadeTo(Pa,0,function(){ea(0)}):ea(Pa)}};ja.load=function(){var V,ea,Fa,Pa=ja.prep;Sa=J;fa=sa[Aa];K=a.extend({},a(fa).data(Z));p();a.event.trigger(oa);K.onLoad&&K.onLoad.call(fa);K.h=K.height?h(K.height,F)-W-$a:K.innerHeight&&h(K.innerHeight,F);K.w=K.width?h(K.width,T)-Va-Oa:K.innerWidth&&h(K.innerWidth,T);K.mw=K.w;K.mh=K.h;if(K.maxWidth){K.mw=h(K.maxWidth,T)-Va-Oa;K.mw=K.w&&K.w<K.mw?
K.w:K.mw}if(K.maxHeight){K.mh=h(K.maxHeight,F)-W-$a;K.mh=K.h&&K.h<K.mh?K.h:K.mh}V=K.href;Na.show();if(K.inline){f("InlineTemp").hide().insertBefore(a(V)[0]).bind(oa+" "+Qa,function(){a(this).replaceWith(ha.children())});Pa(a(V))}else if(K.iframe)Pa(" ");else if(K.html)Pa(K.html);else if(r(V)){ea=new Image;ea.onload=function(){var db;ea.onload=null;ea.id=ca+"Photo";a(ea).css({margin:H,border:"none",display:"block",cssFloat:"left"});if(K.scalePhotos){Fa=function(){ea.height-=ea.height*db;ea.width-=
ea.width*db};if(K.mw&&ea.width>K.mw){db=(ea.width-K.mw)/ea.width;Fa()}if(K.mh&&ea.height>K.mh){db=(ea.height-K.mh)/ea.height;Fa()}}if(K.h)ea.style.marginTop=Math.max(K.h-ea.height,0)/2+"px";setTimeout(function(){Pa(ea)},1);sa[1]&&(Aa<sa.length-1||K.loop)&&a(ea).css({cursor:"pointer"}).click(ja.next);if(Ma)ea.style.msInterpolationMode="bicubic"};ea.src=V}else f().appendTo(Ia).load(V,function(db,Ea,ka){Pa(Ea==="error"?"Request unsuccessful: "+ka.statusText:this)})};ja.next=function(){if(!Sa){Aa=Aa<
sa.length-1?Aa+1:0;ja.load()}};ja.prev=function(){if(!Sa){Aa=Aa?Aa-1:sa.length-1;ja.load()}};ja.slideshow=function(){function V(){Ja.text(K.slideshowStop).bind(Ba,function(){Fa=setTimeout(ja.next,K.slideshowSpeed)}).bind(oa,function(){clearTimeout(Fa)}).one(B,function(){ea()});ta.removeClass(Pa+"off").addClass(Pa+M)}var ea,Fa,Pa=ca+"Slideshow_";Ja.bind(Ga,function(){Ja.unbind();clearTimeout(Fa);ta.removeClass(Pa+"off "+Pa+M)});ea=function(){clearTimeout(Fa);Ja.text(K.slideshowStart).unbind(Ba+" "+
oa).one(B,function(){V();Fa=setTimeout(ja.next,K.slideshowSpeed)});ta.removeClass(Pa+M).addClass(Pa+"off")};if(K.slideshow&&sa[1])K.slideshowAuto?V():ea()};ja.close=function(){if(Ta){Ta=false;a.event.trigger(Qa);K.onCleanup&&K.onCleanup.call(fa);Wa.unbind("."+ca+" ."+pa);Ca.fadeTo("fast",0);ta.stop().fadeTo("fast",0,function(){ta.find("iframe").attr("src","about:blank");ha.remove();ta.add(Ca).css({opacity:1,cursor:H}).hide();try{Xa.focus()}catch(V){}setTimeout(function(){a.event.trigger(Ga);K.onClosed&&
K.onClosed.call(fa)},1)})}};ja.element=function(){return a(fa)};ja.settings=m;a(ja.init)})(jQuery,this);(function(a){function e(u){function B(D){var F=RegExp(a.map(D,encodeURIComponent).join("|"),"ig");return function(H){return H.replace(F,decodeURIComponent)}}u=a.extend({unescape:false},u||{});f.encoder=function(D){if(D===true)return function(F){return F};if(typeof D=="string"&&(D=B(D.split("")))||typeof D=="function")return function(F){return D(encodeURIComponent(F))};return encodeURIComponent}(u.unescape)}var f={put:function(u,B){(B||window).location.hash=this.encoder(u)},get:function(u){u=(u||window).location.hash.replace(/^#/,
"");try{return a.browser.mozilla?u:decodeURIComponent(u)}catch(B){return u}},encoder:encodeURIComponent},h={id:"__jQuery_history",init:function(){var u='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(u);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(u){var B=this._document();B.open();B.close();f.put(u,B)},get:function(){return f.get(this._document())}},r={};r.base={callback:undefined,type:undefined,check:function(){},
load:function(){},init:function(u,B){e(B);p.callback=u;p._options=B;p._init()},_init:function(){},_options:{}};r.timer={_appState:undefined,_init:function(){var u=f.get();p._appState=u;p.callback(u);setInterval(p.check,100)},check:function(){var u=f.get();if(u!=p._appState){p._appState=u;p.callback(u)}},load:function(u){if(u!=p._appState){f.put(u);p._appState=u;p.callback(u)}}};r.iframeTimer={_appState:undefined,_init:function(){var u=f.get();p._appState=u;h.init().put(u);p.callback(u);setInterval(p.check,
100)},check:function(){var u=h.get(),B=f.get();if(B!=u)if(B==p._appState){p._appState=u;f.put(u);p.callback(u)}else{p._appState=B;h.put(B);p.callback(B)}},load:function(u){if(u!=p._appState){f.put(u);h.put(u);p._appState=u;p.callback(u)}}};r.hashchangeEvent={_init:function(){p.callback(f.get());a(window).bind("hashchange",p.check)},check:function(){p.callback(f.get())},load:function(u){f.put(u)}};var p=a.extend({},r.base);p.type=a.browser.msie&&(a.browser.version<8||document.documentMode<8)?"iframeTimer":
"onhashchange"in window?"hashchangeEvent":"timer";a.extend(p,r[p.type]);a.history=p})(jQuery);var stage=[window.screenX,window.screenY,window.innerWidth,window.innerHeight],res_current=-1,res={multiplier:[1,1.4],name:["sd","hd"],cssFile:["assets/css/ftm-sd.css","assets/css/ftm-hd.css"],gaugeIndicatorNeedleSrc:["assets/img/sd/pressure-display-pointer-sd.png","assets/img/hd/pressure-display-pointer-hd.png"],spawnY:[-215,-280],bubbleSizeMax:[200,300],bubbleSizeMin:[130,190],avatarLeft:["-22%","-22%"],avatarTop:["20px","20px"],maxBubbles:[8,10],logoWidth:[220,310]},version="",worldAABB,world,
iterations=1,time_step=1/30,walls=[],wall_thickness=200,wallsSetted=false,bodies=[],elements=[],text,bubble_wrapper,search_query="",PI2=Math.PI*2,gravity_y=-50,gravity_y_inverted=150,gauge_max_minutes=20,spawn_y_impulse=-15,spawn_y_impulse_inverted=-400,spawn_y_impulse_current=spawn_y_impulse,interval_spawn,interval_loop,timeout_data_interval,timeout_data_interval_time=6E4,timeout_getcustomsearch,fresh_custom_search=true,debug=false,data_update_count=0,bubble_count=0,lamp_time_on=1E3,pool=[],pool_index=
0,pool_count_spawned=0,timeline_data,timeline_data_max_id=0,sb_timeline_step=0,search_data="",search_data_max_id=0,sb_clock_step=0,sb_clock_last=0,sb_ffdownloads_step=0,sb_ffdownloads_last=0,sb_ffdownloads_total=0,sb_followers_step=0,sb_followers_last=0,sb_followers_total=0,keywords,ds_type,ds_datetime,ds_datetime_description,ds_datetime_reached,ds_datetime_interval,ds_followers,ds_followers_description,ds_stats_retweets=0,ds_stats_facebook_shares=0,idleTimeout,isIdle=true;getBrowserDimensions();
function loadCSS(a){var e=document.createElement("link");e.href=a;e.rel="stylesheet";e.type="text/css";e.media="screen, projection";document.getElementsByTagName("head")[0].appendChild(e)}
$(document).ready(function(){$(window).resize(function(){getBrowserDimensions();setWalls()});loadCSS(res.cssFile[res_current]);init();play();timeout_data_interval=setInterval(getDataFromProxy,timeout_data_interval_time);$.history.init(function(a){if(a!=""){$("#search-input").val(decodeURIComponent(a));search()}},{unescape:""});$("#flow-transposer a").click(function(){var a=$(this).parent();if(a.hasClass("up")){a.removeClass("up").addClass("down");pause()}else{a.removeClass("down").addClass("up");
play()}return false});$("#gravity-inverter a").click(function(){var a=$(this).parent();if(world.m_gravity.y==gravity_y){a.removeClass("up").addClass("down");world.m_gravity.y=gravity_y_inverted;spawn_y_impulse_current=spawn_y_impulse_inverted}else{a.removeClass("down").addClass("up");world.m_gravity.y=gravity_y;spawn_y_impulse_current=spawn_y_impulse}return false});$("form#search-box").submit(function(){search();$.history.load(search_query);return false});$("a.colorbox").colorbox({width:"50%",opacity:0.8,
inline:true,href:"#colophon",title:" ",scrolling:false,onComplete:function(){$.colorbox.resize()}});$(this).mousemove(function(){isIdle=false;idleTimeout||(idleTimeout=setTimeout("setIdle()",3E3))});input_field_values=[];$("input").each(function(){input_field_values[$(this).attr("name")]=$(this).attr("value")}).focus(function(){input_field_values[$(this).attr("name")]==$(this).attr("value")&&$(this).attr("value","")}).blur(function(){$(this).attr("value")==""&&$(this).attr("value",input_field_values[$(this).attr("name")])})});
function setIdle(){clearTimeout(idleTimeout);idleTimeout=null;isIdle=true}function play(){interval_loop=setInterval(loop,25);interval_spwan=setInterval(spawn,4E3)}function pause(){clearInterval(interval_loop);clearInterval(interval_spwan)}
function init(){bubble_wrapper=document.getElementById("bubbles");worldAABB=new b2AABB;worldAABB.minVertex.Set(-200,0);worldAABB.maxVertex.Set(screen.width+200,screen.height+1E3);world=new b2World(worldAABB,new b2Vec2(0,0),false);world.m_gravity.y=gravity_y;setWalls()}
function calculateGauge(){if(search_data.length){var a=new Date(search_data[0].created_at),e=search_data.length<=10?new Date(search_data[search_data.length-1].created_at):new Date(search_data[9].created_at);a=Math.abs(a.getTime()-e.getTime())/6E4;degrees=a>gauge_max_minutes?2:180-a*180/gauge_max_minutes}else degrees=0;gaugeIndicatorNeedleMove(degrees)}
function getDataFromProxy(){$.getJSON("/proxy.php",function(a){if(a.status.http_code==200){data_update_count++;sb_clock_step=a.contents.special_bubbles.sb_clock_step;sb_ffdownloads_step=a.contents.special_bubbles.sb_ffdownloads_step;sb_ffdownloads_total=a.contents.special_bubbles.sb_ffdownloads_total;sb_followers_step=a.contents.special_bubbles.sb_followers_step;sb_timeline_step=a.contents.special_bubbles.sb_timeline_step;ds_type=a.contents.display.ds_type;ds_datetime=a.contents.display.ds_datetime;
ds_datetime_description=a.contents.display.ds_datetime_description;ds_datetime_reached=a.contents.display.ds_datetime_reached;ds_followers=a.contents.display.ds_followers;ds_followers_description=a.contents.display.ds_followers_description;ds_stats_facebook_shares=a.contents.display.ds_stats_facebook_shares;ds_stats_retweets=a.contents.display.ds_stats_retweets;keywords=a.contents.keywords;checkVersion(a.contents.version);if(a.contents.timeline.length){sb_followers_total=a.contents.timeline[0].user.followers_count;
timeline_data=a.contents.timeline;timeline_data.reverse()}else throwError("Twitter REST API down");if(search_query=="")if(a.contents.search_results.results){search_data=a.contents.search_results.results;process_search_result()}else throwError("Twitter Search API down");specialBubbleFFDownloadsCheck();specialBubbleFollowersCheck();updateStats();updateCountdown()}else throwError("Error (HTTP Code "+a.status.http_code+")");spawn()})}
function checkVersion(a){if(a!=version&&version!="")window.location=window.location;version=a}function search(){clearPool();$("#search-submit-bttn").addClass("loading");search_query=encodeURIComponent($("#search-input").val());fresh_custom_search=true;clearTimeout(timeout_getcustomsearch);getCustomSearch()}
function getCustomSearch(){$.getJSON("http://search.twitter.com/search.json?callback=?&rpp=40&q="+search_query,function(a){if(a.results){search_data=a.results;process_search_result()}else throwError("Twitter Search API down");$("#search-submit-bttn").removeClass("loading")});timeout_getcustomsearch=setTimeout(getCustomSearch,3E5)}
function process_search_result(){calculateGauge();search_data.reverse();var a=[],e;for(e=0;e<search_data.length;e++){var f=search_data[e];if(f.id>search_data_max_id){pool.splice(pool_index,0,{type:"search",data:f});a.push(f.from_user);search_data_max_id=f.id}}a.length>0&&$.getJSON("proxy.php?screen_names="+a.toString(),function(h){if(h)for(e=0;e<h.contents.length;e++)for(j=0;j<pool.length;j++)if(pool[j].type=="search")if(pool[j].data.from_user.toLowerCase()==h.contents[e].screen_name.toLowerCase())pool[j].data.user=
h.contents[e]});if(fresh_custom_search){if(e==0)pool.splice(pool_index,0,{type:"search_presenter",data:{h1:"Sorry",p:"Zero tweets found"}});else if(search_query!=""){search_query_short='"'+friendlyTrim(decodeURIComponent(search_query),16)+'"';pool.splice(pool_index,0,{type:"search_presenter",data:{h1:"Showing results for",p:search_query_short}})}else pool.splice(pool_index,0,{type:"search_presenter",data:{h1:"Showing Firefox activity on twitter",p:""}});fresh_custom_search=false}}
function clearPool(){pool_index=search_data_max_id=0;pool=[]}function friendlyTrim(a,e){var f=a.substr(0,e);if(a.length>e)f+="...";return f}
function updateCountdown(){var a;clearInterval(ds_datetime_interval);if(ds_type=="followers"){if(sb_followers_total>ds_followers){counter_dd=addCommas(sb_followers_total)+" followers";a="Previous milestone: "+addCommas(ds_followers)}else{counter_dd=addCommas(sb_followers_total)+" followers";a=addCommas(ds_followers-sb_followers_total)+" to reach "+addCommas(ds_followers)}$("#counter dd").text(counter_dd).attr("title",counter_dd)}else if(ds_type=="datetime"){a=ds_datetime_description;ds_datetime_interval=
setInterval(datetimeCountdown,1E3)}else a=counter_dd="";$("#counter dt").text(a).attr("title",a)}function updateStats(){$("dd.twitter-follow a").text(addCommas(sb_followers_total));$("dd.twitter-retweet a").text(addCommas(ds_stats_retweets));$("dd.fb-share a").text(addCommas(ds_stats_facebook_shares))}
function spawn(){if(pool.length!=0)if(!(bodies.length>=res.maxBubbles[res_current])){if(pool_index+1>pool.length)pool_index=0;createBubble(pool[pool_index].type,pool[pool_index].data);pool_count_spawned++;pool_index++;specialBubbleTimelineCheck()}}function getHeightClass(a){var e="";return e=res_current==0?a<=100?"s":a<=140?"m":a<=180?"l":a<=220?"xl":"xxl":a<=150?"s":a<=200?"m":a<=250?"l":a<=300?"xl":"xxl"}
function createBubble(a,e){var f=stage[2]/2,h=stage[3]+res.spawnY[res_current];bubble_count++;var r;turnLampOn();setTimeout(turnLampOff,lamp_time_on);var p=document.createElement("article");switch(a){case "search":r="high";if(e.user){followers_count=parseInt(e.user.followers_count);r=followers_count<=100?"low":followers_count<=300?"med":followers_count<=600?"high":"vhigh"}p.className="bubble tweet "+r;p.innerHTML=buildBubbleTweet(e);break;case "clock":p.className="bubble time";p.innerHTML=buildBubbleClock(e);
pool.splice(pool_index,1);pool_index--;break;case "ffdownloads":p.className="bubble downloads";p.innerHTML=buildBubbleDownloads(e);pool.splice(pool_index,1);pool_index--;break;case "followers":p.className="bubble followers";p.innerHTML=buildBubbleFollowers(e);pool.splice(pool_index,1);pool_index--;break;case "timeline":p.className="bubble tweet firefox vhigh";p.innerHTML=buildBubbleTweet(e);pool.splice(pool_index,1);pool_index--;break;case "error":p.className="bubble error";p.innerHTML=buildBubbleError(e);
pool.splice(pool_index,1);pool_index--;break;case "search_presenter":p.className="bubble search";p.innerHTML=buildBubbleSearch(e);pool.splice(pool_index,1);pool_index--;break}p.style.position="absolute";p.style.left="-600px";p.style.top="0px";p.id=bubble_count;jquery_element=$(p);$(bubble_wrapper).append(p);height=jquery_element.height();height_class=getHeightClass(height);jquery_element.addClass(height_class);$.data(jquery_element,"height_class",height_class);r=0.5*res.bubbleSizeMax[res_current]+
0.5*height;if(r>res.bubbleSizeMax[res_current])r=res.bubbleSizeMax[res_current];if(r<res.bubbleSizeMin[res_current])r=res.bubbleSizeMin[res_current];p.width=r;p.height=r;jquery_element.hover(function(){if(!isIdle){$(this).css({"z-index":"999"}).find("nav").fadeIn(20);bubble_left=Math.floor($(this).css("left").replace("px",""));bubble_top=Math.floor($(this).css("top").replace("px",""));bubble_left-res.logoWidth[res_current]<0&&bubble_top-150<0&&$("header").css({"z-index":"10"});for(var D=bodies.length,
F=$(this).attr("id"),H=0;H<D;H++)if(bodies[H].m_userData.id==F)bodies[H].m_userData.hover=true}},function(){$(this).css({"z-index":"10"}).find("nav").fadeOut(100);$("header").css({"z-index":"40"});for(var D=0;D<bodies.length;D++)if(bodies[D].m_userData.id==$(this).attr("id"))bodies[D].m_userData.hover=false});jquery_element.find("li.flip a").click(function(){for(var D=bodies.length,F=$(this).parents(".bubble").attr("id"),H="",J=0;J<D;J++)if(bodies[J].m_userData.id==F)H=bodies[J].m_userData.height_class;
if($(this).parents(".bubble").find("section").hasClass("hide")){$(this).parents(".bubble").find("p.text, header, section").toggleClass("hide");$(this).parents(".bubble").removeClass(H);height=$(this).parents(".bubble").height();new_height_class=getHeightClass(height);$(this).parents(".bubble").addClass(new_height_class)}else{$(this).parents(".bubble").removeClass("s m l xl xxl");$(this).parents(".bubble").addClass(H);$(this).parents(".bubble").find("p.text, header, section").toggleClass("hide")}return false});
$(bubble_wrapper).find(".avatar-wrapper").delay(500).animate({left:res.avatarLeft[res_current],top:res.avatarTop[res_current]},1E3);elements.push(p);var u=new b2BodyDef,B=new b2CircleDef;B.radius=r>>1;B.density=1;B.friction=0.6;B.restitution=0.3;B.preventRotation=true;u.AddShape(B);u.userData={element:p,id:bubble_count,hover:false,height_class:height_class};u.position.Set(f,h);u.linearVelocity.Set(Math.random()*400-200,spawn_y_impulse_current);bodies.push(world.CreateBody(u))}
function setWalls(){if(wallsSetted){world.DestroyBody(walls[0]);world.DestroyBody(walls[1]);world.DestroyBody(walls[2]);world.DestroyBody(walls[3]);walls[0]=null;walls[1]=null;walls[2]=null;walls[3]=null}walls[0]=createBox(world,stage[2]/2,0,stage[2],10*res.multiplier[res_current]);walls[1]=createBox(world,stage[2]/2,stage[3],stage[2],100*res.multiplier[res_current]);walls[2]=createPoly(world,stage[2]/2+100*res.multiplier[res_current],stage[3]-330*res.multiplier[res_current],[[10*res.multiplier[res_current],
0],[40*res.multiplier[res_current],0],[110*res.multiplier[res_current],60*res.multiplier[res_current]],[110*res.multiplier[res_current],330*res.multiplier[res_current]],[0,330*res.multiplier[res_current]]],true);walls[3]=createPoly(world,stage[2]/2-210*res.multiplier[res_current],stage[3]-330*res.multiplier[res_current],[[70*res.multiplier[res_current],0],[100*res.multiplier[res_current],0],[110*res.multiplier[res_current],330*res.multiplier[res_current]],[0,330*res.multiplier[res_current]],[0,60*
res.multiplier[res_current]]],true);wallsSetted=true}function specialBubbleClockCheck(){if(sb_clock_step>0){var a=new Date;hours=a.getHours();minutes=a.getMinutes();seconds=a.getSeconds();if(minutes<10)minutes="0"+minutes;if(seconds==0&&minutes%sb_clock_step==0&&hours+"h"+minutes!=sb_clock_last){sb_clock_last=hours+"h"+minutes;pool.splice(pool_index,0,{type:"clock",data:sb_clock_last})}}}
function specialBubbleFFDownloadsCheck(){if(sb_ffdownloads_step>0){if(sb_ffdownloads_last==0)sb_ffdownloads_last=sb_ffdownloads_total;if(sb_ffdownloads_total>sb_ffdownloads_last&&Math.floor(sb_ffdownloads_total/sb_ffdownloads_step)>Math.floor(sb_ffdownloads_last/sb_ffdownloads_step)){sb_ffdownloads_last=sb_ffdownloads_total;pool.splice(pool_index,0,{type:"ffdownloads",data:addCommas(Math.floor(sb_ffdownloads_total/sb_ffdownloads_step)*sb_ffdownloads_step)})}}}
function specialBubbleFollowersCheck(){if(sb_followers_step>0){if(sb_followers_last==0)sb_followers_last=sb_followers_total;if(sb_followers_total>sb_followers_last&&Math.floor(sb_followers_total/sb_followers_step)>Math.floor(sb_followers_last/sb_followers_step)){sb_followers_last=sb_followers_total;pool.splice(pool_index,0,{type:"followers",data:addCommas(Math.floor(sb_followers_total/sb_followers_step)*sb_followers_step)})}}}
function specialBubbleTimelineCheck(){if(timeline_data)if(sb_timeline_step>0&&timeline_data.length>0)if(pool_count_spawned%sb_timeline_step==0||!search_data.length){for(var a=0,e=false;a<timeline_data.length&&!e;){var f=timeline_data[a];if(f.id>timeline_data_max_id){pool.splice(pool_index,0,{type:"timeline",data:f});timeline_data_max_id=f.id;e=true}a++}if(!e){timeline_data_max_id=0;specialBubbleTimelineCheck()}}}
function loop(){specialBubbleClockCheck();world.Step(time_step,iterations);for(i=0;i<bodies.length;i++){var a=bodies[i],e=elements[i];newLeft=a.m_position0.x-(e.width>>1);newTop=a.m_position0.y-(e.height>>1)-10*res.multiplier[res_current];e.style.left=newLeft+"px";e.style.top=newTop+"px";a.m_userData.hover&&a.m_linearVelocity.SetZero();if(newLeft+Math.floor(e.width)<=-100||newLeft>stage[2]+100){world.DestroyBody(a);bodies.splice(i,1);elements.splice(i,1);$(e).remove()}if(Math.abs(a.m_position0.x-
stage[2]/2)<150&&newTop<20){if(Math.abs(a.m_linearVelocity.x)<20){newx=a.m_position0.x-stage[2]/2<0?-50:50;a.m_linearVelocity.Set(newx,a.m_linearVelocity.y)}}else newTop<2&&a.m_linearVelocity.y<0&&a.m_linearVelocity.Set(a.m_linearVelocity.x,40)}}function createBox(a,e,f,h,r,p){if(typeof p=="undefined")p=true;var u=new b2BoxDef;if(!p)u.density=1;u.extents.Set(h,r);h=new b2BodyDef;h.AddShape(u);h.position.Set(e,f);return a.CreateBody(h)}
function createPoly(a,e,f,h,r){var p=new b2PolyDef;if(!r)p.density=1;p.vertexCount=h.length;for(r=0;r<h.length;r++)p.vertices[r].Set(h[r][0],h[r][1]);h=new b2BodyDef;h.AddShape(p);h.position.Set(e,f);return a.CreateBody(h)}function getBrowserDimensions(){stage[0]=window.screenX;stage[1]=window.screenY;stage[2]=window.innerWidth;stage[3]=window.innerHeight;res_new=stage[2]>=1400&&stage[3]>=840?1:0;if(res_new!=res_current&&res_current!=-1)window.location=window.location;res_current=res_new}
function buildBubbleTweet(a){var e="",f="",h="",r="",p="",u="",B="";if(a.user){e=a.user.name;f=a.user.screen_name;h=a.user.profile_image_url;r=a.user.location;p=a.user.url;u=a.user.description}if(a.from_user)f=a.from_user;if(a.profile_image_url)h=a.profile_image_url;if(res_current==1){h=h.replace("normal","bigger");profile_image_size=65}else profile_image_size=48;B=create_urls(a.text);B=filterKeywords(B);created_at=new Date(a.created_at.substring(4));html='\t\t<header class="">\t\t\t<h1><a href="http://twitter.com/'+
f+'" title="'+f+'" rel="author external">'+f+'</a> wrote</h1>\t\t\t<time datetime="'+created_at+'" pubdate><a href="http://twitter.com/'+f+"/status/"+a.id+'" rel="bookmark external" title="permalink">'+jQuery.timeago(a.created_at.substring(4))+'</a></time>\t\t</header>\t\t<p class="avatar-wrapper"><a href="http://twitter.com/'+f+'" title="'+f+'" rel="author external"><img alt="'+f+' avatar" src="\t\t'+h+'" height="'+profile_image_size+'" width="'+profile_image_size+'" /></a></p>\t\t<p class="text">'+
B+'</p>\t\t<section class="hide">\t\t\t<dl>';html=e?html+"\t\t\t\t  <dt>Name</dt>\t\t\t\t  <dd>"+e+"</dd>":html+"\t\t\t\t  <dt>Profile</dt>\t\t\t\t  <dd>N/A</dd>";if(r)html=html+"\t\t\t\t  <dt>Location</dt>\t\t\t\t  <dd>"+r+"</dd>";if(p)html=html+'\t\t\t\t  <dt>Web</dt>\t\t\t\t  <dd><a href="'+p+'" rel="author external" title="Web">'+friendlyTrim(p.replace("http://",""),12)+"</a></dd>";if(u)html=html+"\t\t\t\t  <dt>Bio</dt>\t\t\t\t  <dd>"+friendlyTrim(u,44)+"</dd>";return html=html+'\t\t    </dl>\t\t</section>\t\t<nav class="hide">\t\t\t<ul>\t\t\t\t<li class="flip"><a href="#section-id-01" title="Flip bubble">Flip</a></li>\t\t\t\t<li class="retweet"><a href="http://button.topsy.com/retweet?nick='+
f+"&title="+a.text+'" title="Retweet" rel="external">Retweet</a></li>\t\t\t\t<li class="follow"><a href="http://twitter.com/'+f+'" title="Follow '+f+'" rel="external">Follow</a></li>\t\t\t</ul>\t\t</nav>\t'}function buildBubbleClock(a){return html="\t\t<h1>Cuckoo!</h1>\t\t<p>"+a+"</p>  "}function buildBubbleFollowers(a){return html='\t\t<a href="http://twitter.com/firefox/followers" title="Firefox followers" rel="external">\t\t\t<h1>@firefox followers</h1>\t\t\t<p>'+a+"</p>\t\t</a>  "}
function buildBubbleDownloads(a){return html='\t\t<a href="http://www.mozilla.com/en-US/firefox/stats/" title="Firefox downloads" rel="external">\t\t\t<h1>Firefox downloads</h1>\t\t\t<p>'+a+"</p>\t\t</a>  "}function buildBubbleError(a){return html="  \t<h1>Malfunction!</h1>  \t<p>"+a+"</p>  "}function buildBubbleSearch(a){return html="  \t<h1>"+a.h1+"</h1>  \t<p>"+a.p+"</p>  "}function throwError(a){pool.splice(pool_index,0,{type:"error",data:a})}
function addCommas(a){a+="";x=a.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function turnLampOn(){$("#activity-indicator").removeClass("off").addClass("on")}function turnLampOff(){$("#activity-indicator").removeClass("on").addClass("off")}
function create_urls(a){return a.replace(/(ftp|http|https|file):\/\/([\S]+(\b|$))/gim,'<a href="$&" class="my_link" target="_blank">$2</a>').replace(/([^\/])(www[\S]+(\b|$))/gim,'$1<a href="http://$2" class="my_link" target="_blank">$2</a>').replace(/(^|\s)@(\w+)/g,'$1<a href="http://twitter.com/$2" class="my_link" target="_blank">@$2</a>').replace(/(^|\s)#(\S+)/g,'$1<a href="http://search.twitter.com/search?q=%23$2" class="my_link" target="_blank">#$2</a>')}
function filterKeywords(a){if(keywords){for(var e in keywords.highlights)if(keywords.highlights.hasOwnProperty(e)){fKwords=keywords.highlights[e].replace(/,/gi,"|");if(fKwords!=""){var f=RegExp("(\\s|:|^)("+fKwords+")(\\s|:\\s|(\\.\\s)|(\\,\\s)|$)","gi");a=a.replace(f,'$1<span class="mood '+e+'">$2</span>$3')}}fKwords=keywords.excluded.replace(/,/gi,"|");if(fKwords!=""){f=RegExp("(\\s|:|^)("+fKwords+")","gi");a=a.replace(f,"$1#@*%");f=RegExp("("+fKwords+")(\\s|:\\s|(\\.\\s)|(\\,\\s)|$)","gi");a=a.replace(f,
"#@*%$2")}}return a}
function datetimeCountdown(){dateFuture=new Date(ds_datetime);localDate=new Date;utc=localDate.getTime()+localDate.getTimezoneOffset()*6E4;dateNow=new Date(utc+-25200000);amount=dateFuture.getTime()-dateNow.getTime();delete dateNow;if(amount<0)$("#counter dd").text(ds_datetime_reached).attr("title",ds_datetime_reached);else{secs=mins=hours=days=0;out="";amount=Math.floor(amount/1E3);days=Math.floor(amount/86400);amount%=86400;hours=Math.floor(amount/3600);amount%=3600;mins=Math.floor(amount/60);amount%=
60;secs=Math.floor(amount);if(days!=0)out+=days+"d : ";if(days!=0||hours!=0)out+=hours+"h : ";if(days!=0||hours!=0||mins!=0)out+=mins+"m : ";out+=secs+"s";$("#counter dd").text(out).attr("title",out)}};$(document).ready(function(){if(!isAndroid()){gauge_indicator_needle_src=res.gaugeIndicatorNeedleSrc[res_current];gauge_indicator_needle_angle=-90;$(".pointer").attr("id","pointer").text("");R=Raphael("pointer",70*res.multiplier[res_current],30*res.multiplier[res_current]);gauge_indicator_needle=R.image(gauge_indicator_needle_src,30*res.multiplier[res_current],-4*res.multiplier[res_current],8*res.multiplier[res_current],56*res.multiplier[res_current]);R.safari()}});
function gaugeIndicatorNeedleMove(a){if(!isAndroid()){gauge_indicator_needle.animate({rotation:-90},300,"linear");a-=90;setTimeout(function(){gauge_indicator_needle.animate({rotation:a},2500,"bounce")},300)}}var uagent=navigator.userAgent.toLowerCase();function isAndroid(){return uagent.search("android")>-1?true:false};$(document).ready(function(){modifier_keys_pressed=keyboard_debug=false;$(document).keydown(function(a){if(!$("input#search-input:focus").length&&!modifier_keys_pressed){if(a.keyCode==71){"console"in window&&keyboard_debug&&console.log("pressed G - toggling gravity");$("#gravity-inverter a").trigger("click");return false}else if(a.keyCode==80){"console"in window&&keyboard_debug&&console.log("pressed P - toggling play");$("#flow-transposer a").trigger("click");return false}else if(a.keyCode==83){"console"in
window&&keyboard_debug&&console.log("pressed S - focusing search box");$("input#search-input").focus();return false}else if(a.keyCode==66){"console"in window&&keyboard_debug&&console.log("pressed B - spawning bubble");spawn();return false}else if(a.keyCode==65){"console"in window&&keyboard_debug&&console.log("pressed A - showing about box");$("a.colorbox").trigger("click");return false}else if(a.ctrlKey||a.metaKey||a.altKey||a.shiftKey){"console"in window&&keyboard_debug&&console.log("cmd or ctrl pressed");
modifier_keys_pressed=true}if("console"in window&&keyboard_debug){console.log(a);console.log("mod keys: "+modifier_keys_pressed)}}else if(a.keyCode==27){"console"in window&&keyboard_debug&&console.log("pressed Esc - removing focus (blurring) search box");$("input#search-input").blur();return false}}).keyup(function(){modifier_keys_pressed=false;if("console"in window&&keyboard_debug){console.log("keys released");console.log("mod keys: "+modifier_keys_pressed)}})});$(document).ready(function(){$("#page").css({opacity:0});setTimeout(function(){$.preloadCssImages()},500)});$(window).load(function(){$("#page").animate({opacity:1},500);getDataFromProxy()});function WebTrends(){this.dcsid="dcsvj81q5wz5bd3hm5k1vpmtq_7x7i";this.domain="statse.webtrendslive.com";this.timezone=0;this.fpcdom=".firefoxtweetmachine.com";this.onsitedoms="";this.downloadtypes="xls,doc,pdf,txt,csv,zip, xpi";this.navigationtag="div,table";this.enabled=this.trimoffsiteparams=this.trackevents=true;this.i18n=false;this.fpc="WT_FPC";this.paidsearchparams="gclid";this.DCS={};this.WT={};this.DCSext={};this.images=[];this.index=0;this.exre=window.RegExp?/dcs(uri)|(ref)|(aut)|(met)|(sta)|(sip)|(pro)|(byt)|(dat)|(p3p)|(cfg)|(redirect)|(cip)/i:
"";this.re=window.RegExp?this.i18n?{"%25":/\%/g}:{"%09":/\t/g,"%20":/ /g,"%23":/\#/g,"%26":/\&/g,"%2B":/\+/g,"%3F":/\?/g,"%5C":/\\/g,"%22":/\"/g,"%7F":/\x7F/g,"%A0":/\xA0/g}:""}
WebTrends.prototype.dcsGetId=function(){if(this.enabled&&document.cookie.indexOf(this.fpc+"=")==-1&&document.cookie.indexOf("WTLOPTOUT=")==-1){script_tag=document.createElement("script");script_tag.type="text/javascript";script_tag.src="http"+(window.location.protocol.indexOf("https:")==0?"s":"")+"://"+this.domain+"/"+this.dcsid+"/wtid.js";document.body.appendChild(script_tag)}};
WebTrends.prototype.dcsGetCookie=function(a){var e=document.cookie.split("; "),f=[],h=0,r=0,p=a.length,u=e.length;for(r=0;r<u;r++){var B=e[r];if(B.substring(0,p+1)==a+"=")f[h++]=B}e=f.length;if(e>0){h=0;if(e>1&&a==this.fpc){a=new Date(0);for(r=0;r<e;r++){u=parseInt(this.dcsGetCrumb(f[r],"lv"));u=new Date(u);if(u>a){a.setTime(u.getTime());h=r}}}return unescape(f[h].substring(p+1))}else return null};
WebTrends.prototype.dcsGetCrumb=function(a,e,f){a=a.split(f||":");for(f=0;f<a.length;f++){var h=a[f].split("=");if(e==h[0])return h[1]}return null};WebTrends.prototype.dcsGetIdCrumb=function(a,e){for(var f=a.substring(0,a.indexOf(":lv=")).split("="),h=0;h<f.length;h++)if(e==f[0])return f[1];return null};WebTrends.prototype.dcsIsFpcSet=function(a,e,f,h){if(a=this.dcsGetCookie(a))return e==this.dcsGetIdCrumb(a,"id")&&f==this.dcsGetCrumb(a,"lv")&&h==this.dcsGetCrumb(a,"ss")?0:3;return 2};
WebTrends.prototype.dcsFPC=function(){if(document.cookie.indexOf("WTLOPTOUT=")==-1){var a=this.WT,e=this.fpc,f=new Date,h=f.getTimezoneOffset()*6E4+this.timezone*36E5;f.setTime(f.getTime()+h);var r=new Date(f.getTime()+31536E7),p=new Date(f.getTime());a.co_f=a.vtid=a.vtvs=a.vt_f=a.vt_f_a=a.vt_f_s=a.vt_f_d=a.vt_f_tlh=a.vt_f_tlv="";if(document.cookie.indexOf(e+"=")==-1){if(typeof gWtId!="undefined"&&gWtId!="")a.co_f=gWtId;else{if(typeof gTempWtId!="undefined"&&gTempWtId!="")a.co_f=gTempWtId;else{a.co_f=
"2";for(var u=f.getTime().toString(),B=2;B<=32-u.length;B++)a.co_f+=Math.floor(Math.random()*16).toString(16);a.co_f+=u}a.vt_f="1"}if(typeof gWtAccountRollup=="undefined")a.vt_f_a="1";a.vt_f_s=a.vt_f_d="1";a.vt_f_tlh=a.vt_f_tlv="0"}else{var D=this.dcsGetCookie(e);u=this.dcsGetIdCrumb(D,"id");B=parseInt(this.dcsGetCrumb(D,"lv"));D=parseInt(this.dcsGetCrumb(D,"ss"));if(u==null||u=="null"||isNaN(B)||isNaN(D))return;a.co_f=u;u=new Date(B);a.vt_f_tlh=Math.floor((u.getTime()-h)/1E3);p.setTime(D);if(f.getTime()>
u.getTime()+18E5||f.getTime()>p.getTime()+288E5){a.vt_f_tlv=Math.floor((p.getTime()-h)/1E3);p.setTime(f.getTime());a.vt_f_s="1"}if(f.getDay()!=u.getDay()||f.getMonth()!=u.getMonth()||f.getYear()!=u.getYear())a.vt_f_d="1"}a.co_f=escape(a.co_f);a.vtid=typeof this.vtid=="undefined"?a.co_f:this.vtid||"";a.vtvs=(p.getTime()-h).toString();h="; expires="+r.toGMTString();f=f.getTime().toString();p=p.getTime().toString();document.cookie=e+"=id="+a.co_f+":lv="+f+":ss="+p+h+"; path=/"+(this.fpcdom!=""?"; domain="+
this.fpcdom:"");e=this.dcsIsFpcSet(e,a.co_f,f,p);if(e!=0){a.co_f=a.vtvs=a.vt_f_s=a.vt_f_d=a.vt_f_tlh=a.vt_f_tlv="";if(typeof this.vtid=="undefined")a.vtid="";a.vt_f=a.vt_f_a=e}}};WebTrends.prototype.dcsIsOnsite=function(a){if(a.length>0){a=a.toLowerCase();if(a==window.location.hostname.toLowerCase())return true;if(typeof this.onsitedoms.test=="function")return this.onsitedoms.test(a);else if(this.onsitedoms.length>0)for(var e=this.dcsSplit(this.onsitedoms),f=e.length,h=0;h<f;h++)if(a==e[h])return true}return false};
WebTrends.prototype.dcsTypeMatch=function(a,e){for(var f=a.toLowerCase().substring(a.lastIndexOf(".")+1,a.length),h=this.dcsSplit(e),r=h.length,p=0;p<r;p++)if(f==h[p])return true;return false};WebTrends.prototype.dcsEvt=function(a,e){for(var f=a.target||a.srcElement;f.tagName&&f.tagName.toLowerCase()!=e.toLowerCase();)f=f.parentElement||f.parentNode;return f};
WebTrends.prototype.dcsNavigation=function(a){var e="",f="",h=this.dcsSplit(this.navigationtag),r=h.length,p,u;for(p=0;p<r;p++){u=h[p];if(u.length){f=this.dcsEvt(a,u);e=f.getAttribute&&f.getAttribute("id")?f.getAttribute("id"):"";f=f.className||"";if(e.length||f.length)break}}return e.length?e:f};
WebTrends.prototype.dcsBind=function(a,e){if(typeof e=="function"&&document.body)if(document.body.addEventListener)document.body.addEventListener(a,e.wtbind(this),true);else document.body.attachEvent&&document.body.attachEvent("on"+a,e.wtbind(this))};WebTrends.prototype.dcsET=function(){var a=navigator.appVersion.indexOf("MSIE")!=-1?"click":"mousedown";this.dcsBind(a,this.dcsDownload);this.dcsBind(a,this.dcsOffsite);this.dcsBind("contextmenu",this.dcsRightClick)};
WebTrends.prototype.dcsMultiTrack=function(){var a=dcsMultiTrack.arguments?dcsMultiTrack.arguments:arguments;if(a.length%2==0){this.dcsSetProps(a);this.DCS.dcsdat=(new Date).getTime();this.dcsFPC();this.dcsTag()}};WebTrends.prototype.dcsCleanUp=function(){this.DCS={};this.WT={};this.DCSext={};arguments.length%2==0&&this.dcsSetProps(arguments)};
WebTrends.prototype.dcsSetProps=function(a){for(var e=0;e<a.length;e+=2)if(a[e].indexOf("WT.")==0)this.WT[a[e].substring(3)]=a[e+1];else if(a[e].indexOf("DCS.")==0)this.DCS[a[e].substring(4)]=a[e+1];else if(a[e].indexOf("DCSext.")==0)this.DCSext[a[e].substring(7)]=a[e+1]};WebTrends.prototype.dcsSplit=function(a){a=a.toLowerCase().split(",");for(var e=a.length,f=0;f<e;f++)a[f]=a[f].replace(/^\s*/,"").replace(/\s*$/,"");return a};
WebTrends.prototype.dcsDownload=function(a){if((a=a||window.event||"")&&(typeof a.which!="number"||a.which==1)){var e=this.dcsEvt(a,"A");if(e.href){var f=e.hostname?e.hostname.split(":")[0]:"";if(this.dcsIsOnsite(f)&&this.dcsTypeMatch(e.pathname,this.downloadtypes)){e.search&&e.search.substring(e.search.indexOf("?")+1,e.search.length);var h=e.pathname?e.pathname.indexOf("/")!=0?"/"+e.pathname:e.pathname:"/",r="",p=document.all?e.innerText:e.text,u=this.dcsEvt(a,"IMG");if(u.alt)r=u.alt;else if(p)r=
p;else if(e.innerHTML)r=e.innerHTML;this.dcsMultiTrack("DCS.dcssip",f,"DCS.dcsuri",h,"DCS.dcsqry",e.search||"","WT.ti","Download:"+r,"WT.dl","20","WT.nv",this.dcsNavigation(a));this.DCS.dcssip=this.DCS.dcsuri=this.DCS.dcsqry=this.WT.ti=this.WT.dl=this.WT.nv=""}}}};
WebTrends.prototype.dcsRightClick=function(a){if(a=a||window.event||"")if((a.which||a.button)!=1||navigator.userAgent.indexOf("Safari")!=-1){a=this.dcsEvt(a,"A");if(typeof a.href!="undefined"&&a.href)if(typeof a.protocol!="undefined"&&a.protocol&&a.protocol.indexOf("http")!=-1)if(typeof a.pathname!="undefined"&&this.dcsTypeMatch(a.pathname,this.downloadtypes)){var e=a.pathname?a.pathname.indexOf("/")!=0?"/"+a.pathname:a.pathname:"/";this.dcsMultiTrack("DCS.dcssip",a.hostname?a.hostname.split(":")[0]:
"","DCS.dcsuri",e,"DCS.dcsqry","","WT.ti","RightClick:"+e,"WT.dl","25");this.DCS.dcssip=this.DCS.dcsuri=this.WT.ti=this.WT.dl=this.WT.nv=""}}};
WebTrends.prototype.dcsOffsite=function(a){if((a=a||window.event||"")&&(typeof a.which!="number"||a.which==1)){var e=this.dcsEvt(a,"A");if(e.href){var f=e.hostname?e.hostname.split(":")[0]:"",h=e.protocol||"";if(f.length>0&&h.indexOf("http")==0&&!this.dcsIsOnsite(f)){h=e.search?e.search.substring(e.search.indexOf("?")+1,e.search.length):"";e=e.pathname?e.pathname.indexOf("/")!=0?"/"+e.pathname:e.pathname:"/";this.dcsMultiTrack("DCS.dcssip",f,"DCS.dcsuri",e,"DCS.dcsqry",this.trimoffsiteparams?"":h,
"DCS.dcsref",window.location,"WT.ti","Offsite:"+f+e+"?"+h,"WT.dl","24","WT.nv",this.dcsNavigation(a));this.DCS.dcssip=this.DCS.dcsuri=this.DCS.dcsqry=this.DCS.dcsref=this.WT.ti=this.WT.dl=this.WT.nv=""}}}};WebTrends.prototype.dcsAdv=function(){if(this.trackevents&&typeof this.dcsET=="function")if(window.addEventListener)window.addEventListener("load",this.dcsET.wtbind(this),false);else window.attachEvent&&window.attachEvent("onload",this.dcsET.wtbind(this));this.dcsFPC()};
WebTrends.prototype.dcsVar=function(){var a=new Date,e=this.WT,f=this.DCS;e.tz=parseInt(a.getTimezoneOffset()/60*-1)||"0";e.bh=a.getHours()||"0";e.ul=navigator.appName=="Netscape"?navigator.language:navigator.userLanguage;if(typeof screen=="object"){e.cd=navigator.appName=="Netscape"?screen.pixelDepth:screen.colorDepth;e.sr=screen.width+"x"+screen.height}if(typeof navigator.javaEnabled()=="boolean")e.jo=navigator.javaEnabled()?"Yes":"No";if(document.title)if(window.RegExp){var h=RegExp("^"+window.location.protocol+
"//"+window.location.hostname+"\\s-\\s");e.ti=document.title.replace(h,"")}else e.ti=document.title;e.js="Yes";e.jv=function(){var u=navigator.userAgent.toLowerCase(),B=parseInt(navigator.appVersion),D=u.indexOf("mac")!=-1,F=u.indexOf("firefox")!=-1,H=u.indexOf("firefox/0.")!=-1,J=u.indexOf("firefox/1.0")!=-1,N=u.indexOf("firefox/1.5")!=-1,M=u.indexOf("firefox/2.0")!=-1,T=F&&!H&&!J&!N&!M,m=!F&&u.indexOf("mozilla")!=-1&&u.indexOf("compatible")==-1;F=m&&B==4;m=m&&B>=5;var Z=u.indexOf("msie")!=-1&&u.indexOf("opera")==
-1;B=Z&&B==4&&u.indexOf("msie 4")!=-1;Z=Z&&!B;var ca=u.indexOf("opera")!=-1,S=u.indexOf("opera 5")!=-1||u.indexOf("opera/5")!=-1;u=u.indexOf("opera 6")!=-1||u.indexOf("opera/6")!=-1;ca=ca&&!S&&!u;var oa="1.1";if(T)oa="1.8";else if(M)oa="1.7";else if(N)oa="1.6";else if(H||J||m||ca)oa="1.5";else if(D&&Z||u)oa="1.4";else if(Z||F||S)oa="1.3";else if(B)oa="1.2";return oa}();e.ct="unknown";if(document.body&&document.body.addBehavior)try{document.body.addBehavior("#default#clientCaps");e.ct=document.body.connectionType||
"unknown";document.body.addBehavior("#default#homePage");e.hp=document.body.isHomePage(location.href)?"1":"0"}catch(r){}e.bs=document.all?document.body?document.body.offsetWidth+"x"+document.body.offsetHeight:"unknown":window.innerWidth+"x"+window.innerHeight;e.fv=function(){var u;if(window.ActiveXObject)for(u=10;u>0;u--)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+u);return u+".0"}catch(B){}else if(navigator.plugins&&navigator.plugins.length)for(u=0;u<navigator.plugins.length;u++)if(navigator.plugins[u].name.indexOf("Shockwave Flash")!=
-1)return navigator.plugins[u].description.split(" ")[2];return"Not enabled"}();e.slv=function(){var u="Not enabled";try{if(navigator.userAgent.indexOf("MSIE")!=-1){if(new ActiveXObject("AgControl.AgControl"))u="Unknown"}else if(navigator.plugins["Silverlight Plug-In"])u="Unknown"}catch(B){}if(u!="Not enabled"){var D,F,H;if(typeof Silverlight=="object"&&typeof Silverlight.isInstalled=="function")for(D=3;D>0;D--){for(F=9;F>=0;F--){H=D+"."+F;if(Silverlight.isInstalled(H)){u=H;break}}if(u==H)break}}return u}();
if(this.i18n)e.le=typeof document.defaultCharset=="string"?document.defaultCharset:typeof document.characterSet=="string"?document.characterSet:"unknown";e.tv="8.6.2";e.dl="0";e.ssl=window.location.protocol.indexOf("https:")==0?"1":"0";f.dcsdat=a.getTime();f.dcssip=window.location.hostname;f.dcsuri=window.location.pathname;e.es=f.dcssip+f.dcsuri;if(window.location.search)f.dcsqry=window.location.search;if(f.dcsqry){a=f.dcsqry.toLowerCase();h=this.paidsearchparams.length?this.paidsearchparams.toLowerCase().split(","):
[];for(var p=0;p<h.length;p++)if(a.indexOf(h[p]+"=")!=-1){e.srch="1";break}}if(window.document.referrer!=""&&window.document.referrer!="-")if(!(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)<4))f.dcsref=window.document.referrer};WebTrends.prototype.dcsEscape=function(a,e){if(e!=""){a=a.toString();for(var f in e)if(e[f]instanceof RegExp)a=a.replace(e[f],f);return a}else return escape(a)};
WebTrends.prototype.dcsA=function(a,e){if(this.i18n&&this.exre!=""&&!this.exre.test(a))if(a=="dcsqry"){for(var f="",h=e.substring(1).split("&"),r=0;r<h.length;r++){var p=h[r],u=p.indexOf("=");if(u!=-1){var B=p.substring(0,u);p=p.substring(u+1);if(r!=0)f+="&";f+=B+"="+this.dcsEncode(p)}}e=e.substring(0,1)+f}else e=this.dcsEncode(e);return"&"+a+"="+this.dcsEscape(e,this.re)};WebTrends.prototype.dcsEncode=function(a){return typeof encodeURIComponent=="function"?encodeURIComponent(a):escape(a)};
WebTrends.prototype.dcsCreateImage=function(a){if(document.images){this.images[this.index]=new Image;this.images[this.index].src=a;this.index++}else document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+a+'">')};
WebTrends.prototype.dcsMeta=function(){var a;if(document.all)a=document.all.tags("meta");else if(document.documentElement)a=document.getElementsByTagName("meta");if(typeof a!="undefined")for(var e=a.length,f=0;f<e;f++){var h=a.item(f).name,r=a.item(f).content;a.item(f);if(h.length>0)if(h.toUpperCase().indexOf("WT.")==0)this.WT[h.substring(3)]=r;else if(h.toUpperCase().indexOf("DCSEXT.")==0)this.DCSext[h.substring(7)]=r;else if(h.toUpperCase().indexOf("DCS.")==0)this.DCS[h.substring(4)]=r}};
WebTrends.prototype.dcsTag=function(){if(document.cookie.indexOf("WTLOPTOUT=")==-1){var a=this.WT,e=this.DCS,f=this.DCSext,h=this.i18n,r="http"+(window.location.protocol.indexOf("https:")==0?"s":"")+"://"+this.domain+(this.dcsid==""?"":"/"+this.dcsid)+"/dcs.gif?";if(h)a.dep="";for(var p in e)if(e[p]&&typeof e[p]!="function")r+=this.dcsA(p,e[p]);e=["co_f","vtid","vtvs","vt_f_tlv"];for(var u=0;u<e.length;u++){var B=e[u];if(a[B]){r+=this.dcsA("WT."+B,a[B]);delete a[B]}}for(p in a)if(a[p]&&typeof a[p]!=
"function")r+=this.dcsA("WT."+p,a[p]);for(p in f)if(f[p]&&typeof f[p]!="function"){if(h)a.dep=a.dep.length==0?p:a.dep+";"+p;r+=this.dcsA(p,f[p])}if(h&&a.dep.length>0)r+=this.dcsA("WT.dep",a.dep);if(r.length>2048&&navigator.userAgent.indexOf("MSIE")>=0)r=r.substring(0,2040)+"&WT.tu=1";this.dcsCreateImage(r);this.WT.ad=""}};
WebTrends.prototype.dcsDebug=function(){var a=this.images[0].src,e=a.indexOf("?"),f=a.substring(0,e).split("/"),h="<b>Protocol</b><br><code>"+f[0]+"<br></code>";h+="<b>Domain</b><br><code>"+f[2]+"<br></code>";h+="<b>Path</b><br><code>/"+f[3]+"/"+f[4]+"<br></code>";h+="<b>Query Params</b><code>"+a.substring(e+1).replace(/\&/g,"<br>")+"</code>";h+="<br><b>Cookies</b><br><code>"+document.cookie.replace(/\;/g,"<br>")+"</code>";this.w&&!this.w.closed&&this.w.close();this.w=window.open("","dcsDebug","width=500,height=650,scrollbars=yes,resizable=yes");
this.w.document.write(h);this.w.focus()};WebTrends.prototype.dcsCollect=function(){if(this.enabled){this.dcsVar();this.dcsMeta();this.dcsAdv();this.dcsTag()}};function dcsMultiTrack(){if(typeof _tag!="undefined")return _tag.dcsMultiTrack()}function dcsDebug(){if(typeof _tag!="undefined")return _tag.dcsDebug()}Function.prototype.wtbind=function(a){var e=this;return function(){return e.apply(a,arguments)}};
