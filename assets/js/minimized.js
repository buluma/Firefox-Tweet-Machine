(function(a,e){function f(){if(!l.isReady){try{Q.documentElement.doScroll("left")}catch(b){setTimeout(f,1);return}l.ready()}}function h(b,k){k.src?l.ajax({url:k.src,async:false,dataType:"script"}):l.globalEval(k.text||k.textContent||k.innerHTML||"");k.parentNode&&k.parentNode.removeChild(k)}function r(b,k,q,v,u,D){var F=b.length;if(typeof k==="object"){for(var O in k)r(b,O,k[O],v,u,q);return b}if(q!==e){v=!D&&v&&l.isFunction(q);for(O=0;O<F;O++)u(b[O],k,v?q.call(b[O],O,u(b[O],k)):q,D);return b}return F?
u(b[0],k):e}function o(){return(new Date).getTime()}function y(){return false}function B(){return true}function C(b,k,q){q[0].type=b;return l.event.handle.apply(k,q)}function E(b){var k,q=[],v=[],u=arguments,D,F,O,N,P,Z;F=l.data(this,"events");if(!(b.liveFired===this||!F||!F.live||b.button&&b.type==="click")){b.liveFired=this;var la=F.live.slice(0);for(N=0;N<la.length;N++){F=la[N];F.origType.replace(Za,"")===b.type?v.push(F.selector):la.splice(N--,1)}D=l(b.target).closest(v,b.currentTarget);P=0;for(Z=
D.length;P<Z;P++)for(N=0;N<la.length;N++){F=la[N];if(D[P].selector===F.selector){O=D[P].elem;v=null;if(F.preType==="mouseenter"||F.preType==="mouseleave")v=l(b.relatedTarget).closest(F.selector)[0];if(!v||v!==O)q.push({elem:O,handleObj:F})}}P=0;for(Z=q.length;P<Z;P++){D=q[P];b.currentTarget=D.elem;b.data=D.handleObj.data;b.handleObj=D.handleObj;if(D.handleObj.origHandler.apply(D.elem,u)===false){k=false;break}}return k}}function H(b,k){return"live."+(b&&b!=="*"?b+".":"")+k.replace(/\./g,"`").replace(/ /g,
"&")}function I(b,k){var q=0;k.each(function(){if(this.nodeName===(b[q]&&b[q].nodeName)){var v=l.data(b[q++]),u=l.data(this,v);if(v=v&&v.events){delete u.handle;u.events={};for(var D in v)for(var F in v[D])l.event.add(this,D,v[D][F],v[D][F].data)}}})}function M(b,k,q){var v,u,D;k=k&&k[0]?k[0].ownerDocument||k[0]:Q;if(b.length===1&&typeof b[0]==="string"&&b[0].length<512&&k===Q&&!bb.test(b[0])&&(l.support.checkClone||!eb.test(b[0]))){u=true;if(D=l.fragments[b[0]])if(D!==1)v=D}if(!v){v=k.createDocumentFragment();
l.clean(b,k,v,q)}if(u)l.fragments[b[0]]=D?v:1;return{fragment:v,cacheable:u}}function L(b,k){var q={};l.each(yb.concat.apply([],yb.slice(0,k)),function(){q[this]=b});return q}function S(b){return"scrollTo"in b&&b.document?b:b.nodeType===9?b.defaultView||b.parentWindow:false}var l=function(b,k){return new l.fn.init(b,k)},Y=a.jQuery,ba=a.$,Q=a.document,na,Aa=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Pa=/^.[^:#\[\.,]*$/,Fa=/\S/,La=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,ta=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,oa=navigator.userAgent,
Ba=false,sa=[],ua,pa=Object.prototype.toString,Ya=Object.prototype.hasOwnProperty,W=Array.prototype.push,ka=Array.prototype.slice,wa=Array.prototype.indexOf;l.fn=l.prototype={init:function(b,k){var q,v;if(!b)return this;if(b.nodeType){this.context=this[0]=b;this.length=1;return this}if(b==="body"&&!k){this.context=Q;this[0]=Q.body;this.selector="body";this.length=1;return this}if(typeof b==="string")if((q=Aa.exec(b))&&(q[1]||!k))if(q[1]){v=k?k.ownerDocument||k:Q;if(b=ta.exec(b))if(l.isPlainObject(k)){b=
[Q.createElement(b[1])];l.fn.attr.call(b,k,true)}else b=[v.createElement(b[1])];else{b=M([q[1]],[v]);b=(b.cacheable?b.fragment.cloneNode(true):b.fragment).childNodes}return l.merge(this,b)}else{if(k=Q.getElementById(q[2])){if(k.id!==q[2])return na.find(b);this.length=1;this[0]=k}this.context=Q;this.selector=b;return this}else if(!k&&/^\w+$/.test(b)){this.selector=b;this.context=Q;b=Q.getElementsByTagName(b);return l.merge(this,b)}else return!k||k.jquery?(k||na).find(b):l(k).find(b);else if(l.isFunction(b))return na.ready(b);
if(b.selector!==e){this.selector=b.selector;this.context=b.context}return l.makeArray(b,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return ka.call(this,0)},get:function(b){return b==null?this.toArray():b<0?this.slice(b)[0]:this[b]},pushStack:function(b,k,q){var v=l();l.isArray(b)?W.apply(v,b):l.merge(v,b);v.prevObject=this;v.context=this.context;if(k==="find")v.selector=this.selector+(this.selector?" ":"")+q;else if(k)v.selector=this.selector+
"."+k+"("+q+")";return v},each:function(b,k){return l.each(this,b,k)},ready:function(b){l.bindReady();if(l.isReady)b.call(Q,l);else sa&&sa.push(b);return this},eq:function(b){return b===-1?this.slice(b):this.slice(b,+b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ka.apply(this,arguments),"slice",ka.call(arguments).join(","))},map:function(b){return this.pushStack(l.map(this,function(k,q){return b.call(k,q,k)}))},end:function(){return this.prevObject||
l(null)},push:W,sort:[].sort,splice:[].splice};l.fn.init.prototype=l.fn;l.extend=l.fn.extend=function(){var b=arguments[0]||{},k=1,q=arguments.length,v=false,u,D,F,O;if(typeof b==="boolean"){v=b;b=arguments[1]||{};k=2}if(typeof b!=="object"&&!l.isFunction(b))b={};if(q===k){b=this;--k}for(;k<q;k++)if((u=arguments[k])!=null)for(D in u){F=b[D];O=u[D];if(b!==O)if(v&&O&&(l.isPlainObject(O)||l.isArray(O))){F=F&&(l.isPlainObject(F)||l.isArray(F))?F:l.isArray(O)?[]:{};b[D]=l.extend(v,F,O)}else if(O!==e)b[D]=
O}return b};l.extend({noConflict:function(b){a.$=ba;if(b)a.jQuery=Y;return l},isReady:false,ready:function(){if(!l.isReady){if(!Q.body)return setTimeout(l.ready,13);l.isReady=true;if(sa){for(var b,k=0;b=sa[k++];)b.call(Q,l);sa=null}l.fn.triggerHandler&&l(Q).triggerHandler("ready")}},bindReady:function(){if(!Ba){Ba=true;if(Q.readyState==="complete")return l.ready();if(Q.addEventListener){Q.addEventListener("DOMContentLoaded",ua,false);a.addEventListener("load",l.ready,false)}else if(Q.attachEvent){Q.attachEvent("onreadystatechange",
ua);a.attachEvent("onload",l.ready);var b=false;try{b=a.frameElement==null}catch(k){}Q.documentElement.doScroll&&b&&f()}}},isFunction:function(b){return pa.call(b)==="[object Function]"},isArray:function(b){return pa.call(b)==="[object Array]"},isPlainObject:function(b){if(!b||pa.call(b)!=="[object Object]"||b.nodeType||b.setInterval)return false;if(b.constructor&&!Ya.call(b,"constructor")&&!Ya.call(b.constructor.prototype,"isPrototypeOf"))return false;var k;for(k in b);return k===e||Ya.call(b,k)},
isEmptyObject:function(b){for(var k in b)return false;return true},error:function(b){throw b;},parseJSON:function(b){if(typeof b!=="string"||!b)return null;b=l.trim(b);if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();else l.error("Invalid JSON: "+b)},noop:function(){},globalEval:function(b){if(b&&
Fa.test(b)){var k=Q.getElementsByTagName("head")[0]||Q.documentElement,q=Q.createElement("script");q.type="text/javascript";if(l.support.scriptEval)q.appendChild(Q.createTextNode(b));else q.text=b;k.insertBefore(q,k.firstChild);k.removeChild(q)}},nodeName:function(b,k){return b.nodeName&&b.nodeName.toUpperCase()===k.toUpperCase()},each:function(b,k,q){var v,u=0,D=b.length,F=D===e||l.isFunction(b);if(q)if(F)for(v in b){if(k.apply(b[v],q)===false)break}else for(;u<D;){if(k.apply(b[u++],q)===false)break}else if(F)for(v in b){if(k.call(b[v],
v,b[v])===false)break}else for(q=b[0];u<D&&k.call(q,u,q)!==false;q=b[++u]);return b},trim:function(b){return(b||"").replace(La,"")},makeArray:function(b,k){k=k||[];if(b!=null)b.length==null||typeof b==="string"||l.isFunction(b)||typeof b!=="function"&&b.setInterval?W.call(k,b):l.merge(k,b);return k},inArray:function(b,k){if(k.indexOf)return k.indexOf(b);for(var q=0,v=k.length;q<v;q++)if(k[q]===b)return q;return-1},merge:function(b,k){var q=b.length,v=0;if(typeof k.length==="number")for(var u=k.length;v<
u;v++)b[q++]=k[v];else for(;k[v]!==e;)b[q++]=k[v++];b.length=q;return b},grep:function(b,k,q){for(var v=[],u=0,D=b.length;u<D;u++)!q!==!k(b[u],u)&&v.push(b[u]);return v},map:function(b,k,q){for(var v=[],u,D=0,F=b.length;D<F;D++){u=k(b[D],D,q);if(u!=null)v[v.length]=u}return v.concat.apply([],v)},guid:1,proxy:function(b,k,q){if(arguments.length===2)if(typeof k==="string"){q=b;b=q[k];k=e}else if(k&&!l.isFunction(k)){q=k;k=e}if(!k&&b)k=function(){return b.apply(q||this,arguments)};if(b)k.guid=b.guid=
b.guid||k.guid||l.guid++;return k},uaMatch:function(b){b=b.toLowerCase();b=/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||!/compatible/.test(b)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(b)||[];return{browser:b[1]||"",version:b[2]||"0"}},browser:{}});oa=l.uaMatch(oa);if(oa.browser){l.browser[oa.browser]=true;l.browser.version=oa.version}if(l.browser.webkit)l.browser.safari=true;if(wa)l.inArray=function(b,k){return wa.call(k,b)};na=l(Q);if(Q.addEventListener)ua=
function(){Q.removeEventListener("DOMContentLoaded",ua,false);l.ready()};else if(Q.attachEvent)ua=function(){if(Q.readyState==="complete"){Q.detachEvent("onreadystatechange",ua);l.ready()}};(function(){l.support={};var b=Q.documentElement,k=Q.createElement("script"),q=Q.createElement("div"),v="script"+o();q.style.display="none";q.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var u=q.getElementsByTagName("*"),D=q.getElementsByTagName("a")[0];
if(!(!u||!u.length||!D)){l.support={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/red/.test(D.getAttribute("style")),hrefNormalized:D.getAttribute("href")==="/a",opacity:/^0.55$/.test(D.style.opacity),cssFloat:!!D.style.cssFloat,checkOn:q.getElementsByTagName("input")[0].value==="on",optSelected:Q.createElement("select").appendChild(Q.createElement("option")).selected,parentNode:q.removeChild(q.appendChild(Q.createElement("div"))).parentNode===
null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};k.type="text/javascript";try{k.appendChild(Q.createTextNode("window."+v+"=1;"))}catch(F){}b.insertBefore(k,b.firstChild);if(a[v]){l.support.scriptEval=true;delete a[v]}try{delete k.test}catch(O){l.support.deleteExpando=false}b.removeChild(k);if(q.attachEvent&&q.fireEvent){q.attachEvent("onclick",function N(){l.support.noCloneEvent=false;q.detachEvent("onclick",N)});q.cloneNode(true).fireEvent("onclick")}q=Q.createElement("div");
q.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";b=Q.createDocumentFragment();b.appendChild(q.firstChild);l.support.checkClone=b.cloneNode(true).cloneNode(true).lastChild.checked;l(function(){var N=Q.createElement("div");N.style.width=N.style.paddingLeft="1px";Q.body.appendChild(N);l.boxModel=l.support.boxModel=N.offsetWidth===2;Q.body.removeChild(N).style.display="none"});b=function(N){var P=Q.createElement("div");N="on"+N;var Z=N in P;if(!Z){P.setAttribute(N,"return;");Z=typeof P[N]===
"function"}return Z};l.support.submitBubbles=b("submit");l.support.changeBubbles=b("change");b=k=q=u=D=null}})();l.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var ra="jQuery"+o(),Va=0,ga={};l.extend({cache:{},expando:ra,noData:{embed:true,object:true,applet:true},data:function(b,k,q){if(!(b.nodeName&&l.noData[b.nodeName.toLowerCase()])){b=
b==a?ga:b;var v=b[ra],u=l.cache;if(!v&&typeof k==="string"&&q===e)return null;v||(v=++Va);if(typeof k==="object"){b[ra]=v;u[v]=l.extend(true,{},k)}else if(!u[v]){b[ra]=v;u[v]={}}b=u[v];if(q!==e)b[k]=q;return typeof k==="string"?b[k]:b}},removeData:function(b,k){if(!(b.nodeName&&l.noData[b.nodeName.toLowerCase()])){b=b==a?ga:b;var q=b[ra],v=l.cache,u=v[q];if(k){if(u){delete u[k];l.isEmptyObject(u)&&l.removeData(b)}}else{if(l.support.deleteExpando)delete b[l.expando];else b.removeAttribute&&b.removeAttribute(l.expando);
delete v[q]}}}});l.fn.extend({data:function(b,k){if(typeof b==="undefined"&&this.length)return l.data(this[0]);else if(typeof b==="object")return this.each(function(){l.data(this,b)});var q=b.split(".");q[1]=q[1]?"."+q[1]:"";if(k===e){var v=this.triggerHandler("getData"+q[1]+"!",[q[0]]);if(v===e&&this.length)v=l.data(this[0],b);return v===e&&q[1]?this.data(q[0]):v}else return this.trigger("setData"+q[1]+"!",[q[0],k]).each(function(){l.data(this,b,k)})},removeData:function(b){return this.each(function(){l.removeData(this,
b)})}});l.extend({queue:function(b,k,q){if(b){k=(k||"fx")+"queue";var v=l.data(b,k);if(!q)return v||[];if(!v||l.isArray(q))v=l.data(b,k,l.makeArray(q));else v.push(q);return v}},dequeue:function(b,k){k=k||"fx";var q=l.queue(b,k),v=q.shift();if(v==="inprogress")v=q.shift();if(v){k==="fx"&&q.unshift("inprogress");v.call(b,function(){l.dequeue(b,k)})}}});l.fn.extend({queue:function(b,k){if(typeof b!=="string"){k=b;b="fx"}if(k===e)return l.queue(this[0],b);return this.each(function(){var q=l.queue(this,
b,k);b==="fx"&&q[0]!=="inprogress"&&l.dequeue(this,b)})},dequeue:function(b){return this.each(function(){l.dequeue(this,b)})},delay:function(b,k){b=l.fx?l.fx.speeds[b]||b:b;k=k||"fx";return this.queue(k,function(){var q=this;setTimeout(function(){l.dequeue(q,k)},b)})},clearQueue:function(b){return this.queue(b||"fx",[])}});var Ha=/[\n\t]/g,Ma=/\s+/,gb=/\r/g,qa=/href|src|style/,Ia=/(button|input)/i,xa=/(button|input|object|select|textarea)/i,Ga=/^(a|area)$/i,hb=/radio|checkbox/;l.fn.extend({attr:function(b,
k){return r(this,b,k,true,l.attr)},removeAttr:function(b){return this.each(function(){l.attr(this,b,"");this.nodeType===1&&this.removeAttribute(b)})},addClass:function(b){if(l.isFunction(b))return this.each(function(P){var Z=l(this);Z.addClass(b.call(this,P,Z.attr("class")))});if(b&&typeof b==="string")for(var k=(b||"").split(Ma),q=0,v=this.length;q<v;q++){var u=this[q];if(u.nodeType===1)if(u.className){for(var D=" "+u.className+" ",F=u.className,O=0,N=k.length;O<N;O++)if(D.indexOf(" "+k[O]+" ")<
0)F+=" "+k[O];u.className=l.trim(F)}else u.className=b}return this},removeClass:function(b){if(l.isFunction(b))return this.each(function(N){var P=l(this);P.removeClass(b.call(this,N,P.attr("class")))});if(b&&typeof b==="string"||b===e)for(var k=(b||"").split(Ma),q=0,v=this.length;q<v;q++){var u=this[q];if(u.nodeType===1&&u.className)if(b){for(var D=(" "+u.className+" ").replace(Ha," "),F=0,O=k.length;F<O;F++)D=D.replace(" "+k[F]+" "," ");u.className=l.trim(D)}else u.className=""}return this},toggleClass:function(b,
k){var q=typeof b,v=typeof k==="boolean";if(l.isFunction(b))return this.each(function(u){var D=l(this);D.toggleClass(b.call(this,u,D.attr("class"),k),k)});return this.each(function(){if(q==="string")for(var u,D=0,F=l(this),O=k,N=b.split(Ma);u=N[D++];){O=v?O:!F.hasClass(u);F[O?"addClass":"removeClass"](u)}else if(q==="undefined"||q==="boolean"){this.className&&l.data(this,"__className__",this.className);this.className=this.className||b===false?"":l.data(this,"__className__")||""}})},hasClass:function(b){b=
" "+b+" ";for(var k=0,q=this.length;k<q;k++)if((" "+this[k].className+" ").replace(Ha," ").indexOf(b)>-1)return true;return false},val:function(b){if(b===e){var k=this[0];if(k){if(l.nodeName(k,"option"))return(k.attributes.value||{}).specified?k.value:k.text;if(l.nodeName(k,"select")){var q=k.selectedIndex,v=[],u=k.options;k=k.type==="select-one";if(q<0)return null;var D=k?q:0;for(q=k?q+1:u.length;D<q;D++){var F=u[D];if(F.selected){b=l(F).val();if(k)return b;v.push(b)}}return v}if(hb.test(k.type)&&
!l.support.checkOn)return k.getAttribute("value")===null?"on":k.value;return(k.value||"").replace(gb,"")}return e}var O=l.isFunction(b);return this.each(function(N){var P=l(this),Z=b;if(this.nodeType===1){if(O)Z=b.call(this,N,P.val());if(typeof Z==="number")Z+="";if(l.isArray(Z)&&hb.test(this.type))this.checked=l.inArray(P.val(),Z)>=0;else if(l.nodeName(this,"select")){var la=l.makeArray(Z);l("option",this).each(function(){this.selected=l.inArray(l(this).val(),la)>=0});if(!la.length)this.selectedIndex=
-1}else this.value=Z}})}});l.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(b,k,q,v){if(!b||b.nodeType===3||b.nodeType===8)return e;if(v&&k in l.attrFn)return l(b)[k](q);v=b.nodeType!==1||!l.isXMLDoc(b);var u=q!==e;k=v&&l.props[k]||k;if(b.nodeType===1){var D=qa.test(k);if(k in b&&v&&!D){if(u){k==="type"&&Ia.test(b.nodeName)&&b.parentNode&&l.error("type property can't be changed");b[k]=q}if(l.nodeName(b,"form")&&b.getAttributeNode(k))return b.getAttributeNode(k).nodeValue;
if(k==="tabIndex")return(k=b.getAttributeNode("tabIndex"))&&k.specified?k.value:xa.test(b.nodeName)||Ga.test(b.nodeName)&&b.href?0:e;return b[k]}if(!l.support.style&&v&&k==="style"){if(u)b.style.cssText=""+q;return b.style.cssText}u&&b.setAttribute(k,""+q);b=!l.support.hrefNormalized&&v&&D?b.getAttribute(k,2):b.getAttribute(k);return b===null?e:b}return l.style(b,k,q)}});var Za=/\.(.*)$/,Na=function(b){return b.replace(/[^\w\s\.\|`]/g,function(k){return"\\"+k})};l.event={add:function(b,k,q,v){if(!(b.nodeType===
3||b.nodeType===8)){if(b.setInterval&&b!==a&&!b.frameElement)b=a;var u,D;if(q.handler){u=q;q=u.handler}if(!q.guid)q.guid=l.guid++;if(D=l.data(b)){var F=D.events=D.events||{},O=D.handle;if(!O)D.handle=O=function(){return typeof l!=="undefined"&&!l.event.triggered?l.event.handle.apply(O.elem,arguments):e};O.elem=b;k=k.split(" ");for(var N,P=0,Z;N=k[P++];){D=u?l.extend({},u):{handler:q,data:v};if(N.indexOf(".")>-1){Z=N.split(".");N=Z.shift();D.namespace=Z.slice(0).sort().join(".")}else{Z=[];D.namespace=
""}D.type=N;D.guid=q.guid;var la=F[N],Ca=l.event.special[N]||{};if(!la){la=F[N]=[];if(!Ca.setup||Ca.setup.call(b,v,Z,O)===false)if(b.addEventListener)b.addEventListener(N,O,false);else b.attachEvent&&b.attachEvent("on"+N,O)}if(Ca.add){Ca.add.call(b,D);if(!D.handler.guid)D.handler.guid=q.guid}la.push(D);l.event.global[N]=true}b=null}}},global:{},remove:function(b,k,q,v){if(!(b.nodeType===3||b.nodeType===8)){var u,D=0,F,O,N,P,Z,la,Ca=l.data(b),va=Ca&&Ca.events;if(Ca&&va){if(k&&k.type){q=k.handler;k=
k.type}if(!k||typeof k==="string"&&k.charAt(0)==="."){k=k||"";for(u in va)l.event.remove(b,u+k)}else{for(k=k.split(" ");u=k[D++];){P=u;F=u.indexOf(".")<0;O=[];if(!F){O=u.split(".");u=O.shift();N=RegExp("(^|\\.)"+l.map(O.slice(0).sort(),Na).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(Z=va[u])if(q){P=l.event.special[u]||{};for(Ja=v||0;Ja<Z.length;Ja++){la=Z[Ja];if(q.guid===la.guid){if(F||N.test(la.namespace)){v==null&&Z.splice(Ja--,1);P.remove&&P.remove.call(b,la)}if(v!=null)break}}if(Z.length===0||v!=null&&
Z.length===1){if(!P.teardown||P.teardown.call(b,O)===false)V(b,u,Ca.handle);delete va[u]}}else for(var Ja=0;Ja<Z.length;Ja++){la=Z[Ja];if(F||N.test(la.namespace)){l.event.remove(b,P,la.handler,Ja);Z.splice(Ja--,1)}}}if(l.isEmptyObject(va)){if(k=Ca.handle)k.elem=null;delete Ca.events;delete Ca.handle;l.isEmptyObject(Ca)&&l.removeData(b)}}}}},trigger:function(b,k,q,v){var u=b.type||b;if(!v){b=typeof b==="object"?b[ra]?b:l.extend(l.Event(u),b):l.Event(u);if(u.indexOf("!")>=0){b.type=u=u.slice(0,-1);
b.exclusive=true}if(!q){b.stopPropagation();l.event.global[u]&&l.each(l.cache,function(){this.events&&this.events[u]&&l.event.trigger(b,k,this.handle.elem)})}if(!q||q.nodeType===3||q.nodeType===8)return e;b.result=e;b.target=q;k=l.makeArray(k);k.unshift(b)}b.currentTarget=q;(v=l.data(q,"handle"))&&v.apply(q,k);v=q.parentNode||q.ownerDocument;try{if(!(q&&q.nodeName&&l.noData[q.nodeName.toLowerCase()]))if(q["on"+u]&&q["on"+u].apply(q,k)===false)b.result=false}catch(D){}if(!b.isPropagationStopped()&&
v)l.event.trigger(b,k,v,true);else if(!b.isDefaultPrevented()){v=b.target;var F,O=l.nodeName(v,"a")&&u==="click",N=l.event.special[u]||{};if((!N._default||N._default.call(q,b)===false)&&!O&&!(v&&v.nodeName&&l.noData[v.nodeName.toLowerCase()])){try{if(v[u]){if(F=v["on"+u])v["on"+u]=null;l.event.triggered=true;v[u]()}}catch(P){}if(F)v["on"+u]=F;l.event.triggered=false}}},handle:function(b){var k,q,v,u;b=arguments[0]=l.event.fix(b||a.event);b.currentTarget=this;k=b.type.indexOf(".")<0&&!b.exclusive;
if(!k){q=b.type.split(".");b.type=q.shift();v=RegExp("(^|\\.)"+q.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}u=l.data(this,"events");q=u[b.type];if(u&&q){q=q.slice(0);u=0;for(var D=q.length;u<D;u++){var F=q[u];if(k||v.test(F.namespace)){b.handler=F.handler;b.data=F.data;b.handleObj=F;F=F.handler.apply(this,arguments);if(F!==e){b.result=F;if(F===false){b.preventDefault();b.stopPropagation()}}if(b.isImmediatePropagationStopped())break}}}return b.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(b){if(b[ra])return b;var k=b;b=l.Event(k);for(var q=this.props.length,v;q;){v=this.props[--q];b[v]=k[v]}if(!b.target)b.target=b.srcElement||Q;if(b.target.nodeType===3)b.target=b.target.parentNode;if(!b.relatedTarget&&b.fromElement)b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement;if(b.pageX==null&&b.clientX!=null){k=Q.documentElement;q=Q.body;b.pageX=b.clientX+(k&&k.scrollLeft||q&&q.scrollLeft||0)-(k&&k.clientLeft||q&&q.clientLeft||0);b.pageY=b.clientY+(k&&k.scrollTop||
q&&q.scrollTop||0)-(k&&k.clientTop||q&&q.clientTop||0)}if(!b.which&&(b.charCode||b.charCode===0?b.charCode:b.keyCode))b.which=b.charCode||b.keyCode;if(!b.metaKey&&b.ctrlKey)b.metaKey=b.ctrlKey;if(!b.which&&b.button!==e)b.which=b.button&1?1:b.button&2?3:b.button&4?2:0;return b},guid:1E8,proxy:l.proxy,special:{ready:{setup:l.bindReady,teardown:l.noop},live:{add:function(b){l.event.add(this,b.origType,l.extend({},b,{handler:E}))},remove:function(b){var k=true,q=b.origType.replace(Za,"");l.each(l.data(this,
"events").live||[],function(){if(q===this.origType.replace(Za,""))return k=false});k&&l.event.remove(this,b.origType,E)}},beforeunload:{setup:function(b,k,q){if(this.setInterval)this.onbeforeunload=q;return false},teardown:function(b,k){if(this.onbeforeunload===k)this.onbeforeunload=null}}}};var V=Q.removeEventListener?function(b,k,q){b.removeEventListener(k,q,false)}:function(b,k,q){b.detachEvent("on"+k,q)};l.Event=function(b){if(!this.preventDefault)return new l.Event(b);if(b&&b.type){this.originalEvent=
b;this.type=b.type}else this.type=b;this.timeStamp=o();this[ra]=true};l.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var b=this.originalEvent;if(b){b.preventDefault&&b.preventDefault();b.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=B;var b=this.originalEvent;if(b){b.stopPropagation&&b.stopPropagation();b.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B;this.stopPropagation()},isDefaultPrevented:y,isPropagationStopped:y,
isImmediatePropagationStopped:y};var Ua=function(b){var k=b.relatedTarget;try{for(;k&&k!==this;)k=k.parentNode;if(k!==this){b.type=b.data;l.event.handle.apply(this,arguments)}}catch(q){}},ea=function(b){b.type=b.data;l.event.handle.apply(this,arguments)};l.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,k){l.event.special[b]={setup:function(q){l.event.add(this,k,q&&q.selector?ea:Ua,b)},teardown:function(q){l.event.remove(this,k,q&&q.selector?ea:Ua)}}});if(!l.support.submitBubbles)l.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){l.event.add(this,"click.specialSubmit",function(b){var k=b.target,q=k.type;if((q==="submit"||q==="image")&&l(k).closest("form").length)return C("submit",this,arguments)});l.event.add(this,"keypress.specialSubmit",function(b){var k=b.target,q=k.type;if((q==="text"||q==="password")&&l(k).closest("form").length&&b.keyCode===13)return C("submit",this,arguments)})}else return false},teardown:function(){l.event.remove(this,".specialSubmit")}};if(!l.support.changeBubbles){var Wa=
/textarea|input|select/i,za,J=function(b){var k=b.type,q=b.value;if(k==="radio"||k==="checkbox")q=b.checked;else if(k==="select-multiple")q=b.selectedIndex>-1?l.map(b.options,function(v){return v.selected}).join("-"):"";else if(b.nodeName.toLowerCase()==="select")q=b.selectedIndex;return q},Sa=function(b,k){var q=b.target,v,u;if(!(!Wa.test(q.nodeName)||q.readOnly)){v=l.data(q,"_change_data");u=J(q);if(b.type!=="focusout"||q.type!=="radio")l.data(q,"_change_data",u);if(!(v===e||u===v))if(v!=null||
u){b.type="change";return l.event.trigger(b,k,q)}}};l.event.special.change={filters:{focusout:Sa,click:function(b){var k=b.target,q=k.type;if(q==="radio"||q==="checkbox"||k.nodeName.toLowerCase()==="select")return Sa.call(this,b)},keydown:function(b){var k=b.target,q=k.type;if(b.keyCode===13&&k.nodeName.toLowerCase()!=="textarea"||b.keyCode===32&&(q==="checkbox"||q==="radio")||q==="select-multiple")return Sa.call(this,b)},beforeactivate:function(b){b=b.target;l.data(b,"_change_data",J(b))}},setup:function(){if(this.type===
"file")return false;for(var b in za)l.event.add(this,b+".specialChange",za[b]);return Wa.test(this.nodeName)},teardown:function(){l.event.remove(this,".specialChange");return Wa.test(this.nodeName)}};za=l.event.special.change.filters}Q.addEventListener&&l.each({focus:"focusin",blur:"focusout"},function(b,k){function q(v){v=l.event.fix(v);v.type=k;return l.event.handle.call(this,v)}l.event.special[k]={setup:function(){this.addEventListener(b,q,true)},teardown:function(){this.removeEventListener(b,
q,true)}}});l.each(["bind","one"],function(b,k){l.fn[k]=function(q,v,u){if(typeof q==="object"){for(var D in q)this[k](D,v,q[D],u);return this}if(l.isFunction(v)){u=v;v=e}var F=k==="one"?l.proxy(u,function(N){l(this).unbind(N,F);return u.apply(this,arguments)}):u;if(q==="unload"&&k!=="one")this.one(q,v,u);else{D=0;for(var O=this.length;D<O;D++)l.event.add(this[D],q,F,v)}return this}});l.fn.extend({unbind:function(b,k){if(typeof b==="object"&&!b.preventDefault)for(var q in b)this.unbind(q,b[q]);else{q=
0;for(var v=this.length;q<v;q++)l.event.remove(this[q],b,k)}return this},delegate:function(b,k,q,v){return this.live(k,q,v,b)},undelegate:function(b,k,q){return arguments.length===0?this.unbind("live"):this.die(k,null,q,b)},trigger:function(b,k){return this.each(function(){l.event.trigger(b,k,this)})},triggerHandler:function(b,k){if(this[0]){b=l.Event(b);b.preventDefault();b.stopPropagation();l.event.trigger(b,k,this[0]);return b.result}},toggle:function(b){for(var k=arguments,q=1;q<k.length;)l.proxy(b,
k[q++]);return this.click(l.proxy(b,function(v){var u=(l.data(this,"lastToggle"+b.guid)||0)%q;l.data(this,"lastToggle"+b.guid,u+1);v.preventDefault();return k[u].apply(this,arguments)||false}))},hover:function(b,k){return this.mouseenter(b).mouseleave(k||b)}});var Ra={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};l.each(["live","die"],function(b,k){l.fn[k]=function(q,v,u,D){var F,O=0,N,P,Z=D||this.selector,la=D?this:l(this.context);if(l.isFunction(v)){u=v;v=e}for(q=
(q||"").split(" ");(F=q[O++])!=null;){D=Za.exec(F);N="";if(D){N=D[0];F=F.replace(Za,"")}if(F==="hover")q.push("mouseenter"+N,"mouseleave"+N);else{P=F;if(F==="focus"||F==="blur"){q.push(Ra[F]+N);F+=N}else F=(Ra[F]||F)+N;k==="live"?la.each(function(){l.event.add(this,H(F,Z),{data:v,selector:Z,handler:u,origType:F,origHandler:u,preType:P})}):la.unbind(H(F,Z),u)}}return this}});l.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(b,k){l.fn[k]=function(q){return q?this.bind(k,q):this.trigger(k)};if(l.attrFn)l.attrFn[k]=true});a.attachEvent&&!a.addEventListener&&a.attachEvent("onunload",function(){for(var b in l.cache)if(l.cache[b].handle)try{l.event.remove(l.cache[b].handle.elem)}catch(k){}});(function(){function b(g){for(var m="",p,n=0;g[n];n++){p=g[n];if(p.nodeType===3||p.nodeType===4)m+=p.nodeValue;else if(p.nodeType!==8)m+=b(p.childNodes)}return m}function k(g,m,p,n,s,t){s=0;for(var z=n.length;s<z;s++){var A=n[s];
if(A){A=A[g];for(var G=false;A;){if(A.sizcache===p){G=n[A.sizset];break}if(A.nodeType===1&&!t){A.sizcache=p;A.sizset=s}if(A.nodeName.toLowerCase()===m){G=A;break}A=A[g]}n[s]=G}}}function q(g,m,p,n,s,t){s=0;for(var z=n.length;s<z;s++){var A=n[s];if(A){A=A[g];for(var G=false;A;){if(A.sizcache===p){G=n[A.sizset];break}if(A.nodeType===1){if(!t){A.sizcache=p;A.sizset=s}if(typeof m!=="string"){if(A===m){G=true;break}}else if(N.filter(m,[A]).length>0){G=A;break}}A=A[g]}n[s]=G}}}var v=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
u=0,D=Object.prototype.toString,F=false,O=true;[0,0].sort(function(){O=false;return 0});var N=function(g,m,p,n){p=p||[];var s=m=m||Q;if(m.nodeType!==1&&m.nodeType!==9)return[];if(!g||typeof g!=="string")return p;for(var t=[],z,A,G,T,aa=true,X=c(m),K=g;(v.exec(""),z=v.exec(K))!==null;){K=z[3];t.push(z[1]);if(z[2]){T=z[3];break}}if(t.length>1&&Z.exec(g))if(t.length===2&&P.relative[t[0]])A=j(t[0]+t[1],m);else for(A=P.relative[t[0]]?[m]:N(t.shift(),m);t.length;){g=t.shift();if(P.relative[g])g+=t.shift();
A=j(g,A)}else{if(!n&&t.length>1&&m.nodeType===9&&!X&&P.match.ID.test(t[0])&&!P.match.ID.test(t[t.length-1])){z=N.find(t.shift(),m,X);m=z.expr?N.filter(z.expr,z.set)[0]:z.set[0]}if(m){z=n?{expr:t.pop(),set:Ca(n)}:N.find(t.pop(),t.length===1&&(t[0]==="~"||t[0]==="+")&&m.parentNode?m.parentNode:m,X);A=z.expr?N.filter(z.expr,z.set):z.set;if(t.length>0)G=Ca(A);else aa=false;for(;t.length;){var ca=t.pop();z=ca;if(P.relative[ca])z=t.pop();else ca="";if(z==null)z=m;P.relative[ca](G,z,X)}}else G=[]}G||(G=
A);G||N.error(ca||g);if(D.call(G)==="[object Array]")if(aa)if(m&&m.nodeType===1)for(g=0;G[g]!=null;g++){if(G[g]&&(G[g]===true||G[g].nodeType===1&&$a(m,G[g])))p.push(A[g])}else for(g=0;G[g]!=null;g++)G[g]&&G[g].nodeType===1&&p.push(A[g]);else p.push.apply(p,G);else Ca(G,p);if(T){N(T,s,p,n);N.uniqueSort(p)}return p};N.uniqueSort=function(g){if(Ja){F=O;g.sort(Ja);if(F)for(var m=1;m<g.length;m++)g[m]===g[m-1]&&g.splice(m--,1)}return g};N.matches=function(g,m){return N(g,null,null,m)};N.find=function(g,
m,p){var n,s;if(!g)return[];for(var t=0,z=P.order.length;t<z;t++){var A=P.order[t];if(s=P.leftMatch[A].exec(g)){var G=s[1];s.splice(1,1);if(G.substr(G.length-1)!=="\\"){s[1]=(s[1]||"").replace(/\\/g,"");n=P.find[A](s,m,p);if(n!=null){g=g.replace(P.match[A],"");break}}}}n||(n=m.getElementsByTagName("*"));return{set:n,expr:g}};N.filter=function(g,m,p,n){for(var s=g,t=[],z=m,A,G,T=m&&m[0]&&c(m[0]);g&&m.length;){for(var aa in P.filter)if((A=P.leftMatch[aa].exec(g))!=null&&A[2]){var X=P.filter[aa],K,ca;
ca=A[1];G=false;A.splice(1,1);if(ca.substr(ca.length-1)!=="\\"){if(z===t)t=[];if(P.preFilter[aa])if(A=P.preFilter[aa](A,z,p,t,n,T)){if(A===true)continue}else G=K=true;if(A)for(var Qa=0;(ca=z[Qa])!=null;Qa++)if(ca){K=X(ca,A,Qa,z);var ya=n^!!K;if(p&&K!=null)if(ya)G=true;else z[Qa]=false;else if(ya){t.push(ca);G=true}}if(K!==e){p||(z=t);g=g.replace(P.match[aa],"");if(!G)return[];break}}}if(g===s)if(G==null)N.error(g);else break;s=g}return z};N.error=function(g){throw"Syntax error, unrecognized expression: "+
g;};var P=N.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},
leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},relative:{"+":function(g,m){var p=typeof m==="string",n=p&&!/\W/.test(m);p=p&&!n;if(n)m=m.toLowerCase();n=0;for(var s=g.length,t;n<s;n++)if(t=g[n]){for(;(t=t.previousSibling)&&t.nodeType!==1;);g[n]=p||t&&t.nodeName.toLowerCase()===m?t||false:t===m}p&&N.filter(m,g,true)},">":function(g,m){var p=typeof m==="string";if(p&&!/\W/.test(m)){m=m.toLowerCase();for(var n=0,s=g.length;n<s;n++){var t=
g[n];if(t){p=t.parentNode;g[n]=p.nodeName.toLowerCase()===m?p:false}}}else{n=0;for(s=g.length;n<s;n++)if(t=g[n])g[n]=p?t.parentNode:t.parentNode===m;p&&N.filter(m,g,true)}},"":function(g,m,p){var n=u++,s=q;if(typeof m==="string"&&!/\W/.test(m)){var t=m=m.toLowerCase();s=k}s("parentNode",m,n,g,t,p)},"~":function(g,m,p){var n=u++,s=q;if(typeof m==="string"&&!/\W/.test(m)){var t=m=m.toLowerCase();s=k}s("previousSibling",m,n,g,t,p)}},find:{ID:function(g,m,p){if(typeof m.getElementById!=="undefined"&&
!p)return(g=m.getElementById(g[1]))?[g]:[]},NAME:function(g,m){if(typeof m.getElementsByName!=="undefined"){var p=[];m=m.getElementsByName(g[1]);for(var n=0,s=m.length;n<s;n++)m[n].getAttribute("name")===g[1]&&p.push(m[n]);return p.length===0?null:p}},TAG:function(g,m){return m.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,m,p,n,s,t){g=" "+g[1].replace(/\\/g,"")+" ";if(t)return g;t=0;for(var z;(z=m[t])!=null;t++)if(z)if(s^(z.className&&(" "+z.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=
0))p||n.push(z);else if(p)m[t]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},CHILD:function(g){if(g[1]==="nth"){var m=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=m[1]+(m[2]||1)-0;g[3]=m[3]-0}g[0]=u++;return g},ATTR:function(g,m,p,n,s,t){m=g[1].replace(/\\/g,"");if(!t&&P.attrMap[m])g[1]=P.attrMap[m];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,m,p,n,
s){if(g[1]==="not")if((v.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=N(g[3],null,null,m);else{g=N.filter(g[3],m,p,true^s);p||n.push.apply(n,g);return false}else if(P.match.POS.test(g[0])||P.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},
empty:function(g){return!g.firstChild},has:function(g,m,p){return!!N(p[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===
g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},setFilters:{first:function(g,m){return m===0},last:function(g,m,p,n){return m===n.length-1},even:function(g,m){return m%2===0},odd:function(g,m){return m%2===1},lt:function(g,m,p){return m<p[3]-0},gt:function(g,m,p){return m>p[3]-0},nth:function(g,m,p){return p[3]-0===m},eq:function(g,m,p){return p[3]-0===m}},filter:{PSEUDO:function(g,m,p,n){var s=m[1],t=P.filters[s];if(t)return t(g,
p,m,n);else if(s==="contains")return(g.textContent||g.innerText||b([g])||"").indexOf(m[3])>=0;else if(s==="not"){m=m[3];p=0;for(n=m.length;p<n;p++)if(m[p]===g)return false;return true}else N.error("Syntax error, unrecognized expression: "+s)},CHILD:function(g,m){var p=m[1],n=g;switch(p){case "only":case "first":for(;n=n.previousSibling;)if(n.nodeType===1)return false;if(p==="first")return true;n=g;case "last":for(;n=n.nextSibling;)if(n.nodeType===1)return false;return true;case "nth":p=m[2];var s=
m[3];if(p===1&&s===0)return true;m=m[0];var t=g.parentNode;if(t&&(t.sizcache!==m||!g.nodeIndex)){var z=0;for(n=t.firstChild;n;n=n.nextSibling)if(n.nodeType===1)n.nodeIndex=++z;t.sizcache=m}g=g.nodeIndex-s;return p===0?g===0:g%p===0&&g/p>=0}},ID:function(g,m){return g.nodeType===1&&g.getAttribute("id")===m},TAG:function(g,m){return m==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===m},CLASS:function(g,m){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(m)>-1},ATTR:function(g,m){var p=
m[1];g=P.attrHandle[p]?P.attrHandle[p](g):g[p]!=null?g[p]:g.getAttribute(p);p=g+"";var n=m[2];m=m[4];return g==null?n==="!=":n==="="?p===m:n==="*="?p.indexOf(m)>=0:n==="~="?(" "+p+" ").indexOf(m)>=0:!m?p&&g!==false:n==="!="?p!==m:n==="^="?p.indexOf(m)===0:n==="$="?p.substr(p.length-m.length)===m:n==="|="?p===m||p.substr(0,m.length+1)===m+"-":false},POS:function(g,m,p,n){var s=P.setFilters[m[2]];if(s)return s(g,p,m,n)}}},Z=P.match.POS;for(var la in P.match){P.match[la]=RegExp(P.match[la].source+/(?![^\[]*\])(?![^\(]*\))/.source);
P.leftMatch[la]=RegExp(/(^(?:.|\r|\n)*?)/.source+P.match[la].source.replace(/\\(\d+)/g,function(g,m){return"\\"+(m-0+1)}))}var Ca=function(g,m){g=Array.prototype.slice.call(g,0);if(m){m.push.apply(m,g);return m}return g};try{Array.prototype.slice.call(Q.documentElement.childNodes,0)}catch(va){Ca=function(g,m){m=m||[];if(D.call(g)==="[object Array]")Array.prototype.push.apply(m,g);else if(typeof g.length==="number")for(var p=0,n=g.length;p<n;p++)m.push(g[p]);else for(p=0;g[p];p++)m.push(g[p]);return m}}var Ja;
if(Q.documentElement.compareDocumentPosition)Ja=function(g,m){if(!g.compareDocumentPosition||!m.compareDocumentPosition){if(g==m)F=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(m)&4?-1:g===m?0:1;if(g===0)F=true;return g};else if("sourceIndex"in Q.documentElement)Ja=function(g,m){if(!g.sourceIndex||!m.sourceIndex){if(g==m)F=true;return g.sourceIndex?-1:1}g=g.sourceIndex-m.sourceIndex;if(g===0)F=true;return g};else if(Q.createRange)Ja=function(g,m){if(!g.ownerDocument||!m.ownerDocument){if(g==
m)F=true;return g.ownerDocument?-1:1}var p=g.ownerDocument.createRange(),n=m.ownerDocument.createRange();p.setStart(g,0);p.setEnd(g,0);n.setStart(m,0);n.setEnd(m,0);g=p.compareBoundaryPoints(Range.START_TO_END,n);if(g===0)F=true;return g};(function(){var g=Q.createElement("div"),m="script"+(new Date).getTime();g.innerHTML="<a name='"+m+"'/>";var p=Q.documentElement;p.insertBefore(g,p.firstChild);if(Q.getElementById(m)){P.find.ID=function(n,s,t){if(typeof s.getElementById!=="undefined"&&!t)return(s=
s.getElementById(n[1]))?s.id===n[1]||typeof s.getAttributeNode!=="undefined"&&s.getAttributeNode("id").nodeValue===n[1]?[s]:e:[]};P.filter.ID=function(n,s){var t=typeof n.getAttributeNode!=="undefined"&&n.getAttributeNode("id");return n.nodeType===1&&t&&t.nodeValue===s}}p.removeChild(g);p=g=null})();(function(){var g=Q.createElement("div");g.appendChild(Q.createComment(""));if(g.getElementsByTagName("*").length>0)P.find.TAG=function(m,p){p=p.getElementsByTagName(m[1]);if(m[1]==="*"){m=[];for(var n=
0;p[n];n++)p[n].nodeType===1&&m.push(p[n]);p=m}return p};g.innerHTML="<a href='#'></a>";if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")P.attrHandle.href=function(m){return m.getAttribute("href",2)};g=null})();Q.querySelectorAll&&function(){var g=N,m=Q.createElement("div");m.innerHTML="<p class='TEST'></p>";if(!(m.querySelectorAll&&m.querySelectorAll(".TEST").length===0)){N=function(n,s,t,z){s=s||Q;if(!z&&s.nodeType===9&&!c(s))try{return Ca(s.querySelectorAll(n),
t)}catch(A){}return g(n,s,t,z)};for(var p in g)N[p]=g[p];m=null}}();(function(){var g=Q.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){P.order.splice(1,0,"CLASS");P.find.CLASS=function(m,p,n){if(typeof p.getElementsByClassName!=="undefined"&&!n)return p.getElementsByClassName(m[1])};g=null}}})();var $a=Q.compareDocumentPosition?
function(g,m){return!!(g.compareDocumentPosition(m)&16)}:function(g,m){return g!==m&&(g.contains?g.contains(m):true)},c=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},j=function(g,m){var p=[],n="",s;for(m=m.nodeType?[m]:m;s=P.match.PSEUDO.exec(g);){n+=s[0];g=g.replace(P.match.PSEUDO,"")}g=P.relative[g]?g+"*":g;s=0;for(var t=m.length;s<t;s++)N(g,m[s],p);return N.filter(n,p)};l.find=N;l.expr=N.selectors;l.expr[":"]=l.expr.filters;l.unique=N.uniqueSort;l.text=
b;l.isXMLDoc=c;l.contains=$a})();var ia=/Until$/,ib=/^(?:parents|prevUntil|prevAll)/,U=/,/;ka=Array.prototype.slice;var da=function(b,k,q){if(l.isFunction(k))return l.grep(b,function(u,D){return!!k.call(u,D,u)===q});else if(k.nodeType)return l.grep(b,function(u){return u===k===q});else if(typeof k==="string"){var v=l.grep(b,function(u){return u.nodeType===1});if(Pa.test(k))return l.filter(k,v,!q);else k=l.filter(k,v)}return l.grep(b,function(u){return l.inArray(u,k)>=0===q})};l.fn.extend({find:function(b){for(var k=
this.pushStack("","find",b),q=0,v=0,u=this.length;v<u;v++){q=k.length;l.find(b,this[v],k);if(v>0)for(var D=q;D<k.length;D++)for(var F=0;F<q;F++)if(k[F]===k[D]){k.splice(D--,1);break}}return k},has:function(b){var k=l(b);return this.filter(function(){for(var q=0,v=k.length;q<v;q++)if(l.contains(this,k[q]))return true})},not:function(b){return this.pushStack(da(this,b,false),"not",b)},filter:function(b){return this.pushStack(da(this,b,true),"filter",b)},is:function(b){return!!b&&l.filter(b,this).length>
0},closest:function(b,k){if(l.isArray(b)){var q=[],v=this[0],u,D={},F;if(v&&b.length){u=0;for(var O=b.length;u<O;u++){F=b[u];D[F]||(D[F]=l.expr.match.POS.test(F)?l(F,k||this.context):F)}for(;v&&v.ownerDocument&&v!==k;){for(F in D){u=D[F];if(u.jquery?u.index(v)>-1:l(v).is(u)){q.push({selector:F,elem:v});delete D[F]}}v=v.parentNode}}return q}var N=l.expr.match.POS.test(b)?l(b,k||this.context):null;return this.map(function(P,Z){for(;Z&&Z.ownerDocument&&Z!==k;){if(N?N.index(Z)>-1:l(Z).is(b))return Z;
Z=Z.parentNode}return null})},index:function(b){if(!b||typeof b==="string")return l.inArray(this[0],b?l(b):this.parent().children());return l.inArray(b.jquery?b[0]:b,this)},add:function(b,k){b=typeof b==="string"?l(b,k||this.context):l.makeArray(b);k=l.merge(this.get(),b);return this.pushStack(!b[0]||!b[0].parentNode||b[0].parentNode.nodeType===11||!k[0]||!k[0].parentNode||k[0].parentNode.nodeType===11?k:l.unique(k))},andSelf:function(){return this.add(this.prevObject)}});l.each({parent:function(b){return(b=
b.parentNode)&&b.nodeType!==11?b:null},parents:function(b){return l.dir(b,"parentNode")},parentsUntil:function(b,k,q){return l.dir(b,"parentNode",q)},next:function(b){return l.nth(b,2,"nextSibling")},prev:function(b){return l.nth(b,2,"previousSibling")},nextAll:function(b){return l.dir(b,"nextSibling")},prevAll:function(b){return l.dir(b,"previousSibling")},nextUntil:function(b,k,q){return l.dir(b,"nextSibling",q)},prevUntil:function(b,k,q){return l.dir(b,"previousSibling",q)},siblings:function(b){return l.sibling(b.parentNode.firstChild,
b)},children:function(b){return l.sibling(b.firstChild)},contents:function(b){return l.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:l.makeArray(b.childNodes)}},function(b,k){l.fn[b]=function(q,v){var u=l.map(this,k,q);ia.test(b)||(v=q);if(v&&typeof v==="string")u=l.filter(v,u);u=this.length>1?l.unique(u):u;if((this.length>1||U.test(v))&&ib.test(b))u=u.reverse();return this.pushStack(u,b,ka.call(arguments).join(","))}});l.extend({filter:function(b,k,q){if(q)b=":not("+b+")";return l.find.matches(b,
k)},dir:function(b,k,q){var v=[];for(b=b[k];b&&b.nodeType!==9&&(q===e||b.nodeType!==1||!l(b).is(q));){b.nodeType===1&&v.push(b);b=b[k]}return v},nth:function(b,k,q){k=k||1;for(var v=0;b;b=b[q])if(b.nodeType===1&&++v===k)break;return b},sibling:function(b,k){for(var q=[];b;b=b.nextSibling)b.nodeType===1&&b!==k&&q.push(b);return q}});var Ea=/ jQuery\d+="(?:\d+|null)"/g,Oa=/^\s+/,cb=/(<([\w:]+)[^>]*?)\/>/g,Da=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,ja=/<([\w:]+)/,ab=/<tbody/i,fb=/<|&#?\w+;/,
bb=/<script|<object|<embed|<option|<style/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ka=function(b,k,q){return Da.test(q)?b:k+"></"+q+">"},Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};Xa.optgroup=Xa.option;Xa.tbody=
Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead;Xa.th=Xa.td;if(!l.support.htmlSerialize)Xa._default=[1,"div<div>","</div>"];l.fn.extend({text:function(b){if(l.isFunction(b))return this.each(function(k){var q=l(this);q.text(b.call(this,k,q.text()))});if(typeof b!=="object"&&b!==e)return this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(b));return l.text(this)},wrapAll:function(b){if(l.isFunction(b))return this.each(function(q){l(this).wrapAll(b.call(this,q))});if(this[0]){var k=l(b,this[0].ownerDocument).eq(0).clone(true);
this[0].parentNode&&k.insertBefore(this[0]);k.map(function(){for(var q=this;q.firstChild&&q.firstChild.nodeType===1;)q=q.firstChild;return q}).append(this)}return this},wrapInner:function(b){if(l.isFunction(b))return this.each(function(k){l(this).wrapInner(b.call(this,k))});return this.each(function(){var k=l(this),q=k.contents();q.length?q.wrapAll(b):k.append(b)})},wrap:function(b){return this.each(function(){l(this).wrapAll(b)})},unwrap:function(){return this.parent().each(function(){l.nodeName(this,
"body")||l(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,true,function(b){this.nodeType===1&&this.insertBefore(b,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(k){this.parentNode.insertBefore(k,this)});else if(arguments.length){var b=l(arguments[0]);b.push.apply(b,this.toArray());
return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(k){this.parentNode.insertBefore(k,this.nextSibling)});else if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,l(arguments[0]).toArray());return b}},remove:function(b,k){for(var q=0,v;(v=this[q])!=null;q++)if(!b||l.filter(b,[v]).length){if(!k&&v.nodeType===1){l.cleanData(v.getElementsByTagName("*"));l.cleanData([v])}v.parentNode&&
v.parentNode.removeChild(v)}return this},empty:function(){for(var b=0,k;(k=this[b])!=null;b++)for(k.nodeType===1&&l.cleanData(k.getElementsByTagName("*"));k.firstChild;)k.removeChild(k.firstChild);return this},clone:function(b){var k=this.map(function(){if(!l.support.noCloneEvent&&!l.isXMLDoc(this)){var q=this.outerHTML,v=this.ownerDocument;if(!q){q=v.createElement("div");q.appendChild(this.cloneNode(true));q=q.innerHTML}return l.clean([q.replace(Ea,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(Oa,
"")],v)[0]}else return this.cloneNode(true)});if(b===true){I(this,k);I(this.find("*"),k.find("*"))}return k},html:function(b){if(b===e)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ea,""):null;else if(typeof b==="string"&&!bb.test(b)&&(l.support.leadingWhitespace||!Oa.test(b))&&!Xa[(ja.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(cb,Ka);try{for(var k=0,q=this.length;k<q;k++)if(this[k].nodeType===1){l.cleanData(this[k].getElementsByTagName("*"));this[k].innerHTML=b}}catch(v){this.empty().append(b)}}else l.isFunction(b)?
this.each(function(u){var D=l(this),F=D.html();D.empty().append(function(){return b.call(this,u,F)})}):this.empty().append(b);return this},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(l.isFunction(b))return this.each(function(k){var q=l(this),v=q.html();q.replaceWith(b.call(this,k,v))});if(typeof b!=="string")b=l(b).detach();return this.each(function(){var k=this.nextSibling,q=this.parentNode;l(this).remove();k?l(k).before(b):l(q).append(b)})}else return this.pushStack(l(l.isFunction(b)?
b():b),"replaceWith",b)},detach:function(b){return this.remove(b,true)},domManip:function(b,k,q){var v,u,D=b[0],F=[],O;if(!l.support.checkClone&&arguments.length===3&&typeof D==="string"&&eb.test(D))return this.each(function(){l(this).domManip(b,k,q,true)});if(l.isFunction(D))return this.each(function(P){var Z=l(this);b[0]=D.call(this,P,k?Z.html():e);Z.domManip(b,k,q)});if(this[0]){v=D&&D.parentNode;v=l.support.parentNode&&v&&v.nodeType===11&&v.childNodes.length===this.length?{fragment:v}:M(b,this,
F);O=v.fragment;if(u=O.childNodes.length===1?O=O.firstChild:O.firstChild){k=k&&l.nodeName(u,"tr");u=0;for(var N=this.length;u<N;u++)q.call(k?l.nodeName(this[u],"table")?this[u].getElementsByTagName("tbody")[0]||this[u].appendChild(this[u].ownerDocument.createElement("tbody")):this[u]:this[u],u>0||v.cacheable||this.length>1?O.cloneNode(true):O)}F.length&&l.each(F,h)}return this}});l.fragments={};l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(b,k){l.fn[b]=function(q){var v=[];q=l(q);var u=this.length===1&&this[0].parentNode;if(u&&u.nodeType===11&&u.childNodes.length===1&&q.length===1){q[k](this[0]);return this}else{u=0;for(var D=q.length;u<D;u++){var F=(u>0?this.clone(true):this).get();l.fn[k].apply(l(q[u]),F);v=v.concat(F)}return this.pushStack(v,b,q.selector)}}});l.extend({clean:function(b,k,q,v){k=k||Q;if(typeof k.createElement==="undefined")k=k.ownerDocument||k[0]&&k[0].ownerDocument||Q;for(var u=[],D=0,F;(F=b[D])!=null;D++){if(typeof F===
"number")F+="";if(F){if(typeof F==="string"&&!fb.test(F))F=k.createTextNode(F);else if(typeof F==="string"){F=F.replace(cb,Ka);var O=(ja.exec(F)||["",""])[1].toLowerCase(),N=Xa[O]||Xa._default,P=N[0],Z=k.createElement("div");for(Z.innerHTML=N[1]+F+N[2];P--;)Z=Z.lastChild;if(!l.support.tbody){P=ab.test(F);O=O==="table"&&!P?Z.firstChild&&Z.firstChild.childNodes:N[1]==="<table>"&&!P?Z.childNodes:[];for(N=O.length-1;N>=0;--N)l.nodeName(O[N],"tbody")&&!O[N].childNodes.length&&O[N].parentNode.removeChild(O[N])}!l.support.leadingWhitespace&&
Oa.test(F)&&Z.insertBefore(k.createTextNode(Oa.exec(F)[0]),Z.firstChild);F=Z.childNodes}if(F.nodeType)u.push(F);else u=l.merge(u,F)}}if(q)for(D=0;u[D];D++)if(v&&l.nodeName(u[D],"script")&&(!u[D].type||u[D].type.toLowerCase()==="text/javascript"))v.push(u[D].parentNode?u[D].parentNode.removeChild(u[D]):u[D]);else{u[D].nodeType===1&&u.splice.apply(u,[D+1,0].concat(l.makeArray(u[D].getElementsByTagName("script"))));q.appendChild(u[D])}return u},cleanData:function(b){for(var k,q,v=l.cache,u=l.event.special,
D=l.support.deleteExpando,F=0,O;(O=b[F])!=null;F++)if(q=O[l.expando]){k=v[q];if(k.events)for(var N in k.events)u[N]?l.event.remove(O,N):V(O,N,k.handle);if(D)delete O[l.expando];else O.removeAttribute&&O.removeAttribute(l.expando);delete v[q]}}});var Ib=/z-?index|font-?weight|opacity|zoom|line-?height/i,kb=/alpha\([^)]*\)/,zb=/opacity=([^)]*)/,tb=/float/i,ub=/-([a-z])/ig,nb=/([A-Z])/g,vb=/^-?\d+(?:px)?$/i,lb=/^-?\d/,Jb={position:"absolute",visibility:"hidden",display:"block"},ob=["Left","Right"],Ab=
["Top","Bottom"],Bb=Q.defaultView&&Q.defaultView.getComputedStyle,ha=l.support.cssFloat?"cssFloat":"styleFloat",pb=function(b,k){return k.toUpperCase()};l.fn.css=function(b,k){return r(this,b,k,true,function(q,v,u){if(u===e)return l.curCSS(q,v);if(typeof u==="number"&&!Ib.test(v))u+="px";l.style(q,v,u)})};l.extend({style:function(b,k,q){if(!b||b.nodeType===3||b.nodeType===8)return e;if((k==="width"||k==="height")&&parseFloat(q)<0)q=e;var v=b.style||b,u=q!==e;if(!l.support.opacity&&k==="opacity"){if(u){v.zoom=
1;k=parseInt(q,10)+""==="NaN"?"":"alpha(opacity="+q*100+")";b=v.filter||l.curCSS(b,"filter")||"";v.filter=kb.test(b)?b.replace(kb,k):k}return v.filter&&v.filter.indexOf("opacity=")>=0?parseFloat(zb.exec(v.filter)[1])/100+"":""}if(tb.test(k))k=ha;k=k.replace(ub,pb);if(u)v[k]=q;return v[k]},css:function(b,k,q,v){if(k==="width"||k==="height"){var u,D=k==="width"?ob:Ab;q=function(){u=k==="width"?b.offsetWidth:b.offsetHeight;v!=="border"&&l.each(D,function(){v||(u-=parseFloat(l.curCSS(b,"padding"+this,
true))||0);if(v==="margin")u+=parseFloat(l.curCSS(b,"margin"+this,true))||0;else u-=parseFloat(l.curCSS(b,"border"+this+"Width",true))||0})};b.offsetWidth!==0?q():l.swap(b,Jb,q);return Math.max(0,Math.round(u))}return l.curCSS(b,k,q)},curCSS:function(b,k,q){var v,u=b.style;if(!l.support.opacity&&k==="opacity"&&b.currentStyle){v=zb.test(b.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return v===""?"1":v}if(tb.test(k))k=ha;if(!q&&u&&u[k])v=u[k];else if(Bb){if(tb.test(k))k="float";k=k.replace(nb,
"-$1").toLowerCase();u=b.ownerDocument.defaultView;if(!u)return null;if(b=u.getComputedStyle(b,null))v=b.getPropertyValue(k);if(k==="opacity"&&v==="")v="1"}else if(b.currentStyle){q=k.replace(ub,pb);v=b.currentStyle[k]||b.currentStyle[q];if(!vb.test(v)&&lb.test(v)){k=u.left;var D=b.runtimeStyle.left;b.runtimeStyle.left=b.currentStyle.left;u.left=q==="fontSize"?"1em":v||0;v=u.pixelLeft+"px";u.left=k;b.runtimeStyle.left=D}}return v},swap:function(b,k,q){var v={};for(var u in k){v[u]=b.style[u];b.style[u]=
k[u]}q.call(b);for(u in k)b.style[u]=v[u]}});if(l.expr&&l.expr.filters){l.expr.filters.hidden=function(b){var k=b.offsetWidth,q=b.offsetHeight,v=b.nodeName.toLowerCase()==="tr";return k===0&&q===0&&!v?true:k>0&&q>0&&!v?false:l.curCSS(b,"display")==="none"};l.expr.filters.visible=function(b){return!l.expr.filters.hidden(b)}}var mb=o(),wb=/<script(.|\s)*?\/script>/gi,db=/select|textarea/i,Kb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,fa=/=\?(&|$)/,
qb=/\?/,Cb=/(\?|&)_=.*?(&|$)/,Db=/^(\w+:)?\/\/([^\/?#]+)/,Eb=/%20/g,Fb=l.fn.load;l.fn.extend({load:function(b,k,q){if(typeof b!=="string")return Fb.call(this,b);else if(!this.length)return this;var v=b.indexOf(" ");if(v>=0){var u=b.slice(v,b.length);b=b.slice(0,v)}v="GET";if(k)if(l.isFunction(k)){q=k;k=null}else if(typeof k==="object"){k=l.param(k,l.ajaxSettings.traditional);v="POST"}var D=this;l.ajax({url:b,type:v,dataType:"html",data:k,complete:function(F,O){if(O==="success"||O==="notmodified")D.html(u?
l("<div />").append(F.responseText.replace(wb,"")).find(u):F.responseText);q&&D.each(q,[F.responseText,O,F])}});return this},serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?l.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||db.test(this.nodeName)||Kb.test(this.type))}).map(function(b,k){b=l(this).val();return b==null?null:l.isArray(b)?l.map(b,function(q){return{name:k.name,
value:q}}):{name:k.name,value:b}}).get()}});l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,k){l.fn[k]=function(q){return this.bind(k,q)}});l.extend({get:function(b,k,q,v){if(l.isFunction(k)){v=v||q;q=k;k=null}return l.ajax({type:"GET",url:b,data:k,success:q,dataType:v})},getScript:function(b,k){return l.get(b,null,k,"script")},getJSON:function(b,k,q){return l.get(b,k,q,"json")},post:function(b,k,q,v){if(l.isFunction(k)){v=v||q;q=k;k={}}return l.ajax({type:"POST",
url:b,data:k,success:q,dataType:v})},ajaxSetup:function(b){l.extend(l.ajaxSettings,b)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:a.XMLHttpRequest&&(a.location.protocol!=="file:"||!a.ActiveXObject)?function(){return new a.XMLHttpRequest}:function(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",
json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(b){function k(){u.success&&u.success.call(N,O,F,c);u.global&&v("ajaxSuccess",[c,u])}function q(){u.complete&&u.complete.call(N,c,F);u.global&&v("ajaxComplete",[c,u]);u.global&&!--l.active&&l.event.trigger("ajaxStop")}function v(s,t){(u.context?l(u.context):l.event).trigger(s,t)}var u=l.extend(true,{},l.ajaxSettings,b),D,F,O,N=b&&b.context||u,P=u.type.toUpperCase();if(u.data&&u.processData&&
typeof u.data!=="string")u.data=l.param(u.data,u.traditional);if(u.dataType==="jsonp"){if(P==="GET")fa.test(u.url)||(u.url+=(qb.test(u.url)?"&":"?")+(u.jsonp||"callback")+"=?");else if(!u.data||!fa.test(u.data))u.data=(u.data?u.data+"&":"")+(u.jsonp||"callback")+"=?";u.dataType="json"}if(u.dataType==="json"&&(u.data&&fa.test(u.data)||fa.test(u.url))){D=u.jsonpCallback||"jsonp"+mb++;if(u.data)u.data=(u.data+"").replace(fa,"="+D+"$1");u.url=u.url.replace(fa,"="+D+"$1");u.dataType="script";a[D]=a[D]||
function(s){O=s;k();q();a[D]=e;try{delete a[D]}catch(t){}Ca&&Ca.removeChild(va)}}if(u.dataType==="script"&&u.cache===null)u.cache=false;if(u.cache===false&&P==="GET"){var Z=o(),la=u.url.replace(Cb,"$1_="+Z+"$2");u.url=la+(la===u.url?(qb.test(u.url)?"&":"?")+"_="+Z:"")}if(u.data&&P==="GET")u.url+=(qb.test(u.url)?"&":"?")+u.data;u.global&&!l.active++&&l.event.trigger("ajaxStart");Z=(Z=Db.exec(u.url))&&(Z[1]&&Z[1]!==location.protocol||Z[2]!==location.host);if(u.dataType==="script"&&P==="GET"&&Z){var Ca=
Q.getElementsByTagName("head")[0]||Q.documentElement,va=Q.createElement("script");va.src=u.url;if(u.scriptCharset)va.charset=u.scriptCharset;if(!D){var Ja=false;va.onload=va.onreadystatechange=function(){if(!Ja&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){Ja=true;k();q();va.onload=va.onreadystatechange=null;Ca&&va.parentNode&&Ca.removeChild(va)}}}Ca.insertBefore(va,Ca.firstChild);return e}var $a=false,c=u.xhr();if(c){u.username?c.open(P,u.url,u.async,u.username,u.password):
c.open(P,u.url,u.async);try{if(u.data||b&&b.contentType)c.setRequestHeader("Content-Type",u.contentType);if(u.ifModified){l.lastModified[u.url]&&c.setRequestHeader("If-Modified-Since",l.lastModified[u.url]);l.etag[u.url]&&c.setRequestHeader("If-None-Match",l.etag[u.url])}Z||c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Accept",u.dataType&&u.accepts[u.dataType]?u.accepts[u.dataType]+", */*":u.accepts._default)}catch(j){}if(u.beforeSend&&u.beforeSend.call(N,c,u)===false){u.global&&
!--l.active&&l.event.trigger("ajaxStop");c.abort();return false}u.global&&v("ajaxSend",[c,u]);var g=c.onreadystatechange=function(s){if(!c||c.readyState===0||s==="abort"){$a||q();$a=true;if(c)c.onreadystatechange=l.noop}else if(!$a&&c&&(c.readyState===4||s==="timeout")){$a=true;c.onreadystatechange=l.noop;F=s==="timeout"?"timeout":!l.httpSuccess(c)?"error":u.ifModified&&l.httpNotModified(c,u.url)?"notmodified":"success";var t;if(F==="success")try{O=l.httpData(c,u.dataType,u)}catch(z){F="parsererror";
t=z}if(F==="success"||F==="notmodified")D||k();else l.handleError(u,c,F,t);q();s==="timeout"&&c.abort();if(u.async)c=null}};try{var m=c.abort;c.abort=function(){c&&m.call(c);g("abort")}}catch(p){}u.async&&u.timeout>0&&setTimeout(function(){c&&!$a&&g("timeout")},u.timeout);try{c.send(P==="POST"||P==="PUT"||P==="DELETE"?u.data:null)}catch(n){l.handleError(u,c,null,n);q()}u.async||g();return c}},handleError:function(b,k,q,v){if(b.error)b.error.call(b.context||b,k,q,v);if(b.global)(b.context?l(b.context):
l.event).trigger("ajaxError",[k,b,v])},active:0,httpSuccess:function(b){try{return!b.status&&location.protocol==="file:"||b.status>=200&&b.status<300||b.status===304||b.status===1223||b.status===0}catch(k){}return false},httpNotModified:function(b,k){var q=b.getResponseHeader("Last-Modified"),v=b.getResponseHeader("Etag");if(q)l.lastModified[k]=q;if(v)l.etag[k]=v;return b.status===304||b.status===0},httpData:function(b,k,q){var v=b.getResponseHeader("content-type")||"",u=k==="xml"||!k&&v.indexOf("xml")>=
0;b=u?b.responseXML:b.responseText;u&&b.documentElement.nodeName==="parsererror"&&l.error("parsererror");if(q&&q.dataFilter)b=q.dataFilter(b,k);if(typeof b==="string")if(k==="json"||!k&&v.indexOf("json")>=0)b=l.parseJSON(b);else if(k==="script"||!k&&v.indexOf("javascript")>=0)l.globalEval(b);return b},param:function(b,k){function q(F,O){if(l.isArray(O))l.each(O,function(N,P){k||/\[\]$/.test(F)?v(F,P):q(F+"["+(typeof P==="object"||l.isArray(P)?N:"")+"]",P)});else!k&&O!=null&&typeof O==="object"?l.each(O,
function(N,P){q(F+"["+N+"]",P)}):v(F,O)}function v(F,O){O=l.isFunction(O)?O():O;u[u.length]=encodeURIComponent(F)+"="+encodeURIComponent(O)}var u=[];if(k===e)k=l.ajaxSettings.traditional;if(l.isArray(b)||b.jquery)l.each(b,function(){v(this.name,this.value)});else for(var D in b)q(D,b[D]);return u.join("&").replace(Eb,"+")}});var rb={},xb=/toggle|show|hide/,Gb=/^([+-]=)?([\d+-.]+)(.*)$/,sb,yb=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft",
"paddingRight"],["opacity"]];l.fn.extend({show:function(b,k){if(b||b===0)return this.animate(L("show",3),b,k);else{b=0;for(k=this.length;b<k;b++){var q=l.data(this[b],"olddisplay");this[b].style.display=q||"";if(l.css(this[b],"display")==="none"){q=this[b].nodeName;var v;if(rb[q])v=rb[q];else{var u=l("<"+q+" />").appendTo("body");v=u.css("display");if(v==="none")v="block";u.remove();rb[q]=v}l.data(this[b],"olddisplay",v)}}b=0;for(k=this.length;b<k;b++)this[b].style.display=l.data(this[b],"olddisplay")||
"";return this}},hide:function(b,k){if(b||b===0)return this.animate(L("hide",3),b,k);else{b=0;for(k=this.length;b<k;b++){var q=l.data(this[b],"olddisplay");!q&&q!=="none"&&l.data(this[b],"olddisplay",l.css(this[b],"display"))}b=0;for(k=this.length;b<k;b++)this[b].style.display="none";return this}},_toggle:l.fn.toggle,toggle:function(b,k){var q=typeof b==="boolean";if(l.isFunction(b)&&l.isFunction(k))this._toggle.apply(this,arguments);else b==null||q?this.each(function(){var v=q?b:l(this).is(":hidden");
l(this)[v?"show":"hide"]()}):this.animate(L("toggle",3),b,k);return this},fadeTo:function(b,k,q){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:k},b,q)},animate:function(b,k,q,v){var u=l.speed(k,q,v);if(l.isEmptyObject(b))return this.each(u.complete);return this[u.queue===false?"each":"queue"](function(){var D=l.extend({},u),F,O=this.nodeType===1&&l(this).is(":hidden"),N=this;for(F in b){var P=F.replace(ub,pb);if(F!==P){b[P]=b[F];delete b[F];F=P}if(b[F]==="hide"&&O||
b[F]==="show"&&!O)return D.complete.call(this);if((F==="height"||F==="width")&&this.style){D.display=l.css(this,"display");D.overflow=this.style.overflow}if(l.isArray(b[F])){(D.specialEasing=D.specialEasing||{})[F]=b[F][1];b[F]=b[F][0]}}if(D.overflow!=null)this.style.overflow="hidden";D.curAnim=l.extend({},b);l.each(b,function(Z,la){var Ca=new l.fx(N,D,Z);if(xb.test(la))Ca[la==="toggle"?O?"show":"hide":la](b);else{var va=Gb.exec(la),Ja=Ca.cur(true)||0;if(va){la=parseFloat(va[2]);var $a=va[3]||"px";
if($a!=="px"){N.style[Z]=(la||1)+$a;Ja=(la||1)/Ca.cur(true)*Ja;N.style[Z]=Ja+$a}if(va[1])la=(va[1]==="-="?-1:1)*la+Ja;Ca.custom(Ja,la,$a)}else Ca.custom(Ja,la,"")}});return true})},stop:function(b,k){var q=l.timers;b&&this.queue([]);this.each(function(){for(var v=q.length-1;v>=0;v--)if(q[v].elem===this){k&&q[v](true);q.splice(v,1)}});k||this.dequeue();return this}});l.each({slideDown:L("show",1),slideUp:L("hide",1),slideToggle:L("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(b,
k){l.fn[b]=function(q,v){return this.animate(k,q,v)}});l.extend({speed:function(b,k,q){var v=b&&typeof b==="object"?b:{complete:q||!q&&k||l.isFunction(b)&&b,duration:b,easing:q&&k||k&&!l.isFunction(k)&&k};v.duration=l.fx.off?0:typeof v.duration==="number"?v.duration:l.fx.speeds[v.duration]||l.fx.speeds._default;v.old=v.complete;v.complete=function(){v.queue!==false&&l(this).dequeue();l.isFunction(v.old)&&v.old.call(this)};return v},easing:{linear:function(b,k,q,v){return q+v*b},swing:function(b,k,
q,v){return(-Math.cos(b*Math.PI)/2+0.5)*v+q}},timers:[],fx:function(b,k,q){this.options=k;this.elem=b;this.prop=q;if(!k.orig)k.orig={}}});l.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(l.fx.step[this.prop]||l.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(b){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];
return(b=parseFloat(l.css(this.elem,this.prop,b)))&&b>-10000?b:parseFloat(l.curCSS(this.elem,this.prop))||0},custom:function(b,k,q){function v(D){return u.step(D)}this.startTime=o();this.start=b;this.end=k;this.unit=q||this.unit||"px";this.now=this.start;this.pos=this.state=0;var u=this;v.elem=this.elem;if(v()&&l.timers.push(v)&&!sb)sb=setInterval(l.fx.tick,13)},show:function(){this.options.orig[this.prop]=l.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop===
"height"?1:0,this.cur());l(this.elem).show()},hide:function(){this.options.orig[this.prop]=l.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(b){var k=o(),q=true;if(b||k>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var v in this.options.curAnim)if(this.options.curAnim[v]!==true)q=false;if(q){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;
b=l.data(this.elem,"olddisplay");this.elem.style.display=b?b:this.options.display;if(l.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&l(this.elem).hide();if(this.options.hide||this.options.show)for(var u in this.options.curAnim)l.style(this.elem,u,this.options.orig[u]);this.options.complete.call(this.elem)}return false}else{u=k-this.startTime;this.state=u/this.options.duration;b=this.options.easing||(l.easing.swing?"swing":"linear");this.pos=l.easing[this.options.specialEasing&&
this.options.specialEasing[this.prop]||b](this.state,u,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};l.extend(l.fx,{tick:function(){for(var b=l.timers,k=0;k<b.length;k++)b[k]()||b.splice(k--,1);b.length||l.fx.stop()},stop:function(){clearInterval(sb);sb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){l.style(b.elem,"opacity",b.now)},_default:function(b){if(b.elem.style&&b.elem.style[b.prop]!=null)b.elem.style[b.prop]=
(b.prop==="width"||b.prop==="height"?Math.max(0,b.now):b.now)+b.unit;else b.elem[b.prop]=b.now}}});if(l.expr&&l.expr.filters)l.expr.filters.animated=function(b){return l.grep(l.timers,function(k){return b===k.elem}).length};l.fn.offset="getBoundingClientRect"in Q.documentElement?function(b){var k=this[0];if(b)return this.each(function(u){l.offset.setOffset(this,b,u)});if(!k||!k.ownerDocument)return null;if(k===k.ownerDocument.body)return l.offset.bodyOffset(k);var q=k.getBoundingClientRect(),v=k.ownerDocument;
k=v.body;v=v.documentElement;return{top:q.top+(self.pageYOffset||l.support.boxModel&&v.scrollTop||k.scrollTop)-(v.clientTop||k.clientTop||0),left:q.left+(self.pageXOffset||l.support.boxModel&&v.scrollLeft||k.scrollLeft)-(v.clientLeft||k.clientLeft||0)}}:function(b){var k=this[0];if(b)return this.each(function(Z){l.offset.setOffset(this,b,Z)});if(!k||!k.ownerDocument)return null;if(k===k.ownerDocument.body)return l.offset.bodyOffset(k);l.offset.initialize();var q=k.offsetParent,v=k,u=k.ownerDocument,
D,F=u.documentElement,O=u.body;v=(u=u.defaultView)?u.getComputedStyle(k,null):k.currentStyle;for(var N=k.offsetTop,P=k.offsetLeft;(k=k.parentNode)&&k!==O&&k!==F;){if(l.offset.supportsFixedPosition&&v.position==="fixed")break;D=u?u.getComputedStyle(k,null):k.currentStyle;N-=k.scrollTop;P-=k.scrollLeft;if(k===q){N+=k.offsetTop;P+=k.offsetLeft;if(l.offset.doesNotAddBorder&&!(l.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(k.nodeName))){N+=parseFloat(D.borderTopWidth)||0;P+=parseFloat(D.borderLeftWidth)||
0}v=q;q=k.offsetParent}if(l.offset.subtractsBorderForOverflowNotVisible&&D.overflow!=="visible"){N+=parseFloat(D.borderTopWidth)||0;P+=parseFloat(D.borderLeftWidth)||0}v=D}if(v.position==="relative"||v.position==="static"){N+=O.offsetTop;P+=O.offsetLeft}if(l.offset.supportsFixedPosition&&v.position==="fixed"){N+=Math.max(F.scrollTop,O.scrollTop);P+=Math.max(F.scrollLeft,O.scrollLeft)}return{top:N,left:P}};l.offset={initialize:function(){var b=Q.body,k=Q.createElement("div"),q,v,u,D=parseFloat(l.curCSS(b,
"marginTop",true))||0;l.extend(k.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});k.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.insertBefore(k,b.firstChild);q=k.firstChild;v=q.firstChild;
u=q.nextSibling.firstChild.firstChild;this.doesNotAddBorder=v.offsetTop!==5;this.doesAddBorderForTableAndCells=u.offsetTop===5;v.style.position="fixed";v.style.top="20px";this.supportsFixedPosition=v.offsetTop===20||v.offsetTop===15;v.style.position=v.style.top="";q.style.overflow="hidden";q.style.position="relative";this.subtractsBorderForOverflowNotVisible=v.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=b.offsetTop!==D;b.removeChild(k);l.offset.initialize=l.noop},bodyOffset:function(b){var k=
b.offsetTop,q=b.offsetLeft;l.offset.initialize();if(l.offset.doesNotIncludeMarginInBodyOffset){k+=parseFloat(l.curCSS(b,"marginTop",true))||0;q+=parseFloat(l.curCSS(b,"marginLeft",true))||0}return{top:k,left:q}},setOffset:function(b,k,q){if(/static/.test(l.curCSS(b,"position")))b.style.position="relative";var v=l(b),u=v.offset(),D=parseInt(l.curCSS(b,"top",true),10)||0,F=parseInt(l.curCSS(b,"left",true),10)||0;if(l.isFunction(k))k=k.call(b,q,u);q={top:k.top-u.top+D,left:k.left-u.left+F};"using"in
k?k.using.call(b,q):v.css(q)}};l.fn.extend({position:function(){if(!this[0])return null;var b=this[0],k=this.offsetParent(),q=this.offset(),v=/^body|html$/i.test(k[0].nodeName)?{top:0,left:0}:k.offset();q.top-=parseFloat(l.curCSS(b,"marginTop",true))||0;q.left-=parseFloat(l.curCSS(b,"marginLeft",true))||0;v.top+=parseFloat(l.curCSS(k[0],"borderTopWidth",true))||0;v.left+=parseFloat(l.curCSS(k[0],"borderLeftWidth",true))||0;return{top:q.top-v.top,left:q.left-v.left}},offsetParent:function(){return this.map(function(){for(var b=
this.offsetParent||Q.body;b&&!/^body|html$/i.test(b.nodeName)&&l.css(b,"position")==="static";)b=b.offsetParent;return b})}});l.each(["Left","Top"],function(b,k){var q="scroll"+k;l.fn[q]=function(v){var u=this[0],D;if(!u)return null;return v!==e?this.each(function(){if(D=S(this))D.scrollTo(!b?v:l(D).scrollLeft(),b?v:l(D).scrollTop());else this[q]=v}):(D=S(u))?"pageXOffset"in D?D[b?"pageYOffset":"pageXOffset"]:l.support.boxModel&&D.document.documentElement[q]||D.document.body[q]:u[q]}});l.each(["Height",
"Width"],function(b,k){var q=k.toLowerCase();l.fn["inner"+k]=function(){return this[0]?l.css(this[0],q,false,"padding"):null};l.fn["outer"+k]=function(v){return this[0]?l.css(this[0],q,false,v?"margin":"border"):null};l.fn[q]=function(v){var u=this[0];if(!u)return v==null?null:this;if(l.isFunction(v))return this.each(function(D){var F=l(this);F[q](v.call(this,D,F[q]()))});return"scrollTo"in u&&u.document?u.document.compatMode==="CSS1Compat"&&u.document.documentElement["client"+k]||u.document.body["client"+
k]:u.nodeType===9?Math.max(u.documentElement["client"+k],u.body["scroll"+k],u.documentElement["scroll"+k],u.body["offset"+k],u.documentElement["offset"+k]):v===e?l.css(u,q):this.css(q,typeof v==="string"?v:v+"px")}});a.jQuery=a.$=l})(window);var Class={create:function(){function a(){this.initialize.apply(this,arguments)}var e=null,f=$A(arguments);if(Object.isFunction(f[0]))e=f.shift();Object.extend(a,Class.Methods);a.superclass=e;a.subclasses=[];if(e){var h=function(){};h.prototype=e.prototype;a.prototype=new h;e.subclasses.push(a)}for(e=0;e<f.length;e++)a.addMethods(f[e]);if(!a.prototype.initialize)a.prototype.initialize=this.emptyFunction;return a.prototype.constructor=a},emptyFunction:function(){}};
Class.Methods={addMethods:function(a){var e=this.superclass&&this.superclass.prototype,f=Object.keys(a);Object.keys({toString:true}).length||f.push("toString","valueOf");for(var h=0,r=f.length;h<r;h++){var o=f[h],y=a[o];if(e&&Object.isFunction(y)&&y.argumentNames().first()=="$super"){var B=y;y=Object.extend(function(C){return function(){return e[C].apply(this,arguments)}}(o).wrap(B),{valueOf:function(){return B},toString:function(){return B.toString()}})}this.prototype[o]=y}return this}};
Object.extend=function(a,e){for(var f in e)a[f]=e[f];return a};
Object.extend(Object,{inspect:function(a){try{if(Object.isUndefined(a))return"undefined";if(a===null)return"null";return a.inspect?a.inspect():String(a)}catch(e){if(e instanceof RangeError)return"...";throw e;}},toJSON:function(a){switch(typeof a){case "undefined":case "function":case "unknown":return;case "boolean":return a.toString()}if(a===null)return"null";if(a.toJSON)return a.toJSON();if(!Object.isElement(a)){var e=[];for(var f in a){var h=Object.toJSON(a[f]);Object.isUndefined(h)||e.push(f.toJSON()+
": "+h)}return"{"+e.join(", ")+"}"}},toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:function(a){var e=[];for(var f in a)e.push(f);return e},values:function(a){var e=[];for(var f in a)e.push(a[f]);return e},clone:function(a){return Object.extend({},a)},isElement:function(a){return a&&a.nodeType==1},isArray:function(a){return a!=null&&typeof a=="object"&&"splice"in a&&"join"in a},isHash:function(a){return a instanceof
Hash},isFunction:function(a){return typeof a=="function"},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"},isUndefined:function(a){return typeof a=="undefined"}});function $A(a){if(!a)return[];if(a.toArray)return a.toArray();for(var e=a.length||0,f=Array(e);e--;)f[e]=a[e];return f}
if(WebKit=navigator.userAgent.indexOf("AppleWebKit/")>-1)$A=function(a){if(!a)return[];if(!(Object.isFunction(a)&&a=="[object NodeList]")&&a.toArray)return a.toArray();for(var e=a.length||0,f=Array(e);e--;)f[e]=a[e];return f};var b2Settings=Class.create();b2Settings.prototype={initialize:function(){}};b2Settings.USHRT_MAX=65535;b2Settings.b2_pi=Math.PI;b2Settings.b2_massUnitsPerKilogram=1;b2Settings.b2_timeUnitsPerSecond=1;b2Settings.b2_lengthUnitsPerMeter=30;b2Settings.b2_maxManifoldPoints=2;
b2Settings.b2_maxShapesPerBody=64;b2Settings.b2_maxPolyVertices=8;b2Settings.b2_maxProxies=1024;b2Settings.b2_maxPairs=8*b2Settings.b2_maxProxies;b2Settings.b2_linearSlop=0.0050*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_angularSlop=2/180*b2Settings.b2_pi;b2Settings.b2_velocityThreshold=1*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_maxLinearCorrection=0.2*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_maxAngularCorrection=8/180*b2Settings.b2_pi;
b2Settings.b2_contactBaumgarte=0.2;b2Settings.b2_timeToSleep=0.5*b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_linearSleepTolerance=0.01*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_angularSleepTolerance=2/180/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2Assert=function(a){a||(void 0).x++};var b2Vec2=Class.create();
b2Vec2.prototype={initialize:function(a,e){this.x=a;this.y=e},SetZero:function(){this.y=this.x=0},Set:function(a,e){this.x=a;this.y=e},SetV:function(a){this.x=a.x;this.y=a.y},Negative:function(){return new b2Vec2(-this.x,-this.y)},Copy:function(){return new b2Vec2(this.x,this.y)},Add:function(a){this.x+=a.x;this.y+=a.y},Subtract:function(a){this.x-=a.x;this.y-=a.y},Multiply:function(a){this.x*=a;this.y*=a},MulM:function(a){var e=this.x;this.x=a.col1.x*e+a.col2.x*this.y;this.y=a.col1.y*e+a.col2.y*
this.y},MulTM:function(a){var e=b2Math.b2Dot(this,a.col1);this.y=b2Math.b2Dot(this,a.col2);this.x=e},CrossVF:function(a){var e=this.x;this.x=a*this.y;this.y=-a*e},CrossFV:function(a){var e=this.x;this.x=-a*this.y;this.y=a*e},MinV:function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y},MaxV:function(a){this.x=this.x>a.x?this.x:a.x;this.y=this.y>a.y?this.y:a.y},Abs:function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)},Length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},
Normalize:function(){var a=this.Length();if(a<Number.MIN_VALUE)return 0;var e=1/a;this.x*=e;this.y*=e;return a},IsValid:function(){return b2Math.b2IsValid(this.x)&&b2Math.b2IsValid(this.y)},x:null,y:null};b2Vec2.Make=function(a,e){return new b2Vec2(a,e)};var b2Mat22=Class.create();
b2Mat22.prototype={initialize:function(a,e,f){if(a==null)a=0;this.col1=new b2Vec2;this.col2=new b2Vec2;if(e!=null&&f!=null){this.col1.SetV(e);this.col2.SetV(f)}else{e=Math.cos(a);a=Math.sin(a);this.col1.x=e;this.col2.x=-a;this.col1.y=a;this.col2.y=e}},Set:function(a){var e=Math.cos(a);a=Math.sin(a);this.col1.x=e;this.col2.x=-a;this.col1.y=a;this.col2.y=e},SetVV:function(a,e){this.col1.SetV(a);this.col2.SetV(e)},Copy:function(){return new b2Mat22(0,this.col1,this.col2)},SetM:function(a){this.col1.SetV(a.col1);
this.col2.SetV(a.col2)},AddM:function(a){this.col1.x+=a.col1.x;this.col1.y+=a.col1.y;this.col2.x+=a.col2.x;this.col2.y+=a.col2.y},SetIdentity:function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1},SetZero:function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0},Invert:function(a){var e=this.col1.x,f=this.col2.x,h=this.col1.y,r=this.col2.y,o=e*r-f*h;o=1/o;a.col1.x=o*r;a.col2.x=-o*f;a.col1.y=-o*h;a.col2.y=o*e;return a},Solve:function(a,e,f){var h=this.col1.x,r=this.col2.x,o=
this.col1.y,y=this.col2.y,B=h*y-r*o;B=1/B;a.x=B*(y*e-r*f);a.y=B*(h*f-o*e);return a},Abs:function(){this.col1.Abs();this.col2.Abs()},col1:new b2Vec2,col2:new b2Vec2};var b2Math=Class.create();b2Math.prototype={initialize:function(){}};b2Math.b2IsValid=function(a){return isFinite(a)};b2Math.b2Dot=function(a,e){return a.x*e.x+a.y*e.y};b2Math.b2CrossVV=function(a,e){return a.x*e.y-a.y*e.x};b2Math.b2CrossVF=function(a,e){return new b2Vec2(e*a.y,-e*a.x)};
b2Math.b2CrossFV=function(a,e){return new b2Vec2(-a*e.y,a*e.x)};b2Math.b2MulMV=function(a,e){return new b2Vec2(a.col1.x*e.x+a.col2.x*e.y,a.col1.y*e.x+a.col2.y*e.y)};b2Math.b2MulTMV=function(a,e){return new b2Vec2(b2Math.b2Dot(e,a.col1),b2Math.b2Dot(e,a.col2))};b2Math.AddVV=function(a,e){return new b2Vec2(a.x+e.x,a.y+e.y)};b2Math.SubtractVV=function(a,e){return new b2Vec2(a.x-e.x,a.y-e.y)};b2Math.MulFV=function(a,e){return new b2Vec2(a*e.x,a*e.y)};
b2Math.AddMM=function(a,e){return new b2Mat22(0,b2Math.AddVV(a.col1,e.col1),b2Math.AddVV(a.col2,e.col2))};b2Math.b2MulMM=function(a,e){return new b2Mat22(0,b2Math.b2MulMV(a,e.col1),b2Math.b2MulMV(a,e.col2))};b2Math.b2MulTMM=function(a,e){var f=new b2Vec2(b2Math.b2Dot(a.col1,e.col1),b2Math.b2Dot(a.col2,e.col1)),h=new b2Vec2(b2Math.b2Dot(a.col1,e.col2),b2Math.b2Dot(a.col2,e.col2));return new b2Mat22(0,f,h)};b2Math.b2Abs=function(a){return a>0?a:-a};
b2Math.b2AbsV=function(a){return new b2Vec2(b2Math.b2Abs(a.x),b2Math.b2Abs(a.y))};b2Math.b2AbsM=function(a){return new b2Mat22(0,b2Math.b2AbsV(a.col1),b2Math.b2AbsV(a.col2))};b2Math.b2Min=function(a,e){return a<e?a:e};b2Math.b2MinV=function(a,e){return new b2Vec2(b2Math.b2Min(a.x,e.x),b2Math.b2Min(a.y,e.y))};b2Math.b2Max=function(a,e){return a>e?a:e};b2Math.b2MaxV=function(a,e){return new b2Vec2(b2Math.b2Max(a.x,e.x),b2Math.b2Max(a.y,e.y))};
b2Math.b2Clamp=function(a,e,f){return b2Math.b2Max(e,b2Math.b2Min(a,f))};b2Math.b2ClampV=function(a,e,f){return b2Math.b2MaxV(e,b2Math.b2MinV(a,f))};b2Math.b2Swap=function(a,e){var f=a[0];a[0]=e[0];e[0]=f};b2Math.b2Random=function(){return Math.random()*2-1};b2Math.b2NextPowerOfTwo=function(a){a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;a|=a>>16&65535;return a+1};b2Math.b2IsPowerOfTwo=function(a){return a>0&&(a&a-1)==0};b2Math.tempVec2=new b2Vec2;b2Math.tempVec3=new b2Vec2;
b2Math.tempVec4=new b2Vec2;b2Math.tempVec5=new b2Vec2;b2Math.tempMat=new b2Mat22;var b2AABB=Class.create();b2AABB.prototype={IsValid:function(){var a=this.maxVertex.x,e=this.maxVertex.y;a=this.maxVertex.x;e=this.maxVertex.y;a-=this.minVertex.x;e-=this.minVertex.y;return a>=0&&e>=0&&this.minVertex.IsValid()&&this.maxVertex.IsValid()},minVertex:new b2Vec2,maxVertex:new b2Vec2,initialize:function(){this.minVertex=new b2Vec2;this.maxVertex=new b2Vec2}};var b2Bound=Class.create();
b2Bound.prototype={IsLower:function(){return(this.value&1)==0},IsUpper:function(){return(this.value&1)==1},Swap:function(a){var e=this.value,f=this.proxyId,h=this.stabbingCount;this.value=a.value;this.proxyId=a.proxyId;this.stabbingCount=a.stabbingCount;a.value=e;a.proxyId=f;a.stabbingCount=h},value:0,proxyId:0,stabbingCount:0,initialize:function(){}};var b2BoundValues=Class.create();
b2BoundValues.prototype={lowerValues:[0,0],upperValues:[0,0],initialize:function(){this.lowerValues=[0,0];this.upperValues=[0,0]}};var b2Pair=Class.create();
b2Pair.prototype={SetBuffered:function(){this.status|=b2Pair.e_pairBuffered},ClearBuffered:function(){this.status&=~b2Pair.e_pairBuffered},IsBuffered:function(){return(this.status&b2Pair.e_pairBuffered)==b2Pair.e_pairBuffered},SetRemoved:function(){this.status|=b2Pair.e_pairRemoved},ClearRemoved:function(){this.status&=~b2Pair.e_pairRemoved},IsRemoved:function(){return(this.status&b2Pair.e_pairRemoved)==b2Pair.e_pairRemoved},SetFinal:function(){this.status|=b2Pair.e_pairFinal},IsFinal:function(){return(this.status&
b2Pair.e_pairFinal)==b2Pair.e_pairFinal},userData:null,proxyId1:0,proxyId2:0,next:0,status:0,initialize:function(){}};b2Pair.b2_nullPair=b2Settings.USHRT_MAX;b2Pair.b2_nullProxy=b2Settings.USHRT_MAX;b2Pair.b2_tableCapacity=b2Settings.b2_maxPairs;b2Pair.b2_tableMask=b2Pair.b2_tableCapacity-1;b2Pair.e_pairBuffered=1;b2Pair.e_pairRemoved=2;b2Pair.e_pairFinal=4;var b2PairCallback=Class.create();b2PairCallback.prototype={PairAdded:function(){return null},PairRemoved:function(){},initialize:function(){}};
var b2BufferedPair=Class.create();b2BufferedPair.prototype={proxyId1:0,proxyId2:0,initialize:function(){}};var b2PairManager=Class.create();
b2PairManager.prototype={initialize:function(){var a=0;this.m_hashTable=Array(b2Pair.b2_tableCapacity);for(a=0;a<b2Pair.b2_tableCapacity;++a)this.m_hashTable[a]=b2Pair.b2_nullPair;this.m_pairs=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairs[a]=new b2Pair;this.m_pairBuffer=Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a)this.m_pairBuffer[a]=new b2BufferedPair;for(a=0;a<b2Settings.b2_maxPairs;++a){this.m_pairs[a].proxyId1=b2Pair.b2_nullProxy;this.m_pairs[a].proxyId2=
b2Pair.b2_nullProxy;this.m_pairs[a].userData=null;this.m_pairs[a].status=0;this.m_pairs[a].next=a+1}this.m_pairs[b2Settings.b2_maxPairs-1].next=b2Pair.b2_nullPair;this.m_pairCount=0},Initialize:function(a,e){this.m_broadPhase=a;this.m_callback=e},AddBufferedPair:function(a,e){var f=this.AddPair(a,e);if(f.IsBuffered()==false){f.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=f.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=f.proxyId2;++this.m_pairBufferCount}f.ClearRemoved();
b2BroadPhase.s_validate&&this.ValidateBuffer()},RemoveBufferedPair:function(a,e){var f=this.Find(a,e);if(f!=null){if(f.IsBuffered()==false){f.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=f.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=f.proxyId2;++this.m_pairBufferCount}f.SetRemoved();b2BroadPhase.s_validate&&this.ValidateBuffer()}},Commit:function(){var a=0,e=0,f=this.m_broadPhase.m_proxyPool;for(a=0;a<this.m_pairBufferCount;++a){var h=this.Find(this.m_pairBuffer[a].proxyId1,
this.m_pairBuffer[a].proxyId2);h.ClearBuffered();var r=f[h.proxyId1],o=f[h.proxyId2];if(h.IsRemoved()){h.IsFinal()==true&&this.m_callback.PairRemoved(r.userData,o.userData,h.userData);this.m_pairBuffer[e].proxyId1=h.proxyId1;this.m_pairBuffer[e].proxyId2=h.proxyId2;++e}else if(h.IsFinal()==false){h.userData=this.m_callback.PairAdded(r.userData,o.userData);h.SetFinal()}}for(a=0;a<e;++a)this.RemovePair(this.m_pairBuffer[a].proxyId1,this.m_pairBuffer[a].proxyId2);this.m_pairBufferCount=0;b2BroadPhase.s_validate&&
this.ValidateTable()},AddPair:function(a,e){if(a>e){var f=a;a=e;e=f}f=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask;var h=h=this.FindHash(a,e,f);if(h!=null)return h;var r=this.m_freePair;h=this.m_pairs[r];this.m_freePair=h.next;h.proxyId1=a;h.proxyId2=e;h.status=0;h.userData=null;h.next=this.m_hashTable[f];this.m_hashTable[f]=r;++this.m_pairCount;return h},RemovePair:function(a,e){if(a>e){var f=a;a=e;e=f}for(var h=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask,r=this.m_hashTable[h],o=null;r!=b2Pair.b2_nullPair;)if(b2PairManager.Equals(this.m_pairs[r],
a,e)){f=r;if(o)o.next=this.m_pairs[r].next;else this.m_hashTable[h]=this.m_pairs[r].next;h=this.m_pairs[f];r=h.userData;h.next=this.m_freePair;h.proxyId1=b2Pair.b2_nullProxy;h.proxyId2=b2Pair.b2_nullProxy;h.userData=null;h.status=0;this.m_freePair=f;--this.m_pairCount;return r}else{o=this.m_pairs[r];r=o.next}return null},Find:function(a,e){if(a>e){var f=a;a=e;e=f}f=b2PairManager.Hash(a,e)&b2Pair.b2_tableMask;return this.FindHash(a,e,f)},FindHash:function(a,e,f){for(f=this.m_hashTable[f];f!=b2Pair.b2_nullPair&&
b2PairManager.Equals(this.m_pairs[f],a,e)==false;)f=this.m_pairs[f].next;if(f==b2Pair.b2_nullPair)return null;return this.m_pairs[f]},ValidateBuffer:function(){},ValidateTable:function(){},m_broadPhase:null,m_callback:null,m_pairs:null,m_freePair:0,m_pairCount:0,m_pairBuffer:null,m_pairBufferCount:0,m_hashTable:null};b2PairManager.Hash=function(a,e){var f=e<<16&4294901760|a;f=~f+(f<<15&4294934528);f^=f>>12&1048575;f+=f<<2&4294967292;f^=f>>4&268435455;f*=2057;f^=f>>16&65535;return f};
b2PairManager.Equals=function(a,e,f){return a.proxyId1==e&&a.proxyId2==f};b2PairManager.EqualsPair=function(a,e){return a.proxyId1==e.proxyId1&&a.proxyId2==e.proxyId2};var b2BroadPhase=Class.create();
b2BroadPhase.prototype={initialize:function(a,e){this.m_pairManager=new b2PairManager;this.m_proxyPool=Array(b2Settings.b2_maxPairs);this.m_bounds=Array(2*b2Settings.b2_maxProxies);this.m_queryResults=Array(b2Settings.b2_maxProxies);this.m_quantizationFactor=new b2Vec2;var f=0;this.m_pairManager.Initialize(this,e);this.m_worldAABB=a;for(f=this.m_proxyCount=0;f<b2Settings.b2_maxProxies;f++)this.m_queryResults[f]=0;this.m_bounds=Array(2);for(f=0;f<2;f++){this.m_bounds[f]=Array(2*b2Settings.b2_maxProxies);
for(var h=0;h<2*b2Settings.b2_maxProxies;h++)this.m_bounds[f][h]=new b2Bound}f=a.maxVertex.x;h=a.maxVertex.y;f-=a.minVertex.x;h-=a.minVertex.y;this.m_quantizationFactor.x=b2Settings.USHRT_MAX/f;this.m_quantizationFactor.y=b2Settings.USHRT_MAX/h;for(f=0;f<b2Settings.b2_maxProxies-1;++f){h=new b2Proxy;this.m_proxyPool[f]=h;h.SetNext(f+1);h.timeStamp=0;h.overlapCount=b2BroadPhase.b2_invalid;h.userData=null}h=new b2Proxy;this.m_proxyPool[b2Settings.b2_maxProxies-1]=h;h.SetNext(b2Pair.b2_nullProxy);h.timeStamp=
0;h.overlapCount=b2BroadPhase.b2_invalid;h.userData=null;this.m_freeProxy=0;this.m_timeStamp=1;this.m_queryResultCount=0},InRange:function(a){var e,f,h,r;e=a.minVertex.x;f=a.minVertex.y;e-=this.m_worldAABB.maxVertex.x;f-=this.m_worldAABB.maxVertex.y;h=this.m_worldAABB.minVertex.x;r=this.m_worldAABB.minVertex.y;h-=a.maxVertex.x;r-=a.maxVertex.y;e=b2Math.b2Max(e,h);f=b2Math.b2Max(f,r);return b2Math.b2Max(e,f)<0},GetProxy:function(a){if(a==b2Pair.b2_nullProxy||this.m_proxyPool[a].IsValid()==false)return null;
return this.m_proxyPool[a]},CreateProxy:function(a,e){var f=0,h,r=this.m_freeProxy;h=this.m_proxyPool[r];this.m_freeProxy=h.GetNext();h.overlapCount=0;h.userData=e;h=2*this.m_proxyCount;var o=[],y=[];this.ComputeBounds(o,y,a);for(var B=0;B<2;++B){var C=this.m_bounds[B],E=0,H=0;E=[E];H=[H];this.Query(E,H,o[B],y[B],C,h,B);E=E[0];H=H[0];f=[];var I=0,M=h-H,L,S;for(I=0;I<M;I++){f[I]=new b2Bound;L=f[I];S=C[H+I];L.value=S.value;L.proxyId=S.proxyId;L.stabbingCount=S.stabbingCount}M=f.length;var l=H+2;for(I=
0;I<M;I++){S=f[I];L=C[l+I];L.value=S.value;L.proxyId=S.proxyId;L.stabbingCount=S.stabbingCount}f=[];M=H-E;for(I=0;I<M;I++){f[I]=new b2Bound;L=f[I];S=C[E+I];L.value=S.value;L.proxyId=S.proxyId;L.stabbingCount=S.stabbingCount}M=f.length;l=E+1;for(I=0;I<M;I++){S=f[I];L=C[l+I];L.value=S.value;L.proxyId=S.proxyId;L.stabbingCount=S.stabbingCount}++H;C[E].value=o[B];C[E].proxyId=r;C[H].value=y[B];C[H].proxyId=r;C[E].stabbingCount=E==0?0:C[E-1].stabbingCount;C[H].stabbingCount=C[H-1].stabbingCount;for(f=
E;f<H;++f)C[f].stabbingCount++;for(f=E;f<h+2;++f){E=this.m_proxyPool[C[f].proxyId];if(C[f].IsLower())E.lowerBounds[B]=f;else E.upperBounds[B]=f}}++this.m_proxyCount;for(h=0;h<this.m_queryResultCount;++h)this.m_pairManager.AddBufferedPair(r,this.m_queryResults[h]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();return r},DestroyProxy:function(a){for(var e=this.m_proxyPool[a],f=2*this.m_proxyCount,h=0;h<2;++h){var r=this.m_bounds[h],o=e.lowerBounds[h],y=e.upperBounds[h],
B=r[o].value,C=r[y].value,E=[],H=0,I=y-o-1,M,L;for(H=0;H<I;H++){E[H]=new b2Bound;M=E[H];L=r[o+1+H];M.value=L.value;M.proxyId=L.proxyId;M.stabbingCount=L.stabbingCount}I=E.length;var S=o;for(H=0;H<I;H++){L=E[H];M=r[S+H];M.value=L.value;M.proxyId=L.proxyId;M.stabbingCount=L.stabbingCount}E=[];I=f-y-1;for(H=0;H<I;H++){E[H]=new b2Bound;M=E[H];L=r[y+1+H];M.value=L.value;M.proxyId=L.proxyId;M.stabbingCount=L.stabbingCount}I=E.length;S=y-1;for(H=0;H<I;H++){L=E[H];M=r[S+H];M.value=L.value;M.proxyId=L.proxyId;
M.stabbingCount=L.stabbingCount}I=f-2;for(E=o;E<I;++E){H=this.m_proxyPool[r[E].proxyId];if(r[E].IsLower())H.lowerBounds[h]=E;else H.upperBounds[h]=E}for(I=y-1;o<I;++o)r[o].stabbingCount--;this.Query([0],[0],B,C,r,f-2,h)}for(f=0;f<this.m_queryResultCount;++f)this.m_pairManager.RemoveBufferedPair(a,this.m_queryResults[f]);this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();e.userData=null;e.overlapCount=b2BroadPhase.b2_invalid;e.lowerBounds[0]=b2BroadPhase.b2_invalid;e.lowerBounds[1]=
b2BroadPhase.b2_invalid;e.upperBounds[0]=b2BroadPhase.b2_invalid;e.upperBounds[1]=b2BroadPhase.b2_invalid;e.SetNext(this.m_freeProxy);this.m_freeProxy=a;--this.m_proxyCount},MoveProxy:function(a,e){var f=0,h=0,r,o,y=0,B;if(!(a==b2Pair.b2_nullProxy||b2Settings.b2_maxProxies<=a))if(e.IsValid()!=false){var C=2*this.m_proxyCount,E=this.m_proxyPool[a],H=new b2BoundValues;this.ComputeBounds(H.lowerValues,H.upperValues,e);var I=new b2BoundValues;for(f=0;f<2;++f){I.lowerValues[f]=this.m_bounds[f][E.lowerBounds[f]].value;
I.upperValues[f]=this.m_bounds[f][E.upperBounds[f]].value}for(f=0;f<2;++f){var M=this.m_bounds[f],L=E.lowerBounds[f],S=E.upperBounds[f],l=H.lowerValues[f],Y=H.upperValues[f],ba=l-M[L].value,Q=Y-M[S].value;M[L].value=l;M[S].value=Y;if(ba<0)for(h=L;h>0&&l<M[h-1].value;){r=M[h];o=M[h-1];y=o.proxyId;B=this.m_proxyPool[o.proxyId];o.stabbingCount++;if(o.IsUpper()==true){this.TestOverlap(H,B)&&this.m_pairManager.AddBufferedPair(a,y);B.upperBounds[f]++;r.stabbingCount++}else{B.lowerBounds[f]++;r.stabbingCount--}E.lowerBounds[f]--;
r.Swap(o);--h}if(Q>0)for(h=S;h<C-1&&M[h+1].value<=Y;){r=M[h];o=M[h+1];y=o.proxyId;B=this.m_proxyPool[y];o.stabbingCount++;if(o.IsLower()==true){this.TestOverlap(H,B)&&this.m_pairManager.AddBufferedPair(a,y);B.lowerBounds[f]--;r.stabbingCount++}else{B.upperBounds[f]--;r.stabbingCount--}E.upperBounds[f]++;r.Swap(o);h++}if(ba>0)for(h=L;h<C-1&&M[h+1].value<=l;){r=M[h];o=M[h+1];y=o.proxyId;B=this.m_proxyPool[y];o.stabbingCount--;if(o.IsUpper()){this.TestOverlap(I,B)&&this.m_pairManager.RemoveBufferedPair(a,
y);B.upperBounds[f]--;r.stabbingCount--}else{B.lowerBounds[f]--;r.stabbingCount++}E.lowerBounds[f]++;r.Swap(o);h++}if(Q<0)for(h=S;h>0&&Y<M[h-1].value;){r=M[h];o=M[h-1];y=o.proxyId;B=this.m_proxyPool[y];o.stabbingCount--;if(o.IsLower()==true){this.TestOverlap(I,B)&&this.m_pairManager.RemoveBufferedPair(a,y);B.lowerBounds[f]++;r.stabbingCount--}else{B.upperBounds[f]++;r.stabbingCount++}E.upperBounds[f]--;r.Swap(o);h--}}}},Commit:function(){this.m_pairManager.Commit()},QueryAABB:function(a,e,f){var h=
[],r=[];this.ComputeBounds(h,r,a);a=[0];var o=[0];this.Query(a,o,h[0],r[0],this.m_bounds[0],2*this.m_proxyCount,0);this.Query(a,o,h[1],r[1],this.m_bounds[1],2*this.m_proxyCount,1);for(r=h=0;r<this.m_queryResultCount&&h<f;++r,++h)e[r]=this.m_proxyPool[this.m_queryResults[r]].userData;this.m_queryResultCount=0;this.IncrementTimeStamp();return h},Validate:function(){for(var a=0;a<2;++a)for(var e=this.m_bounds[a],f=2*this.m_proxyCount,h=0,r=0;r<f;++r)if(e[r].IsLower()==true)h++;else h--},ComputeBounds:function(a,
e,f){var h=f.minVertex.x,r=f.minVertex.y;h=b2Math.b2Min(h,this.m_worldAABB.maxVertex.x);r=b2Math.b2Min(r,this.m_worldAABB.maxVertex.y);h=b2Math.b2Max(h,this.m_worldAABB.minVertex.x);r=b2Math.b2Max(r,this.m_worldAABB.minVertex.y);var o=f.maxVertex.x;f=f.maxVertex.y;o=b2Math.b2Min(o,this.m_worldAABB.maxVertex.x);f=b2Math.b2Min(f,this.m_worldAABB.maxVertex.y);o=b2Math.b2Max(o,this.m_worldAABB.minVertex.x);f=b2Math.b2Max(f,this.m_worldAABB.minVertex.y);a[0]=this.m_quantizationFactor.x*(h-this.m_worldAABB.minVertex.x)&
b2Settings.USHRT_MAX-1;e[0]=this.m_quantizationFactor.x*(o-this.m_worldAABB.minVertex.x)&65535|1;a[1]=this.m_quantizationFactor.y*(r-this.m_worldAABB.minVertex.y)&b2Settings.USHRT_MAX-1;e[1]=this.m_quantizationFactor.y*(f-this.m_worldAABB.minVertex.y)&65535|1},TestOverlapValidate:function(a,e){for(var f=0;f<2;++f){var h=this.m_bounds[f];if(h[a.lowerBounds[f]].value>h[e.upperBounds[f]].value)return false;if(h[a.upperBounds[f]].value<h[e.lowerBounds[f]].value)return false}return true},TestOverlap:function(a,
e){for(var f=0;f<2;++f){var h=this.m_bounds[f];if(a.lowerValues[f]>h[e.upperBounds[f]].value)return false;if(a.upperValues[f]<h[e.lowerBounds[f]].value)return false}return true},Query:function(a,e,f,h,r,o,y){f=b2BroadPhase.BinarySearch(r,o,f);h=b2BroadPhase.BinarySearch(r,o,h);for(o=f;o<h;++o)r[o].IsLower()&&this.IncrementOverlapCount(r[o].proxyId);if(f>0){o=f-1;for(var B=r[o].stabbingCount;B;){if(r[o].IsLower())if(f<=this.m_proxyPool[r[o].proxyId].upperBounds[y]){this.IncrementOverlapCount(r[o].proxyId);
--B}--o}}a[0]=f;e[0]=h},IncrementOverlapCount:function(a){var e=this.m_proxyPool[a];if(e.timeStamp<this.m_timeStamp){e.timeStamp=this.m_timeStamp;e.overlapCount=1}else{e.overlapCount=2;this.m_queryResults[this.m_queryResultCount]=a;++this.m_queryResultCount}},IncrementTimeStamp:function(){if(this.m_timeStamp==b2Settings.USHRT_MAX){for(var a=0;a<b2Settings.b2_maxProxies;++a)this.m_proxyPool[a].timeStamp=0;this.m_timeStamp=1}else++this.m_timeStamp},m_pairManager:new b2PairManager,m_proxyPool:Array(b2Settings.b2_maxPairs),
m_freeProxy:0,m_bounds:Array(2*b2Settings.b2_maxProxies),m_queryResults:Array(b2Settings.b2_maxProxies),m_queryResultCount:0,m_worldAABB:null,m_quantizationFactor:new b2Vec2,m_proxyCount:0,m_timeStamp:0};b2BroadPhase.s_validate=false;b2BroadPhase.b2_invalid=b2Settings.USHRT_MAX;b2BroadPhase.b2_nullEdge=b2Settings.USHRT_MAX;b2BroadPhase.BinarySearch=function(a,e,f){var h=0;for(e-=1;h<=e;){var r=Math.floor((h+e)/2);if(a[r].value>f)e=r-1;else if(a[r].value<f)h=r+1;else return r}return h};
var b2Collision=Class.create();b2Collision.prototype={initialize:function(){}};b2Collision.b2_nullFeature=255;b2Collision.ClipSegmentToLine=function(a,e,f,h){var r=0,o=e[0].v,y=e[1].v,B=b2Math.b2Dot(f,e[0].v)-h;f=b2Math.b2Dot(f,e[1].v)-h;if(B<=0)a[r++]=e[0];if(f<=0)a[r++]=e[1];if(B*f<0){f=B/(B-f);h=a[r].v;h.x=o.x+f*(y.x-o.x);h.y=o.y+f*(y.y-o.y);a[r].id=B>0?e[0].id:e[1].id;++r}return r};
b2Collision.EdgeSeparation=function(a,e,f){var h=a.m_vertices,r=f.m_vertexCount,o=f.m_vertices,y=a.m_normals[e].x,B=a.m_normals[e].y,C=y,E=a.m_R;y=E.col1.x*C+E.col2.x*B;B=E.col1.y*C+E.col2.y*B;var H=y,I=B;E=f.m_R;C=H*E.col1.x+I*E.col1.y;I=H*E.col2.x+I*E.col2.y;H=C;C=0;E=Number.MAX_VALUE;for(var M=0;M<r;++M){var L=o[M];L=L.x*H+L.y*I;if(L<E){E=L;C=M}}E=a.m_R;r=a.m_position.x+(E.col1.x*h[e].x+E.col2.x*h[e].y);a=a.m_position.y+(E.col1.y*h[e].x+E.col2.y*h[e].y);E=f.m_R;e=f.m_position.x+(E.col1.x*o[C].x+
E.col2.x*o[C].y);f=f.m_position.y+(E.col1.y*o[C].x+E.col2.y*o[C].y);e-=r;f-=a;return e*y+f*B};
b2Collision.FindMaxSeparation=function(a,e,f,h){var r=e.m_vertexCount,o=f.m_position.x-e.m_position.x,y=f.m_position.y-e.m_position.y,B=o*e.m_R.col1.x+y*e.m_R.col1.y;y=o*e.m_R.col2.x+y*e.m_R.col2.y;o=0;for(var C=-Number.MAX_VALUE,E=0;E<r;++E){var H=e.m_normals[E].x*B+e.m_normals[E].y*y;if(H>C){C=H;o=E}}B=b2Collision.EdgeSeparation(e,o,f);if(B>0&&h==false)return B;E=o-1>=0?o-1:r-1;H=b2Collision.EdgeSeparation(e,E,f);if(H>0&&h==false)return H;y=o+1<r?o+1:0;var I=b2Collision.EdgeSeparation(e,y,f);if(I>
0&&h==false)return I;if(H>B&&H>I){C=-1;y=E;E=H}else if(I>B){C=1;y=y;E=I}else{a[0]=o;return B}for(;;){o=C==-1?y-1>=0?y-1:r-1:y+1<r?y+1:0;B=b2Collision.EdgeSeparation(e,o,f);if(B>0&&h==false)return B;if(B>E){y=o;E=B}else break}a[0]=y;return E};
b2Collision.FindIncidentEdge=function(a,e,f,h){var r=e.m_vertices,o=h.m_vertexCount,y=h.m_vertices,B=r[f+1==e.m_vertexCount?0:f+1],C=B.x,E=B.y;B=r[f];C-=B.x;E-=B.y;B=C;C=E;E=-B;B=1/Math.sqrt(C*C+E*E);C*=B;E*=B;B=C;r=e.m_R;C=r.col1.x*B+r.col2.x*E;E=r.col1.y*B+r.col2.y*E;e=C;r=h.m_R;B=e*r.col1.x+E*r.col1.y;E=e*r.col2.x+E*r.col2.y;e=B;r=C=0;for(var H=Number.MAX_VALUE,I=0;I<o;++I){var M=I,L=I+1<o?I+1:0;B=y[L];var S=B.x,l=B.y;B=y[M];S-=B.x;l-=B.y;B=S;S=l;l=-B;B=1/Math.sqrt(S*S+l*l);S*=B;l*=B;B=S*e+l*E;
if(B<H){H=B;C=M;r=L}}o=a[0];B=o.v;B.SetV(y[C]);B.MulM(h.m_R);B.Add(h.m_position);o.id.features.referenceFace=f;o.id.features.incidentEdge=C;o.id.features.incidentVertex=C;o=a[1];B=o.v;B.SetV(y[r]);B.MulM(h.m_R);B.Add(h.m_position);o.id.features.referenceFace=f;o.id.features.incidentEdge=C;o.id.features.incidentVertex=r};b2Collision.b2CollidePolyTempVec=new b2Vec2;
b2Collision.b2CollidePoly=function(a,e,f,h){var r=a.pointCount=0,o=[r],y=b2Collision.FindMaxSeparation(o,e,f,h);r=o[0];if(!(y>0&&h==false)){var B=0;o=[B];var C=b2Collision.FindMaxSeparation(o,f,e,h);B=o[0];if(!(C>0&&h==false)){var E=0;if(C>0.98*y+0.0010){y=f;E=B;o=1}else{y=e;e=f;E=r;o=0}f=[new ClipVertex,new ClipVertex];b2Collision.FindIncidentEdge(f,y,E,e);e=y.m_vertices;var H=e[E],I=E+1<y.m_vertexCount?e[E+1]:e[0];r=I.x-H.x;B=I.y-H.y;var M=r,L=y.m_R;r=L.col1.x*M+L.col2.x*B;B=L.col1.y*M+L.col2.y*
B;E=1/Math.sqrt(r*r+B*B);r*=E;B*=E;E=r;e=B;M=E;E=e;e=-M;C=H.x;var S=H.y;M=C;L=y.m_R;C=L.col1.x*M+L.col2.x*S;S=L.col1.y*M+L.col2.y*S;C+=y.m_position.x;S+=y.m_position.y;H=I.x;I=I.y;M=H;L=y.m_R;H=L.col1.x*M+L.col2.x*I;I=L.col1.y*M+L.col2.y*I;H+=y.m_position.x;I+=y.m_position.y;y=E*C+e*S;M=-(r*C+B*S);H=r*H+B*I;I=[new ClipVertex,new ClipVertex];C=[new ClipVertex,new ClipVertex];b2Collision.b2CollidePolyTempVec.Set(-r,-B);L=b2Collision.ClipSegmentToLine(I,f,b2Collision.b2CollidePolyTempVec,M);if(!(L<2)){b2Collision.b2CollidePolyTempVec.Set(r,
B);L=b2Collision.ClipSegmentToLine(C,I,b2Collision.b2CollidePolyTempVec,H);if(!(L<2)){o?a.normal.Set(-E,-e):a.normal.Set(E,e);for(r=f=0;r<b2Settings.b2_maxManifoldPoints;++r){B=C[r].v;B=E*B.x+e*B.y-y;if(B<=0||h==true){H=a.points[f];H.separation=B;H.position.SetV(C[r].v);H.id.Set(C[r].id);H.id.features.flip=o;++f}}a.pointCount=f}}}}};
b2Collision.b2CollideCircle=function(a,e,f,h){a.pointCount=0;var r=f.m_position.x-e.m_position.x,o=f.m_position.y-e.m_position.y,y=r*r+o*o;e=e.m_radius+f.m_radius;if(!(y>e*e&&h==false)){if(y<Number.MIN_VALUE){h=-e;a.normal.Set(0,1)}else{y=Math.sqrt(y);h=y-e;y=1/y;a.normal.x=y*r;a.normal.y=y*o}a.pointCount=1;r=a.points[0];r.id.set_key(0);r.separation=h;r.position.x=f.m_position.x-f.m_radius*a.normal.x;r.position.y=f.m_position.y-f.m_radius*a.normal.y}};
b2Collision.b2CollidePolyAndCircle=function(a,e,f){a.pointCount=0;var h,r,o;r=f.m_position.x-e.m_position.x;o=f.m_position.y-e.m_position.y;var y=e.m_R,B=r*y.col1.x+o*y.col1.y;o=r*y.col2.x+o*y.col2.y;r=B;var C=0,E=-Number.MAX_VALUE;B=f.m_radius;for(h=0;h<e.m_vertexCount;++h){var H=e.m_normals[h].x*(r-e.m_vertices[h].x)+e.m_normals[h].y*(o-e.m_vertices[h].y);if(H>B)return;if(H>E){E=H;C=h}}if(E<Number.MIN_VALUE){a.pointCount=1;o=e.m_normals[C];a.normal.x=y.col1.x*o.x+y.col2.x*o.y;a.normal.y=y.col1.y*
o.x+y.col2.y*o.y;h=a.points[0];h.id.features.incidentEdge=C;h.id.features.incidentVertex=b2Collision.b2_nullFeature;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=E-B}else{E=C+1<e.m_vertexCount?C+1:0;var I=e.m_vertices[E].x-e.m_vertices[C].x;H=e.m_vertices[E].y-e.m_vertices[C].y;var M=Math.sqrt(I*I+H*H);I/=M;H/=M;if(M<Number.MIN_VALUE){r-=e.m_vertices[C].x;o-=e.m_vertices[C].y;
e=Math.sqrt(r*r+o*o);r/=e;o/=e;if(!(e>B)){a.pointCount=1;a.normal.Set(y.col1.x*r+y.col2.x*o,y.col1.y*r+y.col2.y*o);h=a.points[0];h.id.features.incidentEdge=b2Collision.b2_nullFeature;h.id.features.incidentVertex=C;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=e-B}}else{var L=(r-e.m_vertices[C].x)*I+(o-e.m_vertices[C].y)*H;h=a.points[0];h.id.features.incidentEdge=b2Collision.b2_nullFeature;
h.id.features.incidentVertex=b2Collision.b2_nullFeature;h.id.features.referenceFace=b2Collision.b2_nullFeature;h.id.features.flip=0;if(L<=0){I=e.m_vertices[C].x;e=e.m_vertices[C].y;h.id.features.incidentVertex=C}else if(L>=M){I=e.m_vertices[E].x;e=e.m_vertices[E].y;h.id.features.incidentVertex=E}else{I=I*L+e.m_vertices[C].x;e=H*L+e.m_vertices[C].y;h.id.features.incidentEdge=C}r-=I;o-=e;e=Math.sqrt(r*r+o*o);r/=e;o/=e;if(!(e>B)){a.pointCount=1;a.normal.Set(y.col1.x*r+y.col2.x*o,y.col1.y*r+y.col2.y*
o);h.position.x=f.m_position.x-B*a.normal.x;h.position.y=f.m_position.y-B*a.normal.y;h.separation=e-B}}}};b2Collision.b2TestOverlap=function(a,e){var f=e.minVertex,h=a.maxVertex,r=f.x-h.x,o=f.y-h.y;f=a.minVertex;h=e.maxVertex;var y=f.y-h.y;if(r>0||o>0)return false;if(f.x-h.x>0||y>0)return false;return true};var Features=Class.create();
Features.prototype={set_referenceFace:function(a){this._referenceFace=a;this._m_id._key=this._m_id._key&4294967040|this._referenceFace&255},get_referenceFace:function(){return this._referenceFace},_referenceFace:0,set_incidentEdge:function(a){this._incidentEdge=a;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280},get_incidentEdge:function(){return this._incidentEdge},_incidentEdge:0,set_incidentVertex:function(a){this._incidentVertex=a;this._m_id._key=this._m_id._key&4278255615|
this._incidentVertex<<16&16711680},get_incidentVertex:function(){return this._incidentVertex},_incidentVertex:0,set_flip:function(a){this._flip=a;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080},get_flip:function(){return this._flip},_flip:0,_m_id:null,initialize:function(){}};var b2ContactID=Class.create();
b2ContactID.prototype={initialize:function(){this.features=new Features;this.features._m_id=this},Set:function(a){this.set_key(a._key)},Copy:function(){var a=new b2ContactID;a.set_key(this._key);return a},get_key:function(){return this._key},set_key:function(a){this._key=a;this.features._referenceFace=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255},features:new Features,
_key:0};var b2ContactPoint=Class.create();b2ContactPoint.prototype={position:new b2Vec2,separation:null,normalImpulse:null,tangentImpulse:null,id:new b2ContactID,initialize:function(){this.position=new b2Vec2;this.id=new b2ContactID}};var b2Distance=Class.create();b2Distance.prototype={initialize:function(){}};
b2Distance.ProcessTwo=function(a,e,f,h,r){var o=-r[1].x,y=-r[1].y,B=r[0].x-r[1].x,C=r[0].y-r[1].y,E=Math.sqrt(B*B+C*C);B/=E;C/=E;o=o*B+y*C;if(o<=0||E<Number.MIN_VALUE){a.SetV(f[1]);e.SetV(h[1]);f[0].SetV(f[1]);h[0].SetV(h[1]);r[0].SetV(r[1]);return 1}o/=E;a.x=f[1].x+o*(f[0].x-f[1].x);a.y=f[1].y+o*(f[0].y-f[1].y);e.x=h[1].x+o*(h[0].x-h[1].x);e.y=h[1].y+o*(h[0].y-h[1].y);return 2};
b2Distance.ProcessThree=function(a,e,f,h,r){var o=r[0].x,y=r[0].y,B=r[1].x,C=r[1].y,E=r[2].x,H=r[2].y,I=B-o,M=C-y,L=E-o,S=H-y,l=E-B,Y=H-C,ba=-(o*L+y*S),Q=E*L+H*S,na=-(B*l+C*Y);l=E*l+H*Y;if(Q<=0&&l<=0){a.SetV(f[2]);e.SetV(h[2]);f[0].SetV(f[2]);h[0].SetV(h[2]);r[0].SetV(r[2]);return 1}M=I*S-M*L;I=M*(o*C-y*B);B=M*(B*H-C*E);if(B<=0&&na>=0&&l>=0){ba=na/(na+l);a.x=f[1].x+ba*(f[2].x-f[1].x);a.y=f[1].y+ba*(f[2].y-f[1].y);e.x=h[1].x+ba*(h[2].x-h[1].x);e.y=h[1].y+ba*(h[2].y-h[1].y);f[0].SetV(f[2]);h[0].SetV(h[2]);
r[0].SetV(r[2]);return 2}o=M*(E*y-H*o);if(o<=0&&ba>=0&&Q>=0){ba/=ba+Q;a.x=f[0].x+ba*(f[2].x-f[0].x);a.y=f[0].y+ba*(f[2].y-f[0].y);e.x=h[0].x+ba*(h[2].x-h[0].x);e.y=h[0].y+ba*(h[2].y-h[0].y);f[1].SetV(f[2]);h[1].SetV(h[2]);r[1].SetV(r[2]);return 2}ba=B+o+I;ba=1/ba;r=B*ba;ba=o*ba;Q=1-r-ba;a.x=r*f[0].x+ba*f[1].x+Q*f[2].x;a.y=r*f[0].y+ba*f[1].y+Q*f[2].y;e.x=r*h[0].x+ba*h[1].x+Q*h[2].x;e.y=r*h[0].y+ba*h[1].y+Q*h[2].y;return 3};
b2Distance.InPoinsts=function(a,e,f){for(var h=0;h<f;++h)if(a.x==e[h].x&&a.y==e[h].y)return true;return false};
b2Distance.Distance=function(a,e,f,h){var r=Array(3),o=Array(3),y=Array(3),B=0;a.SetV(f.m_position);e.SetV(h.m_position);for(var C=0,E=0;E<20;++E){var H=e.x-a.x,I=e.y-a.y,M=f.Support(H,I),L=h.Support(-H,-I);C=H*H+I*I;var S=L.x-M.x,l=L.y-M.y;if(C-b2Dot(H*S+I*l)<=0.01*C){if(B==0){a.SetV(M);e.SetV(L)}b2Distance.g_GJK_Iterations=E;return Math.sqrt(C)}switch(B){case 0:r[0].SetV(M);o[0].SetV(L);y[0]=w;a.SetV(r[0]);e.SetV(o[0]);++B;break;case 1:r[1].SetV(M);o[1].SetV(L);y[1].x=S;y[1].y=l;B=b2Distance.ProcessTwo(a,
e,r,o,y);break;case 2:r[2].SetV(M);o[2].SetV(L);y[2].x=S;y[2].y=l;B=b2Distance.ProcessThree(a,e,r,o,y);break}if(B==3){b2Distance.g_GJK_Iterations=E;return 0}H=-Number.MAX_VALUE;for(I=0;I<B;++I)H=b2Math.b2Max(H,y[I].x*y[I].x+y[I].y*y[I].y);if(B==3||C<=100*Number.MIN_VALUE*H){b2Distance.g_GJK_Iterations=E;return Math.sqrt(C)}}b2Distance.g_GJK_Iterations=20;return Math.sqrt(C)};b2Distance.g_GJK_Iterations=0;var b2Manifold=Class.create();
b2Manifold.prototype={initialize:function(){this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactPoint;this.normal=new b2Vec2},points:null,normal:null,pointCount:0};var b2OBB=Class.create();b2OBB.prototype={R:new b2Mat22,center:new b2Vec2,extents:new b2Vec2,initialize:function(){this.R=new b2Mat22;this.center=new b2Vec2;this.extents=new b2Vec2}};var b2Proxy=Class.create();
b2Proxy.prototype={GetNext:function(){return this.lowerBounds[0]},SetNext:function(a){this.lowerBounds[0]=a},IsValid:function(){return this.overlapCount!=b2BroadPhase.b2_invalid},lowerBounds:[0,0],upperBounds:[0,0],overlapCount:0,timeStamp:0,userData:null,initialize:function(){this.lowerBounds=[0,0];this.upperBounds=[0,0]}};var ClipVertex=Class.create();ClipVertex.prototype={v:new b2Vec2,id:new b2ContactID,initialize:function(){this.v=new b2Vec2;this.id=new b2ContactID}};var b2Shape=Class.create();
b2Shape.prototype={TestPoint:function(){return false},GetUserData:function(){return this.m_userData},GetType:function(){return this.m_type},GetBody:function(){return this.m_body},GetPosition:function(){return this.m_position},GetRotationMatrix:function(){return this.m_R},ResetProxy:function(){},GetNext:function(){return this.m_next},initialize:function(a,e){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=
e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex},DestroyProxy:function(){if(this.m_proxyId!=b2Pair.b2_nullProxy){this.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId);this.m_proxyId=b2Pair.b2_nullProxy}},Synchronize:function(){},QuickSync:function(){},Support:function(){},GetMaxRadius:function(){return this.m_maxRadius},m_next:null,m_R:new b2Mat22,m_position:new b2Vec2,m_type:0,m_userData:null,
m_body:null,m_friction:null,m_restitution:null,m_maxRadius:null,m_proxyId:0,m_categoryBits:0,m_maskBits:0,m_groupIndex:0};b2Shape.Create=function(a,e,f){switch(a.type){case b2Shape.e_circleShape:return new b2CircleShape(a,e,f);case b2Shape.e_boxShape:case b2Shape.e_polyShape:return new b2PolyShape(a,e,f)}return null};b2Shape.Destroy=function(a){a.m_proxyId!=b2Pair.b2_nullProxy&&a.m_body.m_world.m_broadPhase.DestroyProxy(a.m_proxyId)};b2Shape.e_unknownShape=-1;b2Shape.e_circleShape=0;
b2Shape.e_boxShape=1;b2Shape.e_polyShape=2;b2Shape.e_meshShape=3;b2Shape.e_shapeTypeCount=4;
b2Shape.PolyMass=function(a,e,f,h){var r=new b2Vec2;r.SetZero();for(var o=0,y=0,B=new b2Vec2(0,0),C=1/3,E=0;E<f;++E){var H=B,I=e[E],M=E+1<f?e[E+1]:e[0],L=b2Math.SubtractVV(I,H),S=b2Math.SubtractVV(M,H),l=b2Math.b2CrossVV(L,S),Y=0.5*l;o+=Y;var ba=new b2Vec2;ba.SetV(H);ba.Add(I);ba.Add(M);ba.Multiply(C*Y);r.Add(ba);I=H.x;H=H.y;M=L.x;L=L.y;Y=S.x;S=S.y;y+=l*(C*(0.25*(M*M+Y*M+Y*Y)+(I*M+I*Y))+0.5*I*I+(C*(0.25*(L*L+S*L+S*S)+(H*L+H*S))+0.5*H*H))}a.mass=h*o;r.Multiply(1/o);a.center=r;y=h*(y-o*b2Math.b2Dot(r,
r));a.I=y};b2Shape.PolyCentroid=function(a,e,f){for(var h=0,r=0,o=0,y=1/3,B=0;B<e;++B){var C=a[B].x,E=a[B].y,H=B+1<e?a[B+1].x:a[0].x,I=B+1<e?a[B+1].y:a[0].y,M=0.5*((C-0)*(I-0)-(E-0)*(H-0));o+=M;h+=M*y*(0+C+H);r+=M*y*(0+E+I)}h*=1/o;r*=1/o;f.Set(h,r)};var b2ShapeDef=Class.create();
b2ShapeDef.prototype={initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0},ComputeMass:function(a){a.center=new b2Vec2(0,0);if(this.density==0){a.mass=0;a.center.Set(0,0);a.I=0}switch(this.type){case b2Shape.e_circleShape:a.mass=this.density*b2Settings.b2_pi*this.radius*this.radius;a.center.Set(0,0);a.I=0.5*a.mass*
this.radius*this.radius;break;case b2Shape.e_boxShape:a.mass=4*this.density*this.extents.x*this.extents.y;a.center.Set(0,0);a.I=a.mass/3*b2Math.b2Dot(this.extents,this.extents);break;case b2Shape.e_polyShape:b2Shape.PolyMass(a,this.vertices,this.vertexCount,this.density);break;default:a.mass=0;a.center.Set(0,0);a.I=0;break}},type:0,userData:null,localPosition:null,localRotation:null,friction:null,restitution:null,density:null,categoryBits:0,maskBits:0,groupIndex:0};var b2BoxDef=Class.create();
Object.extend(b2BoxDef.prototype,b2ShapeDef.prototype);Object.extend(b2BoxDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_boxShape;this.extents=new b2Vec2(1,1)},extents:null});var b2CircleDef=Class.create();Object.extend(b2CircleDef.prototype,b2ShapeDef.prototype);
Object.extend(b2CircleDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_circleShape;this.radius=1},radius:null});var b2CircleShape=Class.create();Object.extend(b2CircleShape.prototype,b2Shape.prototype);
Object.extend(b2CircleShape.prototype,{TestPoint:function(a){var e=new b2Vec2;e.SetV(a);e.Subtract(this.m_position);return b2Math.b2Dot(e,e)<=this.m_radius*this.m_radius},initialize:function(a,e,f){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.m_localPosition=
new b2Vec2;this.m_localPosition.Set(a.localPosition.x-f.x,a.localPosition.y-f.y);this.m_type=b2Shape.e_circleShape;this.m_radius=a.radius;this.m_R.SetM(this.m_body.m_R);a=this.m_R.col1.x*this.m_localPosition.x+this.m_R.col2.x*this.m_localPosition.y;e=this.m_R.col1.y*this.m_localPosition.x+this.m_R.col2.y*this.m_localPosition.y;this.m_position.x=this.m_body.m_position.x+a;this.m_position.y=this.m_body.m_position.y+e;this.m_maxRadius=Math.sqrt(a*a+e*e)+this.m_radius;a=new b2AABB;a.minVertex.Set(this.m_position.x-
this.m_radius,this.m_position.y-this.m_radius);a.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);e=this.m_body.m_world.m_broadPhase;this.m_proxyId=e.InRange(a)?e.CreateProxy(a,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},Synchronize:function(a,e,f,h){this.m_R.SetM(h);this.m_position.x=h.col1.x*this.m_localPosition.x+h.col2.x*this.m_localPosition.y+f.x;this.m_position.y=h.col1.y*this.m_localPosition.x+h.col2.y*this.m_localPosition.y+
f.y;if(this.m_proxyId!=b2Pair.b2_nullProxy){f=a.x+(e.col1.x*this.m_localPosition.x+e.col2.x*this.m_localPosition.y);h=a.y+(e.col1.y*this.m_localPosition.x+e.col2.y*this.m_localPosition.y);a=Math.min(f,this.m_position.x);e=Math.min(h,this.m_position.y);f=Math.max(f,this.m_position.x);var r=Math.max(h,this.m_position.y);h=new b2AABB;h.minVertex.Set(a-this.m_radius,e-this.m_radius);h.maxVertex.Set(f+this.m_radius,r+this.m_radius);a=this.m_body.m_world.m_broadPhase;a.InRange(h)?a.MoveProxy(this.m_proxyId,
h):this.m_body.Freeze()}},QuickSync:function(a,e){this.m_R.SetM(e);this.m_position.x=e.col1.x*this.m_localPosition.x+e.col2.x*this.m_localPosition.y+a.x;this.m_position.y=e.col1.y*this.m_localPosition.x+e.col2.y*this.m_localPosition.y+a.y},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);var e=new b2AABB;e.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);e.maxVertex.Set(this.m_position.x+this.m_radius,
this.m_position.y+this.m_radius);this.m_proxyId=a.InRange(e)?a.CreateProxy(e,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,e,f){var h=Math.sqrt(a*a+e*e);a/=h;e/=h;f.Set(this.m_position.x+this.m_radius*a,this.m_position.y+this.m_radius*e)},m_localPosition:new b2Vec2,m_radius:null});var b2MassData=Class.create();b2MassData.prototype={mass:0,center:new b2Vec2(0,0),I:0,initialize:function(){this.center=new b2Vec2(0,0)}};var b2PolyDef=Class.create();
Object.extend(b2PolyDef.prototype,b2ShapeDef.prototype);
Object.extend(b2PolyDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=0.2;this.density=this.restitution=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.vertices=Array(b2Settings.b2_maxPolyVertices);this.type=b2Shape.e_polyShape;for(var a=this.vertexCount=0;a<b2Settings.b2_maxPolyVertices;a++)this.vertices[a]=new b2Vec2},vertices:Array(b2Settings.b2_maxPolyVertices),vertexCount:0});
var b2PolyShape=Class.create();Object.extend(b2PolyShape.prototype,b2Shape.prototype);
Object.extend(b2PolyShape.prototype,{TestPoint:function(a){var e=new b2Vec2;e.SetV(a);e.Subtract(this.m_position);e.MulTM(this.m_R);for(a=0;a<this.m_vertexCount;++a){var f=new b2Vec2;f.SetV(e);f.Subtract(this.m_vertices[a]);if(b2Math.b2Dot(this.m_normals[a],f)>0)return false}return true},initialize:function(a,e,f){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=e;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=
0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.syncAABB=new b2AABB;this.syncMat=new b2Mat22;this.m_localCentroid=new b2Vec2;this.m_localOBB=new b2OBB;var h=0,r;e=new b2AABB;this.m_vertices=Array(b2Settings.b2_maxPolyVertices);this.m_coreVertices=Array(b2Settings.b2_maxPolyVertices);this.m_normals=Array(b2Settings.b2_maxPolyVertices);this.m_type=b2Shape.e_polyShape;var o=new b2Mat22(a.localRotation);if(a.type==b2Shape.e_boxShape){this.m_localCentroid.x=
a.localPosition.x-f.x;this.m_localCentroid.y=a.localPosition.y-f.y;this.m_vertexCount=4;f=a.extents.x;r=a.extents.y;a=Math.max(0,f-2*b2Settings.b2_linearSlop);var y=Math.max(0,r-2*b2Settings.b2_linearSlop);h=this.m_vertices[0]=new b2Vec2;h.x=o.col1.x*f+o.col2.x*r;h.y=o.col1.y*f+o.col2.y*r;h=this.m_vertices[1]=new b2Vec2;h.x=o.col1.x*-f+o.col2.x*r;h.y=o.col1.y*-f+o.col2.y*r;h=this.m_vertices[2]=new b2Vec2;h.x=o.col1.x*-f+o.col2.x*-r;h.y=o.col1.y*-f+o.col2.y*-r;h=this.m_vertices[3]=new b2Vec2;h.x=o.col1.x*
f+o.col2.x*-r;h.y=o.col1.y*f+o.col2.y*-r;h=this.m_coreVertices[0]=new b2Vec2;h.x=o.col1.x*a+o.col2.x*y;h.y=o.col1.y*a+o.col2.y*y;h=this.m_coreVertices[1]=new b2Vec2;h.x=o.col1.x*-a+o.col2.x*y;h.y=o.col1.y*-a+o.col2.y*y;h=this.m_coreVertices[2]=new b2Vec2;h.x=o.col1.x*-a+o.col2.x*-y;h.y=o.col1.y*-a+o.col2.y*-y;h=this.m_coreVertices[3]=new b2Vec2;h.x=o.col1.x*a+o.col2.x*-y;h.y=o.col1.y*a+o.col2.y*-y}else{this.m_vertexCount=a.vertexCount;b2Shape.PolyCentroid(a.vertices,a.vertexCount,b2PolyShape.tempVec);
y=b2PolyShape.tempVec.x;var B=b2PolyShape.tempVec.y;this.m_localCentroid.x=a.localPosition.x+(o.col1.x*y+o.col2.x*B)-f.x;this.m_localCentroid.y=a.localPosition.y+(o.col1.y*y+o.col2.y*B)-f.y;for(h=0;h<this.m_vertexCount;++h){this.m_vertices[h]=new b2Vec2;this.m_coreVertices[h]=new b2Vec2;f=a.vertices[h].x-y;r=a.vertices[h].y-B;this.m_vertices[h].x=o.col1.x*f+o.col2.x*r;this.m_vertices[h].y=o.col1.y*f+o.col2.y*r;f=this.m_vertices[h].x;r=this.m_vertices[h].y;var C=Math.sqrt(f*f+r*r);if(C>Number.MIN_VALUE){f*=
1/C;r*=1/C}this.m_coreVertices[h].x=this.m_vertices[h].x-2*b2Settings.b2_linearSlop*f;this.m_coreVertices[h].y=this.m_vertices[h].y-2*b2Settings.b2_linearSlop*r}}a=o=Number.MAX_VALUE;f=-Number.MAX_VALUE;r=-Number.MAX_VALUE;for(h=this.m_maxRadius=0;h<this.m_vertexCount;++h){y=this.m_vertices[h];o=Math.min(o,y.x);a=Math.min(a,y.y);f=Math.max(f,y.x);r=Math.max(r,y.y);this.m_maxRadius=Math.max(this.m_maxRadius,y.Length())}this.m_localOBB.R.SetIdentity();this.m_localOBB.center.Set((o+f)*0.5,(a+r)*0.5);
this.m_localOBB.extents.Set((f-o)*0.5,(r-a)*0.5);for(h=0;h<this.m_vertexCount;++h){this.m_normals[h]=new b2Vec2;o=h;a=h+1<this.m_vertexCount?h+1:0;this.m_normals[h].x=this.m_vertices[a].y-this.m_vertices[o].y;this.m_normals[h].y=-(this.m_vertices[a].x-this.m_vertices[o].x);this.m_normals[h].Normalize()}for(h=0;h<this.m_vertexCount;++h);this.m_R.SetM(this.m_body.m_R);this.m_position.x=this.m_body.m_position.x+(this.m_R.col1.x*this.m_localCentroid.x+this.m_R.col2.x*this.m_localCentroid.y);this.m_position.y=
this.m_body.m_position.y+(this.m_R.col1.y*this.m_localCentroid.x+this.m_R.col2.y*this.m_localCentroid.y);b2PolyShape.tAbsR.col1.x=this.m_R.col1.x*this.m_localOBB.R.col1.x+this.m_R.col2.x*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col1.y=this.m_R.col1.y*this.m_localOBB.R.col1.x+this.m_R.col2.y*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col2.x=this.m_R.col1.x*this.m_localOBB.R.col2.x+this.m_R.col2.x*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.col2.y=this.m_R.col1.y*this.m_localOBB.R.col2.x+this.m_R.col2.y*
this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.Abs();f=b2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y;r=b2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y;h=this.m_position.x+(this.m_R.col1.x*this.m_localOBB.center.x+this.m_R.col2.x*this.m_localOBB.center.y);o=this.m_position.y+(this.m_R.col1.y*this.m_localOBB.center.x+this.m_R.col2.y*this.m_localOBB.center.y);e.minVertex.x=h-f;e.minVertex.y=o-r;
e.maxVertex.x=h+f;e.maxVertex.y=o+r;h=this.m_body.m_world.m_broadPhase;this.m_proxyId=h.InRange(e)?h.CreateProxy(e,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()},syncAABB:new b2AABB,syncMat:new b2Mat22,Synchronize:function(a,e,f,h){this.m_R.SetM(h);this.m_position.x=this.m_body.m_position.x+(h.col1.x*this.m_localCentroid.x+h.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(h.col1.y*this.m_localCentroid.x+h.col2.y*this.m_localCentroid.y);
if(this.m_proxyId!=b2Pair.b2_nullProxy){var r,o;r=e.col1;o=e.col2;var y=this.m_localOBB.R.col1,B=this.m_localOBB.R.col2;this.syncMat.col1.x=r.x*y.x+o.x*y.y;this.syncMat.col1.y=r.y*y.x+o.y*y.y;this.syncMat.col2.x=r.x*B.x+o.x*B.y;this.syncMat.col2.y=r.y*B.x+o.y*B.y;this.syncMat.Abs();r=this.m_localCentroid.x+this.m_localOBB.center.x;o=this.m_localCentroid.y+this.m_localOBB.center.y;y=a.x+(e.col1.x*r+e.col2.x*o);a=a.y+(e.col1.y*r+e.col2.y*o);r=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*
this.m_localOBB.extents.y;o=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=y-r;this.syncAABB.minVertex.y=a-o;this.syncAABB.maxVertex.x=y+r;this.syncAABB.maxVertex.y=a+o;r=h.col1;o=h.col2;y=this.m_localOBB.R.col1;B=this.m_localOBB.R.col2;this.syncMat.col1.x=r.x*y.x+o.x*y.y;this.syncMat.col1.y=r.y*y.x+o.y*y.y;this.syncMat.col2.x=r.x*B.x+o.x*B.y;this.syncMat.col2.y=r.y*B.x+o.y*B.y;this.syncMat.Abs();r=this.m_localCentroid.x+this.m_localOBB.center.x;
o=this.m_localCentroid.y+this.m_localOBB.center.y;y=f.x+(h.col1.x*r+h.col2.x*o);a=f.y+(h.col1.y*r+h.col2.y*o);r=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;o=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=Math.min(this.syncAABB.minVertex.x,y-r);this.syncAABB.minVertex.y=Math.min(this.syncAABB.minVertex.y,a-o);this.syncAABB.maxVertex.x=Math.max(this.syncAABB.maxVertex.x,y+r);this.syncAABB.maxVertex.y=
Math.max(this.syncAABB.maxVertex.y,a+o);f=this.m_body.m_world.m_broadPhase;f.InRange(this.syncAABB)?f.MoveProxy(this.m_proxyId,this.syncAABB):this.m_body.Freeze()}},QuickSync:function(a,e){this.m_R.SetM(e);this.m_position.x=a.x+(e.col1.x*this.m_localCentroid.x+e.col2.x*this.m_localCentroid.y);this.m_position.y=a.y+(e.col1.y*this.m_localCentroid.x+e.col2.y*this.m_localCentroid.y)},ResetProxy:function(a){if(this.m_proxyId!=b2Pair.b2_nullProxy){a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);
var e=b2Math.b2MulMM(this.m_R,this.m_localOBB.R);e=b2Math.b2AbsM(e);e=b2Math.b2MulMV(e,this.m_localOBB.extents);var f=b2Math.b2MulMV(this.m_R,this.m_localOBB.center);f.Add(this.m_position);var h=new b2AABB;h.minVertex.SetV(f);h.minVertex.Subtract(e);h.maxVertex.SetV(f);h.maxVertex.Add(e);this.m_proxyId=a.InRange(h)?a.CreateProxy(h,this):b2Pair.b2_nullProxy;this.m_proxyId==b2Pair.b2_nullProxy&&this.m_body.Freeze()}},Support:function(a,e,f){var h=a*this.m_R.col1.x+e*this.m_R.col1.y;a=a*this.m_R.col2.x+
e*this.m_R.col2.y;e=0;for(var r=this.m_coreVertices[0].x*h+this.m_coreVertices[0].y*a,o=1;o<this.m_vertexCount;++o){var y=this.m_coreVertices[o].x*h+this.m_coreVertices[o].y*a;if(y>r){e=o;r=y}}f.Set(this.m_position.x+(this.m_R.col1.x*this.m_coreVertices[e].x+this.m_R.col2.x*this.m_coreVertices[e].y),this.m_position.y+(this.m_R.col1.y*this.m_coreVertices[e].x+this.m_R.col2.y*this.m_coreVertices[e].y))},m_localCentroid:new b2Vec2,m_localOBB:new b2OBB,m_vertices:null,m_coreVertices:null,m_vertexCount:0,
m_normals:null});b2PolyShape.tempVec=new b2Vec2;b2PolyShape.tAbsR=new b2Mat22;var b2Body=Class.create();
b2Body.prototype={SetOriginPosition:function(a,e){if(!this.IsFrozen()){this.m_rotation=e;this.m_R.Set(this.m_rotation);this.m_position=b2Math.AddVV(a,b2Math.b2MulMV(this.m_R,this.m_center));this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var f=this.m_shapeList;f!=null;f=f.m_next)f.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,
this.m_center))},SetCenterPosition:function(a,e){if(!this.IsFrozen()){this.m_rotation=e;this.m_R.Set(this.m_rotation);this.m_position.SetV(a);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var f=this.m_shapeList;f!=null;f=f.m_next)f.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R);this.m_world.m_broadPhase.Commit()}},GetCenterPosition:function(){return this.m_position},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},
SetLinearVelocity:function(a){this.m_linearVelocity.SetV(a)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(a){this.m_angularVelocity=a},GetAngularVelocity:function(){return this.m_angularVelocity},ApplyForce:function(a,e){if(this.IsSleeping()==false){this.m_force.Add(a);this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(e,this.m_position),a)}},ApplyTorque:function(a){if(this.IsSleeping()==false)this.m_torque+=a},ApplyImpulse:function(a,e){if(this.IsSleeping()==
false){this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,a));this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(e,this.m_position),a)}},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(a){return b2Math.AddVV(this.m_position,b2Math.b2MulMV(this.m_R,a))},GetWorldVector:function(a){return b2Math.b2MulMV(this.m_R,a)},GetLocalPoint:function(a){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(a,this.m_position))},GetLocalVector:function(a){return b2Math.b2MulTMV(this.m_R,
a)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(a){if(a)this.m_flags|=b2Body.e_allowSleepFlag;else{this.m_flags&=~b2Body.e_allowSleepFlag;this.WakeUp()}},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag;this.m_sleepTime=0},GetShapeList:function(){return this.m_shapeList},
GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(a,e){this.sMat0=new b2Mat22;this.m_position=new b2Vec2;this.m_R=new b2Mat22(0);this.m_position0=new b2Vec2;var f=0,h,r;this.m_flags=0;this.m_position.SetV(a.position);this.m_rotation=a.rotation;this.m_R.Set(this.m_rotation);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;
this.m_world=e;this.m_linearDamping=b2Math.b2Clamp(1-a.linearDamping,0,1);this.m_angularDamping=b2Math.b2Clamp(1-a.angularDamping,0,1);this.m_force=new b2Vec2(0,0);this.m_mass=this.m_torque=0;var o=Array(b2Settings.b2_maxShapesPerBody);for(f=0;f<b2Settings.b2_maxShapesPerBody;f++)o[f]=new b2MassData;this.m_shapeCount=0;this.m_center=new b2Vec2(0,0);for(f=0;f<b2Settings.b2_maxShapesPerBody;++f){h=a.shapes[f];if(h==null)break;r=o[f];h.ComputeMass(r);this.m_mass+=r.mass;this.m_center.x+=r.mass*(h.localPosition.x+
r.center.x);this.m_center.y+=r.mass*(h.localPosition.y+r.center.y);++this.m_shapeCount}if(this.m_mass>0){this.m_center.Multiply(1/this.m_mass);this.m_position.Add(b2Math.b2MulMV(this.m_R,this.m_center))}else this.m_flags|=b2Body.e_staticFlag;for(f=this.m_I=0;f<this.m_shapeCount;++f){h=a.shapes[f];r=o[f];this.m_I+=r.I;h=b2Math.SubtractVV(b2Math.AddVV(h.localPosition,r.center),this.m_center);this.m_I+=r.mass*b2Math.b2Dot(h,h)}this.m_invMass=this.m_mass>0?1/this.m_mass:0;this.m_invI=this.m_I>0&&a.preventRotation==
false?1/this.m_I:this.m_I=0;this.m_linearVelocity=b2Math.AddVV(a.linearVelocity,b2Math.b2CrossFV(a.angularVelocity,this.m_center));this.m_angularVelocity=a.angularVelocity;this.m_shapeList=this.m_next=this.m_prev=this.m_contactList=this.m_jointList=null;for(f=0;f<this.m_shapeCount;++f){h=a.shapes[f];r=b2Shape.Create(h,this,this.m_center);r.m_next=this.m_shapeList;this.m_shapeList=r}this.m_sleepTime=0;if(a.allowSleep)this.m_flags|=b2Body.e_allowSleepFlag;if(a.isSleeping)this.m_flags|=b2Body.e_sleepFlag;
if(this.m_flags&b2Body.e_sleepFlag||this.m_invMass==0){this.m_linearVelocity.Set(0,0);this.m_angularVelocity=0}this.m_userData=a.userData},Destroy:function(){for(var a=this.m_shapeList;a;){var e=a;a=a.m_next;b2Shape.Destroy(e)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var a=this.m_shapeList;a!=null;a=a.m_next)a.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)},QuickSyncShapes:function(){for(var a=this.m_shapeList;a!=null;a=a.m_next)a.QuickSync(this.m_position,
this.m_R)},IsConnected:function(a){for(var e=this.m_jointList;e!=null;e=e.next)if(e.other==a)return e.joint.m_collideConnected==false;return false},Freeze:function(){this.m_flags|=b2Body.e_frozenFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;for(var a=this.m_shapeList;a!=null;a=a.m_next)a.DestroyProxy()},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,
m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,m_angularDamping:null,m_sleepTime:null,m_userData:null};b2Body.e_staticFlag=1;b2Body.e_frozenFlag=2;b2Body.e_islandFlag=4;b2Body.e_sleepFlag=8;b2Body.e_allowSleepFlag=16;b2Body.e_destroyFlag=32;var b2BodyDef=Class.create();
b2BodyDef.prototype={initialize:function(){this.shapes=[];this.userData=null;for(var a=0;a<b2Settings.b2_maxShapesPerBody;a++)this.shapes[a]=null;this.position=new b2Vec2(0,0);this.rotation=0;this.linearVelocity=new b2Vec2(0,0);this.angularDamping=this.linearDamping=this.angularVelocity=0;this.allowSleep=true;this.preventRotation=this.isSleeping=false},userData:null,shapes:[],position:null,rotation:null,linearVelocity:null,angularVelocity:null,linearDamping:null,angularDamping:null,allowSleep:null,
isSleeping:null,preventRotation:null,AddShape:function(a){for(var e=0;e<b2Settings.b2_maxShapesPerBody;++e)if(this.shapes[e]==null){this.shapes[e]=a;break}}};var b2CollisionFilter=Class.create();b2CollisionFilter.prototype={ShouldCollide:function(a,e){if(a.m_groupIndex==e.m_groupIndex&&a.m_groupIndex!=0)return a.m_groupIndex>0;return(a.m_maskBits&e.m_categoryBits)!=0&&(a.m_categoryBits&e.m_maskBits)!=0},initialize:function(){}};b2CollisionFilter.b2_defaultFilter=new b2CollisionFilter;
var b2Island=Class.create();
b2Island.prototype={initialize:function(a,e,f,h){var r=0;this.m_bodyCapacity=a;this.m_contactCapacity=e;this.m_jointCapacity=f;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodies=Array(a);for(r=0;r<a;r++)this.m_bodies[r]=null;this.m_contacts=Array(e);for(r=0;r<e;r++)this.m_contacts[r]=null;this.m_joints=Array(f);for(r=0;r<f;r++)this.m_joints[r]=null;this.m_allocator=h},Clear:function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},Solve:function(a,e){var f=0,h;for(f=
0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_linearVelocity.Add(b2Math.MulFV(a.dt,b2Math.AddVV(e,b2Math.MulFV(h.m_invMass,h.m_force))));h.m_angularVelocity+=a.dt*h.m_invI*h.m_torque;h.m_linearVelocity.Multiply(h.m_linearDamping);h.m_angularVelocity*=h.m_angularDamping;h.m_position0.SetV(h.m_position);h.m_rotation0=h.m_rotation}}var r=new b2ContactSolver(this.m_contacts,this.m_contactCount,this.m_allocator);r.PreSolve();for(f=0;f<this.m_jointCount;++f)this.m_joints[f].PrepareVelocitySolver();
for(f=0;f<a.iterations;++f){r.SolveVelocityConstraints();for(h=0;h<this.m_jointCount;++h)this.m_joints[h].SolveVelocityConstraints(a)}for(f=0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_position.x+=a.dt*h.m_linearVelocity.x;h.m_position.y+=a.dt*h.m_linearVelocity.y;h.m_rotation+=a.dt*h.m_angularVelocity;h.m_R.Set(h.m_rotation)}}for(f=0;f<this.m_jointCount;++f)this.m_joints[f].PreparePositionSolver();if(b2World.s_enablePositionCorrection)for(b2Island.m_positionIterationCount=
0;b2Island.m_positionIterationCount<a.iterations;++b2Island.m_positionIterationCount){h=r.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);var o=true;for(f=0;f<this.m_jointCount;++f){var y=this.m_joints[f].SolvePositionConstraints();o=o&&y}if(h&&o)break}r.PostSolve();for(f=0;f<this.m_bodyCount;++f){h=this.m_bodies[f];if(h.m_invMass!=0){h.m_R.Set(h.m_rotation);h.SynchronizeShapes();h.m_force.Set(0,0);h.m_torque=0}}},UpdateSleep:function(a){var e=0,f,h=Number.MAX_VALUE,r=b2Settings.b2_linearSleepTolerance*
b2Settings.b2_linearSleepTolerance,o=b2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance;for(e=0;e<this.m_bodyCount;++e){f=this.m_bodies[e];if(f.m_invMass!=0){if((f.m_flags&b2Body.e_allowSleepFlag)==0)h=f.m_sleepTime=0;if((f.m_flags&b2Body.e_allowSleepFlag)==0||f.m_angularVelocity*f.m_angularVelocity>o||b2Math.b2Dot(f.m_linearVelocity,f.m_linearVelocity)>r)h=f.m_sleepTime=0;else{f.m_sleepTime+=a;h=b2Math.b2Min(h,f.m_sleepTime)}}}if(h>=b2Settings.b2_timeToSleep)for(e=0;e<this.m_bodyCount;++e){f=
this.m_bodies[e];f.m_flags|=b2Body.e_sleepFlag}},AddBody:function(a){this.m_bodies[this.m_bodyCount++]=a},AddContact:function(a){this.m_contacts[this.m_contactCount++]=a},AddJoint:function(a){this.m_joints[this.m_jointCount++]=a},m_allocator:null,m_bodies:null,m_contacts:null,m_joints:null,m_bodyCount:0,m_jointCount:0,m_contactCount:0,m_bodyCapacity:0,m_contactCapacity:0,m_jointCapacity:0,m_positionError:null};b2Island.m_positionIterationCount=0;var b2TimeStep=Class.create();
b2TimeStep.prototype={dt:null,inv_dt:null,iterations:0,initialize:function(){}};var b2ContactNode=Class.create();b2ContactNode.prototype={other:null,contact:null,prev:null,next:null,initialize:function(){}};var b2Contact=Class.create();
b2Contact.prototype={GetManifolds:function(){return null},GetManifoldCount:function(){return this.m_manifoldCount},GetNext:function(){return this.m_next},GetShape1:function(){return this.m_shape1},GetShape2:function(){return this.m_shape2},initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);
this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null}},Evaluate:function(){},m_flags:0,m_prev:null,m_next:null,m_node1:new b2ContactNode,m_node2:new b2ContactNode,m_shape1:null,m_shape2:null,m_manifoldCount:0,m_friction:null,m_restitution:null};
b2Contact.e_islandFlag=1;b2Contact.e_destroyFlag=2;b2Contact.AddType=function(a,e,f,h){b2Contact.s_registers[f][h].createFcn=a;b2Contact.s_registers[f][h].destroyFcn=e;b2Contact.s_registers[f][h].primary=true;if(f!=h){b2Contact.s_registers[h][f].createFcn=a;b2Contact.s_registers[h][f].destroyFcn=e;b2Contact.s_registers[h][f].primary=false}};
b2Contact.InitializeRegisters=function(){b2Contact.s_registers=Array(b2Shape.e_shapeTypeCount);for(var a=0;a<b2Shape.e_shapeTypeCount;a++){b2Contact.s_registers[a]=Array(b2Shape.e_shapeTypeCount);for(var e=0;e<b2Shape.e_shapeTypeCount;e++)b2Contact.s_registers[a][e]=new b2ContactRegister}b2Contact.AddType(b2CircleContact.Create,b2CircleContact.Destroy,b2Shape.e_circleShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyAndCircleContact.Create,b2PolyAndCircleContact.Destroy,b2Shape.e_polyShape,b2Shape.e_circleShape);
b2Contact.AddType(b2PolyContact.Create,b2PolyContact.Destroy,b2Shape.e_polyShape,b2Shape.e_polyShape)};b2Contact.Create=function(a,e,f){if(b2Contact.s_initialized==false){b2Contact.InitializeRegisters();b2Contact.s_initialized=true}var h=a.m_type,r=e.m_type,o=b2Contact.s_registers[h][r].createFcn;if(o)if(b2Contact.s_registers[h][r].primary)return o(a,e,f);else{a=o(e,a,f);for(e=0;e<a.GetManifoldCount();++e){f=a.GetManifolds()[e];f.normal=f.normal.Negative()}return a}else return null};
b2Contact.Destroy=function(a,e){if(a.GetManifoldCount()>0){a.m_shape1.m_body.WakeUp();a.m_shape2.m_body.WakeUp()}var f=b2Contact.s_registers[a.m_shape1.m_type][a.m_shape2.m_type].destroyFcn;f(a,e)};b2Contact.s_registers=null;b2Contact.s_initialized=false;var b2ContactConstraint=Class.create();
b2ContactConstraint.prototype={initialize:function(){this.normal=new b2Vec2;this.points=Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++)this.points[a]=new b2ContactConstraintPoint},points:null,normal:new b2Vec2,manifold:null,body1:null,body2:null,friction:null,restitution:null,pointCount:0};var b2ContactConstraintPoint=Class.create();
b2ContactConstraintPoint.prototype={localAnchor1:new b2Vec2,localAnchor2:new b2Vec2,normalImpulse:null,tangentImpulse:null,positionImpulse:null,normalMass:null,tangentMass:null,separation:null,velocityBias:null,initialize:function(){this.localAnchor1=new b2Vec2;this.localAnchor2=new b2Vec2}};var b2ContactRegister=Class.create();b2ContactRegister.prototype={createFcn:null,destroyFcn:null,primary:null,initialize:function(){}};var b2ContactSolver=Class.create();
b2ContactSolver.prototype={initialize:function(a,e,f){this.m_constraints=[];this.m_allocator=f;var h,r;for(f=this.m_constraintCount=0;f<e;++f)this.m_constraintCount+=a[f].GetManifoldCount();for(f=0;f<this.m_constraintCount;f++)this.m_constraints[f]=new b2ContactConstraint;var o=0;for(f=0;f<e;++f){var y=a[f],B=y.m_shape1.m_body,C=y.m_shape2.m_body,E=y.GetManifoldCount(),H=y.GetManifolds(),I=y.m_friction;y=y.m_restitution;for(var M=B.m_linearVelocity.x,L=B.m_linearVelocity.y,S=C.m_linearVelocity.x,
l=C.m_linearVelocity.y,Y=B.m_angularVelocity,ba=C.m_angularVelocity,Q=0;Q<E;++Q){var na=H[Q],Aa=na.normal.x,Pa=na.normal.y,Fa=this.m_constraints[o];Fa.body1=B;Fa.body2=C;Fa.manifold=na;Fa.normal.x=Aa;Fa.normal.y=Pa;Fa.pointCount=na.pointCount;Fa.friction=I;Fa.restitution=y;for(var La=0;La<Fa.pointCount;++La){var ta=na.points[La],oa=Fa.points[La];oa.normalImpulse=ta.normalImpulse;oa.tangentImpulse=ta.tangentImpulse;oa.separation=ta.separation;var Ba=ta.position.x-B.m_position.x,sa=ta.position.y-B.m_position.y,
ua=ta.position.x-C.m_position.x;ta=ta.position.y-C.m_position.y;h=oa.localAnchor1;r=B.m_R;h.x=Ba*r.col1.x+sa*r.col1.y;h.y=Ba*r.col2.x+sa*r.col2.y;h=oa.localAnchor2;r=C.m_R;h.x=ua*r.col1.x+ta*r.col1.y;h.y=ua*r.col2.x+ta*r.col2.y;h=Ba*Ba+sa*sa;r=ua*ua+ta*ta;var pa=Ba*Aa+sa*Pa,Ya=ua*Aa+ta*Pa,W=B.m_invMass+C.m_invMass;W+=B.m_invI*(h-pa*pa)+C.m_invI*(r-Ya*Ya);oa.normalMass=1/W;Ya=Pa;W=-Aa;pa=Ba*Ya+sa*W;Ya=ua*Ya+ta*W;W=B.m_invMass+C.m_invMass;W+=B.m_invI*(h-pa*pa)+C.m_invI*(r-Ya*Ya);oa.tangentMass=1/W;
oa.velocityBias=0;if(oa.separation>0)oa.velocityBias=-60*oa.separation;Ba=Fa.normal.x*(S+-ba*ta-M- -Y*sa)+Fa.normal.y*(l+ba*ua-L-Y*Ba);if(Ba<-b2Settings.b2_velocityThreshold)oa.velocityBias+=-Fa.restitution*Ba}++o}}},PreSolve:function(){for(var a,e,f=0;f<this.m_constraintCount;++f){var h=this.m_constraints[f],r=h.body1,o=h.body2,y=r.m_invMass,B=r.m_invI,C=o.m_invMass,E=o.m_invI,H=h.normal.x,I=h.normal.y,M=I,L=-H,S=0,l=0;if(b2World.s_enableWarmStarting){l=h.pointCount;for(S=0;S<l;++S){var Y=h.points[S],
ba=Y.normalImpulse*H+Y.tangentImpulse*M,Q=Y.normalImpulse*I+Y.tangentImpulse*L;e=r.m_R;a=Y.localAnchor1;var na=e.col1.x*a.x+e.col2.x*a.y,Aa=e.col1.y*a.x+e.col2.y*a.y;e=o.m_R;a=Y.localAnchor2;var Pa=e.col1.x*a.x+e.col2.x*a.y;a=e.col1.y*a.x+e.col2.y*a.y;r.m_angularVelocity-=B*(na*Q-Aa*ba);r.m_linearVelocity.x-=y*ba;r.m_linearVelocity.y-=y*Q;o.m_angularVelocity+=E*(Pa*Q-a*ba);o.m_linearVelocity.x+=C*ba;o.m_linearVelocity.y+=C*Q;Y.positionImpulse=0}}else{l=h.pointCount;for(S=0;S<l;++S){r=h.points[S];
r.normalImpulse=0;r.tangentImpulse=0;r.positionImpulse=0}}}},SolveVelocityConstraints:function(){for(var a=0,e,f,h,r,o,y,B,C,E=0;E<this.m_constraintCount;++E){var H=this.m_constraints[E],I=H.body1,M=H.body2,L=I.m_angularVelocity,S=I.m_linearVelocity,l=M.m_angularVelocity,Y=M.m_linearVelocity,ba=I.m_invMass,Q=I.m_invI,na=M.m_invMass,Aa=M.m_invI,Pa=H.normal.x,Fa=H.normal.y,La=Fa,ta=-Pa,oa=H.pointCount;for(a=0;a<oa;++a){e=H.points[a];o=I.m_R;y=e.localAnchor1;f=o.col1.x*y.x+o.col2.x*y.y;h=o.col1.y*y.x+
o.col2.y*y.y;o=M.m_R;y=e.localAnchor2;r=o.col1.x*y.x+o.col2.x*y.y;o=o.col1.y*y.x+o.col2.y*y.y;y=Y.x+-l*o-S.x- -L*h;B=Y.y+l*r-S.y-L*f;y=-e.normalMass*(y*Pa+B*Fa-e.velocityBias);B=b2Math.b2Max(e.normalImpulse+y,0);y=B-e.normalImpulse;C=y*Pa;y*=Fa;S.x-=ba*C;S.y-=ba*y;L-=Q*(f*y-h*C);Y.x+=na*C;Y.y+=na*y;l+=Aa*(r*y-o*C);e.normalImpulse=B;y=Y.x+-l*o-S.x- -L*h;B=Y.y+l*r-S.y-L*f;y=e.tangentMass*-(y*La+B*ta);B=H.friction*e.normalImpulse;B=b2Math.b2Clamp(e.tangentImpulse+y,-B,B);y=B-e.tangentImpulse;C=y*La;
y*=ta;S.x-=ba*C;S.y-=ba*y;L-=Q*(f*y-h*C);Y.x+=na*C;Y.y+=na*y;l+=Aa*(r*y-o*C);e.tangentImpulse=B}I.m_angularVelocity=L;M.m_angularVelocity=l}},SolvePositionConstraints:function(a){for(var e=0,f,h,r=0;r<this.m_constraintCount;++r){for(var o=this.m_constraints[r],y=o.body1,B=o.body2,C=y.m_position,E=y.m_rotation,H=B.m_position,I=B.m_rotation,M=y.m_invMass,L=y.m_invI,S=B.m_invMass,l=B.m_invI,Y=o.normal.x,ba=o.normal.y,Q=o.pointCount,na=0;na<Q;++na){var Aa=o.points[na];f=y.m_R;h=Aa.localAnchor1;var Pa=
f.col1.x*h.x+f.col2.x*h.y,Fa=f.col1.y*h.x+f.col2.y*h.y;f=B.m_R;h=Aa.localAnchor2;var La=f.col1.x*h.x+f.col2.x*h.y;f=f.col1.y*h.x+f.col2.y*h.y;h=(H.x+La-(C.x+Pa))*Y+(H.y+f-(C.y+Fa))*ba+Aa.separation;e=b2Math.b2Min(e,h);h=a*b2Math.b2Clamp(h+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);h=-Aa.normalMass*h;var ta=Aa.positionImpulse;Aa.positionImpulse=b2Math.b2Max(ta+h,0);h=Aa.positionImpulse-ta;Aa=h*Y;h*=ba;C.x-=M*Aa;C.y-=M*h;E-=L*(Pa*h-Fa*Aa);y.m_R.Set(E);H.x+=S*Aa;H.y+=S*h;I+=l*(La*
h-f*Aa);B.m_R.Set(I)}y.m_rotation=E;B.m_rotation=I}return e>=-b2Settings.b2_linearSlop},PostSolve:function(){for(var a=0;a<this.m_constraintCount;++a)for(var e=this.m_constraints[a],f=e.manifold,h=0;h<e.pointCount;++h){var r=f.points[h],o=e.points[h];r.normalImpulse=o.normalImpulse;r.tangentImpulse=o.tangentImpulse}},m_allocator:null,m_constraints:[],m_constraintCount:0};var b2CircleContact=Class.create();Object.extend(b2CircleContact.prototype,b2Contact.prototype);
Object.extend(b2CircleContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0}},Evaluate:function(){b2Collision.b2CollideCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);this.m_manifoldCount=this.m_manifold[0].pointCount>0?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});
b2CircleContact.Create=function(a,e){return new b2CircleContact(a,e)};b2CircleContact.Destroy=function(){};var b2Conservative=Class.create();b2Conservative.prototype={initialize:function(){}};b2Conservative.R1=new b2Mat22;b2Conservative.R2=new b2Mat22;b2Conservative.x1=new b2Vec2;b2Conservative.x2=new b2Vec2;
b2Conservative.Conservative=function(a,e){var f=a.GetBody(),h=e.GetBody(),r=f.m_position.x-f.m_position0.x,o=f.m_position.y-f.m_position0.y,y=f.m_rotation-f.m_rotation0,B=h.m_position.x-h.m_position0.x,C=h.m_position.y-h.m_position0.y,E=h.m_rotation-h.m_rotation0,H=a.GetMaxRadius(),I=e.GetMaxRadius(),M=f.m_position0.x,L=f.m_position0.y,S=f.m_rotation0,l=h.m_position0.x,Y=h.m_position0.y,ba=h.m_rotation0,Q=M,na=L,Aa=S,Pa=l,Fa=Y,La=ba;b2Conservative.R1.Set(Aa);b2Conservative.R2.Set(La);a.QuickSync(p1,
b2Conservative.R1);e.QuickSync(p2,b2Conservative.R2);var ta=0,oa,Ba;oa=0;for(var sa=true,ua=0;ua<10;++ua){var pa=b2Distance.Distance(b2Conservative.x1,b2Conservative.x2,a,e);if(pa<b2Settings.b2_linearSlop){sa=ua==0?false:true;break}if(ua==0){oa=b2Conservative.x2.x-b2Conservative.x1.x;Ba=b2Conservative.x2.y-b2Conservative.x1.y;oa=oa*(r-B)+Ba*(o-C)+Math.abs(y)*H+Math.abs(E)*I;if(Math.abs(oa)<Number.MIN_VALUE){sa=false;break}oa=1/oa}pa=ta+pa*oa;if(pa<0||1<pa){sa=false;break}if(pa<(1+100*Number.MIN_VALUE)*
ta){sa=true;break}ta=pa;Q=M+ta*v1.x;na=L+ta*v1.y;Aa=S+ta*y;Pa=l+ta*v2.x;Fa=Y+ta*v2.y;La=ba+ta*E;b2Conservative.R1.Set(Aa);b2Conservative.R2.Set(La);a.QuickSync(p1,b2Conservative.R1);e.QuickSync(p2,b2Conservative.R2)}if(sa){oa=b2Conservative.x2.x-b2Conservative.x1.x;Ba=b2Conservative.x2.y-b2Conservative.x1.y;r=Math.sqrt(oa*oa+Ba*Ba);if(r>FLT_EPSILON)d*=b2_linearSlop/r;if(f.IsStatic()){f.m_position.x=Q;f.m_position.y=na}else{f.m_position.x=Q-oa;f.m_position.y=na-Ba}f.m_rotation=Aa;f.m_R.Set(Aa);f.QuickSyncShapes();
if(h.IsStatic()){h.m_position.x=Pa;h.m_position.y=Fa}else{h.m_position.x=Pa+oa;h.m_position.y=Fa+Ba}h.m_position.x=Pa+oa;h.m_position.y=Fa+Ba;h.m_rotation=La;h.m_R.Set(La);h.QuickSyncShapes();return true}a.QuickSync(f.m_position,f.m_R);e.QuickSync(h.m_position,h.m_R);return false};var b2NullContact=Class.create();Object.extend(b2NullContact.prototype,b2Contact.prototype);
Object.extend(b2NullContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null}},Evaluate:function(){},GetManifolds:function(){return null}});var b2PolyAndCircleContact=Class.create();Object.extend(b2PolyAndCircleContact.prototype,b2Contact.prototype);
Object.extend(b2PolyAndCircleContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];b2Settings.b2Assert(this.m_shape1.m_type==b2Shape.e_polyShape);b2Settings.b2Assert(this.m_shape2.m_type==b2Shape.e_circleShape);this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0}},Evaluate:function(){b2Collision.b2CollidePolyAndCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,
false);this.m_manifoldCount=this.m_manifold[0].pointCount>0?1:0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyAndCircleContact.Create=function(a,e){return new b2PolyAndCircleContact(a,e)};b2PolyAndCircleContact.Destroy=function(){};var b2PolyContact=Class.create();Object.extend(b2PolyContact.prototype,b2Contact.prototype);
Object.extend(b2PolyContact.prototype,{initialize:function(a,e){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!e)this.m_shape2=this.m_shape1=null;else{this.m_shape1=a;this.m_shape2=e;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_next=this.m_prev=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=
null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m0=new b2Manifold;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0}},m0:new b2Manifold,Evaluate:function(){for(var a=this.m_manifold[0],e=this.m0.points,f=0;f<a.pointCount;f++){var h=e[f],r=a.points[f];h.normalImpulse=r.normalImpulse;h.tangentImpulse=r.tangentImpulse;h.id=r.id.Copy()}this.m0.pointCount=a.pointCount;b2Collision.b2CollidePoly(a,this.m_shape1,
this.m_shape2,false);if(a.pointCount>0){e=[false,false];for(f=0;f<a.pointCount;++f){h=a.points[f];h.normalImpulse=0;h.tangentImpulse=0;r=h.id.key;for(var o=0;o<this.m0.pointCount;++o)if(e[o]!=true){var y=this.m0.points[o];if(y.id.key==r){e[o]=true;h.normalImpulse=y.normalImpulse;h.tangentImpulse=y.tangentImpulse;break}}}this.m_manifoldCount=1}else this.m_manifoldCount=0},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});
b2PolyContact.Create=function(a,e){return new b2PolyContact(a,e)};b2PolyContact.Destroy=function(){};var b2ContactManager=Class.create();Object.extend(b2ContactManager.prototype,b2PairCallback.prototype);
Object.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact;this.m_world=null;this.m_destroyImmediate=false},PairAdded:function(a,e){var f=a,h=e,r=f.m_body,o=h.m_body;if(r.IsStatic()&&o.IsStatic())return this.m_nullContact;if(f.m_body==h.m_body)return this.m_nullContact;if(o.IsConnected(r))return this.m_nullContact;if(this.m_world.m_filter!=null&&this.m_world.m_filter.ShouldCollide(f,h)==false)return this.m_nullContact;if(o.m_invMass==0){r=f;f=h;h=r}f=b2Contact.Create(f,
h,this.m_world.m_blockAllocator);if(f==null)return this.m_nullContact;else{f.m_prev=null;f.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null)this.m_world.m_contactList.m_prev=f;this.m_world.m_contactList=f;this.m_world.m_contactCount++}return f},PairRemoved:function(a,e,f){if(f!=null)if(f!=this.m_nullContact)if(this.m_destroyImmediate==true)this.DestroyContact(f);else f.m_flags|=b2Contact.e_destroyFlag},DestroyContact:function(a){if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=
a.m_prev;if(a==this.m_world.m_contactList)this.m_world.m_contactList=a.m_next;if(a.GetManifoldCount()>0){var e=a.m_shape1.m_body,f=a.m_shape2.m_body,h=a.m_node1,r=a.m_node2;e.WakeUp();f.WakeUp();if(h.prev)h.prev.next=h.next;if(h.next)h.next.prev=h.prev;if(h==e.m_contactList)e.m_contactList=h.next;h.prev=null;h.next=null;if(r.prev)r.prev.next=r.next;if(r.next)r.next.prev=r.prev;if(r==f.m_contactList)f.m_contactList=r.next;r.prev=null;r.next=null}b2Contact.Destroy(a,this.m_world.m_blockAllocator);--this.m_world.m_contactCount},
CleanContactList:function(){for(var a=this.m_world.m_contactList;a!=null;){var e=a;a=a.m_next;e.m_flags&b2Contact.e_destroyFlag&&this.DestroyContact(e)}},Collide:function(){for(var a,e,f,h,r=this.m_world.m_contactList;r!=null;r=r.m_next)if(!(r.m_shape1.m_body.IsSleeping()&&r.m_shape2.m_body.IsSleeping())){a=r.GetManifoldCount();r.Evaluate();e=r.GetManifoldCount();if(a==0&&e>0){a=r.m_shape1.m_body;e=r.m_shape2.m_body;f=r.m_node1;h=r.m_node2;f.contact=r;f.other=e;f.prev=null;f.next=a.m_contactList;
if(f.next!=null)f.next.prev=r.m_node1;a.m_contactList=r.m_node1;h.contact=r;h.other=a;h.prev=null;h.next=e.m_contactList;if(h.next!=null)h.next.prev=h;e.m_contactList=h}else if(a>0&&e==0){a=r.m_shape1.m_body;e=r.m_shape2.m_body;f=r.m_node1;h=r.m_node2;if(f.prev)f.prev.next=f.next;if(f.next)f.next.prev=f.prev;if(f==a.m_contactList)a.m_contactList=f.next;f.prev=null;f.next=null;if(h.prev)h.prev.next=h.next;if(h.next)h.next.prev=h.prev;if(h==e.m_contactList)e.m_contactList=h.next;h.prev=null;h.next=
null}}},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});var b2World=Class.create();
b2World.prototype={initialize:function(a,e,f){this.step=new b2TimeStep;this.m_contactManager=new b2ContactManager;this.m_listener=null;this.m_filter=b2CollisionFilter.b2_defaultFilter;this.m_jointList=this.m_contactList=this.m_bodyList=null;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_bodyDestroyList=null;this.m_allowSleep=f;this.m_gravity=e;this.m_contactManager.m_world=this;this.m_broadPhase=new b2BroadPhase(a,this.m_contactManager);this.m_groundBody=this.CreateBody(new b2BodyDef)},
SetListener:function(a){this.m_listener=a},SetFilter:function(a){this.m_filter=a},CreateBody:function(a){a=new b2Body(a,this);a.m_prev=null;if(a.m_next=this.m_bodyList)this.m_bodyList.m_prev=a;this.m_bodyList=a;++this.m_bodyCount;return a},DestroyBody:function(a){if(!(a.m_flags&b2Body.e_destroyFlag)){if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_bodyList)this.m_bodyList=a.m_next;a.m_flags|=b2Body.e_destroyFlag;--this.m_bodyCount;a.m_prev=null;a.m_next=this.m_bodyDestroyList;
this.m_bodyDestroyList=a}},CleanBodyList:function(){this.m_contactManager.m_destroyImmediate=true;for(var a=this.m_bodyDestroyList;a;){var e=a;a=a.m_next;for(var f=e.m_jointList;f;){var h=f;f=f.next;this.m_listener&&this.m_listener.NotifyJointDestroyed(h.joint);this.DestroyJoint(h.joint)}e.Destroy()}this.m_bodyDestroyList=null;this.m_contactManager.m_destroyImmediate=false},CreateJoint:function(a){var e=b2Joint.Create(a,this.m_blockAllocator);e.m_prev=null;if(e.m_next=this.m_jointList)this.m_jointList.m_prev=
e;this.m_jointList=e;++this.m_jointCount;e.m_node1.joint=e;e.m_node1.other=e.m_body2;e.m_node1.prev=null;if(e.m_node1.next=e.m_body1.m_jointList)e.m_body1.m_jointList.prev=e.m_node1;e.m_body1.m_jointList=e.m_node1;e.m_node2.joint=e;e.m_node2.other=e.m_body1;e.m_node2.prev=null;if(e.m_node2.next=e.m_body2.m_jointList)e.m_body2.m_jointList.prev=e.m_node2;e.m_body2.m_jointList=e.m_node2;if(a.collideConnected==false)for(a=(a.body1.m_shapeCount<a.body2.m_shapeCount?a.body1:a.body2).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase);
return e},DestroyJoint:function(a){var e=a.m_collideConnected;if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_jointList)this.m_jointList=a.m_next;var f=a.m_body1,h=a.m_body2;f.WakeUp();h.WakeUp();if(a.m_node1.prev)a.m_node1.prev.next=a.m_node1.next;if(a.m_node1.next)a.m_node1.next.prev=a.m_node1.prev;if(a.m_node1==f.m_jointList)f.m_jointList=a.m_node1.next;a.m_node1.prev=null;a.m_node1.next=null;if(a.m_node2.prev)a.m_node2.prev.next=a.m_node2.next;if(a.m_node2.next)a.m_node2.next.prev=
a.m_node2.prev;if(a.m_node2==h.m_jointList)h.m_jointList=a.m_node2.next;a.m_node2.prev=null;a.m_node2.next=null;b2Joint.Destroy(a,this.m_blockAllocator);--this.m_jointCount;if(e==false)for(a=(f.m_shapeCount<h.m_shapeCount?f:h).m_shapeList;a;a=a.m_next)a.ResetProxy(this.m_broadPhase)},GetGroundBody:function(){return this.m_groundBody},step:new b2TimeStep,Step:function(a,e){var f,h;this.step.dt=a;this.step.iterations=e;this.step.inv_dt=a>0?1/a:0;this.m_positionIterationCount=0;this.m_contactManager.CleanContactList();
this.CleanBodyList();this.m_contactManager.Collide();var r=new b2Island(this.m_bodyCount,this.m_contactCount,this.m_jointCount,this.m_stackAllocator);for(f=this.m_bodyList;f!=null;f=f.m_next)f.m_flags&=~b2Body.e_islandFlag;for(var o=this.m_contactList;o!=null;o=o.m_next)o.m_flags&=~b2Contact.e_islandFlag;for(o=this.m_jointList;o!=null;o=o.m_next)o.m_islandFlag=false;o=Array(this.m_bodyCount);for(var y=0;y<this.m_bodyCount;y++)o[y]=null;for(y=this.m_bodyList;y!=null;y=y.m_next)if(!(y.m_flags&(b2Body.e_staticFlag|
b2Body.e_islandFlag|b2Body.e_sleepFlag|b2Body.e_frozenFlag))){r.Clear();var B=0;o[B++]=y;for(y.m_flags|=b2Body.e_islandFlag;B>0;){f=o[--B];r.AddBody(f);f.m_flags&=~b2Body.e_sleepFlag;if(!(f.m_flags&b2Body.e_staticFlag)){for(var C=f.m_contactList;C!=null;C=C.next)if(!(C.contact.m_flags&b2Contact.e_islandFlag)){r.AddContact(C.contact);C.contact.m_flags|=b2Contact.e_islandFlag;h=C.other;if(!(h.m_flags&b2Body.e_islandFlag)){o[B++]=h;h.m_flags|=b2Body.e_islandFlag}}for(f=f.m_jointList;f!=null;f=f.next)if(f.joint.m_islandFlag!=
true){r.AddJoint(f.joint);f.joint.m_islandFlag=true;h=f.other;if(!(h.m_flags&b2Body.e_islandFlag)){o[B++]=h;h.m_flags|=b2Body.e_islandFlag}}}}r.Solve(this.step,this.m_gravity);this.m_positionIterationCount=b2Math.b2Max(this.m_positionIterationCount,b2Island.m_positionIterationCount);this.m_allowSleep&&r.UpdateSleep(a);for(h=0;h<r.m_bodyCount;++h){f=r.m_bodies[h];if(f.m_flags&b2Body.e_staticFlag)f.m_flags&=~b2Body.e_islandFlag;if(f.IsFrozen()&&this.m_listener)if(this.m_listener.NotifyBoundaryViolated(f)==
b2WorldListener.b2_destroyBody){this.DestroyBody(f);r.m_bodies[h]=null}}}this.m_broadPhase.Commit()},Query:function(a,e,f){var h=[];a=this.m_broadPhase.QueryAABB(a,h,f);for(f=0;f<a;++f)e[f]=h[f];return a},GetBodyList:function(){return this.m_bodyList},GetJointList:function(){return this.m_jointList},GetContactList:function(){return this.m_contactList},m_blockAllocator:null,m_stackAllocator:null,m_broadPhase:null,m_contactManager:new b2ContactManager,m_bodyList:null,m_contactList:null,m_jointList:null,
m_bodyCount:0,m_contactCount:0,m_jointCount:0,m_bodyDestroyList:null,m_gravity:null,m_allowSleep:null,m_groundBody:null,m_listener:null,m_filter:null,m_positionIterationCount:0};b2World.s_enablePositionCorrection=1;b2World.s_enableWarmStarting=1;var b2WorldListener=Class.create();b2WorldListener.prototype={NotifyJointDestroyed:function(){},NotifyBoundaryViolated:function(){return b2WorldListener.b2_freezeBody},initialize:function(){}};b2WorldListener.b2_freezeBody=0;
b2WorldListener.b2_destroyBody=1;jQuery.preloadCssImages=function(a){function e(){clearTimeout(B);if(o&&o.length&&o[r]){r++;if(a.statusTextEl){var C=o[r]?"Now Loading: <span>"+o[r].split("/")[o[r].split("/").length-1]:"Loading complete";jQuery(a.statusTextEl).html('<span class="numLoaded">'+r+'</span> of <span class="numTotal">'+o.length+'</span> loaded (<span class="percentLoaded">'+(r/o.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+C+"</span></span>")}if(a.statusBarEl){C=jQuery(a.statusBarEl).width();jQuery(a.statusBarEl).css("background-position",
-(C-(C*r/o.length).toFixed(0))+"px 50%")}f()}}function f(){if(o&&o.length&&o[r]){var C=new Image;C.src=o[r];C.complete?e():jQuery(C).bind("error load onreadystatechange",e);B=setTimeout(e,a.errorDelay)}}function h(C,E){for(var H=[],I=[],M,L=C.length;L--;){var S="";if(E&&E[L])M=E[L];else{M=(C[L].href?C[L].href:"window.location.href").split("/");M.pop();if(M=M.join("/"))M+="/"}if(C[L].cssRules||C[L].rules){y=C[L].cssRules?C[L].cssRules:C[L].rules;for(var l=y.length;l--;)if(y[l].style&&y[l].style.cssText){var Y=
y[l].style.cssText;if(Y.toLowerCase().indexOf("url")!=-1)S+=Y}}if(S=S.match(/[^\("]+\.(gif|jpg|jpeg|png)/g))for(l=S.length;l--;){Y=S[l].charAt(0)=="/"||S[l].match("://")?S[l]:M+S[l];jQuery.inArray(Y,o)==-1&&o.push(Y)}if(C[L].imports&&C[L].imports.length){S=0;for(l=C[L].imports.length;S<l;S++){Y=C[L].imports[S].href;Y=Y.split("/");Y.pop();if(Y=Y.join("/"))Y+="/";Y=Y.charAt(0)=="/"||Y.match("://")?Y:M+Y;I.push(Y);H.push(C[L].imports[S])}}}if(H.length){h(H,I);return false}for(H=a.simultaneousCacheLoading;H--;)setTimeout(f,
H)}a=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,simultaneousCacheLoading:2},a);var r=0,o=[],y,B;h(document.styleSheets);return o};(function(a){function e(){var o=r.parse(this.title);isNaN(o)||a(this).text(f(o));return this}function f(o){return r.inWords((new Date).getTime()-o.getTime())}function h(o,y){return(a.isFunction(o)?o(y):o).replace(/%d/i,y)}a.timeago=function(o){return o instanceof Date?f(o):typeof o=="string"?f(a.timeago.parse(o)):f(a.timeago.parse(a(o).attr("title")))};var r=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6E4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",
ago:null,fromNow:null,seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}},inWords:function(o){var y=this.settings.strings,B=y.prefixAgo,C=y.suffixAgo||y.ago;if(this.settings.allowFuture){if(o<0){B=y.prefixFromNow;C=y.suffixFromNow||y.fromNow}o=Math.abs(o)}o=o/1E3;var E=o/60,H=E/60,I=H/24,M=I/365;y=o<45&&h(y.seconds,Math.round(o))||
o<90&&h(y.minute,1)||E<45&&h(y.minutes,Math.round(E))||E<90&&h(y.hour,1)||H<24&&h(y.hours,Math.round(H))||H<48&&h(y.day,1)||I<30&&h(y.days,Math.floor(I))||I<60&&h(y.month,1)||I<365&&h(y.months,Math.floor(I/30))||M<2&&h(y.year,1)||h(y.years,Math.floor(M));return a.trim([B,y,C].join(" "))},parse:function(o){o=a.trim(o);o=o.replace(/-/,"/").replace(/-/,"/");o=o.replace(/T/," ").replace(/Z/," UTC");o=o.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(o)}});a.fn.timeago=function(){var o=this;o.each(e);
var y=r.settings;y.refreshMillis>0&&setInterval(function(){o.each(e)},y.refreshMillis);return o};a.browser.msie&&a.browser.version<7&&document.createElement("abbr")})(jQuery);Raphael=function(){function a(){if(a.is(arguments[0],Ra)){for(var c=arguments[0],j=xb[Ha](a,c.splice(0,3+a.is(c[0],J))),g=j.set(),m=0,p=c[V];m<p;m++){var n=c[m]||{};Ya.test(n.type)&&g[da](j[n.type]().attr(n))}return g}return xb[Ha](a,arguments)}function e(){}function f(c){if(a.vml){var j=/^\s+|\s+$/g;f=o(function(m){var p;m=xa(m)[Ka](j,qa);try{var n=new ra.ActiveXObject("htmlfile");n.write("<body>");n.close();p=n.body}catch(s){p=ra.createPopup().document.body}n=p.createTextRange();try{p.style.color=
m;var t=n.queryCommandValue("ForeColor");t=(t&255)<<16|t&65280|(t&16711680)>>>16;return"#"+("000000"+t[ia](16)).slice(-6)}catch(z){return"none"}})}else{var g=wa.createElement("i");g.title="Rapha\u00ebl Colour Picker";g.style.display="none";wa.body[ga](g);f=o(function(m){g.style.color=m;return wa.defaultView.getComputedStyle(g,qa).getPropertyValue("color")})}return f(c)}function h(){return"hsb("+[this.h,this.s,this.b]+")"}function r(){return this.hex}function o(c,j,g){function m(){var p=Array[W].slice.call(arguments,
0),n=p[Na]("\u25ba"),s=m.cache=m.cache||{},t=m.count=m.count||[];if(s[ka](n))return g?g(s[n]):s[n];t[V]>=1E3&&delete s[t.shift()];t[da](n);s[n]=c[Ha](j,p);return g?g(s[n]):s[n]}return m}function y(c){var j=[];if(!a.is(c,Ra)||!a.is(c&&c[0],Ra))c=a.parsePathString(c);for(var g=0,m=c[V];g<m;g++){j[g]=[];for(var p=0,n=c[g][V];p<n;p++)j[g][p]=c[g][p]}j[ia]=a._path2string;return j}function B(c,j,g,m,p,n){var s=1/3,t=2/3;return[s*c+t*g,s*j+t*m,s*p+t*g,s*n+t*m,p,n]}function C(c,j,g,m,p,n,s,t,z,A){var G=ea.PI,
T=G*120/180,aa=G/180*(+p||0),X=[],K,ca=o(function(Ta,jb,Hb){var Lb=Ta*ea.cos(Hb)-jb*ea.sin(Hb);Ta=Ta*ea.sin(Hb)+jb*ea.cos(Hb);return{x:Lb,y:Ta}});if(A){ma=A[0];K=A[1];n=A[2];ya=A[3]}else{K=ca(c,j,-aa);c=K.x;j=K.y;K=ca(t,z,-aa);t=K.x;z=K.y;ea.cos(G/180*p);ea.sin(G/180*p);K=(c-t)/2;ma=(j-z)/2;ya=K*K/(g*g)+ma*ma/(m*m);if(ya>1){ya=ea.sqrt(ya);g=ya*g;m=ya*m}ya=g*g;var Qa=m*m;ya=(n==s?-1:1)*ea.sqrt(ea.abs((ya*Qa-ya*ma*ma-Qa*K*K)/(ya*ma*ma+Qa*K*K)));n=ya*g*ma/m+(c+t)/2;var ya=ya*-m*K/g+(j+z)/2,ma=ea.asin(((j-
ya)/m).toFixed(7));K=ea.asin(((z-ya)/m).toFixed(7));ma=c<n?G-ma:ma;K=t<n?G-K:K;ma<0&&(ma=G*2+ma);K<0&&(K=G*2+K);if(s&&ma>K)ma-=G*2;if(!s&&K>ma)K-=G*2}G=K-ma;if(ea.abs(G)>T){X=K;G=t;Qa=z;K=ma+T*(s&&K>ma?1:-1);t=n+g*ea.cos(K);z=ya+m*ea.sin(K);X=C(t,z,g,m,p,0,s,G,Qa,[K,X,n,ya])}G=K-ma;p=ea.cos(ma);n=ea.sin(ma);s=ea.cos(K);K=ea.sin(K);G=ea.tan(G/4);g=4/3*g*G;G=4/3*m*G;m=[c,j];c=[c+g*n,j-G*p];j=[t+g*K,z-G*s];t=[t,z];c[0]=2*m[0]-c[0];c[1]=2*m[1]-c[1];if(A)return[c,j,t][Ma](X);else{X=[c,j,t][Ma](X)[Na]()[Ga](",");
A=[];t=0;for(z=X[V];t<z;t++)A[t]=t%2?ca(X[t-1],X[t],aa).y:ca(X[t],X[t+1],aa).x;return A}}function E(c,j,g,m,p,n,s,t,z){var A=1-z;return{x:U(A,3)*c+U(A,2)*3*z*g+A*3*z*z*p+U(z,3)*s,y:U(A,3)*j+U(A,2)*3*z*m+A*3*z*z*n+U(z,3)*t}}function H(c,j,g,m){if(a.is(c,Sa)||a.is(c,"object")){c=a.is(c,Sa)?wa.getElementById(c):c;if(c.tagName)return j==null?{container:c,width:c.style.pixelWidth||c.offsetWidth,height:c.style.pixelHeight||c.offsetHeight}:{container:c,width:j,height:g}}else return{container:1,x:c,y:j,width:g,
height:m}}function I(c,j){var g=this;for(var m in j)if(j[ka](m)&&!(m in c))switch(typeof j[m]){case "function":(function(p){c[m]=c===g?p:function(){return p[Ha](g,arguments)}})(j[m]);break;case "object":c[m]=c[m]||{};I.call(this,c[m],j[m]);break;default:c[m]=j[m];break}}function M(c,j){c==j.top&&(j.top=c.prev);c==j.bottom&&(j.bottom=c.next);c.next&&(c.next.prev=c.prev);c.prev&&(c.prev.next=c.next)}function L(c,j){if(j.top!==c){M(c,j);c.next=null;c.prev=j.top;j.top.next=c;j.top=c}}function S(c,j){if(j.bottom!==
c){M(c,j);c.next=j.bottom;c.prev=null;j.bottom.prev=c;j.bottom=c}}function l(c,j,g){M(c,g);j==g.top&&(g.top=c);j.next&&(j.next.prev=c);c.next=j.next;c.prev=j;j.next=c}function Y(c,j,g){M(c,g);j==g.bottom&&(g.bottom=c);j.prev&&(j.prev.next=c);c.prev=j.prev;j.prev=c;c.next=j}function ba(c){return function(){throw Error("Rapha\u00ebl: you are calling to method \u201c"+c+"\u201d of removed object");}}function Q(){this.returnValue=false}function na(){return this.originalEvent.preventDefault()}function Aa(){this.cancelBubble=
true}function Pa(){return this.originalEvent.stopPropagation()}function Fa(){return this.x+Ia+this.y}function La(c,j){return function(g,m,p){g=ob(g);for(var n,s,t,z,A="",G={},T=0,aa=0,X=g.length;aa<X;aa++){t=g[aa];if(t[0]=="M"){n=+t[1];s=+t[2]}else{z=P(n,s,t[1],t[2],t[3],t[4],t[5],t[6]);if(T+z>m){if(j&&!G.start){n=N(n,s,t[1],t[2],t[3],t[4],t[5],t[6],m-T);A+=["C",n.start.x,n.start.y,n.m.x,n.m.y,n.x,n.y];if(p)return A;G.start=A;A=["M",n.x,n.y+"C",n.n.x,n.n.y,n.end.x,n.end.y,t[5],t[6]][Na]();T+=z;n=
+t[5];s=+t[6];continue}if(!c&&!j){n=N(n,s,t[1],t[2],t[3],t[4],t[5],t[6],m-T);return{x:n.x,y:n.y,alpha:n.alpha}}}T+=z;n=+t[5];s=+t[6]}A+=t}G.end=A;n=c?T:j?G:a.findDotsAtSegment(n,s,t[1],t[2],t[3],t[4],t[5],t[6],1);n.alpha&&(n={x:n.x,y:n.y,alpha:n.alpha});return n}}function ta(){var c=+new Date;for(var j in va)if(j!="length"&&va[ka](j)){var g=va[j];if(g.stop||g.el.removed){delete va[j];va[V]--}else{var m=c-g.start,p=g.ms,n=g.easing,s=g.from,t=g.diff,z=g.to,A=g.t,G=g.prev||0,T=g.el,aa=g.callback,X={},
K;if(m<p){aa=a.easing_formulas[n]?a.easing_formulas[n](m/p):m/p;for(var ca in s)if(s[ka](ca)){switch(eb[ca]){case "along":K=aa*p*t[ca];z.back&&(K=z.len-K);n=la(z[ca],K);T.translate(t.sx-t.x||0,t.sy-t.y||0);t.x=n.x;t.y=n.y;T.translate(n.x-t.sx,n.y-t.sy);z.rot&&T.rotate(t.r+n.alpha,n.x,n.y);break;case J:K=+s[ca]+aa*p*t[ca];break;case "colour":K="rgb("+[oa(Da(s[ca].r+aa*p*t[ca].r)),oa(Da(s[ca].g+aa*p*t[ca].g)),oa(Da(s[ca].b+aa*p*t[ca].b))][Na](",")+")";break;case "path":K=[];n=0;for(var Qa=s[ca][V];n<
Qa;n++){K[n]=[s[ca][n][0]];for(var ya=1,ma=s[ca][n][V];ya<ma;ya++)K[n][ya]=+s[ca][n][ya]+aa*p*t[ca][n][ya];K[n]=K[n][Na](Ia)}K=K[Na](Ia);break;case "csv":switch(ca){case "translation":K=t[ca][0]*(m-G);n=t[ca][1]*(m-G);A.x+=K;A.y+=n;K=K+Ia+n;break;case "rotation":K=+s[ca][0]+aa*p*t[ca][0];s[ca][1]&&(K+=","+s[ca][1]+","+s[ca][2]);break;case "scale":K=[+s[ca][0]+aa*p*t[ca][0],+s[ca][1]+aa*p*t[ca][1],2 in z[ca]?z[ca][2]:qa,3 in z[ca]?z[ca][3]:qa][Na](Ia);break;case "clip-rect":K=[];for(n=4;n--;)K[n]=
+s[ca][n]+aa*p*t[ca][n];break}break}X[ca]=K}T.attr(X);T._run&&T._run.call(T)}else{if(z.along){n=la(z.along,z.len*!z.back);T.translate(t.sx-(t.x||0)+n.x-t.sx,t.sy-(t.y||0)+n.y-t.sy);z.rot&&T.rotate(t.r+n.alpha,n.x,n.y)}(A.x||A.y)&&T.translate(-A.x,-A.y);z.scale&&(z.scale+=qa);T.attr(z);delete va[j];va[V]--;T.in_animation=null;a.is(aa,"function")&&aa.call(T)}g.prev=m}}a.svg&&T&&T.paper&&T.paper.safari();va[V]&&ra.setTimeout(ta)}function oa(c){return Wa(za(c,255),0)}function Ba(c,j){if(c==null)return{x:this._.tx,
y:this._.ty,toString:Fa};this._.tx+=+c;this._.ty+=+j;switch(this.type){case "circle":case "ellipse":this.attr({cx:+c+this.attrs.cx,cy:+j+this.attrs.cy});break;case "rect":case "image":case "text":this.attr({x:+c+this.attrs.x,y:+j+this.attrs.y});break;case "path":var g=vb(this.attrs.path);g[0][1]+=+c;g[0][2]+=+j;this.attr({path:g});break}return this}function sa(c){return function(j,g,m,p){var n={back:c};a.is(m,"function")?p=m:n.rot=m;j&&j.constructor==fa&&(j=j.attrs.path);j&&(n.along=j);return this.animate(n,
g,p)}}function ua(c){this.items=[];this[V]=0;this.type="set";if(c)for(var j=0,g=c[V];j<g;j++)if(c[j]&&(c[j].constructor==fa||c[j].constructor==ua)){this[this.items[V]]=this.items[this.items[V]]=c[j];this[V]++}}a.version="1.4.4";var pa=/[, ]+/,Ya=/^(circle|rect|path|ellipse|text|image)$/,W="prototype",ka="hasOwnProperty",wa=document,ra=window,Va={was:Object[W][ka].call(ra,"Raphael"),is:ra.Raphael},ga="appendChild",Ha="apply",Ma="concat",gb="createTouch"in wa,qa="",Ia=" ",xa=String,Ga="split",hb="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[Ga](Ia),
Za={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Na="join",V="length",Ua=String[W].toLowerCase,ea=Math,Wa=ea.max,za=ea.min,J="number",Sa="string",Ra="array",ia="toString",ib=Object[W][ia],U=ea.pow,da="push",Ea=/^(?=[\da-f]$)/,Oa=/^url\(['"]?([^\)]+?)['"]?\)$/i,cb=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+(?:\s*,\s*[\d\.]+)?)\s*\)|rgba?\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%(?:\s*,\s*[\d\.]+%))\s*\)|hs[bl]\(\s*([\d\.]+\s*,\s*[\d\.]+\s*,\s*[\d\.]+)\s*\)|hs[bl]\(\s*([\d\.]+%\s*,\s*[\d\.]+%\s*,\s*[\d\.]+%)\s*\))\s*$/i,
Da=ea.round,ja=parseFloat,ab=parseInt,fb=String[W].toUpperCase,bb={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,
target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},eb={along:"along",blur:J,"clip-rect":"csv",cx:J,cy:J,fill:"colour","fill-opacity":J,"font-size":J,height:J,opacity:J,path:"path",r:J,rotation:"csv",rx:J,ry:J,scale:"csv",stroke:"colour","stroke-opacity":J,"stroke-width":J,translation:"csv",width:J,x:J,y:J},Ka="replace";a.type=ra.SVGAngle||wa.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var Xa=
wa.createElement("div");Xa.innerHTML="<!--[if vml]><br><br><![endif]--\>";if(Xa.childNodes[V]!=2)return a.type=null;Xa=null}a.svg=!(a.vml=a.type=="VML");e[W]=a[W];a._id=0;a._oid=0;a.fn={};a.is=function(c,j){j=Ua.call(j);return j=="object"&&c===Object(c)||j=="undefined"&&typeof c==j||j=="null"&&c==null||Ua.call(ib.call(c).slice(8,-1))==j};a.setWindow=function(c){ra=c;wa=ra.document};a.hsb2rgb=o(function(c,j,g){if(a.is(c,"object")&&"h"in c&&"s"in c&&"b"in c){g=c.b;j=c.s;c=c.h}var m;if(g==0)return{r:0,
g:0,b:0,hex:"#000"};if(c>1||j>1||g>1){c/=255;j/=255;g/=255}m=~~(c*6);c=c*6-m;var p=g*(1-j),n=g*(1-j*c),s=g*(1-j*(1-c));c=[g,n,p,p,s,g,g][m];j=[s,g,g,n,p,p,s][m];m=[p,p,s,g,g,n,p][m];c*=255;j*=255;m*=255;g={r:c,g:j,b:m,toString:r};c=(~~c)[ia](16);j=(~~j)[ia](16);m=(~~m)[ia](16);c=c[Ka](Ea,"0");j=j[Ka](Ea,"0");m=m[Ka](Ea,"0");g.hex="#"+c+j+m;return g},a);a.rgb2hsb=o(function(c,j,g){if(a.is(c,"object")&&"r"in c&&"g"in c&&"b"in c){g=c.b;j=c.g;c=c.r}if(a.is(c,Sa)){var m=a.getRGB(c);c=m.r;j=m.g;g=m.b}if(c>
1||j>1||g>1){c/=255;j/=255;g/=255}var p=Wa(c,j,g),n=za(c,j,g);m=p;if(n==p)return{h:0,s:0,b:p};else{var s=p-n;n=s/p;c=c==p?(j-g)/s:j==p?2+(g-c)/s:4+(c-j)/s;c/=6;c<0&&c++;c>1&&c--}return{h:c,s:n,b:m,toString:h}},a);var Ib=/,?([achlmqrstvxz]),?/gi,kb=/\s*,\s*/,zb={hs:1,rg:1};a._path2string=function(){return this.join(",")[Ka](Ib,"$1")};a.getRGB=o(function(c){if(!c||(c=xa(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(c=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(zb[ka](c.substring(0,
2))||c.charAt()=="#")&&(c=f(c));var j,g,m,p,n;if(c=c.match(cb)){if(c[2]){m=ab(c[2].substring(5),16);g=ab(c[2].substring(3,5),16);j=ab(c[2].substring(1,3),16)}if(c[3]){m=ab((n=c[3].charAt(3))+n,16);g=ab((n=c[3].charAt(2))+n,16);j=ab((n=c[3].charAt(1))+n,16)}if(c[4]){c=c[4][Ga](kb);j=ja(c[0]);g=ja(c[1]);m=ja(c[2]);p=ja(c[3])}if(c[5]){c=c[5][Ga](kb);j=ja(c[0])*2.55;g=ja(c[1])*2.55;m=ja(c[2])*2.55;p=ja(c[3])}if(c[6]){c=c[6][Ga](kb);j=ja(c[0]);g=ja(c[1]);m=ja(c[2]);return a.hsb2rgb(j,g,m)}if(c[7]){c=c[7][Ga](kb);
j=ja(c[0])*2.55;g=ja(c[1])*2.55;m=ja(c[2])*2.55;return a.hsb2rgb(j,g,m)}c={r:j,g:g,b:m};j=(~~j)[ia](16);g=(~~g)[ia](16);m=(~~m)[ia](16);j=j[Ka](Ea,"0");g=g[Ka](Ea,"0");m=m[Ka](Ea,"0");c.hex="#"+j+g+m;isFinite(ja(p))&&(c.o=p);return c}return{r:-1,g:-1,b:-1,hex:"none",error:1}},a);a.getColor=function(c){c=this.getColor.start=this.getColor.start||{h:0,s:1,b:c||0.75};var j=this.hsb2rgb(c.h,c.s,c.b);c.h+=0.075;if(c.h>1){c.h=0;c.s-=0.2;c.s<=0&&(this.getColor.start={h:0,s:1,b:c.b})}return j.hex};a.getColor.reset=
function(){delete this.start};var tb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,ub=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig;a.parsePathString=o(function(c){if(!c)return null;var j={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=[];if(a.is(c,Ra)&&a.is(c[0],Ra))g=y(c);g[V]||xa(c)[Ka](tb,function(m,p,n){var s=[];m=Ua.call(p);n[Ka](ub,function(t,z){z&&s[da](+z)});if(m=="m"&&s[V]>2){g[da]([p][Ma](s.splice(0,2)));m="l";p=p=="m"?"l":"L"}for(;s[V]>=j[m];){g[da]([p][Ma](s.splice(0,j[m])));if(!j[m])break}});
g[ia]=a._path2string;return g});a.findDotsAtSegment=function(c,j,g,m,p,n,s,t,z){var A=1-z,G=U(A,3)*c+U(A,2)*3*z*g+A*3*z*z*p+U(z,3)*s;A=U(A,3)*j+U(A,2)*3*z*m+A*3*z*z*n+U(z,3)*t;var T=c+2*z*(g-c)+z*z*(p-2*g+c),aa=j+2*z*(m-j)+z*z*(n-2*m+j),X=g+2*z*(p-g)+z*z*(s-2*p+g),K=m+2*z*(n-m)+z*z*(t-2*n+m);c=(1-z)*c+z*g;j=(1-z)*j+z*m;p=(1-z)*p+z*s;n=(1-z)*n+z*t;t=90-ea.atan((T-X)/(aa-K))*180/ea.PI;(T>X||aa<K)&&(t+=180);return{x:G,y:A,m:{x:T,y:aa},n:{x:X,y:K},start:{x:c,y:j},end:{x:p,y:n},alpha:t}};var nb=o(function(c){if(!c)return{x:0,
y:0,width:0,height:0};c=ob(c);for(var j=0,g=0,m=[],p=[],n,s=0,t=c[V];s<t;s++){n=c[s];if(n[0]=="M"){j=n[1];g=n[2];m[da](j);p[da](g)}else{j=Jb(j,g,n[1],n[2],n[3],n[4],n[5],n[6]);m=m[Ma](j.min.x,j.max.x);p=p[Ma](j.min.y,j.max.y);j=n[5];g=n[6]}}c=za[Ha](0,m);n=za[Ha](0,p);return{x:c,y:n,width:Wa[Ha](0,m)-c,height:Wa[Ha](0,p)-n}}),vb=o(function(c){if(!a.is(c,Ra)||!a.is(c&&c[0],Ra))c=a.parsePathString(c);var j=[],g=0,m=0,p=0,n=0,s=0;if(c[0][0]=="M"){g=c[0][1];m=c[0][2];p=g;n=m;s++;j[da](["M",g,m])}for(var t=
c[V];s<t;s++){var z=j[s]=[],A=c[s];if(A[0]!=Ua.call(A[0])){z[0]=Ua.call(A[0]);switch(z[0]){case "a":z[1]=A[1];z[2]=A[2];z[3]=A[3];z[4]=A[4];z[5]=A[5];z[6]=+(A[6]-g).toFixed(3);z[7]=+(A[7]-m).toFixed(3);break;case "v":z[1]=+(A[1]-m).toFixed(3);break;case "m":p=A[1];n=A[2];default:for(var G=1,T=A[V];G<T;G++)z[G]=+(A[G]-(G%2?g:m)).toFixed(3)}}else{j[s]=[];if(A[0]=="m"){p=A[1]+g;n=A[2]+m}z=0;for(G=A[V];z<G;z++)j[s][z]=A[z]}A=j[s][V];switch(j[s][0]){case "z":g=p;m=n;break;case "h":g+=+j[s][A-1];break;
case "v":m+=+j[s][A-1];break;default:g+=+j[s][A-2];m+=+j[s][A-1]}}j[ia]=a._path2string;return j},0,y),lb=o(function(c){if(!a.is(c,Ra)||!a.is(c&&c[0],Ra))c=a.parsePathString(c);var j=[],g=0,m=0,p=0,n=0,s=0;if(c[0][0]=="M"){g=+c[0][1];m=+c[0][2];p=g;n=m;s++;j[0]=["M",g,m]}for(var t=c[V];s<t;s++){var z=j[s]=[],A=c[s];if(A[0]!=fb.call(A[0])){z[0]=fb.call(A[0]);switch(z[0]){case "A":z[1]=A[1];z[2]=A[2];z[3]=A[3];z[4]=A[4];z[5]=A[5];z[6]=+(A[6]+g);z[7]=+(A[7]+m);break;case "V":z[1]=+A[1]+m;break;case "H":z[1]=
+A[1]+g;break;case "M":p=+A[1]+g;n=+A[2]+m;default:for(var G=1,T=A[V];G<T;G++)z[G]=+A[G]+(G%2?g:m)}}else{G=0;for(T=A[V];G<T;G++)j[s][G]=A[G]}switch(z[0]){case "Z":g=p;m=n;break;case "H":g=z[1];break;case "V":m=z[1];break;case "M":p=j[s][j[s][V]-2];n=j[s][j[s][V]-1];default:g=j[s][j[s][V]-2];m=j[s][j[s][V]-1]}}j[ia]=a._path2string;return j},null,y),Jb=o(function(c,j,g,m,p,n,s,t){var z=p-2*g+c-(s-2*p+g),A=2*(g-c)-2*(p-g),G=c-g,T=(-A+ea.sqrt(A*A-4*z*G))/2/z;z=(-A-ea.sqrt(A*A-4*z*G))/2/z;var aa=[j,t],
X=[c,s];ea.abs(T)>1E12&&(T=0.5);ea.abs(z)>1E12&&(z=0.5);if(T>0&&T<1){T=E(c,j,g,m,p,n,s,t,T);X[da](T.x);aa[da](T.y)}if(z>0&&z<1){T=E(c,j,g,m,p,n,s,t,z);X[da](T.x);aa[da](T.y)}z=n-2*m+j-(t-2*n+m);A=2*(m-j)-2*(n-m);G=j-m;T=(-A+ea.sqrt(A*A-4*z*G))/2/z;z=(-A-ea.sqrt(A*A-4*z*G))/2/z;ea.abs(T)>1E12&&(T=0.5);ea.abs(z)>1E12&&(z=0.5);if(T>0&&T<1){T=E(c,j,g,m,p,n,s,t,T);X[da](T.x);aa[da](T.y)}if(z>0&&z<1){T=E(c,j,g,m,p,n,s,t,z);X[da](T.x);aa[da](T.y)}return{min:{x:za[Ha](0,X),y:za[Ha](0,aa)},max:{x:Wa[Ha](0,
X),y:Wa[Ha](0,aa)}}}),ob=o(function(c,j){function g(X,K){var ca;if(!X)return["C",K.x,K.y,K.x,K.y,K.x,K.y];!(X[0]in{T:1,Q:1})&&(K.qx=K.qy=null);switch(X[0]){case "M":K.X=X[1];K.Y=X[2];break;case "A":X=["C"][Ma](C[Ha](0,[K.x,K.y][Ma](X.slice(1))));break;case "S":ca=K.x+(K.x-(K.bx||K.x));K=K.y+(K.y-(K.by||K.y));X=["C",ca,K][Ma](X.slice(1));break;case "T":K.qx=K.x+(K.x-(K.qx||K.x));K.qy=K.y+(K.y-(K.qy||K.y));X=["C"][Ma](B(K.x,K.y,K.qx,K.qy,X[1],X[2]));break;case "Q":K.qx=X[1];K.qy=X[2];X=["C"][Ma](B(K.x,
K.y,X[1],X[2],X[3],X[4]));break;case "L":X=["C"][Ma]([K.x,K.y,X[1],X[2],X[1],X[2]]);break;case "H":X=["C"][Ma]([K.x,K.y,X[1],K.y,X[1],K.y]);break;case "V":X=["C"][Ma]([K.x,K.y,K.x,X[1],K.x,X[1]]);break;case "Z":X=["C"][Ma]([K.x,K.y,K.X,K.Y,K.X,K.Y]);break}return X}function m(X,K){if(X[K][V]>7){X[K].shift();for(var ca=X[K];ca[V];)X.splice(K++,0,["C"][Ma](ca.splice(0,6)));X.splice(K,1);z=Wa(n[V],s&&s[V]||0)}}function p(X,K,ca,Qa,ya){if(X&&K&&X[ya][0]=="M"&&K[ya][0]!="M"){K.splice(ya,0,["M",Qa.x,Qa.y]);
ca.bx=0;ca.by=0;ca.x=X[ya][1];ca.y=X[ya][2];z=Wa(n[V],s&&s[V]||0)}}var n=lb(c),s=j&&lb(j);c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};j={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};for(var t=0,z=Wa(n[V],s&&s[V]||0);t<z;t++){n[t]=g(n[t],c);m(n,t);s&&(s[t]=g(s[t],j));s&&m(s,t);p(n,s,c,j,t);p(s,n,j,c,t);var A=n[t],G=s&&s[t],T=A[V],aa=s&&G[V];c.x=A[T-2];c.y=A[T-1];c.bx=ja(A[T-4])||c.x;c.by=ja(A[T-3])||c.y;j.bx=s&&(ja(G[aa-4])||j.x);j.by=s&&(ja(G[aa-3])||j.y);j.x=s&&G[aa-2];j.y=s&&G[aa-1]}return s?[n,
s]:n},null,y),Ab=o(function(c){for(var j=[],g=0,m=c[V];g<m;g++){var p={},n=c[g].match(/^([^:]*):?([\d\.]*)/);p.color=a.getRGB(n[1]);if(p.color.error)return null;p.color=p.color.hex;n[2]&&(p.offset=n[2]+"%");j[da](p)}g=1;for(m=j[V]-1;g<m;g++)if(!j[g].offset){c=ja(j[g-1].offset||0);n=0;for(p=g+1;p<m;p++)if(j[p].offset){n=j[p].offset;break}if(!n){n=100;p=m}n=ja(n);for(n=(n-c)/(p-g+1);g<p;g++){c+=n;j[g].offset=c+"%"}}return j}),Bb=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/;a.pathToRelative=vb;if(a.svg){e[W].svgns=
"http://www.w3.org/2000/svg";e[W].xlink="http://www.w3.org/1999/xlink";Da=function(c){return+c+(~~c===c)*0.5};var ha=function(c,j){if(j)for(var g in j)j[ka](g)&&c.setAttribute(g,xa(j[g]));else{c=wa.createElementNS(e[W].svgns,c);c.style.webkitTapHighlightColor="rgba(0,0,0,0)";return c}};a[ia]=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var pb=function(c,j){var g=ha("path");j.canvas&&j.canvas[ga](g);j=new fa(g,j);j.type="path";db(j,{fill:"none",stroke:"#000",
path:c});return j},mb=function(c,j,g){var m="linear",p=0.5,n=0.5,s=c.style;j=xa(j)[Ka](Bb,function(G,T,aa){m="radial";if(T&&aa){p=ja(T);n=ja(aa);G=(n>0.5)*2-1;U(p-0.5,2)+U(n-0.5,2)>0.25&&(n=ea.sqrt(0.25-U(p-0.5,2))*G+0.5)&&n!=0.5&&(n=n.toFixed(5)-1.0E-5*G)}return qa});j=j[Ga](/\s*\-\s*/);if(m=="linear"){var t=j.shift();t=-ja(t);if(isNaN(t))return null;t=[0,0,ea.cos(t*ea.PI/180),ea.sin(t*ea.PI/180)];var z=1/(Wa(ea.abs(t[2]),ea.abs(t[3]))||1);t[2]*=z;t[3]*=z;if(t[2]<0){t[0]=-t[2];t[2]=0}if(t[3]<0){t[1]=
-t[3];t[3]=0}}j=Ab(j);if(!j)return null;z=c.getAttribute("fill");(z=z.match(/^url\(#(.*)\)$/))&&g.defs.removeChild(wa.getElementById(z[1]));z=ha(m+"Gradient");z.id="r"+(a._id++)[ia](36);ha(z,m=="radial"?{fx:p,fy:n}:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]});g.defs[ga](z);g=0;for(t=j[V];g<t;g++){var A=ha("stop");ha(A,{offset:j[g].offset?j[g].offset:!g?"0%":"100%","stop-color":j[g].color||"#fff"});z[ga](A)}ha(c,{fill:"url(#"+z.id+")",opacity:1,"fill-opacity":1});s.fill=qa;s.opacity=1;return s.fillOpacity=1},
wb=function(c){var j=c.getBBox();ha(c.pattern,{patternTransform:a.format("translate({0},{1})",j.x,j.y)})},db=function(c,j){function g(K,ca){if(ca=m[Ua.call(ca)]){var Qa=K.attrs["stroke-width"]||"1";K={round:Qa,square:Qa,butt:0}[K.attrs["stroke-linecap"]||j["stroke-linecap"]]||0;for(var ya=[],ma=ca[V];ma--;)ya[ma]=ca[ma]*Qa+(ma%2?1:-1)*K;ha(p,{"stroke-dasharray":ya[Na](",")})}}var m={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,
1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},p=c.node,n=c.attrs,s=c.rotate();j[ka]("rotation")&&(s=j.rotation);var t=xa(s)[Ga](pa);if(t.length-1){t[1]=+t[1];t[2]=+t[2]}else t=null;ja(s)&&c.rotate(0,true);for(var z in j)if(j[ka](z))if(bb[ka](z)){var A=j[z];n[z]=A;switch(z){case "blur":c.blur(A);break;case "rotation":c.rotate(A,true);break;case "href":case "title":case "target":var G=p.parentNode;if(Ua.call(G.tagName)!="a"){var T=ha("a");G.insertBefore(T,p);T[ga](p);G=T}G.setAttributeNS(c.paper.xlink,
z,A);break;case "cursor":p.style.cursor=A;break;case "clip-rect":G=xa(A)[Ga](pa);if(G[V]==4){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var aa=ha("clipPath");T=ha("rect");aa.id="r"+(a._id++)[ia](36);ha(T,{x:G[0],y:G[1],width:G[2],height:G[3]});aa[ga](T);c.paper.defs[ga](aa);ha(p,{"clip-path":"url(#"+aa.id+")"});c.clip=T}if(!A){(A=wa.getElementById(p.getAttribute("clip-path")[Ka](/(^url\(#|\)$)/g,qa)))&&A.parentNode.removeChild(A);ha(p,{"clip-path":qa});delete c.clip}break;
case "path":if(c.type=="path")ha(p,{d:A?n.path=lb(A):"M0,0"});break;case "width":p.setAttribute(z,A);if(n.fx){z="x";A=n.x}else break;case "x":if(n.fx)A=-n.x-(n.width||0);case "rx":if(z=="rx"&&c.type=="rect")break;case "cx":t&&(z=="x"||z=="cx")&&(t[1]+=A-n[z]);p.setAttribute(z,Da(A));c.pattern&&wb(c);break;case "height":p.setAttribute(z,A);if(n.fy){z="y";A=n.y}else break;case "y":if(n.fy)A=-n.y-(n.height||0);case "ry":if(z=="ry"&&c.type=="rect")break;case "cy":t&&(z=="y"||z=="cy")&&(t[2]+=A-n[z]);
p.setAttribute(z,Da(A));c.pattern&&wb(c);break;case "r":c.type=="rect"?ha(p,{rx:A,ry:A}):p.setAttribute(z,A);break;case "src":c.type=="image"&&p.setAttributeNS(c.paper.xlink,"href",A);break;case "stroke-width":p.style.strokeWidth=A;p.setAttribute(z,A);n["stroke-dasharray"]&&g(c,n["stroke-dasharray"]);break;case "stroke-dasharray":g(c,A);break;case "translation":A=xa(A)[Ga](pa);A[0]=+A[0]||0;A[1]=+A[1]||0;if(t){t[1]+=A[0];t[2]+=A[1]}Ba.call(c,A[0],A[1]);break;case "scale":A=xa(A)[Ga](pa);c.scale(+A[0]||
1,+A[1]||+A[0]||1,isNaN(ja(A[2]))?null:+A[2],isNaN(ja(A[3]))?null:+A[3]);break;case "fill":if(G=xa(A).match(Oa)){aa=ha("pattern");var X=ha("image");aa.id="r"+(a._id++)[ia](36);ha(aa,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});ha(X,{x:0,y:0});X.setAttributeNS(c.paper.xlink,"href",G[1]);aa[ga](X);A=wa.createElement("img");A.style.cssText="position:absolute;left:-9999em;top-9999em";A.onload=function(){ha(aa,{width:this.offsetWidth,height:this.offsetHeight});ha(X,{width:this.offsetWidth,
height:this.offsetHeight});wa.body.removeChild(this);c.paper.safari()};wa.body[ga](A);A.src=G[1];c.paper.defs[ga](aa);p.style.fill="url(#"+aa.id+")";ha(p,{fill:"url(#"+aa.id+")"});c.pattern=aa;c.pattern&&wb(c);break}G=a.getRGB(A);if(G.error){if(({circle:1,ellipse:1}[ka](c.type)||xa(A).charAt()!="r")&&mb(p,A,c.paper)){n.gradient=A;n.fill="none";break}}else{delete j.gradient;delete n.gradient;!a.is(n.opacity,"undefined")&&a.is(j.opacity,"undefined")&&ha(p,{opacity:n.opacity});!a.is(n["fill-opacity"],
"undefined")&&a.is(j["fill-opacity"],"undefined")&&ha(p,{"fill-opacity":n["fill-opacity"]})}G[ka]("o")&&ha(p,{"fill-opacity":G.o/100});case "stroke":G=a.getRGB(A);p.setAttribute(z,G.hex);z=="stroke"&&G[ka]("o")&&ha(p,{"stroke-opacity":G.o/100});break;case "gradient":(({circle:1,ellipse:1})[ka](c.type)||xa(A).charAt()!="r")&&mb(p,A,c.paper);break;case "opacity":case "fill-opacity":if(n.gradient){if(G=wa.getElementById(p.getAttribute("fill")[Ka](/^url\(#|\)$/g,qa))){G=G.getElementsByTagName("stop");
G[G[V]-1].setAttribute("stop-opacity",A)}break}default:z=="font-size"&&(A=ab(A,10)+"px");G=z[Ka](/(\-.)/g,function(K){return fb.call(K.substring(1))});p.style[G]=A;p.setAttribute(z,A);break}}Kb(c,j);if(t)c.rotate(t.join(Ia));else ja(s)&&c.rotate(s,true)},Kb=function(c,j){if(!(c.type!="text"||!(j[ka]("text")||j[ka]("font")||j[ka]("font-size")||j[ka]("x")||j[ka]("y")))){var g=c.attrs,m=c.node,p=m.firstChild?ab(wa.defaultView.getComputedStyle(m.firstChild,qa).getPropertyValue("font-size"),10):10;if(j[ka]("text")){for(g.text=
j.text;m.firstChild;)m.removeChild(m.firstChild);j=xa(j.text)[Ga]("\n");for(var n=0,s=j[V];n<s;n++)if(j[n]){var t=ha("tspan");n&&ha(t,{dy:p*1.2,x:g.x});t[ga](wa.createTextNode(j[n]));m[ga](t)}}else{j=m.getElementsByTagName("tspan");n=0;for(s=j[V];n<s;n++)n&&ha(j[n],{dy:p*1.2,x:g.x})}ha(m,{y:g.y});c=c.getBBox();(c=g.y-(c.y+c.height/2))&&isFinite(c)&&ha(m,{y:g.y+c})}},fa=function(c,j){this[0]=c;this.id=a._oid++;this.node=c;c.raphael=this;this.paper=j;this.attrs=this.attrs||{};this.transformations=[];
this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!j.bottom&&(j.bottom=this);(this.prev=j.top)&&(j.top.next=this);j.top=this;this.next=null};fa[W].rotate=function(c,j,g){if(this.removed)return this;if(c==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][Na](Ia);return this._.rt.deg}var m=this.getBBox();c=xa(c)[Ga](pa);if(c[V]-1){j=ja(c[1]);g=ja(c[2])}c=ja(c[0]);if(j!=null)this._.rt.deg=c;else this._.rt.deg+=c;g==null&&(j=null);this._.rt.cx=j;this._.rt.cy=g;j=j==null?m.x+m.width/
2:j;g=g==null?m.y+m.height/2:g;if(this._.rt.deg){this.transformations[0]=a.format("rotate({0} {1} {2})",this._.rt.deg,j,g);this.clip&&ha(this.clip,{transform:a.format("rotate({0} {1} {2})",-this._.rt.deg,j,g)})}else{this.transformations[0]=qa;this.clip&&ha(this.clip,{transform:qa})}ha(this.node,{transform:this.transformations[Na](Ia)});return this};fa[W].hide=function(){!this.removed&&(this.node.style.display="none");return this};fa[W].show=function(){!this.removed&&(this.node.style.display="");return this};
fa[W].remove=function(){if(!this.removed){M(this,this.paper);this.node.parentNode.removeChild(this.node);for(var c in this)delete this[c];this.removed=true}};fa[W].getBBox=function(){if(this.removed)return this;if(this.type=="path")return nb(this.attrs.path);if(this.node.style.display=="none"){this.show();var c=true}var j={};try{j=this.node.getBBox()}catch(g){}finally{j=j||{}}if(this.type=="text"){j={x:j.x,y:Infinity,width:0,height:0};for(var m=0,p=this.node.getNumberOfChars();m<p;m++){var n=this.node.getExtentOfChar(m);
n.y<j.y&&(j.y=n.y);n.y+n.height-j.y>j.height&&(j.height=n.y+n.height-j.y);n.x+n.width-j.x>j.width&&(j.width=n.x+n.width-j.x)}}c&&this.hide();return j};fa[W].attr=function(c,j){if(this.removed)return this;if(c==null){c={};for(var g in this.attrs)if(this.attrs[ka](g))c[g]=this.attrs[g];this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(j==null&&a.is(c,Sa)){if(c=="translation")return Ba.call(this);
if(c=="rotation")return this.rotate();if(c=="scale")return this.scale();if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[c]}if(j==null&&a.is(c,Ra)){j={};g=0;for(var m=c.length;g<m;g++)j[c[g]]=this.attr(c[g]);return j}if(j!=null){g={};g[c]=j;db(this,g)}else c!=null&&a.is(c,"object")&&db(this,c);return this};fa[W].toFront=function(){if(this.removed)return this;this.node.parentNode[ga](this.node);var c=this.paper;c.top!=this&&L(this,c);return this};
fa[W].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);S(this,this.paper)}return this};fa[W].insertAfter=function(c){if(this.removed)return this;var j=c.node;j.nextSibling?j.parentNode.insertBefore(this.node,j.nextSibling):j.parentNode[ga](this.node);l(this,c,this.paper);return this};fa[W].insertBefore=function(c){if(this.removed)return this;var j=c.node;j.parentNode.insertBefore(this.node,
j);Y(this,c,this.paper);return this};fa[W].blur=function(c){if(+c!==0){var j=ha("filter"),g=ha("feGaussianBlur");this.attrs.blur=c;j.id="r"+(a._id++)[ia](36);ha(g,{stdDeviation:+c||1.5});j.appendChild(g);this.paper.defs.appendChild(j);this._blur=j;ha(this.node,{filter:"url(#"+j.id+")"})}else{if(this._blur){this._blur.parentNode.removeChild(this._blur);delete this._blur;delete this.attrs.blur}this.node.removeAttribute("filter")}};var qb=function(c,j,g,m){j=Da(j);g=Da(g);var p=ha("circle");c.canvas&&
c.canvas[ga](p);c=new fa(p,c);c.attrs={cx:j,cy:g,r:m,fill:"none",stroke:"#000"};c.type="circle";ha(p,c.attrs);return c},Cb=function(c,j,g,m,p,n){j=Da(j);g=Da(g);var s=ha("rect");c.canvas&&c.canvas[ga](s);c=new fa(s,c);c.attrs={x:j,y:g,width:m,height:p,r:n||0,rx:n||0,ry:n||0,fill:"none",stroke:"#000"};c.type="rect";ha(s,c.attrs);return c},Db=function(c,j,g,m,p){j=Da(j);g=Da(g);var n=ha("ellipse");c.canvas&&c.canvas[ga](n);c=new fa(n,c);c.attrs={cx:j,cy:g,rx:m,ry:p,fill:"none",stroke:"#000"};c.type=
"ellipse";ha(n,c.attrs);return c},Eb=function(c,j,g,m,p,n){var s=ha("image");ha(s,{x:g,y:m,width:p,height:n,preserveAspectRatio:"none"});s.setAttributeNS(c.xlink,"href",j);c.canvas&&c.canvas[ga](s);c=new fa(s,c);c.attrs={x:g,y:m,width:p,height:n,src:j};c.type="image";return c},Fb=function(c,j,g,m){var p=ha("text");ha(p,{x:j,y:g,"text-anchor":"middle"});c.canvas&&c.canvas[ga](p);c=new fa(p,c);c.attrs={x:j,y:g,"text-anchor":"middle",text:m,font:bb.font,stroke:"none",fill:"#000"};c.type="text";db(c,
c.attrs);return c},rb=function(c,j){this.width=c||this.width;this.height=j||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);return this},xb=function(){var c=H[Ha](0,arguments),j=c&&c.container,g=c.x,m=c.y,p=c.width;c=c.height;if(!j)throw Error("SVG container not found.");var n=ha("svg");g=g||0;m=m||0;p=p||512;c=c||342;ha(n,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:p,height:c});if(j==1){n.style.cssText="position:absolute;left:"+g+
"px;top:"+m+"px";wa.body[ga](n)}else j.firstChild?j.insertBefore(n,j.firstChild):j[ga](n);j=new e;j.width=p;j.height=c;j.canvas=n;I.call(j,j,a.fn);j.clear();return j};e[W].clear=function(){for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null;(this.desc=ha("desc"))[ga](wa.createTextNode("Created with Rapha\u00ebl"));c[ga](this.desc);c[ga](this.defs=ha("defs"))};e[W].remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]=
ba(c)}}if(a.vml){var Gb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},sb=/([clmz]),?([^clmz]*)/gi,yb=/-?[^,\s-]+/g,b=1E3+Ia+1E3,k={path:1,rect:1},q=function(c){var j=/[ahqstv]/ig,g=lb;xa(c).match(j)&&(g=ob);j=/[clmz]/g;if(g==lb&&!xa(c).match(j))return c=xa(c)[Ka](sb,function(z,A,G){var T=[],aa=Ua.call(A)=="m",X=Gb[A];G[Ka](yb,function(K){if(aa&&T[V]==2){X+=T+Gb[A=="m"?"l":"L"];T=[]}T[da](Da(K*10))});return X+T});j=g(c);var m;c=[];for(var p=0,n=j[V];p<n;p++){g=j[p];m=Ua.call(j[p][0]);m=="z"&&(m=
"x");for(var s=1,t=g[V];s<t;s++)m+=Da(g[s]*10)+(s!=t-1?",":qa);c[da](m)}return c[Na](Ia)};a[ia]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};pb=function(c,j){var g=D("group");g.style.cssText="position:absolute;left:0;top:0;width:"+j.width+"px;height:"+j.height+"px";g.coordsize=j.coordsize;g.coordorigin=j.coordorigin;var m=D("shape"),p=m.style;p.width=j.width+"px";p.height=j.height+"px";m.coordsize=b;m.coordorigin=j.coordorigin;
g[ga](m);m=new fa(m,g,j);p={fill:"none",stroke:"#000"};c&&(p.path=c);m.isAbsolute=true;m.type="path";m.path=[];m.Path=qa;db(m,p);j.canvas[ga](g);return m};db=function(c,j){c.attrs=c.attrs||{};var g=c.node,m=c.attrs,p=g.style,n;n=(j.x!=m.x||j.y!=m.y||j.width!=m.width||j.height!=m.height||j.r!=m.r)&&c.type=="rect";var s=c;for(var t in j)if(j[ka](t))m[t]=j[t];if(n){m.path=u(m.x,m.y,m.width,m.height,m.r);c.X=m.x;c.Y=m.y;c.W=m.width;c.H=m.height}j.href&&(g.href=j.href);j.title&&(g.title=j.title);j.target&&
(g.target=j.target);j.cursor&&(p.cursor=j.cursor);"blur"in j&&c.blur(j.blur);if(j.path&&c.type=="path"||n)g.path=q(m.path);j.rotation!=null&&c.rotate(j.rotation,true);if(j.translation){n=xa(j.translation)[Ga](pa);Ba.call(c,n[0],n[1]);if(c._.rt.cx!=null){c._.rt.cx+=+n[0];c._.rt.cy+=+n[1];c.setBox(c.attrs,n[0],n[1])}}if(j.scale){n=xa(j.scale)[Ga](pa);c.scale(+n[0]||1,+n[1]||+n[0]||1,+n[2]||null,+n[3]||null)}if("clip-rect"in j){n=xa(j["clip-rect"])[Ga](pa);if(n[V]==4){n[2]=+n[2]+ +n[0];n[3]=+n[3]+ +n[1];
t=g.clipRect||wa.createElement("div");var z=t.style,A=g.parentNode;z.clip=a.format("rect({1}px {2}px {3}px {0}px)",n);if(!g.clipRect){z.position="absolute";z.top=0;z.left=0;z.width=c.paper.width+"px";z.height=c.paper.height+"px";A.parentNode.insertBefore(t,A);t[ga](A);g.clipRect=t}}if(!j["clip-rect"])g.clipRect&&(g.clipRect.style.clip=qa)}if(c.type=="image"&&j.src)g.src=j.src;if(c.type=="image"&&j.opacity){g.filterOpacity=" progid:DXImageTransform.Microsoft.Alpha(opacity="+j.opacity*100+")";p.filter=
(g.filterMatrix||qa)+(g.filterOpacity||qa)}j.font&&(p.font=j.font);j["font-family"]&&(p.fontFamily='"'+j["font-family"][Ga](",")[0][Ka](/^['"]+|['"]+$/g,qa)+'"');j["font-size"]&&(p.fontSize=j["font-size"]);j["font-weight"]&&(p.fontWeight=j["font-weight"]);j["font-style"]&&(p.fontStyle=j["font-style"]);if(j.opacity!=null||j["stroke-width"]!=null||j.fill!=null||j.stroke!=null||j["stroke-width"]!=null||j["stroke-opacity"]!=null||j["fill-opacity"]!=null||j["stroke-dasharray"]!=null||j["stroke-miterlimit"]!=
null||j["stroke-linejoin"]!=null||j["stroke-linecap"]!=null){g=c.shape||g;p=g.getElementsByTagName("fill")&&g.getElementsByTagName("fill")[0];n=false;!p&&(n=p=D("fill"));if("fill-opacity"in j||"opacity"in j){c=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(j.fill).o+1||2)-1);c<0&&(c=0);c>1&&(c=1);p.opacity=c}j.fill&&(p.on=true);if(p.on==null||j.fill=="none")p.on=false;if(p.on&&j.fill)if(c=j.fill.match(Oa)){p.src=c[1];p.type="tile"}else{p.color=a.getRGB(j.fill).hex;p.src=qa;p.type=
"solid";if(a.getRGB(j.fill).error&&(s.type in{circle:1,ellipse:1}||xa(j.fill).charAt()!="r")&&mb(s,j.fill)){m.fill="none";m.gradient=j.fill}}n&&g[ga](p);p=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0];n=false;!p&&(n=p=D("stroke"));if(j.stroke&&j.stroke!="none"||j["stroke-width"]||j["stroke-opacity"]!=null||j["stroke-dasharray"]||j["stroke-miterlimit"]||j["stroke-linejoin"]||j["stroke-linecap"])p.on=true;(j.stroke=="none"||p.on==null||j.stroke==0||j["stroke-width"]==0)&&(p.on=
false);c=a.getRGB(j.stroke);p.on&&j.stroke&&(p.color=c.hex);c=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+c.o+1||2)-1);t=(ja(j["stroke-width"])||1)*0.75;c<0&&(c=0);c>1&&(c=1);j["stroke-width"]==null&&(t=m["stroke-width"]);j["stroke-width"]&&(p.weight=t);t&&t<1&&(c*=t)&&(p.weight=1);p.opacity=c;j["stroke-linejoin"]&&(p.joinstyle=j["stroke-linejoin"]||"miter");p.miterlimit=j["stroke-miterlimit"]||8;j["stroke-linecap"]&&(p.endcap=j["stroke-linecap"]=="butt"?"flat":j["stroke-linecap"]=="square"?
"square":"round");if(j["stroke-dasharray"]){c={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};p.dashstyle=c[ka](j["stroke-dasharray"])?c[j["stroke-dasharray"]]:qa}n&&g[ga](p)}if(s.type=="text"){p=s.paper.span.style;m.font&&(p.font=m.font);m["font-family"]&&(p.fontFamily=m["font-family"]);m["font-size"]&&(p.fontSize=m["font-size"]);m["font-weight"]&&(p.fontWeight=m["font-weight"]);
m["font-style"]&&(p.fontStyle=m["font-style"]);s.node.string&&(s.paper.span.innerHTML=xa(s.node.string)[Ka](/</g,"&#60;")[Ka](/&/g,"&#38;")[Ka](/\n/g,"<br>"));s.W=m.w=s.paper.span.offsetWidth;s.H=m.h=s.paper.span.offsetHeight;s.X=m.x;s.Y=m.y+Da(s.H/2);switch(m["text-anchor"]){case "start":s.node.style["v-text-align"]="left";s.bbx=Da(s.W/2);break;case "end":s.node.style["v-text-align"]="right";s.bbx=-Da(s.W/2);break;default:s.node.style["v-text-align"]="center";break}}};mb=function(c,j){c.attrs=c.attrs||
{};var g="linear",m=".5 .5";c.attrs.gradient=j;j=xa(j)[Ka](Bb,function(z,A,G){g="radial";if(A&&G){A=ja(A);G=ja(G);U(A-0.5,2)+U(G-0.5,2)>0.25&&(G=ea.sqrt(0.25-U(A-0.5,2))*((G>0.5)*2-1)+0.5);m=A+Ia+G}return qa});j=j[Ga](/\s*\-\s*/);if(g=="linear"){var p=j.shift();p=-ja(p);if(isNaN(p))return null}var n=Ab(j);if(!n)return null;c=c.shape||c.node;j=c.getElementsByTagName("fill")[0]||D("fill");!j.parentNode&&c.appendChild(j);if(n[V]){j.on=true;j.method="none";j.color=n[0].color;j.color2=n[n[V]-1].color;
c=[];for(var s=0,t=n[V];s<t;s++)n[s].offset&&c[da](n[s].offset+Ia+n[s].color);j.colors&&(j.colors.value=c[V]?c[Na]():"0% "+j.color);if(g=="radial"){j.type="gradientradial";j.focus="100%";j.focussize=m;j.focusposition=m}else{j.type="gradient";j.angle=(270-p)%360}}return 1};fa=function(c,j,g){this[0]=c;this.id=a._oid++;this.node=c;c.raphael=this;this.Y=this.X=0;this.attrs={};this.Group=j;this.paper=g;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!g.bottom&&(g.bottom=this);(this.prev=g.top)&&(g.top.next=this);
g.top=this;this.next=null};fa[W].rotate=function(c,j,g){if(this.removed)return this;if(c==null){if(this._.rt.cx)return[this._.rt.deg,this._.rt.cx,this._.rt.cy][Na](Ia);return this._.rt.deg}c=xa(c)[Ga](pa);if(c[V]-1){j=ja(c[1]);g=ja(c[2])}c=ja(c[0]);if(j!=null)this._.rt.deg=c;else this._.rt.deg+=c;g==null&&(j=null);this._.rt.cx=j;this._.rt.cy=g;this.setBox(this.attrs,j,g);this.Group.style.rotation=this._.rt.deg;return this};fa[W].setBox=function(c,j,g){if(this.removed)return this;var m=this.Group.style,
p=this.shape&&this.shape.style||this.node.style;c=c||{};for(var n in c)if(c[ka](n))this.attrs[n]=c[n];j=j||this._.rt.cx;g=g||this._.rt.cy;var s=this.attrs,t;switch(this.type){case "circle":c=s.cx-s.r;n=s.cy-s.r;t=s=s.r*2;break;case "ellipse":c=s.cx-s.rx;n=s.cy-s.ry;t=s.rx*2;s=s.ry*2;break;case "image":c=+s.x;n=+s.y;t=s.width||0;s=s.height||0;break;case "text":this.textpath.v=["m",Da(s.x),", ",Da(s.y-2),"l",Da(s.x)+1,", ",Da(s.y-2)][Na](qa);c=s.x-Da(this.W/2);n=s.y-this.H/2;t=this.W;s=this.H;break;
case "rect":case "path":if(this.attrs.path){s=nb(this.attrs.path);c=s.x;n=s.y;t=s.width;s=s.height}else{n=c=0;t=this.paper.width;s=this.paper.height}break;default:n=c=0;t=this.paper.width;s=this.paper.height;break}j=j==null?c+t/2:j;g=g==null?n+s/2:g;j-=this.paper.width/2;g-=this.paper.height/2;var z;m.left!=(z=j+"px")&&(m.left=z);m.top!=(z=g+"px")&&(m.top=z);this.X=k[ka](this.type)?-j:c;this.Y=k[ka](this.type)?-g:n;this.W=t;this.H=s;if(k[ka](this.type)){p.left!=(z=-j*10+"px")&&(p.left=z);p.top!=(z=
-g*10+"px")&&(p.top=z)}else if(this.type=="text"){p.left!=(z=-j+"px")&&(p.left=z);p.top!=(z=-g+"px")&&(p.top=z)}else{m.width!=(z=this.paper.width+"px")&&(m.width=z);m.height!=(z=this.paper.height+"px")&&(m.height=z);p.left!=(z=c-j+"px")&&(p.left=z);p.top!=(z=n-g+"px")&&(p.top=z);p.width!=(z=t+"px")&&(p.width=z);p.height!=(z=s+"px")&&(p.height=z)}};fa[W].hide=function(){!this.removed&&(this.Group.style.display="none");return this};fa[W].show=function(){!this.removed&&(this.Group.style.display="block");
return this};fa[W].getBBox=function(){if(this.removed)return this;if(k[ka](this.type))return nb(this.attrs.path);return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};fa[W].remove=function(){if(!this.removed){M(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var c in this)delete this[c];this.removed=true}};fa[W].attr=function(c,j){if(this.removed)return this;if(c==
null){c={};for(var g in this.attrs)if(this.attrs[ka](g))c[g]=this.attrs[g];this._.rt.deg&&(c.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale());c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient;return c}if(j==null&&a.is(c,Sa)){if(c=="translation")return Ba.call(this);if(c=="rotation")return this.rotate();if(c=="scale")return this.scale();if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;return this.attrs[c]}if(this.attrs&&
j==null&&a.is(c,Ra)){var m={};g=0;for(j=c[V];g<j;g++)m[c[g]]=this.attr(c[g]);return m}if(j!=null){m={};m[c]=j}j==null&&a.is(c,"object")&&(m=c);if(m){if(m.text&&this.type=="text")this.node.string=m.text;db(this,m);if(m.gradient&&({circle:1,ellipse:1}[ka](this.type)||xa(m.gradient).charAt()!="r"))mb(this,m.gradient);(!k[ka](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};fa[W].toFront=function(){!this.removed&&this.Group.parentNode[ga](this.Group);this.paper.top!=this&&L(this,this.paper);
return this};fa[W].toBack=function(){if(this.removed)return this;if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);S(this,this.paper)}return this};fa[W].insertAfter=function(c){if(this.removed)return this;c.Group.nextSibling?c.Group.parentNode.insertBefore(this.Group,c.Group.nextSibling):c.Group.parentNode[ga](this.Group);l(this,c,this.paper);return this};fa[W].insertBefore=function(c){if(this.removed)return this;c.Group.parentNode.insertBefore(this.Group,
c.Group);Y(this,c,this.paper);return this};var v=/ progid:\S+Blur\([^\)]+\)/g;fa[W].blur=function(c){var j=this.node.runtimeStyle,g=j.filter;g=g.replace(v,qa);if(+c!==0){this.attrs.blur=c;j.filter=g+Ia+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+c||1.5)+")";j.margin=Raphael.format("-{0}px 0 0 -{0}px",Math.round(+c||1.5))}else{j.filter=g;j.margin=0;delete this.attrs.blur}};qb=function(c,j,g,m){var p=D("group"),n=D("oval");p.style.cssText="position:absolute;left:0;top:0;width:"+c.width+
"px;height:"+c.height+"px";p.coordsize=b;p.coordorigin=c.coordorigin;p[ga](n);n=new fa(n,p,c);n.type="circle";db(n,{stroke:"#000",fill:"none"});n.attrs.cx=j;n.attrs.cy=g;n.attrs.r=m;n.setBox({x:j-m,y:g-m,width:m*2,height:m*2});c.canvas[ga](p);return n};var u=function(c,j,g,m,p){return p?a.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",c+p,j,g-p*2,p,-p,m-p*2,p*2-g,p*2-m):a.format("M{0},{1}l{2},0,0,{3},{4},0z",c,j,g,
m,-g)};Cb=function(c,j,g,m,p,n){var s=u(j,g,m,p,n);c=c.path(s);var t=c.attrs;c.X=t.x=j;c.Y=t.y=g;c.W=t.width=m;c.H=t.height=p;t.r=n;t.path=s;c.type="rect";return c};Db=function(c,j,g,m,p){var n=D("group"),s=D("oval");n.style.cssText="position:absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px";n.coordsize=b;n.coordorigin=c.coordorigin;n[ga](s);s=new fa(s,n,c);s.type="ellipse";db(s,{stroke:"#000"});s.attrs.cx=j;s.attrs.cy=g;s.attrs.rx=m;s.attrs.ry=p;s.setBox({x:j-m,y:g-p,width:m*2,height:p*
2});c.canvas[ga](n);return s};Eb=function(c,j,g,m,p,n){var s=D("group"),t=D("image");s.style.cssText="position:absolute;left:0;top:0;width:"+c.width+"px;height:"+c.height+"px";s.coordsize=b;s.coordorigin=c.coordorigin;t.src=j;s[ga](t);t=new fa(t,s,c);t.type="image";t.attrs.src=j;t.attrs.x=g;t.attrs.y=m;t.attrs.w=p;t.attrs.h=n;t.setBox({x:g,y:m,width:p,height:n});c.canvas[ga](s);return t};Fb=function(c,j,g,m){var p=D("group"),n=D("shape"),s=n.style,t=D("path"),z=D("textpath");p.style.cssText="position:absolute;left:0;top:0;width:"+
c.width+"px;height:"+c.height+"px";p.coordsize=b;p.coordorigin=c.coordorigin;t.v=a.format("m{0},{1}l{2},{1}",Da(j*10),Da(g*10),Da(j*10)+1);t.textpathok=true;s.width=c.width;s.height=c.height;z.string=xa(m);z.on=true;n[ga](z);n[ga](t);p[ga](n);s=new fa(z,p,c);s.shape=n;s.textpath=t;s.type="text";s.attrs.text=m;s.attrs.x=j;s.attrs.y=g;s.attrs.w=1;s.attrs.h=1;db(s,{font:bb.font,stroke:"none",fill:"#000"});s.setBox();c.canvas[ga](p);return s};rb=function(c,j){var g=this.canvas.style;c==+c&&(c+="px");
j==+j&&(j+="px");g.width=c;g.height=j;g.clip="rect(0 "+c+" "+j+" 0)";return this};var D;wa.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!wa.namespaces.rvml&&wa.namespaces.add("rvml","urn:schemas-microsoft-com:vml");D=function(c){return wa.createElement("<rvml:"+c+' class="rvml">')}}catch(F){D=function(c){return wa.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}xb=function(){var c=H[Ha](0,arguments),j=c.container,g=c.height,m=c.width,p=c.x;c=c.y;
if(!j)throw Error("VML container not found.");var n=new e,s=n.canvas=wa.createElement("div"),t=s.style;p=p||0;c=c||0;m=m||512;g=g||342;m==+m&&(m+="px");g==+g&&(g+="px");n.width=1E3;n.height=1E3;n.coordsize=1E4+Ia+1E4;n.coordorigin="0 0";n.span=wa.createElement("span");n.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";s[ga](n.span);t.cssText=a.format("width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",
m,g);if(j==1){wa.body[ga](s);t.left=p+"px";t.top=c+"px";t.position="absolute"}else j.firstChild?j.insertBefore(s,j.firstChild):j[ga](s);I.call(n,n,a.fn);return n};e[W].clear=function(){this.canvas.innerHTML=qa;this.span=wa.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[ga](this.span);this.bottom=this.top=null};e[W].remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var c in this)this[c]=
ba(c);return true}}e[W].safari=/^Apple|^Google/.test(ra.navigator.vendor)&&(!(ra.navigator.userAgent.indexOf("Version/4.0")+1)||ra.navigator.platform.slice(0,2)=="iP")?function(){var c=this.rect(-99,-99,this.width+99,this.height+99);ra.setTimeout(function(){c.remove()})}:function(){};var O=function(){if(wa.addEventListener)return function(c,j,g,m){function p(s){if(gb&&Za[ka](j))for(var t=0,z=s.targetTouches&&s.targetTouches.length;t<z;t++)if(s.targetTouches[t].target==c){z=s;s=s.targetTouches[t];
s.originalEvent=z;s.preventDefault=na;s.stopPropagation=Pa;break}return g.call(m,s)}var n=gb&&Za[j]?Za[j]:j;c.addEventListener(n,p,false);return function(){c.removeEventListener(n,p,false);return true}};else if(wa.attachEvent)return function(c,j,g,m){function p(n){n=n||ra.event;n.preventDefault=n.preventDefault||Q;n.stopPropagation=n.stopPropagation||Aa;return g.call(m,n)}c.attachEvent("on"+j,p);return function(){c.detachEvent("on"+j,p);return true}}}();for(Xa=hb[V];Xa--;)(function(c){a[c]=fa[W][c]=
function(j){if(a.is(j,"function")){this.events=this.events||[];this.events.push({name:c,f:j,unbind:O(this.shape||this.node||wa,c,j,this)})}return this};a["un"+c]=fa[W]["un"+c]=function(j){for(var g=this.events,m=g[V];m--;)if(g[m].name==c&&g[m].f==j){g[m].unbind();g.splice(m,1);!g.length&&delete this.events;return this}return this}})(hb[Xa]);fa[W].hover=function(c,j){return this.mouseover(c).mouseout(j)};fa[W].unhover=function(c,j){return this.unmouseover(c).unmouseout(j)};fa[W].drag=function(c,j,
g){function m(s){var t=s.clientX,z=s.clientY;if(gb)for(var A=s.touches.length,G;A--;){G=s.touches[A];if(G.identifier==n._drag.id){t=G.clientX;z=G.clientY;(s.originalEvent?s.originalEvent:s).preventDefault();break}}else s.preventDefault();c&&c.call(n,t-n._drag.x,z-n._drag.y,t,z)}function p(){n._drag={};Raphael.unmousemove(m).unmouseup(p);g&&g.call(n)}this._drag={};var n=this.mousedown(function(s){(s.originalEvent?s.originalEvent:s).preventDefault();this._drag.x=s.clientX;this._drag.y=s.clientY;this._drag.id=
s.identifier;j&&j.call(this,s.clientX,s.clientY);Raphael.mousemove(m).mouseup(p)});return this};e[W].circle=function(c,j,g){return qb(this,c||0,j||0,g||0)};e[W].rect=function(c,j,g,m,p){return Cb(this,c||0,j||0,g||0,m||0,p||0)};e[W].ellipse=function(c,j,g,m){return Db(this,c||0,j||0,g||0,m||0)};e[W].path=function(c){c&&!a.is(c,Sa)&&!a.is(c[0],Ra)&&(c+=qa);return pb(a.format[Ha](a,arguments),this)};e[W].image=function(c,j,g,m,p){return Eb(this,c||"about:blank",j||0,g||0,m||0,p||0)};e[W].text=function(c,
j,g){return Fb(this,c||0,j||0,g||qa)};e[W].set=function(c){arguments[V]>1&&(c=Array[W].splice.call(arguments,0,arguments[V]));return new ua(c)};e[W].setSize=rb;e[W].top=e[W].bottom=null;e[W].raphael=a;fa[W].resetScale=function(){if(this.removed)return this;this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};fa[W].scale=function(c,j,g,m){if(this.removed)return this;if(c==null&&j==null)return{x:this._.sx,y:this._.sy,toString:Fa};j=j||c;!+j&&(j=c);var p,n,s=this.attrs;if(c!=0){var t=this.getBBox(),z=t.x+
t.width/2,A=t.y+t.height/2;p=c/this._.sx;n=j/this._.sy;g=+g||g==0?g:z;m=+m||m==0?m:A;t=~~(c/ea.abs(c));var G=~~(j/ea.abs(j)),T=this.node.style,aa=g+(z-g)*p;A=m+(A-m)*n;switch(this.type){case "rect":case "image":var X=s.width*t*p,K=s.height*G*n;this.attr({height:K,r:s.r*za(t*p,G*n),width:X,x:aa-X/2,y:A-K/2});break;case "circle":case "ellipse":this.attr({rx:s.rx*t*p,ry:s.ry*G*n,r:s.r*za(t*p,G*n),cx:aa,cy:A});break;case "text":this.attr({x:aa,y:A});break;case "path":z=vb(s.path);for(var ca=true,Qa=0,
ya=z[V];Qa<ya;Qa++){var ma=z[Qa],Ta=fb.call(ma[0]);if(!(Ta=="M"&&ca)){ca=false;if(Ta=="A"){ma[z[Qa][V]-2]*=p;ma[z[Qa][V]-1]*=n;ma[1]*=t*p;ma[2]*=G*n;ma[5]=+!(t+G?!+ma[5]:+ma[5])}else if(Ta=="H"){Ta=1;for(var jb=ma[V];Ta<jb;Ta++)ma[Ta]*=p}else if(Ta=="V"){Ta=1;for(jb=ma[V];Ta<jb;Ta++)ma[Ta]*=n}else{Ta=1;for(jb=ma[V];Ta<jb;Ta++)ma[Ta]*=Ta%2?p:n}}}n=nb(z);p=aa-n.x-n.width/2;n=A-n.y-n.height/2;z[0][1]+=p;z[0][2]+=n;this.attr({path:z});break}if(this.type in{text:1,image:1}&&(t!=1||G!=1))if(this.transformations){this.transformations[2]=
"scale("[Ma](t,",",G,")");this.node.setAttribute("transform",this.transformations[Na](Ia));p=t==-1?-s.x-(X||0):s.x;n=G==-1?-s.y-(K||0):s.y;this.attr({x:p,y:n});s.fx=t-1;s.fy=G-1}else{this.node.filterMatrix=" progid:DXImageTransform.Microsoft"+".Matrix(M11="[Ma](t,", M12=0, M21=0, M22=",G,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");T.filter=(this.node.filterMatrix||qa)+(this.node.filterOpacity||qa)}else if(this.transformations){this.transformations[2]=qa;this.node.setAttribute("transform",
this.transformations[Na](Ia));s.fx=0;s.fy=0}else{this.node.filterMatrix=qa;T.filter=(this.node.filterMatrix||qa)+(this.node.filterOpacity||qa)}s.scale=[c,j,g,m][Na](Ia);this._.sx=c;this._.sy=j}return this};fa[W].clone=function(){if(this.removed)return null;var c=this.attr();delete c.scale;delete c.translation;return this.paper[this.type]().attr(c)};var N=o(function(c,j,g,m,p,n,s,t,z){for(var A=0,G,T=0;T<1.001;T+=0.0010){var aa=a.findDotsAtSegment(c,j,g,m,p,n,s,t,T);T&&(A+=U(U(G.x-aa.x,2)+U(G.y-aa.y,
2),0.5));if(A>=z)return aa;G=aa}}),P=o(function(c,j,g,m,p,n,s,t){for(var z={x:0,y:0},A=0,G=0;G<1.01;G+=0.01){var T=E(c,j,g,m,p,n,s,t,G);G&&(A+=U(U(z.x-T.x,2)+U(z.y-T.y,2),0.5));z=T}return A}),Z=La(1),la=La(),Ca=La(0,1);fa[W].getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Z(this.attrs.path)}};fa[W].getPointAtLength=function(c){if(this.type=="path")return la(this.attrs.path,c)};fa[W].getSubpath=function(c,j){if(this.type=="path"){if(ea.abs(this.getTotalLength()-
j)<1.0E-6)return Ca(this.attrs.path,c).end;j=Ca(this.attrs.path,j,1);return c?Ca(j,c).end:j}};a.easing_formulas={linear:function(c){return c},"<":function(c){return U(c,3)},">":function(c){return U(c-1,3)+1},"<>":function(c){c*=2;if(c<1)return U(c,3)/2;c-=2;return(U(c,3)+2)/2},backIn:function(c){return c*c*(2.70158*c-1.70158)},backOut:function(c){c-=1;return c*c*(2.70158*c+1.70158)+1},elastic:function(c){if(c==0||c==1)return c;return U(2,-10*c)*ea.sin((c-0.075)*2*ea.PI/0.3)+1},bounce:function(c){if(c<
1/2.75)c=7.5625*c*c;else if(c<2/2.75){c-=1.5/2.75;c=7.5625*c*c+0.75}else if(c<2.5/2.75){c-=2.25/2.75;c=7.5625*c*c+0.9375}else{c-=2.625/2.75;c=7.5625*c*c+0.984375}return c}};var va={length:0};fa[W].animateWith=function(c,j,g,m,p){va[c.id]&&(j.start=va[c.id].start);return this.animate(j,g,m,p)};fa[W].animateAlong=sa();fa[W].animateAlongBack=sa(1);fa[W].onAnimation=function(c){this._run=c||0;return this};fa[W].animate=function(c,j,g,m){if(a.is(g,"function")||!g)m=g||null;var p={},n={},s={};for(var t in c)if(c[ka](t))if(eb[ka](t)){p[t]=
this.attr(t);p[t]==null&&(p[t]=bb[t]);n[t]=c[t];switch(eb[t]){case "along":var z=Z(c[t]),A=la(c[t],z*!!c.back),G=this.getBBox();s[t]=z/j;s.tx=G.x;s.ty=G.y;s.sx=A.x;s.sy=A.y;n.rot=c.rot;n.back=c.back;n.len=z;c.rot&&(s.r=ja(this.rotate())||0);break;case J:s[t]=(n[t]-p[t])/j;break;case "colour":p[t]=a.getRGB(p[t]);z=a.getRGB(n[t]);s[t]={r:(z.r-p[t].r)/j,g:(z.g-p[t].g)/j,b:(z.b-p[t].b)/j};break;case "path":z=ob(p[t],n[t]);p[t]=z[0];A=z[1];s[t]=[];z=0;for(G=p[t][V];z<G;z++){s[t][z]=[0];for(var T=1,aa=
p[t][z][V];T<aa;T++)s[t][z][T]=(A[z][T]-p[t][z][T])/j}break;case "csv":A=xa(c[t])[Ga](pa);z=xa(p[t])[Ga](pa);switch(t){case "translation":p[t]=[0,0];s[t]=[A[0]/j,A[1]/j];break;case "rotation":p[t]=z[1]==A[1]&&z[2]==A[2]?z:[0,A[1],A[2]];s[t]=[(A[0]-p[t][0])/j,0,0];break;case "scale":c[t]=A;p[t]=xa(p[t])[Ga](pa);s[t]=[(A[0]-p[t][0])/j,(A[1]-p[t][1])/j,0,0];break;case "clip-rect":p[t]=xa(p[t])[Ga](pa);s[t]=[];for(z=4;z--;)s[t][z]=(A[z]-p[t][z])/j;break}n[t]=A}}this.stop();this.in_animation=1;va[this.id]=
{start:c.start||+new Date,ms:j,easing:g,from:p,diff:s,to:n,el:this,callback:m,t:{x:0,y:0}};++va[V]==1&&ta();return this};fa[W].stop=function(){va[this.id]&&va[V]--;delete va[this.id];return this};fa[W].translate=function(c,j){return this.attr({translation:c+" "+j})};fa[W][ia]=function(){return"Rapha\u00ebl\u2019s object"};a.ae=va;ua[W][da]=function(){for(var c,j,g=0,m=arguments[V];g<m;g++)if((c=arguments[g])&&(c.constructor==fa||c.constructor==ua)){j=this.items[V];this[j]=this.items[j]=c;this[V]++}return this};
ua[W].pop=function(){delete this[this[V]--];return this.items.pop()};for(var Ja in fa[W])if(fa[W][ka](Ja))ua[W][Ja]=function(c){return function(){for(var j=0,g=this.items[V];j<g;j++)this.items[j][c][Ha](this.items[j],arguments);return this}}(Ja);ua[W].attr=function(c,j){if(c&&a.is(c,Ra)&&a.is(c[0],"object")){j=0;for(var g=c[V];j<g;j++)this.items[j].attr(c[j])}else{g=0;for(var m=this.items[V];g<m;g++)this.items[g].attr(c,j)}return this};ua[W].animate=function(c,j,g,m){(a.is(g,"function")||!g)&&(m=
g||null);var p=this.items[V],n=p,s,t=this,z;m&&(z=function(){!--p&&m.call(t)});g=a.is(g,Sa)?g:z;for(s=this.items[--n].animate(c,j,g,z);n--;)this.items[n].animateWith(s,c,j,g,z);return this};ua[W].insertAfter=function(c){for(var j=this.items[V];j--;)this.items[j].insertAfter(c);return this};ua[W].getBBox=function(){for(var c=[],j=[],g=[],m=[],p=this.items[V];p--;){var n=this.items[p].getBBox();c[da](n.x);j[da](n.y);g[da](n.x+n.width);m[da](n.y+n.height)}c=za[Ha](0,c);j=za[Ha](0,j);return{x:c,y:j,width:Wa[Ha](0,
g)-c,height:Wa[Ha](0,m)-j}};ua[W].clone=function(c){c=new ua;for(var j=0,g=this.items[V];j<g;j++)c[da](this.items[j].clone());return c};a.registerFont=function(c){if(!c.face)return c;this.fonts=this.fonts||{};var j={w:c.w,face:{},glyphs:{}},g=c.face["font-family"];for(var m in c.face)if(c.face[ka](m))j.face[m]=c.face[m];if(this.fonts[g])this.fonts[g][da](j);else this.fonts[g]=[j];if(!c.svg){j.face["units-per-em"]=ab(c.face["units-per-em"],10);for(var p in c.glyphs)if(c.glyphs[ka](p)){g=c.glyphs[p];
j.glyphs[p]={w:g.w,k:{},d:g.d&&"M"+g.d[Ka](/[mlcxtrv]/g,function(s){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[s]||"M"})+"z"};if(g.k)for(var n in g.k)if(g[ka](n))j.glyphs[p].k[n]=g.k[n]}}return c};e[W].getFont=function(c,j,g,m){m=m||"normal";g=g||"normal";j=+j||{normal:400,bold:700,lighter:300,bolder:800}[j]||400;if(a.fonts){var p=a.fonts[c];if(!p){c=RegExp("(^|\\s)"+c[Ka](/[^\w\d\s+!~.:_-]/g,qa)+"(\\s|$)","i");for(var n in a.fonts)if(a.fonts[ka](n))if(c.test(n)){p=a.fonts[n];break}}var s;if(p){n=
0;for(c=p[V];n<c;n++){s=p[n];if(s.face["font-weight"]==j&&(s.face["font-style"]==g||!s.face["font-style"])&&s.face["font-stretch"]==m)break}}return s}};e[W].print=function(c,j,g,m,p,n){n=n||"middle";var s=this.set(),t=xa(g)[Ga](qa),z=0;a.is(m,g)&&(m=this.getFont(m));if(m){g=(p||16)/m.face["units-per-em"];var A=m.face.bbox.split(pa);p=+A[0];n=+A[1]+(n=="baseline"?A[3]-A[1]+ +m.face.descent:(A[3]-A[1])/2);A=0;for(var G=t[V];A<G;A++){var T=A&&m.glyphs[t[A-1]]||{},aa=m.glyphs[t[A]];z+=A?(T.w||m.w)+(T.k&&
T.k[t[A]]||0):0;aa&&aa.d&&s[da](this.path(aa.d).attr({fill:"#000",stroke:"none",translation:[z,0]}))}s.scale(g,g,p,n).translate(c-p,j-n)}return s};var $a=/\{(\d+)\}/g;a.format=function(c,j){var g=a.is(j,Ra)?[0][Ma](j):arguments;c&&a.is(c,Sa)&&g[V]-1&&(c=c[Ka]($a,function(m,p){return g[++p]==null?qa:g[p]}));return c||qa};a.ninja=function(){Va.was?Raphael=Va.is:delete Raphael;return a};a.el=fa[W];return a}();(function(a,e){function f(U,da){U=U?' id="'+ba+U+'"':"";return a("<div"+U+(da?' style="'+da+'"':"")+"/>")}function h(U,da){da=da===S?Va.width():Va.height();return typeof U==="string"?Math.round(U.match(/%/)?da/100*parseInt(U,10):parseInt(U,10)):U}function r(U){U=a.isFunction(U)?U.call(ea):U;return J.photo||U.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i)}function o(){for(var U in J)if(a.isFunction(J[U])&&U.substring(0,2)!==L)J[U]=J[U].call(ea);J.rel=J.rel||ea.rel||M;J.href=J.href||a(ea).attr("href");
J.title=J.title||ea.title}function y(U){ea=U;J=a.extend({},a(ea).data(Y));o();if(J.rel!==M){ra=a("."+ib).filter(function(){return(a(this).data(Y).rel||this.rel)===J.rel});za=ra.index(ea);if(za===-1){ra=ra.add(ea);za=ra.length-1}}else{ra=a(ea);za=0}if(!Sa){Sa=Ra=I;Wa=ea;try{Wa.blur()}catch(da){}a.event.trigger(Q);J.onOpen&&J.onOpen.call(ea);Ba.css({opacity:+J.opacity,cursor:J.overlayClose?"pointer":H}).show();J.w=h(J.initialWidth,S);J.h=h(J.initialHeight,E);ia.position(0);ta&&Va.bind(C+oa+" scroll."+
oa,function(){Ba.css({width:Va.width(),height:Va.height(),top:Va.scrollTop(),left:Va.scrollLeft()})}).trigger("scroll."+oa)}qa.add(Ga).add(xa).add(Ia).add(gb).hide();hb.html(J.close).show();ia.slideshow();ia.load()}var B="click",C="resize.",E="y",H="auto",I=true,M="nofollow",L="on",S="x",l={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:I,scrolling:I,inline:false,html:false,
iframe:false,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:I,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,loop:I,slideshow:false,slideshowAuto:I,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:I,escKey:I,arrowKey:I},Y="colorbox",ba="cbox",Q=ba+"_open",na=ba+"_load",Aa=ba+"_complete",Pa=ba+"_cleanup",Fa=ba+
"_closed",La=a.browser.msie&&!a.support.opacity,ta=La&&a.browser.version<7,oa=ba+"_IE6",Ba,sa,ua,pa,Ya,W,ka,wa,ra,Va,ga,Ha,Ma,gb,qa,Ia,xa,Ga,hb,Za,Na,V,Ua,ea,Wa,za,J,Sa,Ra,ia,ib=ba+"Element";ia=a.fn[Y]=a[Y]=function(U,da){var Ea=this;if(!Ea[0]&&Ea.selector)return Ea;U=U||{};if(da)U.onComplete=da;if(!Ea[0]||Ea.selector===undefined){Ea=a("<a/>");U.open=I}Ea.each(function(){a(this).data(Y,a.extend({},a(this).data(Y)||l,U)).addClass(ib)});U.open&&y(Ea[0]);return Ea};ia.init=function(){Va=a(e);sa=f().attr({id:Y,
"class":La?ba+"IE":""});Ba=f("Overlay",ta?"position:absolute":"").hide();ua=f("Wrapper");pa=f("Content").append(ga=f("LoadedContent","width:0; height:0"),Ma=f("LoadingOverlay").add(f("LoadingGraphic")),gb=f("Title"),qa=f("Current"),xa=f("Next"),Ga=f("Previous"),Ia=f("Slideshow"),hb=f("Close"));ua.append(f().append(f("TopLeft"),Ya=f("TopCenter"),f("TopRight")),f().append(W=f("MiddleLeft"),pa,ka=f("MiddleRight")),f().append(f("BottomLeft"),wa=f("BottomCenter"),f("BottomRight"))).children().children().css({"float":"left"});
Ha=f(false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(Ba,sa.append(ua,Ha));pa.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");Za=Ya.height()+wa.height()+pa.outerHeight(I)-pa.height();Na=W.width()+ka.width()+pa.outerWidth(I)-pa.width();V=ga.outerHeight(I);Ua=ga.outerWidth(I);sa.css({"padding-bottom":Za,"padding-right":Na}).hide();xa.click(ia.next);Ga.click(ia.prev);hb.click(ia.close);pa.children().removeClass("hover");
a("."+ib).live(B,function(U){if(U.button!==0&&typeof U.button!=="undefined"||U.ctrlKey||U.shiftKey||U.altKey)return I;else{y(this);return false}});Ba.click(function(){J.overlayClose&&ia.close()});a(document).bind("keydown",function(U){if(Sa&&J.escKey&&U.keyCode===27){U.preventDefault();ia.close()}if(Sa&&J.arrowKey&&!Ra&&ra[1])if(U.keyCode===37&&(za||J.loop)){U.preventDefault();Ga.click()}else if(U.keyCode===39&&(za<ra.length-1||J.loop)){U.preventDefault();xa.click()}})};ia.remove=function(){sa.add(Ba).remove();
a("."+ib).die(B).removeData(Y).removeClass(ib)};ia.position=function(U,da){function Ea(ja){Ya[0].style.width=wa[0].style.width=pa[0].style.width=ja.style.width;Ma[0].style.height=Ma[1].style.height=pa[0].style.height=W[0].style.height=ka[0].style.height=ja.style.height}var Oa,cb=Math.max(Va.height()-J.h-V-Za,0)/2+Va.scrollTop(),Da=Math.max(Va.width()-J.w-Ua-Na,0)/2+Va.scrollLeft();Oa=sa.width()===J.w+Ua&&sa.height()===J.h+V?0:U;ua[0].style.width=ua[0].style.height="9999px";sa.dequeue().animate({width:J.w+
Ua,height:J.h+V,top:cb,left:Da},{duration:Oa,complete:function(){Ea(this);Ra=false;ua[0].style.width=J.w+Ua+Na+"px";ua[0].style.height=J.h+V+Za+"px";da&&da()},step:function(){Ea(this)}})};ia.resize=function(U){if(Sa){U=U||{};if(U.width)J.w=h(U.width,S)-Ua-Na;if(U.innerWidth)J.w=h(U.innerWidth,S);ga.css({width:J.w});if(U.height)J.h=h(U.height,E)-V-Za;if(U.innerHeight)J.h=h(U.innerHeight,E);if(!U.innerHeight&&!U.height){U=ga.wrapInner("<div style='overflow:auto'></div>").children();J.h=U.height();U.replaceWith(U.children())}ga.css({height:J.h});
ia.position(J.transition==="none"?0:J.speed)}};ia.prep=function(U){function da(cb){var Da,ja,ab,fb,bb=ra.length,eb=J.loop;ia.position(cb,function(){function Ka(){La&&sa[0].style.removeAttribute("filter")}if(Sa){La&&Ea&&ga.fadeIn(100);J.iframe&&a("<iframe frameborder=0"+(J.scrolling?"":" scrolling='no'")+(La?" allowtransparency='true'":"")+"/>").appendTo(ga).attr({src:J.href,name:(new Date).getTime()});ga.show();gb.show().html(J.title);if(bb>1){qa.html(J.current.replace(/\{current\}/,za+1).replace(/\{total\}/,
bb)).show();xa[eb||za<bb-1?"show":"hide"]().html(J.next);Ga[eb||za?"show":"hide"]().html(J.previous);Da=za?ra[za-1]:ra[bb-1];ab=za<bb-1?ra[za+1]:ra[0];if(J.slideshow){Ia.show();za===bb-1&&!eb&&sa.is("."+ba+"Slideshow_on")&&Ia.click()}if(J.preloading){fb=a(ab).data(Y).href||ab.href;ja=a(Da).data(Y).href||Da.href;if(r(fb))a("<img/>")[0].src=fb;if(r(ja))a("<img/>")[0].src=ja}}Ma.hide();J.transition==="fade"?sa.fadeTo(Oa,1,function(){Ka()}):Ka();Va.bind(C+ba,function(){ia.position(0)});a.event.trigger(Aa);
J.onComplete&&J.onComplete.call(ea)}})}if(Sa){var Ea,Oa=J.transition==="none"?0:J.speed;Va.unbind(C+ba);ga.remove();ga=f("LoadedContent").html(U);ga.hide().appendTo(Ha.show()).css({width:function(){J.w=J.w||ga.width();J.w=J.mw&&J.mw<J.w?J.mw:J.w;return J.w}(),overflow:J.scrolling?H:"hidden"}).css({height:function(){J.h=J.h||ga.height();J.h=J.mh&&J.mh<J.h?J.mh:J.h;return J.h}()}).prependTo(pa);Ha.hide();a("#"+ba+"Photo").css({cssFloat:"none"});ta&&a("select").not(sa.find("select")).filter(function(){return this.style.visibility!==
"hidden"}).css({visibility:"hidden"}).one(Pa,function(){this.style.visibility="inherit"});J.transition==="fade"?sa.fadeTo(Oa,0,function(){da(0)}):da(Oa)}};ia.load=function(){var U,da,Ea,Oa=ia.prep;Ra=I;ea=ra[za];J=a.extend({},a(ea).data(Y));o();a.event.trigger(na);J.onLoad&&J.onLoad.call(ea);J.h=J.height?h(J.height,E)-V-Za:J.innerHeight&&h(J.innerHeight,E);J.w=J.width?h(J.width,S)-Ua-Na:J.innerWidth&&h(J.innerWidth,S);J.mw=J.w;J.mh=J.h;if(J.maxWidth){J.mw=h(J.maxWidth,S)-Ua-Na;J.mw=J.w&&J.w<J.mw?
J.w:J.mw}if(J.maxHeight){J.mh=h(J.maxHeight,E)-V-Za;J.mh=J.h&&J.h<J.mh?J.h:J.mh}U=J.href;Ma.show();if(J.inline){f("InlineTemp").hide().insertBefore(a(U)[0]).bind(na+" "+Pa,function(){a(this).replaceWith(ga.children())});Oa(a(U))}else if(J.iframe)Oa(" ");else if(J.html)Oa(J.html);else if(r(U)){da=new Image;da.onload=function(){var cb;da.onload=null;da.id=ba+"Photo";a(da).css({margin:H,border:"none",display:"block",cssFloat:"left"});if(J.scalePhotos){Ea=function(){da.height-=da.height*cb;da.width-=
da.width*cb};if(J.mw&&da.width>J.mw){cb=(da.width-J.mw)/da.width;Ea()}if(J.mh&&da.height>J.mh){cb=(da.height-J.mh)/da.height;Ea()}}if(J.h)da.style.marginTop=Math.max(J.h-da.height,0)/2+"px";setTimeout(function(){Oa(da)},1);ra[1]&&(za<ra.length-1||J.loop)&&a(da).css({cursor:"pointer"}).click(ia.next);if(La)da.style.msInterpolationMode="bicubic"};da.src=U}else f().appendTo(Ha).load(U,function(cb,Da,ja){Oa(Da==="error"?"Request unsuccessful: "+ja.statusText:this)})};ia.next=function(){if(!Ra){za=za<
ra.length-1?za+1:0;ia.load()}};ia.prev=function(){if(!Ra){za=za?za-1:ra.length-1;ia.load()}};ia.slideshow=function(){function U(){Ia.text(J.slideshowStop).bind(Aa,function(){Ea=setTimeout(ia.next,J.slideshowSpeed)}).bind(na,function(){clearTimeout(Ea)}).one(B,function(){da()});sa.removeClass(Oa+"off").addClass(Oa+L)}var da,Ea,Oa=ba+"Slideshow_";Ia.bind(Fa,function(){Ia.unbind();clearTimeout(Ea);sa.removeClass(Oa+"off "+Oa+L)});da=function(){clearTimeout(Ea);Ia.text(J.slideshowStart).unbind(Aa+" "+
na).one(B,function(){U();Ea=setTimeout(ia.next,J.slideshowSpeed)});sa.removeClass(Oa+L).addClass(Oa+"off")};if(J.slideshow&&ra[1])J.slideshowAuto?U():da()};ia.close=function(){if(Sa){Sa=false;a.event.trigger(Pa);J.onCleanup&&J.onCleanup.call(ea);Va.unbind("."+ba+" ."+oa);Ba.fadeTo("fast",0);sa.stop().fadeTo("fast",0,function(){sa.find("iframe").attr("src","about:blank");ga.remove();sa.add(Ba).css({opacity:1,cursor:H}).hide();try{Wa.focus()}catch(U){}setTimeout(function(){a.event.trigger(Fa);J.onClosed&&
J.onClosed.call(ea)},1)})}};ia.element=function(){return a(ea)};ia.settings=l;a(ia.init)})(jQuery,this);jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyInit:function(a){jQuery.historyCallback=a;a=location.hash.replace(/\?.*$/,"");jQuery.historyCurrentHash=a;if(jQuery.browser.msie&&jQuery.browser.version<8){if(jQuery.historyCurrentHash=="")jQuery.historyCurrentHash="#";jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"></iframe>');var e=jQuery("#jQuery_history")[0].contentWindow.document;e.open();e.close();e.location.hash=a}else if(jQuery.browser.safari){jQuery.historyBackStack=
[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.isFirst=true}jQuery.historyCallback(a.replace(/^#/,""));setInterval(jQuery.historyCheck,100)},historyAddHistory:function(a){jQuery.historyBackStack.push(a);jQuery.historyForwardStack.length=0;this.isFirst=true},historyCheck:function(){if(jQuery.browser.msie&&jQuery.browser.version<8){var a=jQuery("#jQuery_history")[0];a=(a.contentDocument||a.contentWindow.document).location.hash.replace(/\?.*$/,"");if(a!=jQuery.historyCurrentHash){location.hash=
a;jQuery.historyCurrentHash=a;jQuery.historyCallback(a.replace(/^#/,""))}}else if(jQuery.browser.safari){if(!jQuery.dontCheck)if(a=history.length-jQuery.historyBackStack.length){jQuery.isFirst=false;if(a<0)for(var e=0;e<Math.abs(a);e++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());else for(e=0;e<a;e++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());a=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(a!=undefined){jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,
"");jQuery.historyCallback(a)}}else if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){document.URL.indexOf("#")>=0?jQuery.historyCallback(document.URL.split("#")[1]):jQuery.historyCallback("");jQuery.isFirst=true}}else{a=location.hash.replace(/\?.*$/,"");if(a!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=a;jQuery.historyCallback(a.replace(/^#/,""))}}},historyLoad:function(a){var e;a=a.replace(/\?.*$/,"");if(jQuery.browser.safari)e=a;else{e="#"+a;location.hash=
e}jQuery.historyCurrentHash=e;if(jQuery.browser.msie&&jQuery.browser.version<8){var f=jQuery("#jQuery_history")[0].contentWindow.document;f.open();f.close();f.location.hash=e;jQuery.historyCallback(a)}else if(jQuery.browser.safari){jQuery.dontCheck=true;this.historyAddHistory(a);window.setTimeout(function(){jQuery.dontCheck=false},200);jQuery.historyCallback(a);location.hash=e}else jQuery.historyCallback(a)}});var stage=[window.screenX,window.screenY,window.innerWidth,window.innerHeight],res_current=-1,res={multiplier:[1,1.4],name:["sd","hd"],cssFile:["assets/css/ftm-sd.css","assets/css/ftm-hd.css"],gaugeIndicatorNeedleSrc:["assets/img/sd/pressure-display-pointer-sd.png","assets/img/hd/pressure-display-pointer-hd.png"],spawnY:[-215,-280],bubbleSizeMax:[200,300],bubbleSizeMin:[130,190],avatarLeft:["-22%","-22%"],avatarTop:["20px","20px"],maxBubbles:[8,10],logoWidth:[220,310]};getBrowserDimensions();
var version="",worldAABB,world,iterations=1,time_step=1/30,walls=[],wall_thickness=200,wallsSetted=false,bodies=[],elements=[],text,bubble_wrapper,search_query="",PI2=Math.PI*2,gravity_y=-50,gravity_y_inverted=150,gauge_max_minutes=20,spawn_y_impulse=-15,spawn_y_impulse_inverted=-400,spawn_y_impulse_current=spawn_y_impulse,interval_spawn,interval_loop,timeout_data_interval,timeout_data_interval_time=6E4,timeout_getcustomsearch,fresh_custom_search=true,debug=false,data_update_count=0,bubble_count=
0,lamp_time_on=1E3,pool=[],pool_index=0,pool_count_spawned=0,timeline_data,timeline_data_max_id=0,sb_timeline_step=0,search_data="",search_data_max_id=0,sb_clock_step=0,sb_clock_last=0,sb_ffdownloads_step=0,sb_ffdownloads_last=0,sb_ffdownloads_total=0,sb_followers_step=0,sb_followers_last=0,sb_followers_total=0,keywords,ds_type,ds_datetime,ds_datetime_description,ds_datetime_reached,ds_datetime_interval,ds_followers,ds_followers_description,ds_stats_retweets=0,ds_stats_facebook_shares=0,idleTimeout,
isIdle=true;function loadCSS(a){var e=document.createElement("link");e.href=a;e.rel="stylesheet";e.type="text/css";e.media="screen, projection";document.getElementsByTagName("head")[0].appendChild(e)}
$(document).ready(function(){$(window).resize(function(){getBrowserDimensions();setWalls()});loadCSS(res.cssFile[res_current]);init();play();timeout_data_interval=setInterval(getDataFromProxy,timeout_data_interval_time);$.historyInit(function(a){if(a){$("#search-input").val(decodeURIComponent(a.replace(/\+/g," ")));search()}});$("#flow-transposer a").click(function(){var a=$(this).parent();if(a.hasClass("up")){a.removeClass("up").addClass("down");pause()}else{a.removeClass("down").addClass("up");
play()}return false});$("#gravity-inverter a").click(function(){var a=$(this).parent();if(world.m_gravity.y==gravity_y){a.removeClass("up").addClass("down");world.m_gravity.y=gravity_y_inverted;spawn_y_impulse_current=spawn_y_impulse_inverted}else{a.removeClass("down").addClass("up");world.m_gravity.y=gravity_y;spawn_y_impulse_current=spawn_y_impulse}return false});$("form#search-box").submit(function(){search();$.historyLoad(encodeURIComponent(search_query));return false});$("a.colorbox").colorbox({width:"40%",
opacity:0.8,inline:true,href:"#colophon",title:" ",scrolling:false,onComplete:function(){$.colorbox.resize()}});$(this).mousemove(function(){isIdle=false;idleTimeout||(idleTimeout=setTimeout("setIdle()",3E3))});input_field_values=[];$("input").each(function(){input_field_values[$(this).attr("name")]=$(this).attr("value")}).focus(function(){input_field_values[$(this).attr("name")]==$(this).attr("value")&&$(this).attr("value","")}).blur(function(){$(this).attr("value")==""&&$(this).attr("value",input_field_values[$(this).attr("name")])})});
function setIdle(){clearTimeout(idleTimeout);idleTimeout=null;isIdle=true}function play(){interval_loop=setInterval(loop,25);interval_spwan=setInterval(spawn,4E3)}function pause(){clearInterval(interval_loop);clearInterval(interval_spwan)}
function init(){bubble_wrapper=document.getElementById("bubbles");worldAABB=new b2AABB;worldAABB.minVertex.Set(-200,0);worldAABB.maxVertex.Set(screen.width+200,screen.height+1E3);world=new b2World(worldAABB,new b2Vec2(0,0),false);world.m_gravity.y=gravity_y;setWalls()}
function calculateGauge(){if(search_data.length){var a=new Date(search_data[0].created_at),e=search_data.length<=10?new Date(search_data[search_data.length-1].created_at):new Date(search_data[9].created_at);a=Math.abs(a.getTime()-e.getTime())/6E4;degrees=a>gauge_max_minutes?2:180-a*180/gauge_max_minutes}else degrees=0;gaugeIndicatorNeedleMove(degrees)}
function getDataFromProxy(){$.getJSON("/proxy.php",function(a){if(a.status.http_code==200){data_update_count++;sb_clock_step=a.contents.special_bubbles.sb_clock_step;sb_ffdownloads_step=a.contents.special_bubbles.sb_ffdownloads_step;sb_ffdownloads_total=a.contents.special_bubbles.sb_ffdownloads_total;sb_followers_step=a.contents.special_bubbles.sb_followers_step;sb_timeline_step=a.contents.special_bubbles.sb_timeline_step;ds_type=a.contents.display.ds_type;ds_datetime=a.contents.display.ds_datetime;
ds_datetime_description=a.contents.display.ds_datetime_description;ds_datetime_reached=a.contents.display.ds_datetime_reached;ds_followers=a.contents.display.ds_followers;ds_followers_description=a.contents.display.ds_followers_description;ds_stats_facebook_shares=a.contents.display.ds_stats_facebook_shares;ds_stats_retweets=a.contents.display.ds_stats_retweets;keywords=a.contents.keywords;checkVersion(a.contents.version);if(a.contents.timeline.length){sb_followers_total=a.contents.timeline[0].user.followers_count;
timeline_data=a.contents.timeline;timeline_data.reverse()}else throwError("Twitter REST API down");if(search_query=="")if(a.contents.search_results.results){search_data=a.contents.search_results.results;process_search_result()}else throwError("Twitter Search API down");specialBubbleFFDownloadsCheck();specialBubbleFollowersCheck();updateStats();updateCountdown()}else throwError("Error (HTTP Code "+a.status.http_code+")");spawn()})}
function checkVersion(a){if(a!=version&&version!="")window.location=window.location;version=a}function search(){clearPool();$("#search-submit-bttn").addClass("loading");search_query=$("#search-input").val();fresh_custom_search=true;clearTimeout(timeout_getcustomsearch);getCustomSearch()}
function getCustomSearch(){search_query_encoded=encodeURIComponent(search_query);$.getJSON("http://search.twitter.com/search.json?callback=?&rpp=40&q="+search_query_encoded,function(a){if(a.results){search_data=a.results;process_search_result()}else throwError("Twitter Search API down");$("#search-submit-bttn").removeClass("loading")});timeout_getcustomsearch=setTimeout(getCustomSearch,3E5)}
function process_search_result(){calculateGauge();search_data.reverse();var a;for(a=0;a<search_data.length;a++){var e=search_data[a];if(e.id>search_data_max_id){pool.splice(pool_index,0,{type:"search",data:e});search_data_max_id=e.id}}if(search_query!=""&&fresh_custom_search){if(a==0)pool.splice(pool_index,0,{type:"search_presenter",data:{h1:"Sorry",p:"No results found"}});else{search_query_short='"'+friendlyTrim(search_query,16)+'"';pool.splice(pool_index,0,{type:"search_presenter",data:{h1:"Showing results for",
p:search_query_short}})}fresh_custom_search=false}}function clearPool(){pool_index=search_data_max_id=0;pool=[]}function friendlyTrim(a,e){var f=a.substr(0,e);if(a.length>e)f+="...";return f}
function updateCountdown(){var a;clearInterval(ds_datetime_interval);if(ds_type=="followers"){if(sb_followers_total>ds_followers){counter_dd=addCommas(sb_followers_total)+" followers";a="Previous milestone: "+addCommas(ds_followers)}else{counter_dd=addCommas(sb_followers_total)+" followers";a=addCommas(ds_followers-sb_followers_total)+" to reach "+addCommas(ds_followers)}$("#counter dd").text(counter_dd).attr("title",counter_dd)}else if(ds_type=="datetime"){a=ds_datetime_description;ds_datetime_interval=
setInterval(datetimeCountdown,1E3)}else a=counter_dd="";$("#counter dt").text(a).attr("title",a)}function updateStats(){$("dd.twitter-follow a").text(addCommas(sb_followers_total));$("dd.twitter-retweet a").text(addCommas(ds_stats_retweets));$("dd.fb-share a").text(addCommas(ds_stats_facebook_shares))}
function spawn(){if(pool.length!=0)if(!(bodies.length>=res.maxBubbles[res_current])){if(pool_index+1>pool.length)pool_index=0;createBubble(pool[pool_index].type,pool[pool_index].data);pool_count_spawned++;pool_index++;specialBubbleTimelineCheck()}}
function createBubble(a,e){var f=stage[2]/2,h=stage[3]+res.spawnY[res_current];bubble_count++;var r;turnLampOn();setTimeout(turnLampOff,lamp_time_on);var o=document.createElement("article");switch(a){case "search":o.className="bubble tweet vhigh";o.innerHTML=buildBubbleTweet(e);break;case "clock":o.className="bubble time";o.innerHTML=buildBubbleClock(e);pool.splice(pool_index,1);pool_index--;break;case "ffdownloads":o.className="bubble downloads";o.innerHTML=buildBubbleDownloads(e);pool.splice(pool_index,
1);pool_index--;break;case "followers":o.className="bubble followers";o.innerHTML=buildBubbleFollowers(e);pool.splice(pool_index,1);pool_index--;break;case "timeline":o.className="bubble tweet firefox vhigh";o.innerHTML=buildBubbleTweet(e);pool.splice(pool_index,1);pool_index--;break;case "error":o.className="bubble error";o.innerHTML=buildBubbleError(e);pool.splice(pool_index,1);pool_index--;break;case "search_presenter":o.className="bubble search";o.innerHTML=buildBubbleSearch(e);pool.splice(pool_index,
1);pool_index--;break}o.style.position="absolute";o.style.left="-600px";o.style.top="0px";o.id=bubble_count;jquery_element=$(o);$(bubble_wrapper).append(o);height=jquery_element.height();height_class=height<=150?"s":height<=200?"m":height<=250?"l":height<=300?"xl":"xxl";jquery_element.addClass(height_class);r=0.5*res.bubbleSizeMax[res_current]+0.5*height;if(r>res.bubbleSizeMax[res_current])r=res.bubbleSizeMax[res_current];if(r<res.bubbleSizeMin[res_current])r=res.bubbleSizeMin[res_current];o.width=
r;o.height=r;jquery_element.hover(function(){if(!isIdle){$(this).css({"z-index":"999"}).find("nav").fadeIn(20);bubble_left=Math.floor($(this).css("left").replace("px",""));bubble_top=Math.floor($(this).css("top").replace("px",""));bubble_left-res.logoWidth[res_current]<0&&bubble_top-150<0&&$("header").css({"z-index":"10"});for(var C=0;C<bodies.length;C++)if(bodies[C].m_userData.id==$(this).attr("id"))bodies[C].m_userData.hover=true}},function(){$(this).css({"z-index":"10"}).find("nav").fadeOut(100);
$("header").css({"z-index":"40"});for(var C=0;C<bodies.length;C++)if(bodies[C].m_userData.id==$(this).attr("id"))bodies[C].m_userData.hover=false});jquery_element.find("li.flip a").click(function(){$(this).parents(".bubble").find("p.text, header, section").toggleClass("hide");return false});$(bubble_wrapper).find(".avatar-wrapper").delay(500).animate({left:res.avatarLeft[res_current],top:res.avatarTop[res_current]},1E3);elements.push(o);var y=new b2BodyDef,B=new b2CircleDef;B.radius=r>>1;B.density=
1;B.friction=0.6;B.restitution=0.3;B.preventRotation=true;y.AddShape(B);y.userData={element:o,id:bubble_count,hover:false};y.position.Set(f,h);y.linearVelocity.Set(Math.random()*400-200,spawn_y_impulse_current);bodies.push(world.CreateBody(y))}
function setWalls(){if(wallsSetted){world.DestroyBody(walls[0]);world.DestroyBody(walls[1]);world.DestroyBody(walls[2]);world.DestroyBody(walls[3]);walls[0]=null;walls[1]=null;walls[2]=null;walls[3]=null}walls[0]=createBox(world,stage[2]/2,0,stage[2],10*res.multiplier[res_current]);walls[1]=createBox(world,stage[2]/2,stage[3],stage[2],100*res.multiplier[res_current]);walls[2]=createPoly(world,stage[2]/2+100*res.multiplier[res_current],stage[3]-330*res.multiplier[res_current],[[10*res.multiplier[res_current],
0],[40*res.multiplier[res_current],0],[110*res.multiplier[res_current],60*res.multiplier[res_current]],[110*res.multiplier[res_current],330*res.multiplier[res_current]],[0,330*res.multiplier[res_current]]],true);walls[3]=createPoly(world,stage[2]/2-210*res.multiplier[res_current],stage[3]-330*res.multiplier[res_current],[[70*res.multiplier[res_current],0],[100*res.multiplier[res_current],0],[110*res.multiplier[res_current],330*res.multiplier[res_current]],[0,330*res.multiplier[res_current]],[0,60*
res.multiplier[res_current]]],true);wallsSetted=true}function specialBubbleClockCheck(){if(sb_clock_step>0){var a=new Date;hours=a.getHours();minutes=a.getMinutes();seconds=a.getSeconds();if(minutes<10)minutes="0"+minutes;if(seconds==0&&minutes%sb_clock_step==0&&hours+"h"+minutes!=sb_clock_last){sb_clock_last=hours+"h"+minutes;pool.splice(pool_index,0,{type:"clock",data:sb_clock_last})}}}
function specialBubbleFFDownloadsCheck(){if(sb_ffdownloads_step>0){if(sb_ffdownloads_last==0)sb_ffdownloads_last=sb_ffdownloads_total;if(sb_ffdownloads_total>sb_ffdownloads_last&&Math.floor(sb_ffdownloads_total/sb_ffdownloads_step)>Math.floor(sb_ffdownloads_last/sb_ffdownloads_step)){sb_ffdownloads_last=sb_ffdownloads_total;pool.splice(pool_index,0,{type:"ffdownloads",data:addCommas(Math.floor(sb_ffdownloads_total/sb_ffdownloads_step)*sb_ffdownloads_step)})}}}
function specialBubbleFollowersCheck(){if(sb_followers_step>0){if(sb_followers_last==0)sb_followers_last=sb_followers_total;if(sb_followers_total>sb_followers_last&&Math.floor(sb_followers_total/sb_followers_step)>Math.floor(sb_followers_last/sb_followers_step)){sb_followers_last=sb_followers_total;pool.splice(pool_index,0,{type:"followers",data:addCommas(Math.floor(sb_followers_total/sb_followers_step)*sb_followers_step)})}}}
function specialBubbleTimelineCheck(){if(timeline_data)if(sb_timeline_step>0&&timeline_data.length>0)if(pool_count_spawned%sb_timeline_step==0||!search_data.length){for(var a=0,e=false;a<timeline_data.length&&!e;){var f=timeline_data[a];if(f.id>timeline_data_max_id){pool.splice(pool_index,0,{type:"timeline",data:f});timeline_data_max_id=f.id;e=true}a++}if(!e){timeline_data_max_id=0;specialBubbleTimelineCheck()}}}
function loop(){specialBubbleClockCheck();world.Step(time_step,iterations);for(i=0;i<bodies.length;i++){var a=bodies[i],e=elements[i];newLeft=a.m_position0.x-(e.width>>1);newTop=a.m_position0.y-(e.height>>1)-10*res.multiplier[res_current];e.style.left=newLeft+"px";e.style.top=newTop+"px";a.m_userData.hover&&a.m_linearVelocity.SetZero();if(newLeft+Math.floor(e.width)<=-100||newLeft>stage[2]+100){world.DestroyBody(a);bodies.splice(i,1);elements.splice(i,1);$(e).remove()}if(Math.abs(a.m_position0.x-
stage[2]/2)<150&&newTop<20){if(Math.abs(a.m_linearVelocity.x)<20){newx=a.m_position0.x-stage[2]/2<0?-50:50;a.m_linearVelocity.Set(newx,a.m_linearVelocity.y)}}else newTop<2&&a.m_linearVelocity.y<0&&a.m_linearVelocity.Set(a.m_linearVelocity.x,40)}}function createBox(a,e,f,h,r,o){if(typeof o=="undefined")o=true;var y=new b2BoxDef;if(!o)y.density=1;y.extents.Set(h,r);h=new b2BodyDef;h.AddShape(y);h.position.Set(e,f);return a.CreateBody(h)}
function createPoly(a,e,f,h,r){var o=new b2PolyDef;if(!r)o.density=1;o.vertexCount=h.length;for(r=0;r<h.length;r++)o.vertices[r].Set(h[r][0],h[r][1]);h=new b2BodyDef;h.AddShape(o);h.position.Set(e,f);return a.CreateBody(h)}function getBrowserDimensions(){stage[0]=window.screenX;stage[1]=window.screenY;stage[2]=window.innerWidth;stage[3]=window.innerHeight;res_new=stage[2]>=1400&&stage[3]>=840?1:0;if(res_new!=res_current&&res_current!=-1)window.location=window.location;res_current=res_new}
function buildBubbleTweet(a){var e="",f="",h="",r,o="",y="",B="",C="";if(a.user){e=a.user.name;f=a.user.screen_name;h=a.user.profile_image_url;r=a.user.location;o=a.user.url;y=a.user.followers_count;B=a.user.description}else{f=a.from_user;h=a.profile_image_url}if(res_current==1){h=h.replace("normal","bigger");profile_image_size=65}else profile_image_size=48;e||(e="N/A");r||(r="N/A");y||(y="N/A");B||(B="N/A");o=o?'<a href="'+o+'" rel="author external" title="Web">'+friendlyTrim(o.replace("http://",
""),14)+"</a>":"N/A";C=create_urls(a.text);C=filterKeywords(C);created_at=new Date(a.created_at.substring(4));return html='\t\t<header class="">\t\t\t<h1><a href="http://twitter.com/'+f+'" title="'+f+'" rel="author external">'+f+'</a> wrote</h1>\t\t\t<time datetime="'+created_at+'" pubdate><a href="http://twitter.com/'+f+"/status/"+a.id+'" rel="bookmark external" title="permalink">'+jQuery.timeago(a.created_at.substring(4))+'</a></time>\t\t</header>\t\t<p class="avatar-wrapper"><a href="http://twitter.com/'+
f+'" title="'+f+'" rel="author external"><img alt="'+f+' avatar" src="\t\t'+h+'" height="'+profile_image_size+'" width="'+profile_image_size+'" /></a></p>\t\t<p class="text">'+C+'</p>\t\t<section class="hide">\t\t\t<dl>\t\t\t\t<dt>Name</dt>\t\t\t\t<dd>'+e+"</dd>\t\t\t\t<dt>Location</dt>\t\t\t\t<dd>"+r+"</dd>\t\t\t\t<dt>Web</dt>\t\t\t\t<dd>"+o+"</dd>\t\t\t\t<dt>Followers</dt>\t\t\t\t<dd>"+addCommas(y)+"</dd>\t\t\t\t<dt>Bio</dt>\t\t\t\t<dd>"+friendlyTrim(B,44)+'</dd>\t\t\t</dl>\t\t</section>\t\t<nav class="hide">\t\t\t<ul>\t\t\t\t<li class="flip"><a href="#section-id-01" title="Flip bubble">Flip</a></li>\t\t\t\t<li class="retweet"><a href="http://button.topsy.com/retweet?nick='+
f+"&title="+a.text+'" title="Retweet" rel="external">Retweet</a></li>\t\t\t\t<li class="follow"><a href="http://twitter.com/'+f+'" title="Follow '+f+'" rel="external">Follow</a></li>\t\t\t</ul>\t\t</nav>\t'}function buildBubbleClock(a){return html="\t\t<h1>Cuckoo!</h1>\t\t<p>"+a+"</p>  "}function buildBubbleFollowers(a){return html='\t\t<a href="http://twitter.com/firefox/followers" title="Firefox followers" rel="external">\t\t\t<h1>@firefox followers</h1>\t\t\t<p>'+a+"</p>\t\t</a>  "}
function buildBubbleDownloads(a){return html='\t\t<a href="http://www.mozilla.com/en-US/firefox/stats/" title="Firefox downloads" rel="external">\t\t\t<h1>Firefox downloads</h1>\t\t\t<p>'+a+"</p>\t\t</a>  "}function buildBubbleError(a){return html="  \t<h1>Malfunction!</h1>  \t<p>"+a+"</p>  "}function buildBubbleSearch(a){return html="  \t<h1>"+a.h1+"</h1>  \t<p>"+a.p+"</p>  "}function throwError(a){pool.splice(pool_index,0,{type:"error",data:a})}
function addCommas(a){a+="";x=a.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function turnLampOn(){$("#activity-indicator").removeClass("off").addClass("on")}function turnLampOff(){$("#activity-indicator").removeClass("on").addClass("off")}
function create_urls(a){return a.replace(/(ftp|http|https|file):\/\/([\S]+(\b|$))/gim,'<a href="$&" class="my_link" target="_blank">$2</a>').replace(/([^\/])(www[\S]+(\b|$))/gim,'$1<a href="http://$2" class="my_link" target="_blank">$2</a>').replace(/(^|\s)@(\w+)/g,'$1<a href="http://twitter.com/$2" class="my_link" target="_blank">@$2</a>').replace(/(^|\s)#(\S+)/g,'$1<a href="http://search.twitter.com/search?q=%23$2" class="my_link" target="_blank">#$2</a>')}
function filterKeywords(a){if(keywords){for(var e in keywords.highlights)if(keywords.highlights.hasOwnProperty(e)){fKwords=keywords.highlights[e].replace(/,/gi,"|");if(fKwords!=""){var f=RegExp("(\\s|:|^)("+fKwords+")(\\s|:\\s|(\\.\\s)|(\\,\\s)|$)","gi");a=a.replace(f,'$1<span class="mood '+e+'">$2</span>$3')}}fKwords=keywords.excluded.replace(/,/gi,"|");if(fKwords!=""){f=RegExp("(\\s|:|^)("+fKwords+")","gi");a=a.replace(f,"$1#@*%");f=RegExp("("+fKwords+")(\\s|:\\s|(\\.\\s)|(\\,\\s)|$)","gi");a=a.replace(f,
"#@*%$2")}}return a}
function datetimeCountdown(){dateFuture=new Date(ds_datetime);localDate=new Date;utc=localDate.getTime()+localDate.getTimezoneOffset()*6E4;dateNow=new Date(utc+-25200000);amount=dateFuture.getTime()-dateNow.getTime();delete dateNow;if(amount<0)$("#counter dd").text(ds_datetime_reached).attr("title",ds_datetime_reached);else{secs=mins=hours=days=0;out="";amount=Math.floor(amount/1E3);days=Math.floor(amount/86400);amount%=86400;hours=Math.floor(amount/3600);amount%=3600;mins=Math.floor(amount/60);amount%=
60;secs=Math.floor(amount);if(days!=0)out+=days+"d : ";if(days!=0||hours!=0)out+=hours+"h : ";if(days!=0||hours!=0||mins!=0)out+=mins+"m : ";out+=secs+"s";$("#counter dd").text(out).attr("title",out)}};$(document).ready(function(){if(!isAndroid()){gauge_indicator_needle_src=res.gaugeIndicatorNeedleSrc[res_current];gauge_indicator_needle_angle=-90;$(".pointer").attr("id","pointer").text("");R=Raphael("pointer",70*res.multiplier[res_current],30*res.multiplier[res_current]);gauge_indicator_needle=R.image(gauge_indicator_needle_src,30*res.multiplier[res_current],-4*res.multiplier[res_current],8*res.multiplier[res_current],56*res.multiplier[res_current]);R.safari()}});
function gaugeIndicatorNeedleMove(a){if(!isAndroid()){gauge_indicator_needle.animate({rotation:-90},300,"linear");a-=90;setTimeout(function(){gauge_indicator_needle.animate({rotation:a},2500,"bounce")},300)}}var uagent=navigator.userAgent.toLowerCase();function isAndroid(){return uagent.search("android")>-1?true:false};$(document).ready(function(){modifier_keys_pressed=keyboard_debug=false;$(document).keydown(function(a){if(!$("input#search-input:focus").length&&!modifier_keys_pressed){if(a.keyCode==71){"console"in window&&keyboard_debug&&console.log("pressed G - toggling gravity");$("#gravity-inverter a").trigger("click");return false}else if(a.keyCode==80){"console"in window&&keyboard_debug&&console.log("pressed P - toggling play");$("#flow-transposer a").trigger("click");return false}else if(a.keyCode==83){"console"in
window&&keyboard_debug&&console.log("pressed S - focusing search box");$("input#search-input").focus();return false}else if(a.keyCode==66){"console"in window&&keyboard_debug&&console.log("pressed B - spawning bubble");spawn();return false}else if(a.keyCode==65){"console"in window&&keyboard_debug&&console.log("pressed A - showing about box");$("a.colorbox").trigger("click");return false}else if(a.ctrlKey||a.metaKey||a.altKey||a.shiftKey){"console"in window&&keyboard_debug&&console.log("cmd or ctrl pressed");
modifier_keys_pressed=true}if("console"in window&&keyboard_debug){console.log(a);console.log("mod keys: "+modifier_keys_pressed)}}else if(a.keyCode==27){"console"in window&&keyboard_debug&&console.log("pressed Esc - removing focus (blurring) search box");$("input#search-input").blur();return false}}).keyup(function(){modifier_keys_pressed=false;if("console"in window&&keyboard_debug){console.log("keys released");console.log("mod keys: "+modifier_keys_pressed)}})});$(document).ready(function(){$("#page").css({opacity:0});setTimeout(function(){$.preloadCssImages()},500)});$(window).load(function(){$("#page").animate({opacity:1},500);getDataFromProxy()});function WebTrends(){this.dcsid="dcsvj81q5wz5bd3hm5k1vpmtq_7x7i";this.domain="statse.webtrendslive.com";this.timezone=0;this.fpcdom=".firefoxtweetmachine.com";this.onsitedoms="";this.downloadtypes="xls,doc,pdf,txt,csv,zip, xpi";this.navigationtag="div,table";this.enabled=this.trimoffsiteparams=this.trackevents=true;this.i18n=false;this.fpc="WT_FPC";this.paidsearchparams="gclid";this.DCS={};this.WT={};this.DCSext={};this.images=[];this.index=0;this.exre=window.RegExp?/dcs(uri)|(ref)|(aut)|(met)|(sta)|(sip)|(pro)|(byt)|(dat)|(p3p)|(cfg)|(redirect)|(cip)/i:
"";this.re=window.RegExp?this.i18n?{"%25":/\%/g}:{"%09":/\t/g,"%20":/ /g,"%23":/\#/g,"%26":/\&/g,"%2B":/\+/g,"%3F":/\?/g,"%5C":/\\/g,"%22":/\"/g,"%7F":/\x7F/g,"%A0":/\xA0/g}:""}
WebTrends.prototype.dcsGetId=function(){if(this.enabled&&document.cookie.indexOf(this.fpc+"=")==-1&&document.cookie.indexOf("WTLOPTOUT=")==-1){script_tag=document.createElement("script");script_tag.type="text/javascript";script_tag.src="http"+(window.location.protocol.indexOf("https:")==0?"s":"")+"://"+this.domain+"/"+this.dcsid+"/wtid.js";document.body.appendChild(script_tag)}};
WebTrends.prototype.dcsGetCookie=function(a){var e=document.cookie.split("; "),f=[],h=0,r=0,o=a.length,y=e.length;for(r=0;r<y;r++){var B=e[r];if(B.substring(0,o+1)==a+"=")f[h++]=B}e=f.length;if(e>0){h=0;if(e>1&&a==this.fpc){a=new Date(0);for(r=0;r<e;r++){y=parseInt(this.dcsGetCrumb(f[r],"lv"));y=new Date(y);if(y>a){a.setTime(y.getTime());h=r}}}return unescape(f[h].substring(o+1))}else return null};
WebTrends.prototype.dcsGetCrumb=function(a,e,f){a=a.split(f||":");for(f=0;f<a.length;f++){var h=a[f].split("=");if(e==h[0])return h[1]}return null};WebTrends.prototype.dcsGetIdCrumb=function(a,e){for(var f=a.substring(0,a.indexOf(":lv=")).split("="),h=0;h<f.length;h++)if(e==f[0])return f[1];return null};WebTrends.prototype.dcsIsFpcSet=function(a,e,f,h){if(a=this.dcsGetCookie(a))return e==this.dcsGetIdCrumb(a,"id")&&f==this.dcsGetCrumb(a,"lv")&&h==this.dcsGetCrumb(a,"ss")?0:3;return 2};
WebTrends.prototype.dcsFPC=function(){if(document.cookie.indexOf("WTLOPTOUT=")==-1){var a=this.WT,e=this.fpc,f=new Date,h=f.getTimezoneOffset()*6E4+this.timezone*36E5;f.setTime(f.getTime()+h);var r=new Date(f.getTime()+31536E7),o=new Date(f.getTime());a.co_f=a.vtid=a.vtvs=a.vt_f=a.vt_f_a=a.vt_f_s=a.vt_f_d=a.vt_f_tlh=a.vt_f_tlv="";if(document.cookie.indexOf(e+"=")==-1){if(typeof gWtId!="undefined"&&gWtId!="")a.co_f=gWtId;else{if(typeof gTempWtId!="undefined"&&gTempWtId!="")a.co_f=gTempWtId;else{a.co_f=
"2";for(var y=f.getTime().toString(),B=2;B<=32-y.length;B++)a.co_f+=Math.floor(Math.random()*16).toString(16);a.co_f+=y}a.vt_f="1"}if(typeof gWtAccountRollup=="undefined")a.vt_f_a="1";a.vt_f_s=a.vt_f_d="1";a.vt_f_tlh=a.vt_f_tlv="0"}else{var C=this.dcsGetCookie(e);y=this.dcsGetIdCrumb(C,"id");B=parseInt(this.dcsGetCrumb(C,"lv"));C=parseInt(this.dcsGetCrumb(C,"ss"));if(y==null||y=="null"||isNaN(B)||isNaN(C))return;a.co_f=y;y=new Date(B);a.vt_f_tlh=Math.floor((y.getTime()-h)/1E3);o.setTime(C);if(f.getTime()>
y.getTime()+18E5||f.getTime()>o.getTime()+288E5){a.vt_f_tlv=Math.floor((o.getTime()-h)/1E3);o.setTime(f.getTime());a.vt_f_s="1"}if(f.getDay()!=y.getDay()||f.getMonth()!=y.getMonth()||f.getYear()!=y.getYear())a.vt_f_d="1"}a.co_f=escape(a.co_f);a.vtid=typeof this.vtid=="undefined"?a.co_f:this.vtid||"";a.vtvs=(o.getTime()-h).toString();h="; expires="+r.toGMTString();f=f.getTime().toString();o=o.getTime().toString();document.cookie=e+"=id="+a.co_f+":lv="+f+":ss="+o+h+"; path=/"+(this.fpcdom!=""?"; domain="+
this.fpcdom:"");e=this.dcsIsFpcSet(e,a.co_f,f,o);if(e!=0){a.co_f=a.vtvs=a.vt_f_s=a.vt_f_d=a.vt_f_tlh=a.vt_f_tlv="";if(typeof this.vtid=="undefined")a.vtid="";a.vt_f=a.vt_f_a=e}}};WebTrends.prototype.dcsIsOnsite=function(a){if(a.length>0){a=a.toLowerCase();if(a==window.location.hostname.toLowerCase())return true;if(typeof this.onsitedoms.test=="function")return this.onsitedoms.test(a);else if(this.onsitedoms.length>0)for(var e=this.dcsSplit(this.onsitedoms),f=e.length,h=0;h<f;h++)if(a==e[h])return true}return false};
WebTrends.prototype.dcsTypeMatch=function(a,e){for(var f=a.toLowerCase().substring(a.lastIndexOf(".")+1,a.length),h=this.dcsSplit(e),r=h.length,o=0;o<r;o++)if(f==h[o])return true;return false};WebTrends.prototype.dcsEvt=function(a,e){for(var f=a.target||a.srcElement;f.tagName&&f.tagName.toLowerCase()!=e.toLowerCase();)f=f.parentElement||f.parentNode;return f};
WebTrends.prototype.dcsNavigation=function(a){var e="",f="",h=this.dcsSplit(this.navigationtag),r=h.length,o,y;for(o=0;o<r;o++){y=h[o];if(y.length){f=this.dcsEvt(a,y);e=f.getAttribute&&f.getAttribute("id")?f.getAttribute("id"):"";f=f.className||"";if(e.length||f.length)break}}return e.length?e:f};
WebTrends.prototype.dcsBind=function(a,e){if(typeof e=="function"&&document.body)if(document.body.addEventListener)document.body.addEventListener(a,e.wtbind(this),true);else document.body.attachEvent&&document.body.attachEvent("on"+a,e.wtbind(this))};WebTrends.prototype.dcsET=function(){var a=navigator.appVersion.indexOf("MSIE")!=-1?"click":"mousedown";this.dcsBind(a,this.dcsDownload);this.dcsBind(a,this.dcsOffsite);this.dcsBind("contextmenu",this.dcsRightClick)};
WebTrends.prototype.dcsMultiTrack=function(){var a=dcsMultiTrack.arguments?dcsMultiTrack.arguments:arguments;if(a.length%2==0){this.dcsSetProps(a);this.DCS.dcsdat=(new Date).getTime();this.dcsFPC();this.dcsTag()}};WebTrends.prototype.dcsCleanUp=function(){this.DCS={};this.WT={};this.DCSext={};arguments.length%2==0&&this.dcsSetProps(arguments)};
WebTrends.prototype.dcsSetProps=function(a){for(var e=0;e<a.length;e+=2)if(a[e].indexOf("WT.")==0)this.WT[a[e].substring(3)]=a[e+1];else if(a[e].indexOf("DCS.")==0)this.DCS[a[e].substring(4)]=a[e+1];else if(a[e].indexOf("DCSext.")==0)this.DCSext[a[e].substring(7)]=a[e+1]};WebTrends.prototype.dcsSplit=function(a){a=a.toLowerCase().split(",");for(var e=a.length,f=0;f<e;f++)a[f]=a[f].replace(/^\s*/,"").replace(/\s*$/,"");return a};
WebTrends.prototype.dcsDownload=function(a){if((a=a||window.event||"")&&(typeof a.which!="number"||a.which==1)){var e=this.dcsEvt(a,"A");if(e.href){var f=e.hostname?e.hostname.split(":")[0]:"";if(this.dcsIsOnsite(f)&&this.dcsTypeMatch(e.pathname,this.downloadtypes)){e.search&&e.search.substring(e.search.indexOf("?")+1,e.search.length);var h=e.pathname?e.pathname.indexOf("/")!=0?"/"+e.pathname:e.pathname:"/",r="",o=document.all?e.innerText:e.text,y=this.dcsEvt(a,"IMG");if(y.alt)r=y.alt;else if(o)r=
o;else if(e.innerHTML)r=e.innerHTML;this.dcsMultiTrack("DCS.dcssip",f,"DCS.dcsuri",h,"DCS.dcsqry",e.search||"","WT.ti","Download:"+r,"WT.dl","20","WT.nv",this.dcsNavigation(a));this.DCS.dcssip=this.DCS.dcsuri=this.DCS.dcsqry=this.WT.ti=this.WT.dl=this.WT.nv=""}}}};
WebTrends.prototype.dcsRightClick=function(a){if(a=a||window.event||"")if((a.which||a.button)!=1||navigator.userAgent.indexOf("Safari")!=-1){a=this.dcsEvt(a,"A");if(typeof a.href!="undefined"&&a.href)if(typeof a.protocol!="undefined"&&a.protocol&&a.protocol.indexOf("http")!=-1)if(typeof a.pathname!="undefined"&&this.dcsTypeMatch(a.pathname,this.downloadtypes)){var e=a.pathname?a.pathname.indexOf("/")!=0?"/"+a.pathname:a.pathname:"/";this.dcsMultiTrack("DCS.dcssip",a.hostname?a.hostname.split(":")[0]:
"","DCS.dcsuri",e,"DCS.dcsqry","","WT.ti","RightClick:"+e,"WT.dl","25");this.DCS.dcssip=this.DCS.dcsuri=this.WT.ti=this.WT.dl=this.WT.nv=""}}};
WebTrends.prototype.dcsOffsite=function(a){if((a=a||window.event||"")&&(typeof a.which!="number"||a.which==1)){var e=this.dcsEvt(a,"A");if(e.href){var f=e.hostname?e.hostname.split(":")[0]:"",h=e.protocol||"";if(f.length>0&&h.indexOf("http")==0&&!this.dcsIsOnsite(f)){h=e.search?e.search.substring(e.search.indexOf("?")+1,e.search.length):"";e=e.pathname?e.pathname.indexOf("/")!=0?"/"+e.pathname:e.pathname:"/";this.dcsMultiTrack("DCS.dcssip",f,"DCS.dcsuri",e,"DCS.dcsqry",this.trimoffsiteparams?"":h,
"DCS.dcsref",window.location,"WT.ti","Offsite:"+f+e+"?"+h,"WT.dl","24","WT.nv",this.dcsNavigation(a));this.DCS.dcssip=this.DCS.dcsuri=this.DCS.dcsqry=this.DCS.dcsref=this.WT.ti=this.WT.dl=this.WT.nv=""}}}};WebTrends.prototype.dcsAdv=function(){if(this.trackevents&&typeof this.dcsET=="function")if(window.addEventListener)window.addEventListener("load",this.dcsET.wtbind(this),false);else window.attachEvent&&window.attachEvent("onload",this.dcsET.wtbind(this));this.dcsFPC()};
WebTrends.prototype.dcsVar=function(){var a=new Date,e=this.WT,f=this.DCS;e.tz=parseInt(a.getTimezoneOffset()/60*-1)||"0";e.bh=a.getHours()||"0";e.ul=navigator.appName=="Netscape"?navigator.language:navigator.userLanguage;if(typeof screen=="object"){e.cd=navigator.appName=="Netscape"?screen.pixelDepth:screen.colorDepth;e.sr=screen.width+"x"+screen.height}if(typeof navigator.javaEnabled()=="boolean")e.jo=navigator.javaEnabled()?"Yes":"No";if(document.title)if(window.RegExp){var h=RegExp("^"+window.location.protocol+
"//"+window.location.hostname+"\\s-\\s");e.ti=document.title.replace(h,"")}else e.ti=document.title;e.js="Yes";e.jv=function(){var y=navigator.userAgent.toLowerCase(),B=parseInt(navigator.appVersion),C=y.indexOf("mac")!=-1,E=y.indexOf("firefox")!=-1,H=y.indexOf("firefox/0.")!=-1,I=y.indexOf("firefox/1.0")!=-1,M=y.indexOf("firefox/1.5")!=-1,L=y.indexOf("firefox/2.0")!=-1,S=E&&!H&&!I&!M&!L,l=!E&&y.indexOf("mozilla")!=-1&&y.indexOf("compatible")==-1;E=l&&B==4;l=l&&B>=5;var Y=y.indexOf("msie")!=-1&&y.indexOf("opera")==
-1;B=Y&&B==4&&y.indexOf("msie 4")!=-1;Y=Y&&!B;var ba=y.indexOf("opera")!=-1,Q=y.indexOf("opera 5")!=-1||y.indexOf("opera/5")!=-1;y=y.indexOf("opera 6")!=-1||y.indexOf("opera/6")!=-1;ba=ba&&!Q&&!y;var na="1.1";if(S)na="1.8";else if(L)na="1.7";else if(M)na="1.6";else if(H||I||l||ba)na="1.5";else if(C&&Y||y)na="1.4";else if(Y||E||Q)na="1.3";else if(B)na="1.2";return na}();e.ct="unknown";if(document.body&&document.body.addBehavior)try{document.body.addBehavior("#default#clientCaps");e.ct=document.body.connectionType||
"unknown";document.body.addBehavior("#default#homePage");e.hp=document.body.isHomePage(location.href)?"1":"0"}catch(r){}e.bs=document.all?document.body?document.body.offsetWidth+"x"+document.body.offsetHeight:"unknown":window.innerWidth+"x"+window.innerHeight;e.fv=function(){var y;if(window.ActiveXObject)for(y=10;y>0;y--)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+y);return y+".0"}catch(B){}else if(navigator.plugins&&navigator.plugins.length)for(y=0;y<navigator.plugins.length;y++)if(navigator.plugins[y].name.indexOf("Shockwave Flash")!=
-1)return navigator.plugins[y].description.split(" ")[2];return"Not enabled"}();e.slv=function(){var y="Not enabled";try{if(navigator.userAgent.indexOf("MSIE")!=-1){if(new ActiveXObject("AgControl.AgControl"))y="Unknown"}else if(navigator.plugins["Silverlight Plug-In"])y="Unknown"}catch(B){}if(y!="Not enabled"){var C,E,H;if(typeof Silverlight=="object"&&typeof Silverlight.isInstalled=="function")for(C=3;C>0;C--){for(E=9;E>=0;E--){H=C+"."+E;if(Silverlight.isInstalled(H)){y=H;break}}if(y==H)break}}return y}();
if(this.i18n)e.le=typeof document.defaultCharset=="string"?document.defaultCharset:typeof document.characterSet=="string"?document.characterSet:"unknown";e.tv="8.6.2";e.dl="0";e.ssl=window.location.protocol.indexOf("https:")==0?"1":"0";f.dcsdat=a.getTime();f.dcssip=window.location.hostname;f.dcsuri=window.location.pathname;e.es=f.dcssip+f.dcsuri;if(window.location.search)f.dcsqry=window.location.search;if(f.dcsqry){a=f.dcsqry.toLowerCase();h=this.paidsearchparams.length?this.paidsearchparams.toLowerCase().split(","):
[];for(var o=0;o<h.length;o++)if(a.indexOf(h[o]+"=")!=-1){e.srch="1";break}}if(window.document.referrer!=""&&window.document.referrer!="-")if(!(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)<4))f.dcsref=window.document.referrer};WebTrends.prototype.dcsEscape=function(a,e){if(e!=""){a=a.toString();for(var f in e)if(e[f]instanceof RegExp)a=a.replace(e[f],f);return a}else return escape(a)};
WebTrends.prototype.dcsA=function(a,e){if(this.i18n&&this.exre!=""&&!this.exre.test(a))if(a=="dcsqry"){for(var f="",h=e.substring(1).split("&"),r=0;r<h.length;r++){var o=h[r],y=o.indexOf("=");if(y!=-1){var B=o.substring(0,y);o=o.substring(y+1);if(r!=0)f+="&";f+=B+"="+this.dcsEncode(o)}}e=e.substring(0,1)+f}else e=this.dcsEncode(e);return"&"+a+"="+this.dcsEscape(e,this.re)};WebTrends.prototype.dcsEncode=function(a){return typeof encodeURIComponent=="function"?encodeURIComponent(a):escape(a)};
WebTrends.prototype.dcsCreateImage=function(a){if(document.images){this.images[this.index]=new Image;this.images[this.index].src=a;this.index++}else document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+a+'">')};
WebTrends.prototype.dcsMeta=function(){var a;if(document.all)a=document.all.tags("meta");else if(document.documentElement)a=document.getElementsByTagName("meta");if(typeof a!="undefined")for(var e=a.length,f=0;f<e;f++){var h=a.item(f).name,r=a.item(f).content;a.item(f);if(h.length>0)if(h.toUpperCase().indexOf("WT.")==0)this.WT[h.substring(3)]=r;else if(h.toUpperCase().indexOf("DCSEXT.")==0)this.DCSext[h.substring(7)]=r;else if(h.toUpperCase().indexOf("DCS.")==0)this.DCS[h.substring(4)]=r}};
WebTrends.prototype.dcsTag=function(){if(document.cookie.indexOf("WTLOPTOUT=")==-1){var a=this.WT,e=this.DCS,f=this.DCSext,h=this.i18n,r="http"+(window.location.protocol.indexOf("https:")==0?"s":"")+"://"+this.domain+(this.dcsid==""?"":"/"+this.dcsid)+"/dcs.gif?";if(h)a.dep="";for(var o in e)if(e[o]&&typeof e[o]!="function")r+=this.dcsA(o,e[o]);e=["co_f","vtid","vtvs","vt_f_tlv"];for(var y=0;y<e.length;y++){var B=e[y];if(a[B]){r+=this.dcsA("WT."+B,a[B]);delete a[B]}}for(o in a)if(a[o]&&typeof a[o]!=
"function")r+=this.dcsA("WT."+o,a[o]);for(o in f)if(f[o]&&typeof f[o]!="function"){if(h)a.dep=a.dep.length==0?o:a.dep+";"+o;r+=this.dcsA(o,f[o])}if(h&&a.dep.length>0)r+=this.dcsA("WT.dep",a.dep);if(r.length>2048&&navigator.userAgent.indexOf("MSIE")>=0)r=r.substring(0,2040)+"&WT.tu=1";this.dcsCreateImage(r);this.WT.ad=""}};
WebTrends.prototype.dcsDebug=function(){var a=this.images[0].src,e=a.indexOf("?"),f=a.substring(0,e).split("/"),h="<b>Protocol</b><br><code>"+f[0]+"<br></code>";h+="<b>Domain</b><br><code>"+f[2]+"<br></code>";h+="<b>Path</b><br><code>/"+f[3]+"/"+f[4]+"<br></code>";h+="<b>Query Params</b><code>"+a.substring(e+1).replace(/\&/g,"<br>")+"</code>";h+="<br><b>Cookies</b><br><code>"+document.cookie.replace(/\;/g,"<br>")+"</code>";this.w&&!this.w.closed&&this.w.close();this.w=window.open("","dcsDebug","width=500,height=650,scrollbars=yes,resizable=yes");
this.w.document.write(h);this.w.focus()};WebTrends.prototype.dcsCollect=function(){if(this.enabled){this.dcsVar();this.dcsMeta();this.dcsAdv();this.dcsTag()}};function dcsMultiTrack(){if(typeof _tag!="undefined")return _tag.dcsMultiTrack()}function dcsDebug(){if(typeof _tag!="undefined")return _tag.dcsDebug()}Function.prototype.wtbind=function(a){var e=this;return function(){return e.apply(a,arguments)}};
